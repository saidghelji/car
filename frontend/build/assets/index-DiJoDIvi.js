var aj=Object.defineProperty;var ij=(e,t,n)=>t in e?aj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _e=(e,t,n)=>ij(e,typeof t!="symbol"?t+"":t,n);function oj(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var lj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _v={exports:{}},Gu={},Sv={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=Symbol.for("react.element"),cj=Symbol.for("react.portal"),uj=Symbol.for("react.fragment"),dj=Symbol.for("react.strict_mode"),mj=Symbol.for("react.profiler"),fj=Symbol.for("react.provider"),hj=Symbol.for("react.context"),pj=Symbol.for("react.forward_ref"),gj=Symbol.for("react.suspense"),xj=Symbol.for("react.memo"),vj=Symbol.for("react.lazy"),Vp=Symbol.iterator;function yj(e){return e===null||typeof e!="object"?null:(e=Vp&&e[Vp]||e["@@iterator"],typeof e=="function"?e:null)}var kv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dv=Object.assign,Cv={};function Ri(e,t,n){this.props=e,this.context=t,this.refs=Cv,this.updater=n||kv}Ri.prototype.isReactComponent={};Ri.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ri.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Pv(){}Pv.prototype=Ri.prototype;function ch(e,t,n){this.props=e,this.context=t,this.refs=Cv,this.updater=n||kv}var uh=ch.prototype=new Pv;uh.constructor=ch;Dv(uh,Ri.prototype);uh.isPureReactComponent=!0;var Up=Array.isArray,Ev=Object.prototype.hasOwnProperty,dh={current:null},Mv={key:!0,ref:!0,__self:!0,__source:!0};function Tv(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Ev.call(t,r)&&!Mv.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:yl,type:e,key:i,ref:o,props:s,_owner:dh.current}}function bj(e,t){return{$$typeof:yl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function mh(e){return typeof e=="object"&&e!==null&&e.$$typeof===yl}function wj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Wp=/\/+/g;function Rd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wj(""+e.key):t.toString(36)}function jc(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yl:case cj:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Rd(o,0):r,Up(s)?(n="",e!=null&&(n=e.replace(Wp,"$&/")+"/"),jc(s,t,n,"",function(u){return u})):s!=null&&(mh(s)&&(s=bj(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Wp,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Up(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Rd(i,l);o+=jc(i,t,n,c,s)}else if(c=yj(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Rd(i,l++),o+=jc(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ll(e,t,n){if(e==null)return e;var r=[],s=0;return jc(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Nj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var jn={current:null},_c={transition:null},jj={ReactCurrentDispatcher:jn,ReactCurrentBatchConfig:_c,ReactCurrentOwner:dh};function Ov(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:Ll,forEach:function(e,t,n){Ll(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ll(e,function(){t++}),t},toArray:function(e){return Ll(e,function(t){return t})||[]},only:function(e){if(!mh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};at.Component=Ri;at.Fragment=uj;at.Profiler=mj;at.PureComponent=ch;at.StrictMode=dj;at.Suspense=gj;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jj;at.act=Ov;at.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Dv({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=dh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Ev.call(t,c)&&!Mv.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:yl,type:e.type,key:s,ref:i,props:r,_owner:o}};at.createContext=function(e){return e={$$typeof:hj,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fj,_context:e},e.Consumer=e};at.createElement=Tv;at.createFactory=function(e){var t=Tv.bind(null,e);return t.type=e,t};at.createRef=function(){return{current:null}};at.forwardRef=function(e){return{$$typeof:pj,render:e}};at.isValidElement=mh;at.lazy=function(e){return{$$typeof:vj,_payload:{_status:-1,_result:e},_init:Nj}};at.memo=function(e,t){return{$$typeof:xj,type:e,compare:t===void 0?null:t}};at.startTransition=function(e){var t=_c.transition;_c.transition={};try{e()}finally{_c.transition=t}};at.unstable_act=Ov;at.useCallback=function(e,t){return jn.current.useCallback(e,t)};at.useContext=function(e){return jn.current.useContext(e)};at.useDebugValue=function(){};at.useDeferredValue=function(e){return jn.current.useDeferredValue(e)};at.useEffect=function(e,t){return jn.current.useEffect(e,t)};at.useId=function(){return jn.current.useId()};at.useImperativeHandle=function(e,t,n){return jn.current.useImperativeHandle(e,t,n)};at.useInsertionEffect=function(e,t){return jn.current.useInsertionEffect(e,t)};at.useLayoutEffect=function(e,t){return jn.current.useLayoutEffect(e,t)};at.useMemo=function(e,t){return jn.current.useMemo(e,t)};at.useReducer=function(e,t,n){return jn.current.useReducer(e,t,n)};at.useRef=function(e){return jn.current.useRef(e)};at.useState=function(e){return jn.current.useState(e)};at.useSyncExternalStore=function(e,t,n){return jn.current.useSyncExternalStore(e,t,n)};at.useTransition=function(){return jn.current.useTransition()};at.version="18.3.1";Sv.exports=at;var E=Sv.exports;const xe=lh(E),fh=oj({__proto__:null,default:xe},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _j=E,Sj=Symbol.for("react.element"),kj=Symbol.for("react.fragment"),Dj=Object.prototype.hasOwnProperty,Cj=_j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pj={key:!0,ref:!0,__self:!0,__source:!0};function Fv(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Dj.call(t,r)&&!Pj.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Sj,type:e,key:i,ref:o,props:s,_owner:Cj.current}}Gu.Fragment=kj;Gu.jsx=Fv;Gu.jsxs=Fv;_v.exports=Gu;var a=_v.exports,Av={exports:{}},Un={},Lv={exports:{}},Rv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,ee){var Q=K.length;K.push(ee);e:for(;0<Q;){var ce=Q-1>>>1,ve=K[ce];if(0<s(ve,ee))K[ce]=ee,K[Q]=ve,Q=ce;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ee=K[0],Q=K.pop();if(Q!==ee){K[0]=Q;e:for(var ce=0,ve=K.length,U=ve>>>1;ce<U;){var H=2*(ce+1)-1,J=K[H],S=H+1,O=K[S];if(0>s(J,Q))S<ve&&0>s(O,J)?(K[ce]=O,K[S]=Q,ce=S):(K[ce]=J,K[H]=Q,ce=H);else if(S<ve&&0>s(O,Q))K[ce]=O,K[S]=Q,ce=S;else break e}}return ee}function s(K,ee){var Q=K.sortIndex-ee.sortIndex;return Q!==0?Q:K.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],m=1,h=null,f=3,b=!1,v=!1,D=!1,g=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(K){for(var ee=n(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=K)r(u),ee.sortIndex=ee.expirationTime,t(c,ee);else break;ee=n(u)}}function j(K){if(D=!1,_(K),!v)if(n(c)!==null)v=!0,W(L);else{var ee=n(u);ee!==null&&$(j,ee.startTime-K)}}function L(K,ee){v=!1,D&&(D=!1,w(P),P=-1),b=!0;var Q=f;try{for(_(ee),h=n(c);h!==null&&(!(h.expirationTime>ee)||K&&!te());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,f=h.priorityLevel;var ve=ce(h.expirationTime<=ee);ee=e.unstable_now(),typeof ve=="function"?h.callback=ve:h===n(c)&&r(c),_(ee)}else r(c);h=n(c)}if(h!==null)var U=!0;else{var H=n(u);H!==null&&$(j,H.startTime-ee),U=!1}return U}finally{h=null,f=Q,b=!1}}var C=!1,T=null,P=-1,q=5,X=-1;function te(){return!(e.unstable_now()-X<q)}function oe(){if(T!==null){var K=e.unstable_now();X=K;var ee=!0;try{ee=T(!0,K)}finally{ee?fe():(C=!1,T=null)}}else C=!1}var fe;if(typeof y=="function")fe=function(){y(oe)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,se=G.port2;G.port1.onmessage=oe,fe=function(){se.postMessage(null)}}else fe=function(){g(oe,0)};function W(K){T=K,C||(C=!0,fe())}function $(K,ee){P=g(function(){K(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){v||b||(v=!0,W(L))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(K){switch(f){case 1:case 2:case 3:var ee=3;break;default:ee=f}var Q=f;f=ee;try{return K()}finally{f=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,ee){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Q=f;f=K;try{return ee()}finally{f=Q}},e.unstable_scheduleCallback=function(K,ee,Q){var ce=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ce+Q:ce):Q=ce,K){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Q+ve,K={id:m++,callback:ee,priorityLevel:K,startTime:Q,expirationTime:ve,sortIndex:-1},Q>ce?(K.sortIndex=Q,t(u,K),n(c)===null&&K===n(u)&&(D?(w(P),P=-1):D=!0,$(j,Q-ce))):(K.sortIndex=ve,t(c,K),v||b||(v=!0,W(L))),K},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(K){var ee=f;return function(){var Q=f;f=ee;try{return K.apply(this,arguments)}finally{f=Q}}}})(Rv);Lv.exports=Rv;var Ej=Lv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mj=E,Vn=Ej;function Ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Iv=new Set,Wo={};function Fa(e,t){vi(e,t),vi(e+"Capture",t)}function vi(e,t){for(Wo[e]=t,e=0;e<t.length;e++)Iv.add(t[e])}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rm=Object.prototype.hasOwnProperty,Tj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yp={},qp={};function Oj(e){return Rm.call(qp,e)?!0:Rm.call(Yp,e)?!1:Tj.test(e)?qp[e]=!0:(Yp[e]=!0,!1)}function Fj(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Aj(e,t,n,r){if(t===null||typeof t>"u"||Fj(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _n(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){an[e]=new _n(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];an[t]=new _n(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){an[e]=new _n(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){an[e]=new _n(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){an[e]=new _n(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){an[e]=new _n(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){an[e]=new _n(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){an[e]=new _n(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){an[e]=new _n(e,5,!1,e.toLowerCase(),null,!1,!1)});var hh=/[\-:]([a-z])/g;function ph(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hh,ph);an[t]=new _n(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hh,ph);an[t]=new _n(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hh,ph);an[t]=new _n(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){an[e]=new _n(e,1,!1,e.toLowerCase(),null,!1,!1)});an.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){an[e]=new _n(e,1,!1,e.toLowerCase(),null,!0,!0)});function gh(e,t,n,r){var s=an.hasOwnProperty(t)?an[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Aj(t,n,s,r)&&(n=null),r||s===null?Oj(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ms=Mj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rl=Symbol.for("react.element"),Ka=Symbol.for("react.portal"),Qa=Symbol.for("react.fragment"),xh=Symbol.for("react.strict_mode"),Im=Symbol.for("react.profiler"),$v=Symbol.for("react.provider"),zv=Symbol.for("react.context"),vh=Symbol.for("react.forward_ref"),$m=Symbol.for("react.suspense"),zm=Symbol.for("react.suspense_list"),yh=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),Hv=Symbol.for("react.offscreen"),Kp=Symbol.iterator;function qi(e){return e===null||typeof e!="object"?null:(e=Kp&&e[Kp]||e["@@iterator"],typeof e=="function"?e:null)}var Tt=Object.assign,Id;function po(e){if(Id===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Id=t&&t[1]||""}return`
`+Id+e}var $d=!1;function zd(e,t){if(!e||$d)return"";$d=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{$d=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?po(e):""}function Lj(e){switch(e.tag){case 5:return po(e.type);case 16:return po("Lazy");case 13:return po("Suspense");case 19:return po("SuspenseList");case 0:case 2:case 15:return e=zd(e.type,!1),e;case 11:return e=zd(e.type.render,!1),e;case 1:return e=zd(e.type,!0),e;default:return""}}function Hm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qa:return"Fragment";case Ka:return"Portal";case Im:return"Profiler";case xh:return"StrictMode";case $m:return"Suspense";case zm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zv:return(e.displayName||"Context")+".Consumer";case $v:return(e._context.displayName||"Context")+".Provider";case vh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yh:return t=e.displayName||null,t!==null?t:Hm(e.type)||"Memo";case bs:t=e._payload,e=e._init;try{return Hm(e(t))}catch{}}return null}function Rj(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hm(t);case 8:return t===xh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ij(e){var t=Bv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Il(e){e._valueTracker||(e._valueTracker=Ij(e))}function Vv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Bv(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Qc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bm(e,t){var n=t.checked;return Tt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Qp(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Bs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Uv(e,t){t=t.checked,t!=null&&gh(e,"checked",t,!1)}function Vm(e,t){Uv(e,t);var n=Bs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Um(e,t.type,n):t.hasOwnProperty("defaultValue")&&Um(e,t.type,Bs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Um(e,t,n){(t!=="number"||Qc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var go=Array.isArray;function ii(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Bs(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Wm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return Tt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jp(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ce(92));if(go(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Bs(n)}}function Wv(e,t){var n=Bs(t.value),r=Bs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Yv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ym(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Yv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $l,qv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($l=$l||document.createElement("div"),$l.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$l.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Do={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$j=["Webkit","ms","Moz","O"];Object.keys(Do).forEach(function(e){$j.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Do[t]=Do[e]})});function Kv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Do.hasOwnProperty(e)&&Do[e]?(""+t).trim():t+"px"}function Qv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Kv(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var zj=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qm(e,t){if(t){if(zj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ce(62))}}function Km(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qm=null;function bh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gm=null,oi=null,li=null;function Zp(e){if(e=Nl(e)){if(typeof Gm!="function")throw Error(Ce(280));var t=e.stateNode;t&&(t=td(t),Gm(e.stateNode,e.type,t))}}function Gv(e){oi?li?li.push(e):li=[e]:oi=e}function Jv(){if(oi){var e=oi,t=li;if(li=oi=null,Zp(e),t)for(e=0;e<t.length;e++)Zp(t[e])}}function Xv(e,t){return e(t)}function Zv(){}var Hd=!1;function ey(e,t,n){if(Hd)return e(t,n);Hd=!0;try{return Xv(e,t,n)}finally{Hd=!1,(oi!==null||li!==null)&&(Zv(),Jv())}}function qo(e,t){var n=e.stateNode;if(n===null)return null;var r=td(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ce(231,t,typeof n));return n}var Jm=!1;if(is)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){Jm=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{Jm=!1}function Hj(e,t,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(m){this.onError(m)}}var Co=!1,Gc=null,Jc=!1,Xm=null,Bj={onError:function(e){Co=!0,Gc=e}};function Vj(e,t,n,r,s,i,o,l,c){Co=!1,Gc=null,Hj.apply(Bj,arguments)}function Uj(e,t,n,r,s,i,o,l,c){if(Vj.apply(this,arguments),Co){if(Co){var u=Gc;Co=!1,Gc=null}else throw Error(Ce(198));Jc||(Jc=!0,Xm=u)}}function Aa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ty(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eg(e){if(Aa(e)!==e)throw Error(Ce(188))}function Wj(e){var t=e.alternate;if(!t){if(t=Aa(e),t===null)throw Error(Ce(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return eg(s),e;if(i===r)return eg(s),t;i=i.sibling}throw Error(Ce(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Ce(189))}}if(n.alternate!==r)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?e:t}function ny(e){return e=Wj(e),e!==null?ry(e):null}function ry(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ry(e);if(t!==null)return t;e=e.sibling}return null}var sy=Vn.unstable_scheduleCallback,tg=Vn.unstable_cancelCallback,Yj=Vn.unstable_shouldYield,qj=Vn.unstable_requestPaint,Rt=Vn.unstable_now,Kj=Vn.unstable_getCurrentPriorityLevel,wh=Vn.unstable_ImmediatePriority,ay=Vn.unstable_UserBlockingPriority,Xc=Vn.unstable_NormalPriority,Qj=Vn.unstable_LowPriority,iy=Vn.unstable_IdlePriority,Ju=null,$r=null;function Gj(e){if($r&&typeof $r.onCommitFiberRoot=="function")try{$r.onCommitFiberRoot(Ju,e,void 0,(e.current.flags&128)===128)}catch{}}var yr=Math.clz32?Math.clz32:Zj,Jj=Math.log,Xj=Math.LN2;function Zj(e){return e>>>=0,e===0?32:31-(Jj(e)/Xj|0)|0}var zl=64,Hl=4194304;function xo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=xo(l):(i&=o,i!==0&&(r=xo(i)))}else o=n&~s,o!==0?r=xo(o):i!==0&&(r=xo(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-yr(t),s=1<<n,r|=e[n],t&=~s;return r}function e1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t1(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-yr(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=e1(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Zm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oy(){var e=zl;return zl<<=1,!(zl&4194240)&&(zl=64),e}function Bd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yr(t),e[t]=n}function n1(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-yr(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Nh(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-yr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var vt=0;function ly(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cy,jh,uy,dy,my,ef=!1,Bl=[],Es=null,Ms=null,Ts=null,Ko=new Map,Qo=new Map,Ns=[],r1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ng(e,t){switch(e){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(t.pointerId)}}function Qi(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Nl(t),t!==null&&jh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function s1(e,t,n,r,s){switch(t){case"focusin":return Es=Qi(Es,e,t,n,r,s),!0;case"dragenter":return Ms=Qi(Ms,e,t,n,r,s),!0;case"mouseover":return Ts=Qi(Ts,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ko.set(i,Qi(Ko.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Qo.set(i,Qi(Qo.get(i)||null,e,t,n,r,s)),!0}return!1}function fy(e){var t=oa(e.target);if(t!==null){var n=Aa(t);if(n!==null){if(t=n.tag,t===13){if(t=ty(n),t!==null){e.blockedOn=t,my(e.priority,function(){uy(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=tf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Qm=r,n.target.dispatchEvent(r),Qm=null}else return t=Nl(n),t!==null&&jh(t),e.blockedOn=n,!1;t.shift()}return!0}function rg(e,t,n){Sc(e)&&n.delete(t)}function a1(){ef=!1,Es!==null&&Sc(Es)&&(Es=null),Ms!==null&&Sc(Ms)&&(Ms=null),Ts!==null&&Sc(Ts)&&(Ts=null),Ko.forEach(rg),Qo.forEach(rg)}function Gi(e,t){e.blockedOn===t&&(e.blockedOn=null,ef||(ef=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,a1)))}function Go(e){function t(s){return Gi(s,e)}if(0<Bl.length){Gi(Bl[0],e);for(var n=1;n<Bl.length;n++){var r=Bl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Es!==null&&Gi(Es,e),Ms!==null&&Gi(Ms,e),Ts!==null&&Gi(Ts,e),Ko.forEach(t),Qo.forEach(t),n=0;n<Ns.length;n++)r=Ns[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ns.length&&(n=Ns[0],n.blockedOn===null);)fy(n),n.blockedOn===null&&Ns.shift()}var ci=ms.ReactCurrentBatchConfig,eu=!0;function i1(e,t,n,r){var s=vt,i=ci.transition;ci.transition=null;try{vt=1,_h(e,t,n,r)}finally{vt=s,ci.transition=i}}function o1(e,t,n,r){var s=vt,i=ci.transition;ci.transition=null;try{vt=4,_h(e,t,n,r)}finally{vt=s,ci.transition=i}}function _h(e,t,n,r){if(eu){var s=tf(e,t,n,r);if(s===null)Xd(e,t,r,tu,n),ng(e,r);else if(s1(s,e,t,n,r))r.stopPropagation();else if(ng(e,r),t&4&&-1<r1.indexOf(e)){for(;s!==null;){var i=Nl(s);if(i!==null&&cy(i),i=tf(e,t,n,r),i===null&&Xd(e,t,r,tu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xd(e,t,r,null,n)}}var tu=null;function tf(e,t,n,r){if(tu=null,e=bh(r),e=oa(e),e!==null)if(t=Aa(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ty(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return tu=e,null}function hy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kj()){case wh:return 1;case ay:return 4;case Xc:case Qj:return 16;case iy:return 536870912;default:return 16}default:return 16}}var Ss=null,Sh=null,kc=null;function py(){if(kc)return kc;var e,t=Sh,n=t.length,r,s="value"in Ss?Ss.value:Ss.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return kc=s.slice(e,1<r?1-r:void 0)}function Dc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vl(){return!0}function sg(){return!1}function Wn(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vl:sg,this.isPropagationStopped=sg,this}return Tt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vl)},persist:function(){},isPersistent:Vl}),t}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kh=Wn(Ii),wl=Tt({},Ii,{view:0,detail:0}),l1=Wn(wl),Vd,Ud,Ji,Xu=Tt({},wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ji&&(Ji&&e.type==="mousemove"?(Vd=e.screenX-Ji.screenX,Ud=e.screenY-Ji.screenY):Ud=Vd=0,Ji=e),Vd)},movementY:function(e){return"movementY"in e?e.movementY:Ud}}),ag=Wn(Xu),c1=Tt({},Xu,{dataTransfer:0}),u1=Wn(c1),d1=Tt({},wl,{relatedTarget:0}),Wd=Wn(d1),m1=Tt({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),f1=Wn(m1),h1=Tt({},Ii,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),p1=Wn(h1),g1=Tt({},Ii,{data:0}),ig=Wn(g1),x1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=y1[e])?!!t[e]:!1}function Dh(){return b1}var w1=Tt({},wl,{key:function(e){if(e.key){var t=x1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Dc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?v1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dh,charCode:function(e){return e.type==="keypress"?Dc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Dc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),N1=Wn(w1),j1=Tt({},Xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),og=Wn(j1),_1=Tt({},wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dh}),S1=Wn(_1),k1=Tt({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),D1=Wn(k1),C1=Tt({},Xu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),P1=Wn(C1),E1=[9,13,27,32],Ch=is&&"CompositionEvent"in window,Po=null;is&&"documentMode"in document&&(Po=document.documentMode);var M1=is&&"TextEvent"in window&&!Po,gy=is&&(!Ch||Po&&8<Po&&11>=Po),lg=" ",cg=!1;function xy(e,t){switch(e){case"keyup":return E1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ga=!1;function T1(e,t){switch(e){case"compositionend":return vy(t);case"keypress":return t.which!==32?null:(cg=!0,lg);case"textInput":return e=t.data,e===lg&&cg?null:e;default:return null}}function O1(e,t){if(Ga)return e==="compositionend"||!Ch&&xy(e,t)?(e=py(),kc=Sh=Ss=null,Ga=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gy&&t.locale!=="ko"?null:t.data;default:return null}}var F1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ug(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!F1[e.type]:t==="textarea"}function yy(e,t,n,r){Gv(r),t=nu(t,"onChange"),0<t.length&&(n=new kh("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Eo=null,Jo=null;function A1(e){Ey(e,0)}function Zu(e){var t=Za(e);if(Vv(t))return e}function L1(e,t){if(e==="change")return t}var by=!1;if(is){var Yd;if(is){var qd="oninput"in document;if(!qd){var dg=document.createElement("div");dg.setAttribute("oninput","return;"),qd=typeof dg.oninput=="function"}Yd=qd}else Yd=!1;by=Yd&&(!document.documentMode||9<document.documentMode)}function mg(){Eo&&(Eo.detachEvent("onpropertychange",wy),Jo=Eo=null)}function wy(e){if(e.propertyName==="value"&&Zu(Jo)){var t=[];yy(t,Jo,e,bh(e)),ey(A1,t)}}function R1(e,t,n){e==="focusin"?(mg(),Eo=t,Jo=n,Eo.attachEvent("onpropertychange",wy)):e==="focusout"&&mg()}function I1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zu(Jo)}function $1(e,t){if(e==="click")return Zu(t)}function z1(e,t){if(e==="input"||e==="change")return Zu(t)}function H1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nr=typeof Object.is=="function"?Object.is:H1;function Xo(e,t){if(Nr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rm.call(t,s)||!Nr(e[s],t[s]))return!1}return!0}function fg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hg(e,t){var n=fg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fg(n)}}function Ny(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ny(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jy(){for(var e=window,t=Qc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Qc(e.document)}return t}function Ph(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function B1(e){var t=jy(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ny(n.ownerDocument.documentElement,n)){if(r!==null&&Ph(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=hg(n,i);var o=hg(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var V1=is&&"documentMode"in document&&11>=document.documentMode,Ja=null,nf=null,Mo=null,rf=!1;function pg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rf||Ja==null||Ja!==Qc(r)||(r=Ja,"selectionStart"in r&&Ph(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mo&&Xo(Mo,r)||(Mo=r,r=nu(nf,"onSelect"),0<r.length&&(t=new kh("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ja)))}function Ul(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xa={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},Kd={},_y={};is&&(_y=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function ed(e){if(Kd[e])return Kd[e];if(!Xa[e])return e;var t=Xa[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _y)return Kd[e]=t[n];return e}var Sy=ed("animationend"),ky=ed("animationiteration"),Dy=ed("animationstart"),Cy=ed("transitionend"),Py=new Map,gg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(e,t){Py.set(e,t),Fa(t,[e])}for(var Qd=0;Qd<gg.length;Qd++){var Gd=gg[Qd],U1=Gd.toLowerCase(),W1=Gd[0].toUpperCase()+Gd.slice(1);qs(U1,"on"+W1)}qs(Sy,"onAnimationEnd");qs(ky,"onAnimationIteration");qs(Dy,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(Cy,"onTransitionEnd");vi("onMouseEnter",["mouseout","mouseover"]);vi("onMouseLeave",["mouseout","mouseover"]);vi("onPointerEnter",["pointerout","pointerover"]);vi("onPointerLeave",["pointerout","pointerover"]);Fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y1=new Set("cancel close invalid load scroll toggle".split(" ").concat(vo));function xg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Uj(r,t,void 0,e),e.currentTarget=null}function Ey(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;xg(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;xg(s,l,u),i=c}}}if(Jc)throw e=Xm,Jc=!1,Xm=null,e}function jt(e,t){var n=t[cf];n===void 0&&(n=t[cf]=new Set);var r=e+"__bubble";n.has(r)||(My(t,e,2,!1),n.add(r))}function Jd(e,t,n){var r=0;t&&(r|=4),My(n,e,r,t)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function Zo(e){if(!e[Wl]){e[Wl]=!0,Iv.forEach(function(n){n!=="selectionchange"&&(Y1.has(n)||Jd(n,!1,e),Jd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wl]||(t[Wl]=!0,Jd("selectionchange",!1,t))}}function My(e,t,n,r){switch(hy(t)){case 1:var s=i1;break;case 4:s=o1;break;default:s=_h}n=s.bind(null,t,n,e),s=void 0,!Jm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Xd(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=oa(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}ey(function(){var u=i,m=bh(n),h=[];e:{var f=Py.get(e);if(f!==void 0){var b=kh,v=e;switch(e){case"keypress":if(Dc(n)===0)break e;case"keydown":case"keyup":b=N1;break;case"focusin":v="focus",b=Wd;break;case"focusout":v="blur",b=Wd;break;case"beforeblur":case"afterblur":b=Wd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=u1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=S1;break;case Sy:case ky:case Dy:b=f1;break;case Cy:b=D1;break;case"scroll":b=l1;break;case"wheel":b=P1;break;case"copy":case"cut":case"paste":b=p1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=og}var D=(t&4)!==0,g=!D&&e==="scroll",w=D?f!==null?f+"Capture":null:f;D=[];for(var y=u,_;y!==null;){_=y;var j=_.stateNode;if(_.tag===5&&j!==null&&(_=j,w!==null&&(j=qo(y,w),j!=null&&D.push(el(y,j,_)))),g)break;y=y.return}0<D.length&&(f=new b(f,v,null,n,m),h.push({event:f,listeners:D}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",f&&n!==Qm&&(v=n.relatedTarget||n.fromElement)&&(oa(v)||v[os]))break e;if((b||f)&&(f=m.window===m?m:(f=m.ownerDocument)?f.defaultView||f.parentWindow:window,b?(v=n.relatedTarget||n.toElement,b=u,v=v?oa(v):null,v!==null&&(g=Aa(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(b=null,v=u),b!==v)){if(D=ag,j="onMouseLeave",w="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(D=og,j="onPointerLeave",w="onPointerEnter",y="pointer"),g=b==null?f:Za(b),_=v==null?f:Za(v),f=new D(j,y+"leave",b,n,m),f.target=g,f.relatedTarget=_,j=null,oa(m)===u&&(D=new D(w,y+"enter",v,n,m),D.target=_,D.relatedTarget=g,j=D),g=j,b&&v)t:{for(D=b,w=v,y=0,_=D;_;_=Ha(_))y++;for(_=0,j=w;j;j=Ha(j))_++;for(;0<y-_;)D=Ha(D),y--;for(;0<_-y;)w=Ha(w),_--;for(;y--;){if(D===w||w!==null&&D===w.alternate)break t;D=Ha(D),w=Ha(w)}D=null}else D=null;b!==null&&vg(h,f,b,D,!1),v!==null&&g!==null&&vg(h,g,v,D,!0)}}e:{if(f=u?Za(u):window,b=f.nodeName&&f.nodeName.toLowerCase(),b==="select"||b==="input"&&f.type==="file")var L=L1;else if(ug(f))if(by)L=z1;else{L=I1;var C=R1}else(b=f.nodeName)&&b.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(L=$1);if(L&&(L=L(e,u))){yy(h,L,n,m);break e}C&&C(e,f,u),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Um(f,"number",f.value)}switch(C=u?Za(u):window,e){case"focusin":(ug(C)||C.contentEditable==="true")&&(Ja=C,nf=u,Mo=null);break;case"focusout":Mo=nf=Ja=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,pg(h,n,m);break;case"selectionchange":if(V1)break;case"keydown":case"keyup":pg(h,n,m)}var T;if(Ch)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ga?xy(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(gy&&n.locale!=="ko"&&(Ga||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ga&&(T=py()):(Ss=m,Sh="value"in Ss?Ss.value:Ss.textContent,Ga=!0)),C=nu(u,P),0<C.length&&(P=new ig(P,e,null,n,m),h.push({event:P,listeners:C}),T?P.data=T:(T=vy(n),T!==null&&(P.data=T)))),(T=M1?T1(e,n):O1(e,n))&&(u=nu(u,"onBeforeInput"),0<u.length&&(m=new ig("onBeforeInput","beforeinput",null,n,m),h.push({event:m,listeners:u}),m.data=T))}Ey(h,t)})}function el(e,t,n){return{instance:e,listener:t,currentTarget:n}}function nu(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=qo(e,n),i!=null&&r.unshift(el(e,i,s)),i=qo(e,t),i!=null&&r.push(el(e,i,s))),e=e.return}return r}function Ha(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vg(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=qo(n,i),c!=null&&o.unshift(el(n,c,l))):s||(c=qo(n,i),c!=null&&o.push(el(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var q1=/\r\n?/g,K1=/\u0000|\uFFFD/g;function yg(e){return(typeof e=="string"?e:""+e).replace(q1,`
`).replace(K1,"")}function Yl(e,t,n){if(t=yg(t),yg(e)!==t&&n)throw Error(Ce(425))}function ru(){}var sf=null,af=null;function of(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lf=typeof setTimeout=="function"?setTimeout:void 0,Q1=typeof clearTimeout=="function"?clearTimeout:void 0,bg=typeof Promise=="function"?Promise:void 0,G1=typeof queueMicrotask=="function"?queueMicrotask:typeof bg<"u"?function(e){return bg.resolve(null).then(e).catch(J1)}:lf;function J1(e){setTimeout(function(){throw e})}function Zd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Go(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Go(t)}function Os(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $i=Math.random().toString(36).slice(2),Or="__reactFiber$"+$i,tl="__reactProps$"+$i,os="__reactContainer$"+$i,cf="__reactEvents$"+$i,X1="__reactListeners$"+$i,Z1="__reactHandles$"+$i;function oa(e){var t=e[Or];if(t)return t;for(var n=e.parentNode;n;){if(t=n[os]||n[Or]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wg(e);e!==null;){if(n=e[Or])return n;e=wg(e)}return t}e=n,n=e.parentNode}return null}function Nl(e){return e=e[Or]||e[os],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Za(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ce(33))}function td(e){return e[tl]||null}var uf=[],ei=-1;function Ks(e){return{current:e}}function St(e){0>ei||(e.current=uf[ei],uf[ei]=null,ei--)}function wt(e,t){ei++,uf[ei]=e.current,e.current=t}var Vs={},hn=Ks(Vs),Tn=Ks(!1),_a=Vs;function yi(e,t){var n=e.type.contextTypes;if(!n)return Vs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function On(e){return e=e.childContextTypes,e!=null}function su(){St(Tn),St(hn)}function Ng(e,t,n){if(hn.current!==Vs)throw Error(Ce(168));wt(hn,t),wt(Tn,n)}function Ty(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Ce(108,Rj(e)||"Unknown",s));return Tt({},n,r)}function au(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vs,_a=hn.current,wt(hn,e),wt(Tn,Tn.current),!0}function jg(e,t,n){var r=e.stateNode;if(!r)throw Error(Ce(169));n?(e=Ty(e,t,_a),r.__reactInternalMemoizedMergedChildContext=e,St(Tn),St(hn),wt(hn,e)):St(Tn),wt(Tn,n)}var Gr=null,nd=!1,em=!1;function Oy(e){Gr===null?Gr=[e]:Gr.push(e)}function e_(e){nd=!0,Oy(e)}function Qs(){if(!em&&Gr!==null){em=!0;var e=0,t=vt;try{var n=Gr;for(vt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Gr=null,nd=!1}catch(s){throw Gr!==null&&(Gr=Gr.slice(e+1)),sy(wh,Qs),s}finally{vt=t,em=!1}}return null}var ti=[],ni=0,iu=null,ou=0,tr=[],nr=0,Sa=null,Xr=1,Zr="";function ta(e,t){ti[ni++]=ou,ti[ni++]=iu,iu=e,ou=t}function Fy(e,t,n){tr[nr++]=Xr,tr[nr++]=Zr,tr[nr++]=Sa,Sa=e;var r=Xr;e=Zr;var s=32-yr(r)-1;r&=~(1<<s),n+=1;var i=32-yr(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Xr=1<<32-yr(t)+s|n<<s|r,Zr=i+e}else Xr=1<<i|n<<s|r,Zr=e}function Eh(e){e.return!==null&&(ta(e,1),Fy(e,1,0))}function Mh(e){for(;e===iu;)iu=ti[--ni],ti[ni]=null,ou=ti[--ni],ti[ni]=null;for(;e===Sa;)Sa=tr[--nr],tr[nr]=null,Zr=tr[--nr],tr[nr]=null,Xr=tr[--nr],tr[nr]=null}var Hn=null,zn=null,kt=!1,xr=null;function Ay(e,t){var n=sr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function _g(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Hn=e,zn=Os(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Hn=e,zn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Sa!==null?{id:Xr,overflow:Zr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=sr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Hn=e,zn=null,!0):!1;default:return!1}}function df(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mf(e){if(kt){var t=zn;if(t){var n=t;if(!_g(e,t)){if(df(e))throw Error(Ce(418));t=Os(n.nextSibling);var r=Hn;t&&_g(e,t)?Ay(r,n):(e.flags=e.flags&-4097|2,kt=!1,Hn=e)}}else{if(df(e))throw Error(Ce(418));e.flags=e.flags&-4097|2,kt=!1,Hn=e}}}function Sg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Hn=e}function ql(e){if(e!==Hn)return!1;if(!kt)return Sg(e),kt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!of(e.type,e.memoizedProps)),t&&(t=zn)){if(df(e))throw Ly(),Error(Ce(418));for(;t;)Ay(e,t),t=Os(t.nextSibling)}if(Sg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zn=Os(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zn=null}}else zn=Hn?Os(e.stateNode.nextSibling):null;return!0}function Ly(){for(var e=zn;e;)e=Os(e.nextSibling)}function bi(){zn=Hn=null,kt=!1}function Th(e){xr===null?xr=[e]:xr.push(e)}var t_=ms.ReactCurrentBatchConfig;function Xi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var r=n.stateNode}if(!r)throw Error(Ce(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,e))}return e}function Kl(e,t){throw e=Object.prototype.toString.call(t),Error(Ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kg(e){var t=e._init;return t(e._payload)}function Ry(e){function t(w,y){if(e){var _=w.deletions;_===null?(w.deletions=[y],w.flags|=16):_.push(y)}}function n(w,y){if(!e)return null;for(;y!==null;)t(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function s(w,y){return w=Rs(w,y),w.index=0,w.sibling=null,w}function i(w,y,_){return w.index=_,e?(_=w.alternate,_!==null?(_=_.index,_<y?(w.flags|=2,y):_):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,y,_,j){return y===null||y.tag!==6?(y=om(_,w.mode,j),y.return=w,y):(y=s(y,_),y.return=w,y)}function c(w,y,_,j){var L=_.type;return L===Qa?m(w,y,_.props.children,j,_.key):y!==null&&(y.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===bs&&kg(L)===y.type)?(j=s(y,_.props),j.ref=Xi(w,y,_),j.return=w,j):(j=Fc(_.type,_.key,_.props,null,w.mode,j),j.ref=Xi(w,y,_),j.return=w,j)}function u(w,y,_,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=lm(_,w.mode,j),y.return=w,y):(y=s(y,_.children||[]),y.return=w,y)}function m(w,y,_,j,L){return y===null||y.tag!==7?(y=va(_,w.mode,j,L),y.return=w,y):(y=s(y,_),y.return=w,y)}function h(w,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=om(""+y,w.mode,_),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Rl:return _=Fc(y.type,y.key,y.props,null,w.mode,_),_.ref=Xi(w,null,y),_.return=w,_;case Ka:return y=lm(y,w.mode,_),y.return=w,y;case bs:var j=y._init;return h(w,j(y._payload),_)}if(go(y)||qi(y))return y=va(y,w.mode,_,null),y.return=w,y;Kl(w,y)}return null}function f(w,y,_,j){var L=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return L!==null?null:l(w,y,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Rl:return _.key===L?c(w,y,_,j):null;case Ka:return _.key===L?u(w,y,_,j):null;case bs:return L=_._init,f(w,y,L(_._payload),j)}if(go(_)||qi(_))return L!==null?null:m(w,y,_,j,null);Kl(w,_)}return null}function b(w,y,_,j,L){if(typeof j=="string"&&j!==""||typeof j=="number")return w=w.get(_)||null,l(y,w,""+j,L);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Rl:return w=w.get(j.key===null?_:j.key)||null,c(y,w,j,L);case Ka:return w=w.get(j.key===null?_:j.key)||null,u(y,w,j,L);case bs:var C=j._init;return b(w,y,_,C(j._payload),L)}if(go(j)||qi(j))return w=w.get(_)||null,m(y,w,j,L,null);Kl(y,j)}return null}function v(w,y,_,j){for(var L=null,C=null,T=y,P=y=0,q=null;T!==null&&P<_.length;P++){T.index>P?(q=T,T=null):q=T.sibling;var X=f(w,T,_[P],j);if(X===null){T===null&&(T=q);break}e&&T&&X.alternate===null&&t(w,T),y=i(X,y,P),C===null?L=X:C.sibling=X,C=X,T=q}if(P===_.length)return n(w,T),kt&&ta(w,P),L;if(T===null){for(;P<_.length;P++)T=h(w,_[P],j),T!==null&&(y=i(T,y,P),C===null?L=T:C.sibling=T,C=T);return kt&&ta(w,P),L}for(T=r(w,T);P<_.length;P++)q=b(T,w,P,_[P],j),q!==null&&(e&&q.alternate!==null&&T.delete(q.key===null?P:q.key),y=i(q,y,P),C===null?L=q:C.sibling=q,C=q);return e&&T.forEach(function(te){return t(w,te)}),kt&&ta(w,P),L}function D(w,y,_,j){var L=qi(_);if(typeof L!="function")throw Error(Ce(150));if(_=L.call(_),_==null)throw Error(Ce(151));for(var C=L=null,T=y,P=y=0,q=null,X=_.next();T!==null&&!X.done;P++,X=_.next()){T.index>P?(q=T,T=null):q=T.sibling;var te=f(w,T,X.value,j);if(te===null){T===null&&(T=q);break}e&&T&&te.alternate===null&&t(w,T),y=i(te,y,P),C===null?L=te:C.sibling=te,C=te,T=q}if(X.done)return n(w,T),kt&&ta(w,P),L;if(T===null){for(;!X.done;P++,X=_.next())X=h(w,X.value,j),X!==null&&(y=i(X,y,P),C===null?L=X:C.sibling=X,C=X);return kt&&ta(w,P),L}for(T=r(w,T);!X.done;P++,X=_.next())X=b(T,w,P,X.value,j),X!==null&&(e&&X.alternate!==null&&T.delete(X.key===null?P:X.key),y=i(X,y,P),C===null?L=X:C.sibling=X,C=X);return e&&T.forEach(function(oe){return t(w,oe)}),kt&&ta(w,P),L}function g(w,y,_,j){if(typeof _=="object"&&_!==null&&_.type===Qa&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Rl:e:{for(var L=_.key,C=y;C!==null;){if(C.key===L){if(L=_.type,L===Qa){if(C.tag===7){n(w,C.sibling),y=s(C,_.props.children),y.return=w,w=y;break e}}else if(C.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===bs&&kg(L)===C.type){n(w,C.sibling),y=s(C,_.props),y.ref=Xi(w,C,_),y.return=w,w=y;break e}n(w,C);break}else t(w,C);C=C.sibling}_.type===Qa?(y=va(_.props.children,w.mode,j,_.key),y.return=w,w=y):(j=Fc(_.type,_.key,_.props,null,w.mode,j),j.ref=Xi(w,y,_),j.return=w,w=j)}return o(w);case Ka:e:{for(C=_.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(w,y.sibling),y=s(y,_.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else t(w,y);y=y.sibling}y=lm(_,w.mode,j),y.return=w,w=y}return o(w);case bs:return C=_._init,g(w,y,C(_._payload),j)}if(go(_))return v(w,y,_,j);if(qi(_))return D(w,y,_,j);Kl(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(w,y.sibling),y=s(y,_),y.return=w,w=y):(n(w,y),y=om(_,w.mode,j),y.return=w,w=y),o(w)):n(w,y)}return g}var wi=Ry(!0),Iy=Ry(!1),lu=Ks(null),cu=null,ri=null,Oh=null;function Fh(){Oh=ri=cu=null}function Ah(e){var t=lu.current;St(lu),e._currentValue=t}function ff(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ui(e,t){cu=e,Oh=ri=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mn=!0),e.firstContext=null)}function lr(e){var t=e._currentValue;if(Oh!==e)if(e={context:e,memoizedValue:t,next:null},ri===null){if(cu===null)throw Error(Ce(308));ri=e,cu.dependencies={lanes:0,firstContext:e}}else ri=ri.next=e;return t}var la=null;function Lh(e){la===null?la=[e]:la.push(e)}function $y(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Lh(t)):(n.next=s.next,s.next=n),t.interleaved=n,ls(e,r)}function ls(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ws=!1;function Rh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function es(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,ls(e,n)}return s=r.interleaved,s===null?(t.next=t,Lh(r)):(t.next=s.next,s.next=t),r.interleaved=t,ls(e,n)}function Cc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Nh(e,n)}}function Dg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function uu(e,t,n,r){var s=e.updateQueue;ws=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=u:l.next=u,m.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,m=u=c=null,l=i;do{var f=l.lane,b=l.eventTime;if((r&f)===f){m!==null&&(m=m.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,D=l;switch(f=t,b=n,D.tag){case 1:if(v=D.payload,typeof v=="function"){h=v.call(b,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=D.payload,f=typeof v=="function"?v.call(b,h,f):v,f==null)break e;h=Tt({},h,f);break e;case 2:ws=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else b={eventTime:b,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(u=m=b,c=h):m=m.next=b,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(m===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Da|=o,e.lanes=o,e.memoizedState=h}}function Cg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ce(191,s));s.call(r)}}}var jl={},zr=Ks(jl),nl=Ks(jl),rl=Ks(jl);function ca(e){if(e===jl)throw Error(Ce(174));return e}function Ih(e,t){switch(wt(rl,t),wt(nl,e),wt(zr,jl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ym(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ym(t,e)}St(zr),wt(zr,t)}function Ni(){St(zr),St(nl),St(rl)}function Hy(e){ca(rl.current);var t=ca(zr.current),n=Ym(t,e.type);t!==n&&(wt(nl,e),wt(zr,n))}function $h(e){nl.current===e&&(St(zr),St(nl))}var Ct=Ks(0);function du(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tm=[];function zh(){for(var e=0;e<tm.length;e++)tm[e]._workInProgressVersionPrimary=null;tm.length=0}var Pc=ms.ReactCurrentDispatcher,nm=ms.ReactCurrentBatchConfig,ka=0,Et=null,qt=null,Gt=null,mu=!1,To=!1,sl=0,n_=0;function on(){throw Error(Ce(321))}function Hh(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Nr(e[n],t[n]))return!1;return!0}function Bh(e,t,n,r,s,i){if(ka=i,Et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pc.current=e===null||e.memoizedState===null?i_:o_,e=n(r,s),To){i=0;do{if(To=!1,sl=0,25<=i)throw Error(Ce(301));i+=1,Gt=qt=null,t.updateQueue=null,Pc.current=l_,e=n(r,s)}while(To)}if(Pc.current=fu,t=qt!==null&&qt.next!==null,ka=0,Gt=qt=Et=null,mu=!1,t)throw Error(Ce(300));return e}function Vh(){var e=sl!==0;return sl=0,e}function Pr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Et.memoizedState=Gt=e:Gt=Gt.next=e,Gt}function cr(){if(qt===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=qt.next;var t=Gt===null?Et.memoizedState:Gt.next;if(t!==null)Gt=t,qt=e;else{if(e===null)throw Error(Ce(310));qt=e,e={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Gt===null?Et.memoizedState=Gt=e:Gt=Gt.next=e}return Gt}function al(e,t){return typeof t=="function"?t(e):t}function rm(e){var t=cr(),n=t.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=e;var r=qt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var m=u.lane;if((ka&m)===m)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:m,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Et.lanes|=m,Da|=m}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,Nr(r,t.memoizedState)||(Mn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Et.lanes|=i,Da|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function sm(e){var t=cr(),n=t.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Nr(i,t.memoizedState)||(Mn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function By(){}function Vy(e,t){var n=Et,r=cr(),s=t(),i=!Nr(r.memoizedState,s);if(i&&(r.memoizedState=s,Mn=!0),r=r.queue,Uh(Yy.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Gt!==null&&Gt.memoizedState.tag&1){if(n.flags|=2048,il(9,Wy.bind(null,n,r,s,t),void 0,null),Xt===null)throw Error(Ce(349));ka&30||Uy(n,t,s)}return s}function Uy(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Wy(e,t,n,r){t.value=n,t.getSnapshot=r,qy(t)&&Ky(e)}function Yy(e,t,n){return n(function(){qy(t)&&Ky(e)})}function qy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nr(e,n)}catch{return!0}}function Ky(e){var t=ls(e,1);t!==null&&br(t,e,1,-1)}function Pg(e){var t=Pr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:e},t.queue=e,e=e.dispatch=a_.bind(null,Et,e),[t.memoizedState,e]}function il(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Qy(){return cr().memoizedState}function Ec(e,t,n,r){var s=Pr();Et.flags|=e,s.memoizedState=il(1|t,n,void 0,r===void 0?null:r)}function rd(e,t,n,r){var s=cr();r=r===void 0?null:r;var i=void 0;if(qt!==null){var o=qt.memoizedState;if(i=o.destroy,r!==null&&Hh(r,o.deps)){s.memoizedState=il(t,n,i,r);return}}Et.flags|=e,s.memoizedState=il(1|t,n,i,r)}function Eg(e,t){return Ec(8390656,8,e,t)}function Uh(e,t){return rd(2048,8,e,t)}function Gy(e,t){return rd(4,2,e,t)}function Jy(e,t){return rd(4,4,e,t)}function Xy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zy(e,t,n){return n=n!=null?n.concat([e]):null,rd(4,4,Xy.bind(null,t,e),n)}function Wh(){}function eb(e,t){var n=cr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hh(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function tb(e,t){var n=cr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hh(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function nb(e,t,n){return ka&21?(Nr(n,t)||(n=oy(),Et.lanes|=n,Da|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mn=!0),e.memoizedState=n)}function r_(e,t){var n=vt;vt=n!==0&&4>n?n:4,e(!0);var r=nm.transition;nm.transition={};try{e(!1),t()}finally{vt=n,nm.transition=r}}function rb(){return cr().memoizedState}function s_(e,t,n){var r=Ls(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sb(e))ab(t,n);else if(n=$y(e,t,n,r),n!==null){var s=Nn();br(n,e,r,s),ib(n,t,r)}}function a_(e,t,n){var r=Ls(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sb(e))ab(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Nr(l,o)){var c=t.interleaved;c===null?(s.next=s,Lh(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=$y(e,t,s,r),n!==null&&(s=Nn(),br(n,e,r,s),ib(n,t,r))}}function sb(e){var t=e.alternate;return e===Et||t!==null&&t===Et}function ab(e,t){To=mu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ib(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Nh(e,n)}}var fu={readContext:lr,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},i_={readContext:lr,useCallback:function(e,t){return Pr().memoizedState=[e,t===void 0?null:t],e},useContext:lr,useEffect:Eg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ec(4194308,4,Xy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ec(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ec(4,2,e,t)},useMemo:function(e,t){var n=Pr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Pr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=s_.bind(null,Et,e),[r.memoizedState,e]},useRef:function(e){var t=Pr();return e={current:e},t.memoizedState=e},useState:Pg,useDebugValue:Wh,useDeferredValue:function(e){return Pr().memoizedState=e},useTransition:function(){var e=Pg(!1),t=e[0];return e=r_.bind(null,e[1]),Pr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Et,s=Pr();if(kt){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=t(),Xt===null)throw Error(Ce(349));ka&30||Uy(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Eg(Yy.bind(null,r,i,e),[e]),r.flags|=2048,il(9,Wy.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Pr(),t=Xt.identifierPrefix;if(kt){var n=Zr,r=Xr;n=(r&~(1<<32-yr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=sl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=n_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},o_={readContext:lr,useCallback:eb,useContext:lr,useEffect:Uh,useImperativeHandle:Zy,useInsertionEffect:Gy,useLayoutEffect:Jy,useMemo:tb,useReducer:rm,useRef:Qy,useState:function(){return rm(al)},useDebugValue:Wh,useDeferredValue:function(e){var t=cr();return nb(t,qt.memoizedState,e)},useTransition:function(){var e=rm(al)[0],t=cr().memoizedState;return[e,t]},useMutableSource:By,useSyncExternalStore:Vy,useId:rb,unstable_isNewReconciler:!1},l_={readContext:lr,useCallback:eb,useContext:lr,useEffect:Uh,useImperativeHandle:Zy,useInsertionEffect:Gy,useLayoutEffect:Jy,useMemo:tb,useReducer:sm,useRef:Qy,useState:function(){return sm(al)},useDebugValue:Wh,useDeferredValue:function(e){var t=cr();return qt===null?t.memoizedState=e:nb(t,qt.memoizedState,e)},useTransition:function(){var e=sm(al)[0],t=cr().memoizedState;return[e,t]},useMutableSource:By,useSyncExternalStore:Vy,useId:rb,unstable_isNewReconciler:!1};function pr(e,t){if(e&&e.defaultProps){t=Tt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Tt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var sd={isMounted:function(e){return(e=e._reactInternals)?Aa(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Nn(),s=Ls(e),i=es(r,s);i.payload=t,n!=null&&(i.callback=n),t=Fs(e,i,s),t!==null&&(br(t,e,s,r),Cc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Nn(),s=Ls(e),i=es(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Fs(e,i,s),t!==null&&(br(t,e,s,r),Cc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nn(),r=Ls(e),s=es(n,r);s.tag=2,t!=null&&(s.callback=t),t=Fs(e,s,r),t!==null&&(br(t,e,r,n),Cc(t,e,r))}};function Mg(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Xo(n,r)||!Xo(s,i):!0}function ob(e,t,n){var r=!1,s=Vs,i=t.contextType;return typeof i=="object"&&i!==null?i=lr(i):(s=On(t)?_a:hn.current,r=t.contextTypes,i=(r=r!=null)?yi(e,s):Vs),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Tg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sd.enqueueReplaceState(t,t.state,null)}function pf(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Rh(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=lr(i):(i=On(t)?_a:hn.current,s.context=yi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(hf(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&sd.enqueueReplaceState(s,s.state,null),uu(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ji(e,t){try{var n="",r=t;do n+=Lj(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function am(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var c_=typeof WeakMap=="function"?WeakMap:Map;function lb(e,t,n){n=es(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){pu||(pu=!0,kf=r),gf(e,t)},n}function cb(e,t,n){n=es(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){gf(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gf(e,t),typeof r!="function"&&(As===null?As=new Set([this]):As.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Og(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new c_;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=j_.bind(null,e,t,n),t.then(e,e))}function Fg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ag(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=es(-1,1),t.tag=2,Fs(n,t,1))),n.lanes|=1),e)}var u_=ms.ReactCurrentOwner,Mn=!1;function vn(e,t,n,r){t.child=e===null?Iy(t,null,n,r):wi(t,e.child,n,r)}function Lg(e,t,n,r,s){n=n.render;var i=t.ref;return ui(t,s),r=Bh(e,t,n,r,i,s),n=Vh(),e!==null&&!Mn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,cs(e,t,s)):(kt&&n&&Eh(t),t.flags|=1,vn(e,t,r,s),t.child)}function Rg(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Zh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,ub(e,t,i,r,s)):(e=Fc(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xo,n(o,r)&&e.ref===t.ref)return cs(e,t,s)}return t.flags|=1,e=Rs(i,r),e.ref=t.ref,e.return=t,t.child=e}function ub(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Xo(i,r)&&e.ref===t.ref)if(Mn=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Mn=!0);else return t.lanes=e.lanes,cs(e,t,s)}return xf(e,t,n,r,s)}function db(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(ai,$n),$n|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wt(ai,$n),$n|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,wt(ai,$n),$n|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,wt(ai,$n),$n|=r;return vn(e,t,s,n),t.child}function mb(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xf(e,t,n,r,s){var i=On(n)?_a:hn.current;return i=yi(t,i),ui(t,s),n=Bh(e,t,n,r,i,s),r=Vh(),e!==null&&!Mn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,cs(e,t,s)):(kt&&r&&Eh(t),t.flags|=1,vn(e,t,n,s),t.child)}function Ig(e,t,n,r,s){if(On(n)){var i=!0;au(t)}else i=!1;if(ui(t,s),t.stateNode===null)Mc(e,t),ob(t,n,r),pf(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=lr(u):(u=On(n)?_a:hn.current,u=yi(t,u));var m=n.getDerivedStateFromProps,h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Tg(t,o,r,u),ws=!1;var f=t.memoizedState;o.state=f,uu(t,r,o,s),c=t.memoizedState,l!==r||f!==c||Tn.current||ws?(typeof m=="function"&&(hf(t,n,m,r),c=t.memoizedState),(l=ws||Mg(t,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,zy(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:pr(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=lr(c):(c=On(n)?_a:hn.current,c=yi(t,c));var b=n.getDerivedStateFromProps;(m=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Tg(t,o,r,c),ws=!1,f=t.memoizedState,o.state=f,uu(t,r,o,s);var v=t.memoizedState;l!==h||f!==v||Tn.current||ws?(typeof b=="function"&&(hf(t,n,b,r),v=t.memoizedState),(u=ws||Mg(t,n,u,r,f,v,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return vf(e,t,n,r,i,s)}function vf(e,t,n,r,s,i){mb(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&jg(t,n,!1),cs(e,t,i);r=t.stateNode,u_.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,l,i)):vn(e,t,l,i),t.memoizedState=r.state,s&&jg(t,n,!0),t.child}function fb(e){var t=e.stateNode;t.pendingContext?Ng(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ng(e,t.context,!1),Ih(e,t.containerInfo)}function $g(e,t,n,r,s){return bi(),Th(s),t.flags|=256,vn(e,t,n,r),t.child}var yf={dehydrated:null,treeContext:null,retryLane:0};function bf(e){return{baseLanes:e,cachePool:null,transitions:null}}function hb(e,t,n){var r=t.pendingProps,s=Ct.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),wt(Ct,s&1),e===null)return mf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=od(o,r,0,null),e=va(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=bf(n),t.memoizedState=yf,e):Yh(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return d_(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Rs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Rs(l,i):(i=va(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?bf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=yf,r}return i=e.child,e=i.sibling,r=Rs(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Yh(e,t){return t=od({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ql(e,t,n,r){return r!==null&&Th(r),wi(t,e.child,null,n),e=Yh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function d_(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=am(Error(Ce(422))),Ql(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=od({mode:"visible",children:r.children},s,0,null),i=va(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&wi(t,e.child,null,o),t.child.memoizedState=bf(o),t.memoizedState=yf,i);if(!(t.mode&1))return Ql(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Ce(419)),r=am(i,r,void 0),Ql(e,t,o,r)}if(l=(o&e.childLanes)!==0,Mn||l){if(r=Xt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ls(e,s),br(r,e,s,-1))}return Xh(),r=am(Error(Ce(421))),Ql(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=__.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,zn=Os(s.nextSibling),Hn=t,kt=!0,xr=null,e!==null&&(tr[nr++]=Xr,tr[nr++]=Zr,tr[nr++]=Sa,Xr=e.id,Zr=e.overflow,Sa=t),t=Yh(t,r.children),t.flags|=4096,t)}function zg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ff(e.return,t,n)}function im(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function pb(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(vn(e,t,r.children,n),r=Ct.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zg(e,n,t);else if(e.tag===19)zg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(wt(Ct,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&du(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),im(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&du(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}im(t,!0,n,null,i);break;case"together":im(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Da|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ce(153));if(t.child!==null){for(e=t.child,n=Rs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Rs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function m_(e,t,n){switch(t.tag){case 3:fb(t),bi();break;case 5:Hy(t);break;case 1:On(t.type)&&au(t);break;case 4:Ih(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;wt(lu,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(wt(Ct,Ct.current&1),t.flags|=128,null):n&t.child.childLanes?hb(e,t,n):(wt(Ct,Ct.current&1),e=cs(e,t,n),e!==null?e.sibling:null);wt(Ct,Ct.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return pb(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),wt(Ct,Ct.current),r)break;return null;case 22:case 23:return t.lanes=0,db(e,t,n)}return cs(e,t,n)}var gb,wf,xb,vb;gb=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wf=function(){};xb=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ca(zr.current);var i=null;switch(n){case"input":s=Bm(e,s),r=Bm(e,r),i=[];break;case"select":s=Tt({},s,{value:void 0}),r=Tt({},r,{value:void 0}),i=[];break;case"textarea":s=Wm(e,s),r=Wm(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ru)}qm(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&jt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};vb=function(e,t,n,r){n!==r&&(t.flags|=4)};function Zi(e,t){if(!kt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ln(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function f_(e,t,n){var r=t.pendingProps;switch(Mh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(t),null;case 1:return On(t.type)&&su(),ln(t),null;case 3:return r=t.stateNode,Ni(),St(Tn),St(hn),zh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ql(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xr!==null&&(Pf(xr),xr=null))),wf(e,t),ln(t),null;case 5:$h(t);var s=ca(rl.current);if(n=t.type,e!==null&&t.stateNode!=null)xb(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ce(166));return ln(t),null}if(e=ca(zr.current),ql(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Or]=t,r[tl]=i,e=(t.mode&1)!==0,n){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(s=0;s<vo.length;s++)jt(vo[s],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":Qp(r,i),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},jt("invalid",r);break;case"textarea":Jp(r,i),jt("invalid",r)}qm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Yl(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Yl(r.textContent,l,e),s=["children",""+l]):Wo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&jt("scroll",r)}switch(n){case"input":Il(r),Gp(r,i,!0);break;case"textarea":Il(r),Xp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ru)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Yv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Or]=t,e[tl]=r,gb(e,t,!1,!1),t.stateNode=e;e:{switch(o=Km(n,r),n){case"dialog":jt("cancel",e),jt("close",e),s=r;break;case"iframe":case"object":case"embed":jt("load",e),s=r;break;case"video":case"audio":for(s=0;s<vo.length;s++)jt(vo[s],e);s=r;break;case"source":jt("error",e),s=r;break;case"img":case"image":case"link":jt("error",e),jt("load",e),s=r;break;case"details":jt("toggle",e),s=r;break;case"input":Qp(e,r),s=Bm(e,r),jt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Tt({},r,{value:void 0}),jt("invalid",e);break;case"textarea":Jp(e,r),s=Wm(e,r),jt("invalid",e);break;default:s=r}qm(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Qv(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qv(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Yo(e,c):typeof c=="number"&&Yo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&jt("scroll",e):c!=null&&gh(e,i,c,o))}switch(n){case"input":Il(e),Gp(e,r,!1);break;case"textarea":Il(e),Xp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Bs(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ii(e,!!r.multiple,i,!1):r.defaultValue!=null&&ii(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ru)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ln(t),null;case 6:if(e&&t.stateNode!=null)vb(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ce(166));if(n=ca(rl.current),ca(zr.current),ql(t)){if(r=t.stateNode,n=t.memoizedProps,r[Or]=t,(i=r.nodeValue!==n)&&(e=Hn,e!==null))switch(e.tag){case 3:Yl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Yl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Or]=t,t.stateNode=r}return ln(t),null;case 13:if(St(Ct),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kt&&zn!==null&&t.mode&1&&!(t.flags&128))Ly(),bi(),t.flags|=98560,i=!1;else if(i=ql(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Ce(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ce(317));i[Or]=t}else bi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ln(t),i=!1}else xr!==null&&(Pf(xr),xr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ct.current&1?Kt===0&&(Kt=3):Xh())),t.updateQueue!==null&&(t.flags|=4),ln(t),null);case 4:return Ni(),wf(e,t),e===null&&Zo(t.stateNode.containerInfo),ln(t),null;case 10:return Ah(t.type._context),ln(t),null;case 17:return On(t.type)&&su(),ln(t),null;case 19:if(St(Ct),i=t.memoizedState,i===null)return ln(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Zi(i,!1);else{if(Kt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=du(e),o!==null){for(t.flags|=128,Zi(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return wt(Ct,Ct.current&1|2),t.child}e=e.sibling}i.tail!==null&&Rt()>_i&&(t.flags|=128,r=!0,Zi(i,!1),t.lanes=4194304)}else{if(!r)if(e=du(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!kt)return ln(t),null}else 2*Rt()-i.renderingStartTime>_i&&n!==1073741824&&(t.flags|=128,r=!0,Zi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Rt(),t.sibling=null,n=Ct.current,wt(Ct,r?n&1|2:n&1),t):(ln(t),null);case 22:case 23:return Jh(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?$n&1073741824&&(ln(t),t.subtreeFlags&6&&(t.flags|=8192)):ln(t),null;case 24:return null;case 25:return null}throw Error(Ce(156,t.tag))}function h_(e,t){switch(Mh(t),t.tag){case 1:return On(t.type)&&su(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ni(),St(Tn),St(hn),zh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $h(t),null;case 13:if(St(Ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ce(340));bi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return St(Ct),null;case 4:return Ni(),null;case 10:return Ah(t.type._context),null;case 22:case 23:return Jh(),null;case 24:return null;default:return null}}var Gl=!1,un=!1,p_=typeof WeakSet=="function"?WeakSet:Set,Re=null;function si(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ot(e,t,r)}else n.current=null}function Nf(e,t,n){try{n()}catch(r){Ot(e,t,r)}}var Hg=!1;function g_(e,t){if(sf=eu,e=jy(),Ph(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,m=0,h=e,f=null;t:for(;;){for(var b;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(b=h.firstChild)!==null;)f=h,h=b;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===i&&++m===r&&(c=o),(b=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=b}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(af={focusedElem:e,selectionRange:n},eu=!1,Re=t;Re!==null;)if(t=Re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Re=e;else for(;Re!==null;){t=Re;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var D=v.memoizedProps,g=v.memoizedState,w=t.stateNode,y=w.getSnapshotBeforeUpdate(t.elementType===t.type?D:pr(t.type,D),g);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(j){Ot(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Re=e;break}Re=t.return}return v=Hg,Hg=!1,v}function Oo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Nf(t,n,i)}s=s.next}while(s!==r)}}function ad(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function yb(e){var t=e.alternate;t!==null&&(e.alternate=null,yb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Or],delete t[tl],delete t[cf],delete t[X1],delete t[Z1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bb(e){return e.tag===5||e.tag===3||e.tag===4}function Bg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _f(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ru));else if(r!==4&&(e=e.child,e!==null))for(_f(e,t,n),e=e.sibling;e!==null;)_f(e,t,n),e=e.sibling}function Sf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Sf(e,t,n),e=e.sibling;e!==null;)Sf(e,t,n),e=e.sibling}var nn=null,gr=!1;function gs(e,t,n){for(n=n.child;n!==null;)wb(e,t,n),n=n.sibling}function wb(e,t,n){if($r&&typeof $r.onCommitFiberUnmount=="function")try{$r.onCommitFiberUnmount(Ju,n)}catch{}switch(n.tag){case 5:un||si(n,t);case 6:var r=nn,s=gr;nn=null,gs(e,t,n),nn=r,gr=s,nn!==null&&(gr?(e=nn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nn.removeChild(n.stateNode));break;case 18:nn!==null&&(gr?(e=nn,n=n.stateNode,e.nodeType===8?Zd(e.parentNode,n):e.nodeType===1&&Zd(e,n),Go(e)):Zd(nn,n.stateNode));break;case 4:r=nn,s=gr,nn=n.stateNode.containerInfo,gr=!0,gs(e,t,n),nn=r,gr=s;break;case 0:case 11:case 14:case 15:if(!un&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Nf(n,t,o),s=s.next}while(s!==r)}gs(e,t,n);break;case 1:if(!un&&(si(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ot(n,t,l)}gs(e,t,n);break;case 21:gs(e,t,n);break;case 22:n.mode&1?(un=(r=un)||n.memoizedState!==null,gs(e,t,n),un=r):gs(e,t,n);break;default:gs(e,t,n)}}function Vg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new p_),t.forEach(function(r){var s=S_.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function fr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:nn=l.stateNode,gr=!1;break e;case 3:nn=l.stateNode.containerInfo,gr=!0;break e;case 4:nn=l.stateNode.containerInfo,gr=!0;break e}l=l.return}if(nn===null)throw Error(Ce(160));wb(i,o,s),nn=null,gr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ot(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nb(t,e),t=t.sibling}function Nb(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fr(t,e),Sr(e),r&4){try{Oo(3,e,e.return),ad(3,e)}catch(D){Ot(e,e.return,D)}try{Oo(5,e,e.return)}catch(D){Ot(e,e.return,D)}}break;case 1:fr(t,e),Sr(e),r&512&&n!==null&&si(n,n.return);break;case 5:if(fr(t,e),Sr(e),r&512&&n!==null&&si(n,n.return),e.flags&32){var s=e.stateNode;try{Yo(s,"")}catch(D){Ot(e,e.return,D)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Uv(s,i),Km(l,o);var u=Km(l,i);for(o=0;o<c.length;o+=2){var m=c[o],h=c[o+1];m==="style"?Qv(s,h):m==="dangerouslySetInnerHTML"?qv(s,h):m==="children"?Yo(s,h):gh(s,m,h,u)}switch(l){case"input":Vm(s,i);break;case"textarea":Wv(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?ii(s,!!i.multiple,b,!1):f!==!!i.multiple&&(i.defaultValue!=null?ii(s,!!i.multiple,i.defaultValue,!0):ii(s,!!i.multiple,i.multiple?[]:"",!1))}s[tl]=i}catch(D){Ot(e,e.return,D)}}break;case 6:if(fr(t,e),Sr(e),r&4){if(e.stateNode===null)throw Error(Ce(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(D){Ot(e,e.return,D)}}break;case 3:if(fr(t,e),Sr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Go(t.containerInfo)}catch(D){Ot(e,e.return,D)}break;case 4:fr(t,e),Sr(e);break;case 13:fr(t,e),Sr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Qh=Rt())),r&4&&Vg(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(un=(u=un)||m,fr(t,e),un=u):fr(t,e),Sr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!m&&e.mode&1)for(Re=e,m=e.child;m!==null;){for(h=Re=m;Re!==null;){switch(f=Re,b=f.child,f.tag){case 0:case 11:case 14:case 15:Oo(4,f,f.return);break;case 1:si(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(D){Ot(r,n,D)}}break;case 5:si(f,f.return);break;case 22:if(f.memoizedState!==null){Wg(h);continue}}b!==null?(b.return=f,Re=b):Wg(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Kv("display",o))}catch(D){Ot(e,e.return,D)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(D){Ot(e,e.return,D)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fr(t,e),Sr(e),r&4&&Vg(e);break;case 21:break;default:fr(t,e),Sr(e)}}function Sr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(bb(n)){var r=n;break e}n=n.return}throw Error(Ce(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Yo(s,""),r.flags&=-33);var i=Bg(e);Sf(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Bg(e);_f(e,l,o);break;default:throw Error(Ce(161))}}catch(c){Ot(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function x_(e,t,n){Re=e,jb(e)}function jb(e,t,n){for(var r=(e.mode&1)!==0;Re!==null;){var s=Re,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Gl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||un;l=Gl;var u=un;if(Gl=o,(un=c)&&!u)for(Re=s;Re!==null;)o=Re,c=o.child,o.tag===22&&o.memoizedState!==null?Yg(s):c!==null?(c.return=o,Re=c):Yg(s);for(;i!==null;)Re=i,jb(i),i=i.sibling;Re=s,Gl=l,un=u}Ug(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Re=i):Ug(e)}}function Ug(e){for(;Re!==null;){var t=Re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:un||ad(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!un)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:pr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Cg(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cg(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var m=u.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&Go(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}un||t.flags&512&&jf(t)}catch(f){Ot(t,t.return,f)}}if(t===e){Re=null;break}if(n=t.sibling,n!==null){n.return=t.return,Re=n;break}Re=t.return}}function Wg(e){for(;Re!==null;){var t=Re;if(t===e){Re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Re=n;break}Re=t.return}}function Yg(e){for(;Re!==null;){var t=Re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ad(4,t)}catch(c){Ot(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ot(t,s,c)}}var i=t.return;try{jf(t)}catch(c){Ot(t,i,c)}break;case 5:var o=t.return;try{jf(t)}catch(c){Ot(t,o,c)}}}catch(c){Ot(t,t.return,c)}if(t===e){Re=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Re=l;break}Re=t.return}}var v_=Math.ceil,hu=ms.ReactCurrentDispatcher,qh=ms.ReactCurrentOwner,or=ms.ReactCurrentBatchConfig,ut=0,Xt=null,Vt=null,sn=0,$n=0,ai=Ks(0),Kt=0,ol=null,Da=0,id=0,Kh=0,Fo=null,Pn=null,Qh=0,_i=1/0,Qr=null,pu=!1,kf=null,As=null,Jl=!1,ks=null,gu=0,Ao=0,Df=null,Tc=-1,Oc=0;function Nn(){return ut&6?Rt():Tc!==-1?Tc:Tc=Rt()}function Ls(e){return e.mode&1?ut&2&&sn!==0?sn&-sn:t_.transition!==null?(Oc===0&&(Oc=oy()),Oc):(e=vt,e!==0||(e=window.event,e=e===void 0?16:hy(e.type)),e):1}function br(e,t,n,r){if(50<Ao)throw Ao=0,Df=null,Error(Ce(185));bl(e,n,r),(!(ut&2)||e!==Xt)&&(e===Xt&&(!(ut&2)&&(id|=n),Kt===4&&js(e,sn)),Fn(e,r),n===1&&ut===0&&!(t.mode&1)&&(_i=Rt()+500,nd&&Qs()))}function Fn(e,t){var n=e.callbackNode;t1(e,t);var r=Zc(e,e===Xt?sn:0);if(r===0)n!==null&&tg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&tg(n),t===1)e.tag===0?e_(qg.bind(null,e)):Oy(qg.bind(null,e)),G1(function(){!(ut&6)&&Qs()}),n=null;else{switch(ly(r)){case 1:n=wh;break;case 4:n=ay;break;case 16:n=Xc;break;case 536870912:n=iy;break;default:n=Xc}n=Mb(n,_b.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _b(e,t){if(Tc=-1,Oc=0,ut&6)throw Error(Ce(327));var n=e.callbackNode;if(di()&&e.callbackNode!==n)return null;var r=Zc(e,e===Xt?sn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xu(e,r);else{t=r;var s=ut;ut|=2;var i=kb();(Xt!==e||sn!==t)&&(Qr=null,_i=Rt()+500,xa(e,t));do try{w_();break}catch(l){Sb(e,l)}while(!0);Fh(),hu.current=i,ut=s,Vt!==null?t=0:(Xt=null,sn=0,t=Kt)}if(t!==0){if(t===2&&(s=Zm(e),s!==0&&(r=s,t=Cf(e,s))),t===1)throw n=ol,xa(e,0),js(e,r),Fn(e,Rt()),n;if(t===6)js(e,r);else{if(s=e.current.alternate,!(r&30)&&!y_(s)&&(t=xu(e,r),t===2&&(i=Zm(e),i!==0&&(r=i,t=Cf(e,i))),t===1))throw n=ol,xa(e,0),js(e,r),Fn(e,Rt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Ce(345));case 2:na(e,Pn,Qr);break;case 3:if(js(e,r),(r&130023424)===r&&(t=Qh+500-Rt(),10<t)){if(Zc(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Nn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=lf(na.bind(null,e,Pn,Qr),t);break}na(e,Pn,Qr);break;case 4:if(js(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-yr(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*v_(r/1960))-r,10<r){e.timeoutHandle=lf(na.bind(null,e,Pn,Qr),r);break}na(e,Pn,Qr);break;case 5:na(e,Pn,Qr);break;default:throw Error(Ce(329))}}}return Fn(e,Rt()),e.callbackNode===n?_b.bind(null,e):null}function Cf(e,t){var n=Fo;return e.current.memoizedState.isDehydrated&&(xa(e,t).flags|=256),e=xu(e,t),e!==2&&(t=Pn,Pn=n,t!==null&&Pf(t)),e}function Pf(e){Pn===null?Pn=e:Pn.push.apply(Pn,e)}function y_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Nr(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function js(e,t){for(t&=~Kh,t&=~id,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-yr(t),r=1<<n;e[n]=-1,t&=~r}}function qg(e){if(ut&6)throw Error(Ce(327));di();var t=Zc(e,0);if(!(t&1))return Fn(e,Rt()),null;var n=xu(e,t);if(e.tag!==0&&n===2){var r=Zm(e);r!==0&&(t=r,n=Cf(e,r))}if(n===1)throw n=ol,xa(e,0),js(e,t),Fn(e,Rt()),n;if(n===6)throw Error(Ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,na(e,Pn,Qr),Fn(e,Rt()),null}function Gh(e,t){var n=ut;ut|=1;try{return e(t)}finally{ut=n,ut===0&&(_i=Rt()+500,nd&&Qs())}}function Ca(e){ks!==null&&ks.tag===0&&!(ut&6)&&di();var t=ut;ut|=1;var n=or.transition,r=vt;try{if(or.transition=null,vt=1,e)return e()}finally{vt=r,or.transition=n,ut=t,!(ut&6)&&Qs()}}function Jh(){$n=ai.current,St(ai)}function xa(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Q1(n)),Vt!==null)for(n=Vt.return;n!==null;){var r=n;switch(Mh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&su();break;case 3:Ni(),St(Tn),St(hn),zh();break;case 5:$h(r);break;case 4:Ni();break;case 13:St(Ct);break;case 19:St(Ct);break;case 10:Ah(r.type._context);break;case 22:case 23:Jh()}n=n.return}if(Xt=e,Vt=e=Rs(e.current,null),sn=$n=t,Kt=0,ol=null,Kh=id=Da=0,Pn=Fo=null,la!==null){for(t=0;t<la.length;t++)if(n=la[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}la=null}return e}function Sb(e,t){do{var n=Vt;try{if(Fh(),Pc.current=fu,mu){for(var r=Et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}mu=!1}if(ka=0,Gt=qt=Et=null,To=!1,sl=0,qh.current=null,n===null||n.return===null){Kt=1,ol=t,Vt=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=sn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,m=l,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var f=m.alternate;f?(m.updateQueue=f.updateQueue,m.memoizedState=f.memoizedState,m.lanes=f.lanes):(m.updateQueue=null,m.memoizedState=null)}var b=Fg(o);if(b!==null){b.flags&=-257,Ag(b,o,l,i,t),b.mode&1&&Og(i,u,t),t=b,c=u;var v=t.updateQueue;if(v===null){var D=new Set;D.add(c),t.updateQueue=D}else v.add(c);break e}else{if(!(t&1)){Og(i,u,t),Xh();break e}c=Error(Ce(426))}}else if(kt&&l.mode&1){var g=Fg(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Ag(g,o,l,i,t),Th(ji(c,l));break e}}i=c=ji(c,l),Kt!==4&&(Kt=2),Fo===null?Fo=[i]:Fo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=lb(i,c,t);Dg(i,w);break e;case 1:l=c;var y=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(As===null||!As.has(_)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=cb(i,l,t);Dg(i,j);break e}}i=i.return}while(i!==null)}Cb(n)}catch(L){t=L,Vt===n&&n!==null&&(Vt=n=n.return);continue}break}while(!0)}function kb(){var e=hu.current;return hu.current=fu,e===null?fu:e}function Xh(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),Xt===null||!(Da&268435455)&&!(id&268435455)||js(Xt,sn)}function xu(e,t){var n=ut;ut|=2;var r=kb();(Xt!==e||sn!==t)&&(Qr=null,xa(e,t));do try{b_();break}catch(s){Sb(e,s)}while(!0);if(Fh(),ut=n,hu.current=r,Vt!==null)throw Error(Ce(261));return Xt=null,sn=0,Kt}function b_(){for(;Vt!==null;)Db(Vt)}function w_(){for(;Vt!==null&&!Yj();)Db(Vt)}function Db(e){var t=Eb(e.alternate,e,$n);e.memoizedProps=e.pendingProps,t===null?Cb(e):Vt=t,qh.current=null}function Cb(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=h_(n,t),n!==null){n.flags&=32767,Vt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Kt=6,Vt=null;return}}else if(n=f_(n,t,$n),n!==null){Vt=n;return}if(t=t.sibling,t!==null){Vt=t;return}Vt=t=e}while(t!==null);Kt===0&&(Kt=5)}function na(e,t,n){var r=vt,s=or.transition;try{or.transition=null,vt=1,N_(e,t,n,r)}finally{or.transition=s,vt=r}return null}function N_(e,t,n,r){do di();while(ks!==null);if(ut&6)throw Error(Ce(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ce(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(n1(e,i),e===Xt&&(Vt=Xt=null,sn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jl||(Jl=!0,Mb(Xc,function(){return di(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=or.transition,or.transition=null;var o=vt;vt=1;var l=ut;ut|=4,qh.current=null,g_(e,n),Nb(n,e),B1(af),eu=!!sf,af=sf=null,e.current=n,x_(n),qj(),ut=l,vt=o,or.transition=i}else e.current=n;if(Jl&&(Jl=!1,ks=e,gu=s),i=e.pendingLanes,i===0&&(As=null),Gj(n.stateNode),Fn(e,Rt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(pu)throw pu=!1,e=kf,kf=null,e;return gu&1&&e.tag!==0&&di(),i=e.pendingLanes,i&1?e===Df?Ao++:(Ao=0,Df=e):Ao=0,Qs(),null}function di(){if(ks!==null){var e=ly(gu),t=or.transition,n=vt;try{if(or.transition=null,vt=16>e?16:e,ks===null)var r=!1;else{if(e=ks,ks=null,gu=0,ut&6)throw Error(Ce(331));var s=ut;for(ut|=4,Re=e.current;Re!==null;){var i=Re,o=i.child;if(Re.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Re=u;Re!==null;){var m=Re;switch(m.tag){case 0:case 11:case 15:Oo(8,m,i)}var h=m.child;if(h!==null)h.return=m,Re=h;else for(;Re!==null;){m=Re;var f=m.sibling,b=m.return;if(yb(m),m===u){Re=null;break}if(f!==null){f.return=b,Re=f;break}Re=b}}}var v=i.alternate;if(v!==null){var D=v.child;if(D!==null){v.child=null;do{var g=D.sibling;D.sibling=null,D=g}while(D!==null)}}Re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Re=o;else e:for(;Re!==null;){if(i=Re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oo(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Re=w;break e}Re=i.return}}var y=e.current;for(Re=y;Re!==null;){o=Re;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Re=_;else e:for(o=y;Re!==null;){if(l=Re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ad(9,l)}}catch(L){Ot(l,l.return,L)}if(l===o){Re=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Re=j;break e}Re=l.return}}if(ut=s,Qs(),$r&&typeof $r.onPostCommitFiberRoot=="function")try{$r.onPostCommitFiberRoot(Ju,e)}catch{}r=!0}return r}finally{vt=n,or.transition=t}}return!1}function Kg(e,t,n){t=ji(n,t),t=lb(e,t,1),e=Fs(e,t,1),t=Nn(),e!==null&&(bl(e,1,t),Fn(e,t))}function Ot(e,t,n){if(e.tag===3)Kg(e,e,n);else for(;t!==null;){if(t.tag===3){Kg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(As===null||!As.has(r))){e=ji(n,e),e=cb(t,e,1),t=Fs(t,e,1),e=Nn(),t!==null&&(bl(t,1,e),Fn(t,e));break}}t=t.return}}function j_(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Nn(),e.pingedLanes|=e.suspendedLanes&n,Xt===e&&(sn&n)===n&&(Kt===4||Kt===3&&(sn&130023424)===sn&&500>Rt()-Qh?xa(e,0):Kh|=n),Fn(e,t)}function Pb(e,t){t===0&&(e.mode&1?(t=Hl,Hl<<=1,!(Hl&130023424)&&(Hl=4194304)):t=1);var n=Nn();e=ls(e,t),e!==null&&(bl(e,t,n),Fn(e,n))}function __(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Pb(e,n)}function S_(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(t),Pb(e,n)}var Eb;Eb=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tn.current)Mn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mn=!1,m_(e,t,n);Mn=!!(e.flags&131072)}else Mn=!1,kt&&t.flags&1048576&&Fy(t,ou,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Mc(e,t),e=t.pendingProps;var s=yi(t,hn.current);ui(t,n),s=Bh(null,t,r,e,s,n);var i=Vh();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,On(r)?(i=!0,au(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rh(t),s.updater=sd,t.stateNode=s,s._reactInternals=t,pf(t,r,e,n),t=vf(null,t,r,!0,i,n)):(t.tag=0,kt&&i&&Eh(t),vn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Mc(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=D_(r),e=pr(r,e),s){case 0:t=xf(null,t,r,e,n);break e;case 1:t=Ig(null,t,r,e,n);break e;case 11:t=Lg(null,t,r,e,n);break e;case 14:t=Rg(null,t,r,pr(r.type,e),n);break e}throw Error(Ce(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:pr(r,s),xf(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:pr(r,s),Ig(e,t,r,s,n);case 3:e:{if(fb(t),e===null)throw Error(Ce(387));r=t.pendingProps,i=t.memoizedState,s=i.element,zy(e,t),uu(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ji(Error(Ce(423)),t),t=$g(e,t,r,n,s);break e}else if(r!==s){s=ji(Error(Ce(424)),t),t=$g(e,t,r,n,s);break e}else for(zn=Os(t.stateNode.containerInfo.firstChild),Hn=t,kt=!0,xr=null,n=Iy(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bi(),r===s){t=cs(e,t,n);break e}vn(e,t,r,n)}t=t.child}return t;case 5:return Hy(t),e===null&&mf(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,of(r,s)?o=null:i!==null&&of(r,i)&&(t.flags|=32),mb(e,t),vn(e,t,o,n),t.child;case 6:return e===null&&mf(t),null;case 13:return hb(e,t,n);case 4:return Ih(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=wi(t,null,r,n):vn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:pr(r,s),Lg(e,t,r,s,n);case 7:return vn(e,t,t.pendingProps,n),t.child;case 8:return vn(e,t,t.pendingProps.children,n),t.child;case 12:return vn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,wt(lu,r._currentValue),r._currentValue=o,i!==null)if(Nr(i.value,o)){if(i.children===s.children&&!Tn.current){t=cs(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=es(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var m=u.pending;m===null?c.next=c:(c.next=m.next,m.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ff(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ce(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ff(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ui(t,n),s=lr(s),r=r(s),t.flags|=1,vn(e,t,r,n),t.child;case 14:return r=t.type,s=pr(r,t.pendingProps),s=pr(r.type,s),Rg(e,t,r,s,n);case 15:return ub(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:pr(r,s),Mc(e,t),t.tag=1,On(r)?(e=!0,au(t)):e=!1,ui(t,n),ob(t,r,s),pf(t,r,s,n),vf(null,t,r,!0,e,n);case 19:return pb(e,t,n);case 22:return db(e,t,n)}throw Error(Ce(156,t.tag))};function Mb(e,t){return sy(e,t)}function k_(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(e,t,n,r){return new k_(e,t,n,r)}function Zh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function D_(e){if(typeof e=="function")return Zh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vh)return 11;if(e===yh)return 14}return 2}function Rs(e,t){var n=e.alternate;return n===null?(n=sr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Zh(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Qa:return va(n.children,s,i,t);case xh:o=8,s|=8;break;case Im:return e=sr(12,n,t,s|2),e.elementType=Im,e.lanes=i,e;case $m:return e=sr(13,n,t,s),e.elementType=$m,e.lanes=i,e;case zm:return e=sr(19,n,t,s),e.elementType=zm,e.lanes=i,e;case Hv:return od(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $v:o=10;break e;case zv:o=9;break e;case vh:o=11;break e;case yh:o=14;break e;case bs:o=16,r=null;break e}throw Error(Ce(130,e==null?e:typeof e,""))}return t=sr(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function va(e,t,n,r){return e=sr(7,e,r,t),e.lanes=n,e}function od(e,t,n,r){return e=sr(22,e,r,t),e.elementType=Hv,e.lanes=n,e.stateNode={isHidden:!1},e}function om(e,t,n){return e=sr(6,e,null,t),e.lanes=n,e}function lm(e,t,n){return t=sr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function C_(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bd(0),this.expirationTimes=Bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ep(e,t,n,r,s,i,o,l,c){return e=new C_(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=sr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rh(i),e}function P_(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ka,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Tb(e){if(!e)return Vs;e=e._reactInternals;e:{if(Aa(e)!==e||e.tag!==1)throw Error(Ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(On(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ce(171))}if(e.tag===1){var n=e.type;if(On(n))return Ty(e,n,t)}return t}function Ob(e,t,n,r,s,i,o,l,c){return e=ep(n,r,!0,e,s,i,o,l,c),e.context=Tb(null),n=e.current,r=Nn(),s=Ls(n),i=es(r,s),i.callback=t??null,Fs(n,i,s),e.current.lanes=s,bl(e,s,r),Fn(e,r),e}function ld(e,t,n,r){var s=t.current,i=Nn(),o=Ls(s);return n=Tb(n),t.context===null?t.context=n:t.pendingContext=n,t=es(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Fs(s,t,o),e!==null&&(br(e,s,o,i),Cc(e,s,o)),o}function vu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Qg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function tp(e,t){Qg(e,t),(e=e.alternate)&&Qg(e,t)}function E_(){return null}var Fb=typeof reportError=="function"?reportError:function(e){console.error(e)};function np(e){this._internalRoot=e}cd.prototype.render=np.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ce(409));ld(e,t,null,null)};cd.prototype.unmount=np.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ca(function(){ld(null,e,null,null)}),t[os]=null}};function cd(e){this._internalRoot=e}cd.prototype.unstable_scheduleHydration=function(e){if(e){var t=dy();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ns.length&&t!==0&&t<Ns[n].priority;n++);Ns.splice(n,0,e),n===0&&fy(e)}};function rp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ud(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gg(){}function M_(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=vu(o);i.call(u)}}var o=Ob(t,r,e,0,null,!1,!1,"",Gg);return e._reactRootContainer=o,e[os]=o.current,Zo(e.nodeType===8?e.parentNode:e),Ca(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=vu(c);l.call(u)}}var c=ep(e,0,!1,null,null,!1,!1,"",Gg);return e._reactRootContainer=c,e[os]=c.current,Zo(e.nodeType===8?e.parentNode:e),Ca(function(){ld(t,c,n,r)}),c}function dd(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=vu(o);l.call(c)}}ld(t,o,e,s)}else o=M_(n,t,e,s,r);return vu(o)}cy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xo(t.pendingLanes);n!==0&&(Nh(t,n|1),Fn(t,Rt()),!(ut&6)&&(_i=Rt()+500,Qs()))}break;case 13:Ca(function(){var r=ls(e,1);if(r!==null){var s=Nn();br(r,e,1,s)}}),tp(e,1)}};jh=function(e){if(e.tag===13){var t=ls(e,134217728);if(t!==null){var n=Nn();br(t,e,134217728,n)}tp(e,134217728)}};uy=function(e){if(e.tag===13){var t=Ls(e),n=ls(e,t);if(n!==null){var r=Nn();br(n,e,t,r)}tp(e,t)}};dy=function(){return vt};my=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}};Gm=function(e,t,n){switch(t){case"input":if(Vm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=td(r);if(!s)throw Error(Ce(90));Vv(r),Vm(r,s)}}}break;case"textarea":Wv(e,n);break;case"select":t=n.value,t!=null&&ii(e,!!n.multiple,t,!1)}};Xv=Gh;Zv=Ca;var T_={usingClientEntryPoint:!1,Events:[Nl,Za,td,Gv,Jv,Gh]},eo={findFiberByHostInstance:oa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O_={bundleType:eo.bundleType,version:eo.version,rendererPackageName:eo.rendererPackageName,rendererConfig:eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ny(e),e===null?null:e.stateNode},findFiberByHostInstance:eo.findFiberByHostInstance||E_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{Ju=Xl.inject(O_),$r=Xl}catch{}}Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T_;Un.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rp(t))throw Error(Ce(200));return P_(e,t,null,n)};Un.createRoot=function(e,t){if(!rp(e))throw Error(Ce(299));var n=!1,r="",s=Fb;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ep(e,1,!1,null,null,n,!1,r,s),e[os]=t.current,Zo(e.nodeType===8?e.parentNode:e),new np(t)};Un.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ce(188)):(e=Object.keys(e).join(","),Error(Ce(268,e)));return e=ny(t),e=e===null?null:e.stateNode,e};Un.flushSync=function(e){return Ca(e)};Un.hydrate=function(e,t,n){if(!ud(t))throw Error(Ce(200));return dd(null,e,t,!0,n)};Un.hydrateRoot=function(e,t,n){if(!rp(e))throw Error(Ce(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Fb;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Ob(t,null,e,1,n??null,s,!1,i,o),e[os]=t.current,Zo(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new cd(t)};Un.render=function(e,t,n){if(!ud(t))throw Error(Ce(200));return dd(null,e,t,!1,n)};Un.unmountComponentAtNode=function(e){if(!ud(e))throw Error(Ce(40));return e._reactRootContainer?(Ca(function(){dd(null,null,e,!1,function(){e._reactRootContainer=null,e[os]=null})}),!0):!1};Un.unstable_batchedUpdates=Gh;Un.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ud(n))throw Error(Ce(200));if(e==null||e._reactInternals===void 0)throw Error(Ce(38));return dd(e,t,n,!1,r)};Un.version="18.3.1-next-f1338f8080-20240426";function Ab(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ab)}catch(e){console.error(e)}}Ab(),Av.exports=Un;var sp=Av.exports;const F_=lh(sp);var Lb,Jg=sp;Lb=Jg.createRoot,Jg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ll.apply(this,arguments)}var Ds;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ds||(Ds={}));const Xg="popstate";function A_(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:o,hash:l}=r.location;return Ef("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:yu(s)}return R_(t,n,null,e)}function Mt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Rb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function L_(){return Math.random().toString(36).substr(2,8)}function Zg(e,t){return{usr:e.state,key:e.key,idx:t}}function Ef(e,t,n,r){return n===void 0&&(n=null),ll({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?zi(t):t,{state:n,key:t&&t.key||r||L_()})}function yu(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function zi(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function R_(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Ds.Pop,c=null,u=m();u==null&&(u=0,o.replaceState(ll({},o.state,{idx:u}),""));function m(){return(o.state||{idx:null}).idx}function h(){l=Ds.Pop;let g=m(),w=g==null?null:g-u;u=g,c&&c({action:l,location:D.location,delta:w})}function f(g,w){l=Ds.Push;let y=Ef(D.location,g,w);u=m()+1;let _=Zg(y,u),j=D.createHref(y);try{o.pushState(_,"",j)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(j)}i&&c&&c({action:l,location:D.location,delta:1})}function b(g,w){l=Ds.Replace;let y=Ef(D.location,g,w);u=m();let _=Zg(y,u),j=D.createHref(y);o.replaceState(_,"",j),i&&c&&c({action:l,location:D.location,delta:0})}function v(g){let w=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof g=="string"?g:yu(g);return y=y.replace(/ $/,"%20"),Mt(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let D={get action(){return l},get location(){return e(s,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Xg,h),c=g,()=>{s.removeEventListener(Xg,h),c=null}},createHref(g){return t(s,g)},createURL:v,encodeLocation(g){let w=v(g);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:b,go(g){return o.go(g)}};return D}var ex;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ex||(ex={}));function I_(e,t,n){return n===void 0&&(n="/"),$_(e,t,n)}function $_(e,t,n,r){let s=typeof t=="string"?zi(t):t,i=Si(s.pathname||"/",n);if(i==null)return null;let o=Ib(e);z_(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=J_(i);l=Q_(o[c],u)}return l}function Ib(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Mt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Is([r,c.relativePath]),m=n.concat(c);i.children&&i.children.length>0&&(Mt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Ib(i.children,t,m,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:q_(u,i.index),routesMeta:m})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of $b(i.path))s(i,o,c)}),t}function $b(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=$b(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function z_(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:K_(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const H_=/^:[\w-]+$/,B_=3,V_=2,U_=1,W_=10,Y_=-2,tx=e=>e==="*";function q_(e,t){let n=e.split("/"),r=n.length;return n.some(tx)&&(r+=Y_),t&&(r+=V_),n.filter(s=>!tx(s)).reduce((s,i)=>s+(H_.test(i)?B_:i===""?U_:W_),r)}function K_(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Q_(e,t,n){let{routesMeta:r}=e,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,m=i==="/"?t:t.slice(i.length)||"/",h=Mf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},m),f=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Is([i,h.pathname]),pathnameBase:tS(Is([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Is([i,h.pathnameBase]))}return o}function Mf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=G_(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,m,h)=>{let{paramName:f,isOptional:b}=m;if(f==="*"){let D=l[h]||"";o=i.slice(0,i.length-D.length).replace(/(.)\/+$/,"$1")}const v=l[h];return b&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function G_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Rb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function J_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Rb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Si(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function X_(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?zi(e):e;return{pathname:n?n.startsWith("/")?n:Z_(n,t):t,search:nS(r),hash:rS(s)}}function Z_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function cm(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ap(e,t){let n=eS(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ip(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=zi(e):(s=ll({},e),Mt(!s.pathname||!s.pathname.includes("?"),cm("?","pathname","search",s)),Mt(!s.pathname||!s.pathname.includes("#"),cm("#","pathname","hash",s)),Mt(!s.search||!s.search.includes("#"),cm("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=X_(s,l),u=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||m)&&(c.pathname+="/"),c}const Is=e=>e.join("/").replace(/\/\/+/g,"/"),tS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function sS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const zb=["post","put","patch","delete"];new Set(zb);const aS=["get",...zb];new Set(aS);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cl.apply(this,arguments)}const md=E.createContext(null),Hb=E.createContext(null),fs=E.createContext(null),fd=E.createContext(null),hs=E.createContext({outlet:null,matches:[],isDataRoute:!1}),Bb=E.createContext(null);function iS(e,t){let{relative:n}=t===void 0?{}:t;Hi()||Mt(!1);let{basename:r,navigator:s}=E.useContext(fs),{hash:i,pathname:o,search:l}=pd(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Is([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Hi(){return E.useContext(fd)!=null}function Gs(){return Hi()||Mt(!1),E.useContext(fd).location}function Vb(e){E.useContext(fs).static||E.useLayoutEffect(e)}function hd(){let{isDataRoute:e}=E.useContext(hs);return e?wS():oS()}function oS(){Hi()||Mt(!1);let e=E.useContext(md),{basename:t,future:n,navigator:r}=E.useContext(fs),{matches:s}=E.useContext(hs),{pathname:i}=Gs(),o=JSON.stringify(ap(s,n.v7_relativeSplatPath)),l=E.useRef(!1);return Vb(()=>{l.current=!0}),E.useCallback(function(u,m){if(m===void 0&&(m={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=ip(u,JSON.parse(o),i,m.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Is([t,h.pathname])),(m.replace?r.replace:r.push)(h,m.state,m)},[t,r,o,i,e])}const lS=E.createContext(null);function cS(e){let t=E.useContext(hs).outlet;return t&&E.createElement(lS.Provider,{value:e},t)}function pd(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=E.useContext(fs),{matches:s}=E.useContext(hs),{pathname:i}=Gs(),o=JSON.stringify(ap(s,r.v7_relativeSplatPath));return E.useMemo(()=>ip(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function uS(e,t){return dS(e,t)}function dS(e,t,n,r){Hi()||Mt(!1);let{navigator:s,static:i}=E.useContext(fs),{matches:o}=E.useContext(hs),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let m=Gs(),h;if(t){var f;let w=typeof t=="string"?zi(t):t;u==="/"||(f=w.pathname)!=null&&f.startsWith(u)||Mt(!1),h=w}else h=m;let b=h.pathname||"/",v=b;if(u!=="/"){let w=u.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(w.length).join("/")}let D=I_(e,{pathname:v}),g=gS(D&&D.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Is([u,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Is([u,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,n,r);return t&&g?E.createElement(fd.Provider,{value:{location:cl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ds.Pop}},g):g}function mS(){let e=bS(),t=sS(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),n?E.createElement("pre",{style:s},n):null,null)}const fS=E.createElement(mS,null);class hS extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?E.createElement(hs.Provider,{value:this.props.routeContext},E.createElement(Bb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pS(e){let{routeContext:t,match:n,children:r}=e,s=E.useContext(md);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(hs.Provider,{value:t},r)}function gS(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let m=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);m>=0||Mt(!1),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let h=o[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=m),h.route.id){let{loaderData:f,errors:b}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!b||b[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((m,h,f)=>{let b,v=!1,D=null,g=null;n&&(b=l&&h.route.id?l[h.route.id]:void 0,D=h.route.errorElement||fS,c&&(u<0&&f===0?(NS("route-fallback"),v=!0,g=null):u===f&&(v=!0,g=h.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,f+1)),y=()=>{let _;return b?_=D:v?_=g:h.route.Component?_=E.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=m,E.createElement(pS,{match:h,routeContext:{outlet:m,matches:w,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?E.createElement(hS,{location:n.location,revalidation:n.revalidation,component:D,error:b,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var Ub=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ub||{}),Wb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wb||{});function xS(e){let t=E.useContext(md);return t||Mt(!1),t}function vS(e){let t=E.useContext(Hb);return t||Mt(!1),t}function yS(e){let t=E.useContext(hs);return t||Mt(!1),t}function Yb(e){let t=yS(),n=t.matches[t.matches.length-1];return n.route.id||Mt(!1),n.route.id}function bS(){var e;let t=E.useContext(Bb),n=vS(),r=Yb();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function wS(){let{router:e}=xS(Ub.UseNavigateStable),t=Yb(Wb.UseNavigateStable),n=E.useRef(!1);return Vb(()=>{n.current=!0}),E.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,cl({fromRouteId:t},i)))},[e,t])}const nx={};function NS(e,t,n){nx[e]||(nx[e]=!0)}function jS(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function qb(e){let{to:t,replace:n,state:r,relative:s}=e;Hi()||Mt(!1);let{future:i,static:o}=E.useContext(fs),{matches:l}=E.useContext(hs),{pathname:c}=Gs(),u=hd(),m=ip(t,ap(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(m);return E.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function Kb(e){return cS(e.context)}function Bt(e){Mt(!1)}function _S(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Ds.Pop,navigator:i,static:o=!1,future:l}=e;Hi()&&Mt(!1);let c=t.replace(/^\/*/,"/"),u=E.useMemo(()=>({basename:c,navigator:i,static:o,future:cl({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=zi(r));let{pathname:m="/",search:h="",hash:f="",state:b=null,key:v="default"}=r,D=E.useMemo(()=>{let g=Si(m,c);return g==null?null:{location:{pathname:g,search:h,hash:f,state:b,key:v},navigationType:s}},[c,m,h,f,b,v,s]);return D==null?null:E.createElement(fs.Provider,{value:u},E.createElement(fd.Provider,{children:n,value:D}))}function SS(e){let{children:t,location:n}=e;return uS(Tf(t),n)}new Promise(()=>{});function Tf(e,t){t===void 0&&(t=[]);let n=[];return E.Children.forEach(e,(r,s)=>{if(!E.isValidElement(r))return;let i=[...t,s];if(r.type===E.Fragment){n.push.apply(n,Tf(r.props.children,i));return}r.type!==Bt&&Mt(!1),!r.props.index||!r.props.children||Mt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Tf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bu(){return bu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bu.apply(this,arguments)}function Qb(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function kS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function DS(e,t){return e.button===0&&(!t||t==="_self")&&!kS(e)}const CS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ES="6";try{window.__reactRouterVersion=ES}catch{}const MS=E.createContext({isTransitioning:!1}),TS="startTransition",rx=fh[TS];function OS(e){let{basename:t,children:n,future:r,window:s}=e,i=E.useRef();i.current==null&&(i.current=A_({window:s,v5Compat:!0}));let o=i.current,[l,c]=E.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},m=E.useCallback(h=>{u&&rx?rx(()=>c(h)):c(h)},[c,u]);return E.useLayoutEffect(()=>o.listen(m),[o,m]),E.useEffect(()=>jS(r),[r]),E.createElement(_S,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const FS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LS=E.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:m,viewTransition:h}=t,f=Qb(t,CS),{basename:b}=E.useContext(fs),v,D=!1;if(typeof u=="string"&&AS.test(u)&&(v=u,FS))try{let _=new URL(window.location.href),j=u.startsWith("//")?new URL(_.protocol+u):new URL(u),L=Si(j.pathname,b);j.origin===_.origin&&L!=null?u=L+j.search+j.hash:D=!0}catch{}let g=iS(u,{relative:s}),w=IS(u,{replace:o,state:l,target:c,preventScrollReset:m,relative:s,viewTransition:h});function y(_){r&&r(_),_.defaultPrevented||w(_)}return E.createElement("a",bu({},f,{href:v||g,onClick:D||i?r:y,ref:n,target:c}))}),um=E.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:m}=t,h=Qb(t,PS),f=pd(c,{relative:h.relative}),b=Gs(),v=E.useContext(Hb),{navigator:D,basename:g}=E.useContext(fs),w=v!=null&&$S(f)&&u===!0,y=D.encodeLocation?D.encodeLocation(f).pathname:f.pathname,_=b.pathname,j=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(_=_.toLowerCase(),j=j?j.toLowerCase():null,y=y.toLowerCase()),j&&g&&(j=Si(j,g)||j);const L=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=_===y||!o&&_.startsWith(y)&&_.charAt(L)==="/",T=j!=null&&(j===y||!o&&j.startsWith(y)&&j.charAt(y.length)==="/"),P={isActive:C,isPending:T,isTransitioning:w},q=C?r:void 0,X;typeof i=="function"?X=i(P):X=[i,C?"active":null,T?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let te=typeof l=="function"?l(P):l;return E.createElement(LS,bu({},h,{"aria-current":q,className:X,ref:n,style:te,to:c,viewTransition:u}),typeof m=="function"?m(P):m)});var Of;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Of||(Of={}));var sx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(sx||(sx={}));function RS(e){let t=E.useContext(md);return t||Mt(!1),t}function IS(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=hd(),u=Gs(),m=pd(e,{relative:o});return E.useCallback(h=>{if(DS(h,n)){h.preventDefault();let f=r!==void 0?r:yu(u)===yu(m);c(e,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,m,r,s,n,e,i,o,l])}function $S(e,t){t===void 0&&(t={});let n=E.useContext(MS);n==null&&Mt(!1);let{basename:r}=RS(Of.useViewTransitionState),s=pd(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Si(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Si(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Mf(s.pathname,o)!=null||Mf(s.pathname,i)!=null}let zS={data:""},HS=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||zS,BS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,VS=/\/\*[^]*?\*\/|  +/g,ax=/\n+/g,_s=(e,t)=>{let n="",r="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?_s(o,i):i+"{"+_s(o,i[1]=="k"?"":t)+"}":typeof o=="object"?r+=_s(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=_s.p?_s.p(i,o):i+":"+o+";")}return n+(t&&s?t+"{"+s+"}":s)+r},Wr={},Gb=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Gb(e[n]);return t}return e},US=(e,t,n,r,s)=>{let i=Gb(e),o=Wr[i]||(Wr[i]=(c=>{let u=0,m=11;for(;u<c.length;)m=101*m+c.charCodeAt(u++)>>>0;return"go"+m})(i));if(!Wr[o]){let c=i!==e?e:(u=>{let m,h,f=[{}];for(;m=BS.exec(u.replace(VS,""));)m[4]?f.shift():m[3]?(h=m[3].replace(ax," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][m[1]]=m[2].replace(ax," ").trim();return f[0]})(e);Wr[o]=_s(s?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&Wr.g?Wr.g:null;return n&&(Wr.g=Wr[o]),((c,u,m,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=m?c+u.data:u.data+c)})(Wr[o],t,r,l),o},WS=(e,t,n)=>e.reduce((r,s,i)=>{let o=t[i];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":_s(l,""):l===!1?"":l}return r+s+(o??"")},"");function gd(e){let t=this||{},n=e.call?e(t.p):e;return US(n.unshift?n.raw?WS(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,HS(t.target),t.g,t.o,t.k)}let Jb,Ff,Af;gd.bind({g:1});let us=gd.bind({k:1});function YS(e,t,n,r){_s.p=t,Jb=e,Ff=n,Af=r}function Js(e,t){let n=this||{};return function(){let r=arguments;function s(i,o){let l=Object.assign({},i),c=l.className||s.className;n.p=Object.assign({theme:Ff&&Ff()},l),n.o=/ *go\d+/.test(c),l.className=gd.apply(n,r)+(c?" "+c:"");let u=e;return e[0]&&(u=l.as||e,delete l.as),Af&&u[0]&&Af(l),Jb(u,l)}return s}}var qS=e=>typeof e=="function",wu=(e,t)=>qS(e)?e(t):e,KS=(()=>{let e=0;return()=>(++e).toString()})(),Xb=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),QS=20,Zb=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,QS)};case 1:return{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:n}=t;return Zb(e,{type:e.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},Ac=[],ua={toasts:[],pausedAt:void 0},La=e=>{ua=Zb(ua,e),Ac.forEach(t=>{t(ua)})},GS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},JS=(e={})=>{let[t,n]=E.useState(ua),r=E.useRef(ua);E.useEffect(()=>(r.current!==ua&&n(ua),Ac.push(n),()=>{let i=Ac.indexOf(n);i>-1&&Ac.splice(i,1)}),[]);let s=t.toasts.map(i=>{var o,l,c;return{...e,...e[i.type],...i,removeDelay:i.removeDelay||((o=e[i.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:i.duration||((l=e[i.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||GS[i.type],style:{...e.style,...(c=e[i.type])==null?void 0:c.style,...i.style}}});return{...t,toasts:s}},XS=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||KS()}),_l=e=>(t,n)=>{let r=XS(t,e,n);return La({type:2,toast:r}),r.id},bn=(e,t)=>_l("blank")(e,t);bn.error=_l("error");bn.success=_l("success");bn.loading=_l("loading");bn.custom=_l("custom");bn.dismiss=e=>{La({type:3,toastId:e})};bn.remove=e=>La({type:4,toastId:e});bn.promise=(e,t,n)=>{let r=bn.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?wu(t.success,s):void 0;return i?bn.success(i,{id:r,...n,...n==null?void 0:n.success}):bn.dismiss(r),s}).catch(s=>{let i=t.error?wu(t.error,s):void 0;i?bn.error(i,{id:r,...n,...n==null?void 0:n.error}):bn.dismiss(r)}),e};var ZS=(e,t)=>{La({type:1,toast:{id:e,height:t}})},ek=()=>{La({type:5,time:Date.now()})},Lo=new Map,tk=1e3,nk=(e,t=tk)=>{if(Lo.has(e))return;let n=setTimeout(()=>{Lo.delete(e),La({type:4,toastId:e})},t);Lo.set(e,n)},rk=e=>{let{toasts:t,pausedAt:n}=JS(e);E.useEffect(()=>{if(n)return;let i=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&bn.dismiss(l.id);return}return setTimeout(()=>bn.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,n]);let r=E.useCallback(()=>{n&&La({type:6,time:Date.now()})},[n]),s=E.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},m=t.filter(b=>(b.position||u)===(i.position||u)&&b.height),h=m.findIndex(b=>b.id===i.id),f=m.filter((b,v)=>v<h&&b.visible).length;return m.filter(b=>b.visible).slice(...l?[f+1]:[0,f]).reduce((b,v)=>b+(v.height||0)+c,0)},[t]);return E.useEffect(()=>{t.forEach(i=>{if(i.dismissed)nk(i.id,i.removeDelay);else{let o=Lo.get(i.id);o&&(clearTimeout(o),Lo.delete(i.id))}})},[t]),{toasts:t,handlers:{updateHeight:ZS,startPause:ek,endPause:r,calculateOffset:s}}},sk=us`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ak=us`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ik=us`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ok=Js("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${sk} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ak} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ik} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,lk=us`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ck=Js("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${lk} 1s linear infinite;
`,uk=us`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,dk=us`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,mk=Js("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uk} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${dk} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,fk=Js("div")`
  position: absolute;
`,hk=Js("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,pk=us`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,gk=Js("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${pk} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,xk=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?E.createElement(gk,null,t):t:n==="blank"?null:E.createElement(hk,null,E.createElement(ck,{...r}),n!=="loading"&&E.createElement(fk,null,n==="error"?E.createElement(ok,{...r}):E.createElement(mk,{...r})))},vk=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,yk=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,bk="0%{opacity:0;} 100%{opacity:1;}",wk="0%{opacity:1;} 100%{opacity:0;}",Nk=Js("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,jk=Js("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,_k=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=Xb()?[bk,wk]:[vk(n),yk(n)];return{animation:t?`${us(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${us(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Sk=E.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?_k(e.position||t||"top-center",e.visible):{opacity:0},i=E.createElement(xk,{toast:e}),o=E.createElement(jk,{...e.ariaProps},wu(e.message,e));return E.createElement(Nk,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:o}):E.createElement(E.Fragment,null,i,o))});YS(E.createElement);var kk=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=E.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;r(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return E.createElement("div",{ref:i,className:t,style:n},s)},Dk=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Xb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},Ck=gd`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Zl=16,Pk=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=rk(n);return E.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Zl,left:Zl,right:Zl,bottom:Zl,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let m=u.position||t,h=c.calculateOffset(u,{reverseOrder:e,gutter:r,defaultPosition:t}),f=Dk(m,h);return E.createElement(kk,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?Ck:"",style:f},u.type==="custom"?wu(u.message,u):s?s(u):E.createElement(Sk,{toast:u,position:m}))}))},ie=bn;function ew(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ek}=Object.prototype,{getPrototypeOf:op}=Object,{iterator:xd,toStringTag:tw}=Symbol,vd=(e=>t=>{const n=Ek.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_r=e=>(e=e.toLowerCase(),t=>vd(t)===e),yd=e=>t=>typeof t===e,{isArray:Bi}=Array,ul=yd("undefined");function Sl(e){return e!==null&&!ul(e)&&e.constructor!==null&&!ul(e.constructor)&&An(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const nw=_r("ArrayBuffer");function Mk(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&nw(e.buffer),t}const Tk=yd("string"),An=yd("function"),rw=yd("number"),kl=e=>e!==null&&typeof e=="object",Ok=e=>e===!0||e===!1,Lc=e=>{if(vd(e)!=="object")return!1;const t=op(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(tw in e)&&!(xd in e)},Fk=e=>{if(!kl(e)||Sl(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Ak=_r("Date"),Lk=_r("File"),Rk=_r("Blob"),Ik=_r("FileList"),$k=e=>kl(e)&&An(e.pipe),zk=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||An(e.append)&&((t=vd(e))==="formdata"||t==="object"&&An(e.toString)&&e.toString()==="[object FormData]"))},Hk=_r("URLSearchParams"),[Bk,Vk,Uk,Wk]=["ReadableStream","Request","Response","Headers"].map(_r),Yk=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dl(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Bi(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(Sl(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(r=0;r<o;r++)l=i[r],t.call(null,e[l],l,e)}}function sw(e,t){if(Sl(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const da=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,aw=e=>!ul(e)&&e!==da;function Lf(){const{caseless:e}=aw(this)&&this||{},t={},n=(r,s)=>{const i=e&&sw(t,s)||s;Lc(t[i])&&Lc(r)?t[i]=Lf(t[i],r):Lc(r)?t[i]=Lf({},r):Bi(r)?t[i]=r.slice():t[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Dl(arguments[r],n);return t}const qk=(e,t,n,{allOwnKeys:r}={})=>(Dl(t,(s,i)=>{n&&An(s)?e[i]=ew(s,n):e[i]=s},{allOwnKeys:r}),e),Kk=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Qk=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Gk=(e,t,n,r)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!r||r(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&op(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Jk=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Xk=e=>{if(!e)return null;if(Bi(e))return e;let t=e.length;if(!rw(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Zk=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&op(Uint8Array)),e2=(e,t)=>{const r=(e&&e[xd]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},t2=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},n2=_r("HTMLFormElement"),r2=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),ix=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),s2=_r("RegExp"),iw=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Dl(n,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(r[i]=o||s)}),Object.defineProperties(e,r)},a2=e=>{iw(e,(t,n)=>{if(An(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(An(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},i2=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Bi(e)?r(e):r(String(e).split(t)),n},o2=()=>{},l2=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function c2(e){return!!(e&&An(e.append)&&e[tw]==="FormData"&&e[xd])}const u2=e=>{const t=new Array(10),n=(r,s)=>{if(kl(r)){if(t.indexOf(r)>=0)return;if(Sl(r))return r;if(!("toJSON"in r)){t[s]=r;const i=Bi(r)?[]:{};return Dl(r,(o,l)=>{const c=n(o,s+1);!ul(c)&&(i[l]=c)}),t[s]=void 0,i}}return r};return n(e,0)},d2=_r("AsyncFunction"),m2=e=>e&&(kl(e)||An(e))&&An(e.then)&&An(e.catch),ow=((e,t)=>e?setImmediate:t?((n,r)=>(da.addEventListener("message",({source:s,data:i})=>{s===da&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),da.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",An(da.postMessage)),f2=typeof queueMicrotask<"u"?queueMicrotask.bind(da):typeof process<"u"&&process.nextTick||ow,h2=e=>e!=null&&An(e[xd]),he={isArray:Bi,isArrayBuffer:nw,isBuffer:Sl,isFormData:zk,isArrayBufferView:Mk,isString:Tk,isNumber:rw,isBoolean:Ok,isObject:kl,isPlainObject:Lc,isEmptyObject:Fk,isReadableStream:Bk,isRequest:Vk,isResponse:Uk,isHeaders:Wk,isUndefined:ul,isDate:Ak,isFile:Lk,isBlob:Rk,isRegExp:s2,isFunction:An,isStream:$k,isURLSearchParams:Hk,isTypedArray:Zk,isFileList:Ik,forEach:Dl,merge:Lf,extend:qk,trim:Yk,stripBOM:Kk,inherits:Qk,toFlatObject:Gk,kindOf:vd,kindOfTest:_r,endsWith:Jk,toArray:Xk,forEachEntry:e2,matchAll:t2,isHTMLForm:n2,hasOwnProperty:ix,hasOwnProp:ix,reduceDescriptors:iw,freezeMethods:a2,toObjectSet:i2,toCamelCase:r2,noop:o2,toFiniteNumber:l2,findKey:sw,global:da,isContextDefined:aw,isSpecCompliantForm:c2,toJSONObject:u2,isAsyncFn:d2,isThenable:m2,setImmediate:ow,asap:f2,isIterable:h2};function Xe(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}he.inherits(Xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.status}}});const lw=Xe.prototype,cw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{cw[e]={value:e}});Object.defineProperties(Xe,cw);Object.defineProperty(lw,"isAxiosError",{value:!0});Xe.from=(e,t,n,r,s,i)=>{const o=Object.create(lw);return he.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Xe.call(o,e.message,t,n,r,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const p2=null;function Rf(e){return he.isPlainObject(e)||he.isArray(e)}function uw(e){return he.endsWith(e,"[]")?e.slice(0,-2):e}function ox(e,t,n){return e?e.concat(t).map(function(s,i){return s=uw(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function g2(e){return he.isArray(e)&&!e.some(Rf)}const x2=he.toFlatObject(he,{},null,function(t){return/^is[A-Z]/.test(t)});function bd(e,t,n){if(!he.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=he.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,g){return!he.isUndefined(g[D])});const r=n.metaTokens,s=n.visitor||m,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(t);if(!he.isFunction(s))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(he.isDate(v))return v.toISOString();if(he.isBoolean(v))return v.toString();if(!c&&he.isBlob(v))throw new Xe("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(v)||he.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function m(v,D,g){let w=v;if(v&&!g&&typeof v=="object"){if(he.endsWith(D,"{}"))D=r?D:D.slice(0,-2),v=JSON.stringify(v);else if(he.isArray(v)&&g2(v)||(he.isFileList(v)||he.endsWith(D,"[]"))&&(w=he.toArray(v)))return D=uw(D),w.forEach(function(_,j){!(he.isUndefined(_)||_===null)&&t.append(o===!0?ox([D],j,i):o===null?D:D+"[]",u(_))}),!1}return Rf(v)?!0:(t.append(ox(g,D,i),u(v)),!1)}const h=[],f=Object.assign(x2,{defaultVisitor:m,convertValue:u,isVisitable:Rf});function b(v,D){if(!he.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+D.join("."));h.push(v),he.forEach(v,function(w,y){(!(he.isUndefined(w)||w===null)&&s.call(t,w,he.isString(y)?y.trim():y,D,f))===!0&&b(w,D?D.concat(y):[y])}),h.pop()}}if(!he.isObject(e))throw new TypeError("data must be an object");return b(e),t}function lx(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function lp(e,t){this._pairs=[],e&&bd(e,this,t)}const dw=lp.prototype;dw.append=function(t,n){this._pairs.push([t,n])};dw.toString=function(t){const n=t?function(r){return t.call(this,r,lx)}:lx;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function v2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mw(e,t,n){if(!t)return e;const r=n&&n.encode||v2;he.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=he.isURLSearchParams(t)?t.toString():new lp(t,n).toString(r),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class cx{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){he.forEach(this.handlers,function(r){r!==null&&t(r)})}}const fw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},y2=typeof URLSearchParams<"u"?URLSearchParams:lp,b2=typeof FormData<"u"?FormData:null,w2=typeof Blob<"u"?Blob:null,N2={isBrowser:!0,classes:{URLSearchParams:y2,FormData:b2,Blob:w2},protocols:["http","https","file","blob","url","data"]},cp=typeof window<"u"&&typeof document<"u",If=typeof navigator=="object"&&navigator||void 0,j2=cp&&(!If||["ReactNative","NativeScript","NS"].indexOf(If.product)<0),_2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",S2=cp&&window.location.href||"http://localhost",k2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cp,hasStandardBrowserEnv:j2,hasStandardBrowserWebWorkerEnv:_2,navigator:If,origin:S2},Symbol.toStringTag,{value:"Module"})),dn={...k2,...N2};function D2(e,t){return bd(e,new dn.classes.URLSearchParams,{visitor:function(n,r,s,i){return dn.isNode&&he.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function C2(e){return he.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function P2(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function hw(e){function t(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&he.isArray(s)?s.length:o,c?(he.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!l):((!s[o]||!he.isObject(s[o]))&&(s[o]=[]),t(n,r,s[o],i)&&he.isArray(s[o])&&(s[o]=P2(s[o])),!l)}if(he.isFormData(e)&&he.isFunction(e.entries)){const n={};return he.forEachEntry(e,(r,s)=>{t(C2(r),s,n,0)}),n}return null}function E2(e,t,n){if(he.isString(e))try{return(t||JSON.parse)(e),he.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Cl={transitional:fw,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=he.isObject(t);if(i&&he.isHTMLForm(t)&&(t=new FormData(t)),he.isFormData(t))return s?JSON.stringify(hw(t)):t;if(he.isArrayBuffer(t)||he.isBuffer(t)||he.isStream(t)||he.isFile(t)||he.isBlob(t)||he.isReadableStream(t))return t;if(he.isArrayBufferView(t))return t.buffer;if(he.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return D2(t,this.formSerializer).toString();if((l=he.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return bd(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),E2(t)):t}],transformResponse:[function(t){const n=this.transitional||Cl.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(he.isResponse(t)||he.isReadableStream(t))return t;if(t&&he.isString(t)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?Xe.from(l,Xe.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dn.classes.FormData,Blob:dn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};he.forEach(["delete","get","head","post","put","patch"],e=>{Cl.headers[e]={}});const M2=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),T2=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||t[n]&&M2[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},ux=Symbol("internals");function to(e){return e&&String(e).trim().toLowerCase()}function Rc(e){return e===!1||e==null?e:he.isArray(e)?e.map(Rc):String(e)}function O2(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const F2=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function dm(e,t,n,r,s){if(he.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!he.isString(t)){if(he.isString(r))return t.indexOf(r)!==-1;if(he.isRegExp(r))return r.test(t)}}function A2(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function L2(e,t){const n=he.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,o){return this[r].call(this,t,s,i,o)},configurable:!0})})}let Ln=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(l,c,u){const m=to(c);if(!m)throw new Error("header name must be a non-empty string");const h=he.findKey(s,m);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||c]=Rc(l))}const o=(l,c)=>he.forEach(l,(u,m)=>i(u,m,c));if(he.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(he.isString(t)&&(t=t.trim())&&!F2(t))o(T2(t),n);else if(he.isObject(t)&&he.isIterable(t)){let l={},c,u;for(const m of t){if(!he.isArray(m))throw TypeError("Object iterator must return a key-value pair");l[u=m[0]]=(c=l[u])?he.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}o(l,n)}else t!=null&&i(n,t,r);return this}get(t,n){if(t=to(t),t){const r=he.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return O2(s);if(he.isFunction(n))return n.call(this,s,r);if(he.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=to(t),t){const r=he.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||dm(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(o){if(o=to(o),o){const l=he.findKey(r,o);l&&(!n||dm(r,r[l],l,n))&&(delete r[l],s=!0)}}return he.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||dm(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return he.forEach(this,(s,i)=>{const o=he.findKey(r,i);if(o){n[o]=Rc(s),delete n[i];return}const l=t?A2(i):String(i).trim();l!==i&&delete n[i],n[l]=Rc(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return he.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&he.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[ux]=this[ux]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=to(o);r[l]||(L2(s,o),r[l]=!0)}return he.isArray(t)?t.forEach(i):i(t),this}};Ln.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.reduceDescriptors(Ln.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});he.freezeMethods(Ln);function mm(e,t){const n=this||Cl,r=t||n,s=Ln.from(r.headers);let i=r.data;return he.forEach(e,function(l){i=l.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function pw(e){return!!(e&&e.__CANCEL__)}function Vi(e,t,n){Xe.call(this,e??"canceled",Xe.ERR_CANCELED,t,n),this.name="CanceledError"}he.inherits(Vi,Xe,{__CANCEL__:!0});function gw(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Xe("Request failed with status code "+n.status,[Xe.ERR_BAD_REQUEST,Xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function R2(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function I2(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),m=r[i];o||(o=u),n[s]=c,r[s]=u;let h=i,f=0;for(;h!==s;)f+=n[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),u-o<t)return;const b=m&&u-m;return b?Math.round(f*1e3/b):void 0}}function $2(e,t){let n=0,r=1e3/t,s,i;const o=(u,m=Date.now())=>{n=m,s=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const m=Date.now(),h=m-n;h>=r?o(u,m):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},r-h)))},()=>s&&o(s)]}const Nu=(e,t,n=3)=>{let r=0;const s=I2(50,250);return $2(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-r,u=s(c),m=o<=l;r=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&m?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},n)},dx=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},mx=e=>(...t)=>he.asap(()=>e(...t)),z2=dn.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,dn.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(dn.origin),dn.navigator&&/(msie|trident)/i.test(dn.navigator.userAgent)):()=>!0,H2=dn.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const o=[e+"="+encodeURIComponent(t)];he.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),he.isString(r)&&o.push("path="+r),he.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function B2(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function V2(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function xw(e,t,n){let r=!B2(t);return e&&(r||n==!1)?V2(e,t):t}const fx=e=>e instanceof Ln?{...e}:e;function Pa(e,t){t=t||{};const n={};function r(u,m,h,f){return he.isPlainObject(u)&&he.isPlainObject(m)?he.merge.call({caseless:f},u,m):he.isPlainObject(m)?he.merge({},m):he.isArray(m)?m.slice():m}function s(u,m,h,f){if(he.isUndefined(m)){if(!he.isUndefined(u))return r(void 0,u,h,f)}else return r(u,m,h,f)}function i(u,m){if(!he.isUndefined(m))return r(void 0,m)}function o(u,m){if(he.isUndefined(m)){if(!he.isUndefined(u))return r(void 0,u)}else return r(void 0,m)}function l(u,m,h){if(h in t)return r(u,m);if(h in e)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,m,h)=>s(fx(u),fx(m),h,!0)};return he.forEach(Object.keys({...e,...t}),function(m){const h=c[m]||s,f=h(e[m],t[m],m);he.isUndefined(f)&&h!==l||(n[m]=f)}),n}const vw=e=>{const t=Pa({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=Ln.from(o),t.url=mw(xw(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(he.isFormData(n)){if(dn.hasStandardBrowserEnv||dn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...m]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...m].join("; "))}}if(dn.hasStandardBrowserEnv&&(r&&he.isFunction(r)&&(r=r(t)),r||r!==!1&&z2(t.url))){const u=s&&i&&H2.read(i);u&&o.set(s,u)}return t},U2=typeof XMLHttpRequest<"u",W2=U2&&function(e){return new Promise(function(n,r){const s=vw(e);let i=s.data;const o=Ln.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,m,h,f,b,v;function D(){b&&b(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let g=new XMLHttpRequest;g.open(s.method.toUpperCase(),s.url,!0),g.timeout=s.timeout;function w(){if(!g)return;const _=Ln.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),L={data:!l||l==="text"||l==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:_,config:e,request:g};gw(function(T){n(T),D()},function(T){r(T),D()},L),g=null}"onloadend"in g?g.onloadend=w:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(w)},g.onabort=function(){g&&(r(new Xe("Request aborted",Xe.ECONNABORTED,e,g)),g=null)},g.onerror=function(){r(new Xe("Network Error",Xe.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let j=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const L=s.transitional||fw;s.timeoutErrorMessage&&(j=s.timeoutErrorMessage),r(new Xe(j,L.clarifyTimeoutError?Xe.ETIMEDOUT:Xe.ECONNABORTED,e,g)),g=null},i===void 0&&o.setContentType(null),"setRequestHeader"in g&&he.forEach(o.toJSON(),function(j,L){g.setRequestHeader(L,j)}),he.isUndefined(s.withCredentials)||(g.withCredentials=!!s.withCredentials),l&&l!=="json"&&(g.responseType=s.responseType),u&&([f,v]=Nu(u,!0),g.addEventListener("progress",f)),c&&g.upload&&([h,b]=Nu(c),g.upload.addEventListener("progress",h),g.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(m=_=>{g&&(r(!_||_.type?new Vi(null,e,g):_),g.abort(),g=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const y=R2(s.url);if(y&&dn.protocols.indexOf(y)===-1){r(new Xe("Unsupported protocol "+y+":",Xe.ERR_BAD_REQUEST,e));return}g.send(i||null)})},Y2=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,l();const m=u instanceof Error?u:this.reason;r.abort(m instanceof Xe?m:new Vi(m instanceof Error?m.message:m))}};let o=t&&setTimeout(()=>{o=null,i(new Xe(`timeout ${t} of ms exceeded`,Xe.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>he.asap(l),c}},q2=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},K2=async function*(e,t){for await(const n of Q2(e))yield*q2(n,t)},Q2=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},hx=(e,t,n,r)=>{const s=K2(e,t);let i=0,o,l=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:m}=await s.next();if(u){l(),c.close();return}let h=m.byteLength;if(n){let f=i+=h;n(f)}c.enqueue(new Uint8Array(m))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},wd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",yw=wd&&typeof ReadableStream=="function",G2=wd&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),bw=(e,...t)=>{try{return!!e(...t)}catch{return!1}},J2=yw&&bw(()=>{let e=!1;const t=new Request(dn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),px=64*1024,$f=yw&&bw(()=>he.isReadableStream(new Response("").body)),ju={stream:$f&&(e=>e.body)};wd&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ju[t]&&(ju[t]=he.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Xe(`Response type '${t}' is not supported`,Xe.ERR_NOT_SUPPORT,r)})})})(new Response);const X2=async e=>{if(e==null)return 0;if(he.isBlob(e))return e.size;if(he.isSpecCompliantForm(e))return(await new Request(dn.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(he.isArrayBufferView(e)||he.isArrayBuffer(e))return e.byteLength;if(he.isURLSearchParams(e)&&(e=e+""),he.isString(e))return(await G2(e)).byteLength},Z2=async(e,t)=>{const n=he.toFiniteNumber(e.getContentLength());return n??X2(t)},eD=wd&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:m,withCredentials:h="same-origin",fetchOptions:f}=vw(e);u=u?(u+"").toLowerCase():"text";let b=Y2([s,i&&i.toAbortSignal()],o),v;const D=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let g;try{if(c&&J2&&n!=="get"&&n!=="head"&&(g=await Z2(m,r))!==0){let L=new Request(t,{method:"POST",body:r,duplex:"half"}),C;if(he.isFormData(r)&&(C=L.headers.get("content-type"))&&m.setContentType(C),L.body){const[T,P]=dx(g,Nu(mx(c)));r=hx(L.body,px,T,P)}}he.isString(h)||(h=h?"include":"omit");const w="credentials"in Request.prototype;v=new Request(t,{...f,signal:b,method:n.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:w?h:void 0});let y=await fetch(v,f);const _=$f&&(u==="stream"||u==="response");if($f&&(l||_&&D)){const L={};["status","statusText","headers"].forEach(q=>{L[q]=y[q]});const C=he.toFiniteNumber(y.headers.get("content-length")),[T,P]=l&&dx(C,Nu(mx(l),!0))||[];y=new Response(hx(y.body,px,T,()=>{P&&P(),D&&D()}),L)}u=u||"text";let j=await ju[he.findKey(ju,u)||"text"](y,e);return!_&&D&&D(),await new Promise((L,C)=>{gw(L,C,{data:j,headers:Ln.from(y.headers),status:y.status,statusText:y.statusText,config:e,request:v})})}catch(w){throw D&&D(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new Xe("Network Error",Xe.ERR_NETWORK,e,v),{cause:w.cause||w}):Xe.from(w,w&&w.code,e,v)}}),zf={http:p2,xhr:W2,fetch:eD};he.forEach(zf,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const gx=e=>`- ${e}`,tD=e=>he.isFunction(e)||e===null||e===!1,ww={getAdapter:e=>{e=he.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;i<t;i++){n=e[i];let o;if(r=n,!tD(n)&&(r=zf[(o=String(n)).toLowerCase()],r===void 0))throw new Xe(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(gx).join(`
`):" "+gx(i[0]):"as no adapter specified";throw new Xe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:zf};function fm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vi(null,e)}function xx(e){return fm(e),e.headers=Ln.from(e.headers),e.data=mm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ww.getAdapter(e.adapter||Cl.adapter)(e).then(function(r){return fm(e),r.data=mm.call(e,e.transformResponse,r),r.headers=Ln.from(r.headers),r},function(r){return pw(r)||(fm(e),r&&r.response&&(r.response.data=mm.call(e,e.transformResponse,r.response),r.response.headers=Ln.from(r.response.headers))),Promise.reject(r)})}const Nw="1.11.0",Nd={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Nd[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const vx={};Nd.transitional=function(t,n,r){function s(i,o){return"[Axios v"+Nw+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,l)=>{if(t===!1)throw new Xe(s(o," has been removed"+(n?" in "+n:"")),Xe.ERR_DEPRECATED);return n&&!vx[o]&&(vx[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,l):!0}};Nd.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function nD(e,t,n){if(typeof e!="object")throw new Xe("options must be an object",Xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new Xe("option "+i+" must be "+c,Xe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Xe("Unknown option "+i,Xe.ERR_BAD_OPTION)}}const Ic={assertOptions:nD,validators:Nd},kr=Ic.validators;let ya=class{constructor(t){this.defaults=t||{},this.interceptors={request:new cx,response:new cx}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Pa(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Ic.assertOptions(r,{silentJSONParsing:kr.transitional(kr.boolean),forcedJSONParsing:kr.transitional(kr.boolean),clarifyTimeoutError:kr.transitional(kr.boolean)},!1),s!=null&&(he.isFunction(s)?n.paramsSerializer={serialize:s}:Ic.assertOptions(s,{encode:kr.function,serialize:kr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ic.assertOptions(n,{baseUrl:kr.spelling("baseURL"),withXsrfToken:kr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&he.merge(i.common,i[n.method]);i&&he.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=Ln.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(n)===!1||(c=c&&D.synchronous,l.unshift(D.fulfilled,D.rejected))});const u=[];this.interceptors.response.forEach(function(D){u.push(D.fulfilled,D.rejected)});let m,h=0,f;if(!c){const v=[xx.bind(this),void 0];for(v.unshift(...l),v.push(...u),f=v.length,m=Promise.resolve(n);h<f;)m=m.then(v[h++],v[h++]);return m}f=l.length;let b=n;for(h=0;h<f;){const v=l[h++],D=l[h++];try{b=v(b)}catch(g){D.call(this,g);break}}try{m=xx.call(this,b)}catch(v){return Promise.reject(v)}for(h=0,f=u.length;h<f;)m=m.then(u[h++],u[h++]);return m}getUri(t){t=Pa(this.defaults,t);const n=xw(t.baseURL,t.url,t.allowAbsoluteUrls);return mw(n,t.params,t.paramsSerializer)}};he.forEach(["delete","get","head","options"],function(t){ya.prototype[t]=function(n,r){return this.request(Pa(r||{},{method:t,url:n,data:(r||{}).data}))}});he.forEach(["post","put","patch"],function(t){function n(r){return function(i,o,l){return this.request(Pa(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ya.prototype[t]=n(),ya.prototype[t+"Form"]=n(!0)});let rD=class jw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{r.subscribe(l),i=l}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i,o,l){r.reason||(r.reason=new Vi(i,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new jw(function(s){t=s}),cancel:t}}};function sD(e){return function(n){return e.apply(null,n)}}function aD(e){return he.isObject(e)&&e.isAxiosError===!0}const Hf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hf).forEach(([e,t])=>{Hf[t]=e});function _w(e){const t=new ya(e),n=ew(ya.prototype.request,t);return he.extend(n,ya.prototype,t,{allOwnKeys:!0}),he.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return _w(Pa(e,s))},n}const we=_w(Cl);we.Axios=ya;we.CanceledError=Vi;we.CancelToken=rD;we.isCancel=pw;we.VERSION=Nw;we.toFormData=bd;we.AxiosError=Xe;we.Cancel=we.CanceledError;we.all=function(t){return Promise.all(t)};we.spread=sD;we.isAxiosError=aD;we.mergeConfig=Pa;we.AxiosHeaders=Ln;we.formToJSON=e=>hw(he.isHTMLForm(e)?new FormData(e):e);we.getAdapter=ww.getAdapter;we.HttpStatusCode=Hf;we.default=we;const{Axios:S3,AxiosError:k3,CanceledError:D3,isCancel:C3,CancelToken:P3,VERSION:E3,all:M3,Cancel:T3,isAxiosError:O3,spread:F3,toFormData:A3,AxiosHeaders:L3,HttpStatusCode:R3,formToJSON:I3,getAdapter:$3,mergeConfig:z3}=we,Sw=E.createContext(void 0),kw=({children:e})=>{const[t,n]=E.useState(null);E.useEffect(()=>{const o=localStorage.getItem("user");o&&n(JSON.parse(o))},[]);const r=async(o,l)=>{var c,u;try{const h=(await we.post("http://localhost:5000/api/users/login",{username:o,password:l})).data;n(h),localStorage.setItem("user",JSON.stringify(h))}catch(m){throw new Error(((u=(c=m.response)==null?void 0:c.data)==null?void 0:u.message)||"Login failed")}},s=()=>{n(null),localStorage.removeItem("user")},i=async(o,l)=>{var c,u;try{const m={headers:{Authorization:`Bearer ${t.token}`}};await we.put("http://localhost:5000/api/users/change-password",{oldPassword:o,newPassword:l},m)}catch(m){throw new Error(((u=(c=m.response)==null?void 0:c.data)==null?void 0:u.message)||"Password change failed")}};return a.jsx(Sw.Provider,{value:{user:t,login:r,logout:s,changePassword:i},children:e})},Ui=()=>{const e=E.useContext(Sw);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},iD=()=>{const{user:e}=Ui();return e?a.jsx(Kb,{}):a.jsx(qb,{to:"/login"})};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lD=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),yx=e=>{const t=lD(e);return t.charAt(0).toUpperCase()+t.slice(1)},Dw=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),cD=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>E.createElement("svg",{ref:c,...uD,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Dw("lucide",s),...!i&&!cD(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,m])=>E.createElement(u,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(e,t)=>{const n=E.forwardRef(({className:r,...s},i)=>E.createElement(dD,{ref:i,iconNode:t,className:Dw(`lucide-${oD(yx(e))}`,`lucide-${e}`,r),...s}));return n.displayName=yx(e),n};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M10 10H6",key:"1bsnug"}],["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14",key:"lrkjwd"}],["path",{d:"M8 8v4",key:"1fwk8c"}],["path",{d:"M9 18h6",key:"x1upvd"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],fD=st("ambulance",mD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],pD=st("banknote",hD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],xD=st("bell",gD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],yD=st("calendar-days",vD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],jd=st("calendar",bD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],bt=st("car",wD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jD=st("chevron-down",ND);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],bx=st("chevron-right",_D);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kD=st("circle-check-big",SD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],$c=st("circle-user",DD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],PD=st("credit-card",CD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],MD=st("dollar-sign",ED);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ki=st("file-text",TD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Cw=st("funnel",OD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],AD=st("gauge",FD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],RD=st("layout-dashboard",LD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],$D=st("log-out",ID);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],HD=st("mail",zD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],VD=st("map-pin",BD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],WD=st("maximize-2",UD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],qD=st("menu",YD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],hm=st("pen",KD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],GD=st("phone",QD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pn=st("plus",JD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Bf=st("receipt",XD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],eC=st("save",ZD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Yn=st("search",tC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rC=st("settings",nC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],aC=st("shield-check",sC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Rn=st("trash-2",iC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],lC=st("trending-up",oC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ra=st("triangle-alert",cC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Vf=st("upload",uC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],mC=st("user-check",dC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pw=st("users",fC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],pC=st("wallet",hC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],xC=st("wrench",gC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Pl=st("x",vC),yC=({isOpen:e,setIsOpen:t})=>{const{logout:n}=Ui(),[r,s]=E.useState({}),i=l=>{s(c=>({...c,[l]:!c[l]}))},o=[{name:"Tableau de bord",path:"/",icon:a.jsx(RD,{size:20})},{name:"Véhicules",path:"/vehicules",icon:a.jsx(bt,{size:20}),subItems:[{name:"Visite technique",path:"/vehicules/visites-techniques",icon:a.jsx(AD,{size:16})},{name:"Liste assurances",path:"/vehicules/assurances",icon:a.jsx(aC,{size:16})}]},{name:"Clients",path:"/clients",icon:a.jsx(Pw,{size:20}),subItems:[{name:"Liste réglements",path:"/clients/reglements",icon:a.jsx(mC,{size:16})}]},{name:"Infractions",path:"/infractions",icon:a.jsx(Ra,{size:20})},{name:"Interventions",path:"/interventions",icon:a.jsx(xC,{size:20})},{name:"Accidents",path:"/accidents",icon:a.jsx(fD,{size:20})},{name:"Contrats",path:"/contrats",icon:a.jsx(bt,{size:20})},{name:"Factures",path:"/factures",icon:a.jsx(Bf,{size:20})},{name:"Charges",path:"/charges",icon:a.jsx(MD,{size:20})},{name:"Traites",path:"/traites",icon:a.jsx(PD,{size:20})},{name:"Réservations",path:"/reservations",icon:a.jsx(jd,{size:20})},{name:"Paramètres",path:"/parametres",icon:a.jsx(rC,{size:20})}];return a.jsxs(a.Fragment,{children:[e&&a.jsx("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-50 lg:hidden",onClick:()=>t(!1),"aria-hidden":"true"}),a.jsxs("aside",{className:`fixed inset-y-0 left-0 z-30 w-64 max-w-full sm:w-72 transform bg-blue-900 transition duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 ${e?"translate-x-0":"-translate-x-full"}`,children:[a.jsxs("div",{className:"flex items-center justify-between h-16 px-3 border-b border-blue-800",children:[a.jsx("h1",{className:"text-white text-xl font-bold",children:"AdminCar"}),a.jsx("button",{className:"lg:hidden p-2 text-blue-100 hover:text-white focus:outline-none rounded",onClick:()=>t(!1),"aria-label":"Fermer le menu",children:a.jsx(bx,{size:20})})]}),a.jsxs("div",{className:"flex flex-col justify-between h-[calc(100%-4rem)]",children:[a.jsx("nav",{className:"mt-5 px-2 overflow-y-auto touch-pan-y",style:{WebkitOverflowScrolling:"touch"},children:o.map(l=>a.jsx("div",{className:"mb-1",children:l.subItems?a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsxs(um,{to:l.path,className:({isActive:c})=>`flex flex-grow items-center px-4 py-3 text-sm rounded-l-lg transition-colors ${c?"bg-blue-800 text-white":"text-blue-100 hover:bg-blue-800 hover:text-white"}`,onClick:()=>t(!1),children:[a.jsx("span",{className:"mr-3",children:l.icon}),l.name]}),a.jsx("button",{className:`p-2 text-blue-100 hover:text-white focus:outline-none rounded-r-lg transition-colors ${r[l.path]?"bg-blue-800 text-white":"hover:bg-blue-800"}`,onClick:()=>i(l.path),"aria-expanded":!!r[l.path],children:r[l.path]?a.jsx(jD,{size:16}):a.jsx(bx,{size:16})})]}),a.jsx("div",{className:`transition-all duration-300 overflow-hidden ${r[l.path]?"max-h-40":"max-h-0"}`,children:l.subItems.map(c=>a.jsxs(um,{to:c.path,className:({isActive:u})=>`flex items-center px-4 py-2 ml-6 mt-1 text-sm rounded-lg transition-colors ${u?"bg-blue-800 text-white":"text-blue-100 hover:bg-blue-800 hover:text-white"}`,onClick:()=>t(!1),children:[a.jsx("span",{className:"mr-2",children:c.icon}),c.name]},c.path))})]}):a.jsxs(um,{to:l.path,className:({isActive:c})=>`flex items-center px-4 py-3 text-sm rounded-lg transition-colors ${c?"bg-blue-800 text-white":"text-blue-100 hover:bg-blue-800 hover:text-white"}`,onClick:()=>t(!1),children:[a.jsx("span",{className:"mr-3",children:l.icon}),l.name]})},l.path))}),a.jsx("div",{className:"p-4",children:a.jsxs("button",{onClick:n,className:"flex items-center w-full px-4 py-3 text-sm text-blue-100 rounded-lg hover:bg-blue-800 hover:text-white",children:[a.jsx($D,{size:20,className:"mr-3"}),"Déconnexion"]})})]})]})]})},bC=({onMenuClick:e})=>{const t=Gs(),{user:n}=Ui(),r=()=>{const s=t.pathname;return s==="/"?"Tableau de bord":s==="/vehicules"?"Gestion des Véhicules":s==="/clients"?"Gestion des Clients":s==="/contrats"?"Gestion des Contrats":s==="/factures"?"Gestion des Factures":s==="/reservations"?"Gestion des Réservations":s==="/parametres"?"Paramètres":"AdminCar"};return a.jsxs("header",{className:"sticky top-0 z-10 flex items-center justify-between h-16 px-3 sm:px-4 bg-white border-b border-gray-200 shadow-sm lg:px-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:e,className:"p-2 rounded-md text-gray-600 hover:bg-gray-100 lg:hidden",children:a.jsx(qD,{size:24})}),a.jsxs("h1",{className:"ml-3 text-lg font-semibold text-gray-800 md:text-xl",children:[a.jsx("span",{className:"hidden sm:inline",children:r()}),a.jsx("span",{className:"sm:hidden",children:r().split(" ")[0]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative p-2 rounded-full text-gray-600 hover:bg-gray-100",children:[a.jsx(xD,{size:20}),a.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),a.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:n==null?void 0:n.name}),a.jsx($c,{size:28,className:"text-gray-600"})]})]})]})},wC=()=>{const[e,t]=E.useState(!1),{user:n,loading:r}=Ui(),s=Gs();if(E.useEffect(()=>{s.pathname!=="/login"&&localStorage.setItem("lastPath",s.pathname)},[s]),r)return null;if(!n){const i=localStorage.getItem("lastPath")||"/";return a.jsx(qb,{to:"/login",state:{from:i}})}return a.jsxs("div",{className:"flex min-h-screen flex-col lg:flex-row bg-gray-100",children:[a.jsx(yC,{isOpen:e,setIsOpen:t}),a.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[a.jsx(bC,{onMenuClick:()=>t(!e)}),a.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-3 sm:p-4 md:p-6 touch-pan-y scroll-smooth",children:a.jsx(Kb,{})})]})]})},gn=({onClick:e,size:t="md",withText:n=!1,className:r="",isEditing:s=!1,onEdit:i,onSave:o,onCancel:l})=>{const c=t==="sm"?16:18,u="text-blue-600 hover:text-blue-900";return i!==void 0&&o!==void 0&&l!==void 0?s?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:o,className:"text-green-600 hover:text-green-900",title:"Save",children:a.jsx(eC,{size:c})}),a.jsx("button",{onClick:l,className:"text-red-600 hover:text-red-900",title:"Cancel",children:a.jsx(Pl,{size:c})})]}):a.jsx("button",{onClick:i,className:`${u} ${r}`,title:"Edit",children:a.jsx(hm,{size:c})}):n&&e?a.jsxs("button",{onClick:e,className:`${u} text-sm font-medium flex items-center ${r}`,children:[a.jsx(hm,{size:c,className:"mr-2"}),"Modifier"]}):a.jsx("button",{onClick:e,className:`${u} ${r}`,children:a.jsx(hm,{size:c})})},Sn=({onClick:e,className:t})=>a.jsx("button",{type:"button",onClick:e,className:`absolute top-4 right-4 text-gray-400 hover:text-gray-600 focus:outline-none ${t}`,"aria-label":"Close",children:a.jsx(Pl,{size:24})});function Ew(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Ew(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function rn(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Ew(e))&&(r&&(r+=" "),r+=t);return r}const Mw=6048e5,NC=864e5,_d=6e4,Sd=36e5,jC=1e3,wx=Symbol.for("constructDateFrom");function yt(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&wx in e?e[wx](t):e instanceof Date?new e.constructor(t):new Date(t)}function $e(e,t){return yt(t||e,e)}function wr(e,t,n){const r=$e(e,n==null?void 0:n.in);return isNaN(t)?yt((n==null?void 0:n.in)||e,NaN):(t&&r.setDate(r.getDate()+t),r)}function jr(e,t,n){const r=$e(e,n==null?void 0:n.in);if(isNaN(t))return yt(e,NaN);if(!t)return r;const s=r.getDate(),i=yt(e,r.getTime());i.setMonth(r.getMonth()+t+1,0);const o=i.getDate();return s>=o?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}function Tw(e,t,n){return yt(e,+$e(e)+t)}function _C(e,t,n){return Tw(e,t*Sd)}let SC={};function Ia(){return SC}function ds(e,t){var l,c,u,m;const n=Ia(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((m=(u=n.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??0,s=$e(e,t==null?void 0:t.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Di(e,t){return ds(e,{...t,weekStartsOn:1})}function Ow(e,t){const n=$e(e,t==null?void 0:t.in),r=n.getFullYear(),s=yt(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Di(s),o=yt(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=Di(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function _u(e){const t=$e(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ps(e,...t){const n=yt.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function Ea(e,t){const n=$e(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Ci(e,t,n){const[r,s]=ps(n==null?void 0:n.in,e,t),i=Ea(r),o=Ea(s),l=+i-_u(i),c=+o-_u(o);return Math.round((l-c)/NC)}function kC(e,t){const n=Ow(e,t),r=yt(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Di(r)}function Uf(e,t,n){const r=$e(e,n==null?void 0:n.in);return r.setTime(r.getTime()+t*_d),r}function up(e,t,n){return jr(e,t*3,n)}function DC(e,t,n){return Tw(e,t*1e3)}function Su(e,t,n){return wr(e,t*7,n)}function ts(e,t,n){return jr(e,t*12,n)}function Nx(e,t){let n,r=t==null?void 0:t.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=yt.bind(null,s));const i=$e(s,r);(!n||n<i||isNaN(+i))&&(n=i)}),yt(r,n||NaN)}function jx(e,t){let n,r=t==null?void 0:t.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=yt.bind(null,s));const i=$e(s,r);(!n||n>i||isNaN(+i))&&(n=i)}),yt(r,n||NaN)}function CC(e,t,n){const[r,s]=ps(n==null?void 0:n.in,e,t);return+Ea(r)==+Ea(s)}function ns(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ku(e){return!(!ns(e)&&typeof e!="number"||isNaN(+$e(e)))}function Du(e,t,n){const[r,s]=ps(n==null?void 0:n.in,e,t),i=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return i*12+o}function ba(e,t){const n=$e(e,t==null?void 0:t.in);return Math.trunc(n.getMonth()/3)+1}function Cu(e,t,n){const[r,s]=ps(n==null?void 0:n.in,e,t),i=r.getFullYear()-s.getFullYear(),o=ba(r)-ba(s);return i*4+o}function Pu(e,t,n){const[r,s]=ps(n==null?void 0:n.in,e,t);return r.getFullYear()-s.getFullYear()}function PC(e,t,n){const[r,s]=ps(n==null?void 0:n.in,e,t),i=_x(r,s),o=Math.abs(Ci(r,s));r.setDate(r.getDate()-i*o);const l=+(_x(r,s)===-i),c=i*(o-l);return c===0?0:c}function _x(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Fw(e,t){const n=$e(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function Aw(e,t){const n=$e(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Wf(e,t){const n=$e(e,t==null?void 0:t.in),r=n.getMonth(),s=r-r%3;return n.setMonth(s,1),n.setHours(0,0,0,0),n}function Lw(e,t){const n=$e(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Rw(e,t){const n=$e(e,t==null?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function kd(e,t){const n=$e(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function EC(e,t){var l,c;const n=Ia(),r=n.weekStartsOn??((c=(l=n.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,s=$e(e,t==null?void 0:t.in),i=s.getDay(),o=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}const MC={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},TC=(e,t,n)=>{let r;const s=MC[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function mi(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const OC={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},FC={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},AC={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},LC={date:mi({formats:OC,defaultWidth:"full"}),time:mi({formats:FC,defaultWidth:"full"}),dateTime:mi({formats:AC,defaultWidth:"full"})},RC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},IC=(e,t,n,r)=>RC[e];function Fr(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const $C={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zC={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},HC={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},BC={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},VC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},UC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},WC=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},YC={ordinalNumber:WC,era:Fr({values:$C,defaultWidth:"wide"}),quarter:Fr({values:zC,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Fr({values:HC,defaultWidth:"wide"}),day:Fr({values:BC,defaultWidth:"wide"}),dayPeriod:Fr({values:VC,defaultWidth:"wide",formattingValues:UC,defaultFormattingWidth:"wide"})};function Ar(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?KC(l,h=>h.test(o)):qC(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const m=t.slice(o.length);return{value:u,rest:m}}}function qC(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function KC(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Iw(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const QC=/^(\d+)(th|st|nd|rd)?/i,GC=/\d+/i,JC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},XC={any:[/^b/i,/^(a|c)/i]},ZC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eP={any:[/1/i,/2/i,/3/i,/4/i]},tP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},sP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},aP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},iP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},oP={ordinalNumber:Iw({matchPattern:QC,parsePattern:GC,valueCallback:e=>parseInt(e,10)}),era:Ar({matchPatterns:JC,defaultMatchWidth:"wide",parsePatterns:XC,defaultParseWidth:"any"}),quarter:Ar({matchPatterns:ZC,defaultMatchWidth:"wide",parsePatterns:eP,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ar({matchPatterns:tP,defaultMatchWidth:"wide",parsePatterns:nP,defaultParseWidth:"any"}),day:Ar({matchPatterns:rP,defaultMatchWidth:"wide",parsePatterns:sP,defaultParseWidth:"any"}),dayPeriod:Ar({matchPatterns:aP,defaultMatchWidth:"any",parsePatterns:iP,defaultParseWidth:"any"})},$w={code:"en-US",formatDistance:TC,formatLong:LC,formatRelative:IC,localize:YC,match:oP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lP(e,t){const n=$e(e,t==null?void 0:t.in);return Ci(n,kd(n))+1}function dp(e,t){const n=$e(e,t==null?void 0:t.in),r=+Di(n)-+kC(n);return Math.round(r/Mw)+1}function mp(e,t){var m,h,f,b;const n=$e(e,t==null?void 0:t.in),r=n.getFullYear(),s=Ia(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((b=(f=s.locale)==null?void 0:f.options)==null?void 0:b.firstWeekContainsDate)??1,o=yt((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=ds(o,t),c=yt((t==null?void 0:t.in)||e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=ds(c,t);return+n>=+l?r+1:+n>=+u?r:r-1}function cP(e,t){var l,c,u,m;const n=Ia(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(u=n.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,s=mp(e,t),i=yt((t==null?void 0:t.in)||e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),ds(i,t)}function zw(e,t){const n=$e(e,t==null?void 0:t.in),r=+ds(n,t)-+cP(n,t);return Math.round(r/Mw)+1}function gt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const xs={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return gt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):gt(n+1,2)},d(e,t){return gt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return gt(e.getHours()%12||12,t.length)},H(e,t){return gt(e.getHours(),t.length)},m(e,t){return gt(e.getMinutes(),t.length)},s(e,t){return gt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return gt(s,t.length)}},Ba={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Sx={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return xs.y(e,t)},Y:function(e,t,n,r){const s=mp(e,r),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return gt(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):gt(i,t.length)},R:function(e,t){const n=Ow(e);return gt(n,t.length)},u:function(e,t){const n=e.getFullYear();return gt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return gt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return gt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return xs.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return gt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=zw(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):gt(s,t.length)},I:function(e,t,n){const r=dp(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):gt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):xs.d(e,t)},D:function(e,t,n){const r=lP(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):gt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return gt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return gt(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return gt(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Ba.noon:r===0?s=Ba.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Ba.evening:r>=12?s=Ba.afternoon:r>=4?s=Ba.morning:s=Ba.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return xs.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):xs.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):gt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):gt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):xs.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):xs.s(e,t)},S:function(e,t){return xs.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Dx(r);case"XXXX":case"XX":return ra(r);case"XXXXX":case"XXX":default:return ra(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Dx(r);case"xxxx":case"xx":return ra(r);case"xxxxx":case"xxx":default:return ra(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+kx(r,":");case"OOOO":default:return"GMT"+ra(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+kx(r,":");case"zzzz":default:return"GMT"+ra(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return gt(r,t.length)},T:function(e,t,n){return gt(+e,t.length)}};function kx(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+t+gt(i,2)}function Dx(e,t){return e%60===0?(e>0?"-":"+")+gt(Math.abs(e)/60,2):ra(e,t)}function ra(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=gt(Math.trunc(r/60),2),i=gt(r%60,2);return n+s+t+i}const Cx=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Hw=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},uP=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Cx(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Cx(r,t)).replace("{{time}}",Hw(s,t))},Yf={p:Hw,P:uP},dP=/^D+$/,mP=/^Y+$/,fP=["D","DD","YY","YYYY"];function hP(e){return dP.test(e)}function pP(e){return mP.test(e)}function gP(e,t,n){const r=xP(e,t,n);if(console.warn(r),fP.includes(e))throw new RangeError(r)}function xP(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const vP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bP=/^'([^]*?)'?$/,wP=/''/g,NP=/[a-zA-Z]/;function Px(e,t,n){var m,h,f,b,v,D,g,w;const r=Ia(),s=(n==null?void 0:n.locale)??r.locale??$w,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((b=(f=r.locale)==null?void 0:f.options)==null?void 0:b.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((D=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:D.weekStartsOn)??r.weekStartsOn??((w=(g=r.locale)==null?void 0:g.options)==null?void 0:w.weekStartsOn)??0,l=$e(e,n==null?void 0:n.in);if(!ku(l))throw new RangeError("Invalid time value");let c=t.match(yP).map(y=>{const _=y[0];if(_==="p"||_==="P"){const j=Yf[_];return j(y,s.formatLong)}return y}).join("").match(vP).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const _=y[0];if(_==="'")return{isToken:!1,value:jP(y)};if(Sx[_])return{isToken:!0,value:y};if(_.match(NP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(y=>{if(!y.isToken)return y.value;const _=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&pP(_)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&hP(_))&&gP(_,t,String(e));const j=Sx[_[0]];return j(l,_,s.localize,u)}).join("")}function jP(e){const t=e.match(bP);return t?t[1].replace(wP,"'"):e}function Ex(e,t){return $e(e,t==null?void 0:t.in).getDate()}function _P(e,t){return $e(e,t==null?void 0:t.in).getDay()}function SP(e,t){const n=$e(e,t==null?void 0:t.in),r=n.getFullYear(),s=n.getMonth(),i=yt(n,0);return i.setFullYear(r,s+1,0),i.setHours(0,0,0,0),i.getDate()}function kP(){return Object.assign({},Ia())}function rs(e,t){return $e(e,t==null?void 0:t.in).getHours()}function DP(e,t){const n=$e(e,t==null?void 0:t.in).getDay();return n===0?7:n}function ss(e,t){return $e(e,t==null?void 0:t.in).getMinutes()}function mn(e,t){return $e(e,t==null?void 0:t.in).getMonth()}function $s(e){return $e(e).getSeconds()}function qf(e){return+$e(e)}function rt(e,t){return $e(e,t==null?void 0:t.in).getFullYear()}function Us(e,t){return+$e(e)>+$e(t)}function Ma(e,t){return+$e(e)<+$e(t)}function CP(e,t){return+$e(e)==+$e(t)}function PP(e,t){const n=EP(t)?new t(0):yt(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}function EP(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}const MP=10;class Bw{constructor(){_e(this,"subPriority",0)}validate(t,n){return!0}}class TP extends Bw{constructor(t,n,r,s,i){super(),this.value=t,this.validateValue=n,this.setValue=r,this.priority=s,i&&(this.subPriority=i)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,r){return this.setValue(t,n,this.value,r)}}class OP extends Bw{constructor(n,r){super();_e(this,"priority",MP);_e(this,"subPriority",-1);this.context=n||(s=>yt(r,s))}set(n,r){return r.timestampIsSet?n:yt(n,PP(n,this.context))}}class ft{run(t,n,r,s){const i=this.parse(t,n,r,s);return i?{setter:new TP(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,n,r){return!0}}class FP extends ft{constructor(){super(...arguments);_e(this,"priority",140);_e(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})||s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"})}}set(n,r,s){return r.era=s,n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}const It={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Lr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function $t(e,t){return e&&{value:t(e.value),rest:e.rest}}function Pt(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Rr(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(s*Sd+i*_d+o*jC),rest:t.slice(n[0].length)}}function Vw(e){return Pt(It.anyDigitsSigned,e)}function Ft(e,t){switch(e){case 1:return Pt(It.singleDigit,t);case 2:return Pt(It.twoDigits,t);case 3:return Pt(It.threeDigits,t);case 4:return Pt(It.fourDigits,t);default:return Pt(new RegExp("^\\d{1,"+e+"}"),t)}}function Eu(e,t){switch(e){case 1:return Pt(It.singleDigitSigned,t);case 2:return Pt(It.twoDigitsSigned,t);case 3:return Pt(It.threeDigitsSigned,t);case 4:return Pt(It.fourDigitsSigned,t);default:return Pt(new RegExp("^-?\\d{1,"+e+"}"),t)}}function fp(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Uw(e,t){const n=t>0,r=n?t:1-t;let s;if(r<=50)s=e||100;else{const i=r+50,o=Math.trunc(i/100)*100,l=e>=i%100;s=e+o-(l?100:0)}return n?s:1-s}function Ww(e){return e%400===0||e%4===0&&e%100!==0}class AP extends ft{constructor(){super(...arguments);_e(this,"priority",130);_e(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,s){const i=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return $t(Ft(4,n),i);case"yo":return $t(s.ordinalNumber(n,{unit:"year"}),i);default:return $t(Ft(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s){const i=n.getFullYear();if(s.isTwoDigitYear){const l=Uw(s.year,i);return n.setFullYear(l,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class LP extends ft{constructor(){super(...arguments);_e(this,"priority",130);_e(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,s){const i=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return $t(Ft(4,n),i);case"Yo":return $t(s.ordinalNumber(n,{unit:"year"}),i);default:return $t(Ft(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s,i){const o=mp(n,i);if(s.isTwoDigitYear){const c=Uw(s.year,o);return n.setFullYear(c,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),ds(n,i)}const l=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(l,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),ds(n,i)}}class RP extends ft{constructor(){super(...arguments);_e(this,"priority",130);_e(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return Eu(r==="R"?4:r.length,n)}set(n,r,s){const i=yt(n,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),Di(i)}}class IP extends ft{constructor(){super(...arguments);_e(this,"priority",130);_e(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return Eu(r==="u"?4:r.length,n)}set(n,r,s){return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class $P extends ft{constructor(){super(...arguments);_e(this,"priority",120);_e(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"Q":case"QQ":return Ft(r.length,n);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})||s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class zP extends ft{constructor(){super(...arguments);_e(this,"priority",120);_e(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"q":case"qq":return Ft(r.length,n);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})||s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class HP extends ft{constructor(){super(...arguments);_e(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);_e(this,"priority",110)}parse(n,r,s){const i=o=>o-1;switch(r){case"M":return $t(Pt(It.month,n),i);case"MM":return $t(Ft(2,n),i);case"Mo":return $t(s.ordinalNumber(n,{unit:"month"}),i);case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})||s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}class BP extends ft{constructor(){super(...arguments);_e(this,"priority",110);_e(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,s){const i=o=>o-1;switch(r){case"L":return $t(Pt(It.month,n),i);case"LL":return $t(Ft(2,n),i);case"Lo":return $t(s.ordinalNumber(n,{unit:"month"}),i);case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})||s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}function VP(e,t,n){const r=$e(e,n==null?void 0:n.in),s=zw(r,n)-t;return r.setDate(r.getDate()-s*7),$e(r,n==null?void 0:n.in)}class UP extends ft{constructor(){super(...arguments);_e(this,"priority",100);_e(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,s){switch(r){case"w":return Pt(It.week,n);case"wo":return s.ordinalNumber(n,{unit:"week"});default:return Ft(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s,i){return ds(VP(n,s,i),i)}}function WP(e,t,n){const r=$e(e,n==null?void 0:n.in),s=dp(r,n)-t;return r.setDate(r.getDate()-s*7),r}class YP extends ft{constructor(){super(...arguments);_e(this,"priority",100);_e(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,s){switch(r){case"I":return Pt(It.week,n);case"Io":return s.ordinalNumber(n,{unit:"week"});default:return Ft(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s){return Di(WP(n,s))}}const qP=[31,28,31,30,31,30,31,31,30,31,30,31],KP=[31,29,31,30,31,30,31,31,30,31,30,31];class QP extends ft{constructor(){super(...arguments);_e(this,"priority",90);_e(this,"subPriority",1);_e(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"d":return Pt(It.date,n);case"do":return s.ordinalNumber(n,{unit:"date"});default:return Ft(r.length,n)}}validate(n,r){const s=n.getFullYear(),i=Ww(s),o=n.getMonth();return i?r>=1&&r<=KP[o]:r>=1&&r<=qP[o]}set(n,r,s){return n.setDate(s),n.setHours(0,0,0,0),n}}class GP extends ft{constructor(){super(...arguments);_e(this,"priority",90);_e(this,"subpriority",1);_e(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,s){switch(r){case"D":case"DD":return Pt(It.dayOfYear,n);case"Do":return s.ordinalNumber(n,{unit:"date"});default:return Ft(r.length,n)}}validate(n,r){const s=n.getFullYear();return Ww(s)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,s){return n.setMonth(0,s),n.setHours(0,0,0,0),n}}function hp(e,t,n){var h,f,b,v;const r=Ia(),s=(n==null?void 0:n.weekStartsOn)??((f=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((v=(b=r.locale)==null?void 0:b.options)==null?void 0:v.weekStartsOn)??0,i=$e(e,n==null?void 0:n.in),o=i.getDay(),c=(t%7+7)%7,u=7-s,m=t<0||t>6?t-(o+u)%7:(c+u)%7-(o+u)%7;return wr(i,m,n)}class JP extends ft{constructor(){super(...arguments);_e(this,"priority",90);_e(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=hp(n,s,i),n.setHours(0,0,0,0),n}}class XP extends ft{constructor(){super(...arguments);_e(this,"priority",90);_e(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,s,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return $t(Ft(r.length,n),o);case"eo":return $t(s.ordinalNumber(n,{unit:"day"}),o);case"eee":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=hp(n,s,i),n.setHours(0,0,0,0),n}}class ZP extends ft{constructor(){super(...arguments);_e(this,"priority",90);_e(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,s,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return $t(Ft(r.length,n),o);case"co":return $t(s.ordinalNumber(n,{unit:"day"}),o);case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})||s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=hp(n,s,i),n.setHours(0,0,0,0),n}}function eE(e,t,n){const r=$e(e,n==null?void 0:n.in),s=DP(r,n),i=t-s;return wr(r,i,n)}class tE extends ft{constructor(){super(...arguments);_e(this,"priority",90);_e(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,s){const i=o=>o===0?7:o;switch(r){case"i":case"ii":return Ft(r.length,n);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return $t(s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiii":return $t(s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiiii":return $t(s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiii":default:return $t(s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i)}}validate(n,r){return r>=1&&r<=7}set(n,r,s){return n=eE(n,s),n.setHours(0,0,0,0),n}}class nE extends ft{constructor(){super(...arguments);_e(this,"priority",80);_e(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(fp(s),0,0,0),n}}class rE extends ft{constructor(){super(...arguments);_e(this,"priority",80);_e(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(fp(s),0,0,0),n}}class sE extends ft{constructor(){super(...arguments);_e(this,"priority",80);_e(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(fp(s),0,0,0),n}}class aE extends ft{constructor(){super(...arguments);_e(this,"priority",70);_e(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,s){switch(r){case"h":return Pt(It.hour12h,n);case"ho":return s.ordinalNumber(n,{unit:"hour"});default:return Ft(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,s){const i=n.getHours()>=12;return i&&s<12?n.setHours(s+12,0,0,0):!i&&s===12?n.setHours(0,0,0,0):n.setHours(s,0,0,0),n}}class iE extends ft{constructor(){super(...arguments);_e(this,"priority",70);_e(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,s){switch(r){case"H":return Pt(It.hour23h,n);case"Ho":return s.ordinalNumber(n,{unit:"hour"});default:return Ft(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,s){return n.setHours(s,0,0,0),n}}class oE extends ft{constructor(){super(...arguments);_e(this,"priority",70);_e(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,s){switch(r){case"K":return Pt(It.hour11h,n);case"Ko":return s.ordinalNumber(n,{unit:"hour"});default:return Ft(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.getHours()>=12&&s<12?n.setHours(s+12,0,0,0):n.setHours(s,0,0,0),n}}class lE extends ft{constructor(){super(...arguments);_e(this,"priority",70);_e(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,s){switch(r){case"k":return Pt(It.hour24h,n);case"ko":return s.ordinalNumber(n,{unit:"hour"});default:return Ft(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,s){const i=s<=24?s%24:s;return n.setHours(i,0,0,0),n}}class cE extends ft{constructor(){super(...arguments);_e(this,"priority",60);_e(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"m":return Pt(It.minute,n);case"mo":return s.ordinalNumber(n,{unit:"minute"});default:return Ft(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setMinutes(s,0,0),n}}class uE extends ft{constructor(){super(...arguments);_e(this,"priority",50);_e(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"s":return Pt(It.second,n);case"so":return s.ordinalNumber(n,{unit:"second"});default:return Ft(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setSeconds(s,0),n}}class dE extends ft{constructor(){super(...arguments);_e(this,"priority",30);_e(this,"incompatibleTokens",["t","T"])}parse(n,r){const s=i=>Math.trunc(i*Math.pow(10,-r.length+3));return $t(Ft(r.length,n),s)}set(n,r,s){return n.setMilliseconds(s),n}}class mE extends ft{constructor(){super(...arguments);_e(this,"priority",10);_e(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Rr(Lr.basicOptionalMinutes,n);case"XX":return Rr(Lr.basic,n);case"XXXX":return Rr(Lr.basicOptionalSeconds,n);case"XXXXX":return Rr(Lr.extendedOptionalSeconds,n);case"XXX":default:return Rr(Lr.extended,n)}}set(n,r,s){return r.timestampIsSet?n:yt(n,n.getTime()-_u(n)-s)}}class fE extends ft{constructor(){super(...arguments);_e(this,"priority",10);_e(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Rr(Lr.basicOptionalMinutes,n);case"xx":return Rr(Lr.basic,n);case"xxxx":return Rr(Lr.basicOptionalSeconds,n);case"xxxxx":return Rr(Lr.extendedOptionalSeconds,n);case"xxx":default:return Rr(Lr.extended,n)}}set(n,r,s){return r.timestampIsSet?n:yt(n,n.getTime()-_u(n)-s)}}class hE extends ft{constructor(){super(...arguments);_e(this,"priority",40);_e(this,"incompatibleTokens","*")}parse(n){return Vw(n)}set(n,r,s){return[yt(n,s*1e3),{timestampIsSet:!0}]}}class pE extends ft{constructor(){super(...arguments);_e(this,"priority",20);_e(this,"incompatibleTokens","*")}parse(n){return Vw(n)}set(n,r,s){return[yt(n,s),{timestampIsSet:!0}]}}const gE={G:new FP,y:new AP,Y:new LP,R:new RP,u:new IP,Q:new $P,q:new zP,M:new HP,L:new BP,w:new UP,I:new YP,d:new QP,D:new GP,E:new JP,e:new XP,c:new ZP,i:new tE,a:new nE,b:new rE,B:new sE,h:new aE,H:new iE,K:new oE,k:new lE,m:new cE,s:new uE,S:new dE,X:new mE,x:new fE,t:new hE,T:new pE},xE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yE=/^'([^]*?)'?$/,bE=/''/g,wE=/\S/,NE=/[a-zA-Z]/;function jE(e,t,n,r){var g,w,y,_,j,L,C,T;const s=()=>yt((r==null?void 0:r.in)||n,NaN),i=kP(),o=(r==null?void 0:r.locale)??i.locale??$w,l=(r==null?void 0:r.firstWeekContainsDate)??((w=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??i.firstWeekContainsDate??((_=(y=i.locale)==null?void 0:y.options)==null?void 0:_.firstWeekContainsDate)??1,c=(r==null?void 0:r.weekStartsOn)??((L=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:L.weekStartsOn)??i.weekStartsOn??((T=(C=i.locale)==null?void 0:C.options)==null?void 0:T.weekStartsOn)??0;if(!t)return e?s():$e(n,r==null?void 0:r.in);const u={firstWeekContainsDate:l,weekStartsOn:c,locale:o},m=[new OP(r==null?void 0:r.in,n)],h=t.match(vE).map(P=>{const q=P[0];if(q in Yf){const X=Yf[q];return X(P,o.formatLong)}return P}).join("").match(xE),f=[];for(let P of h){const q=P[0],X=gE[q];if(X){const{incompatibleTokens:te}=X;if(Array.isArray(te)){const fe=f.find(G=>te.includes(G.token)||G.token===q);if(fe)throw new RangeError(`The format string mustn't contain \`${fe.fullToken}\` and \`${P}\` at the same time`)}else if(X.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${P}\` and any other token at the same time`);f.push({token:q,fullToken:P});const oe=X.run(e,P,o.match,u);if(!oe)return s();m.push(oe.setter),e=oe.rest}else{if(q.match(NE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+q+"`");if(P==="''"?P="'":q==="'"&&(P=_E(P)),e.indexOf(P)===0)e=e.slice(P.length);else return s()}}if(e.length>0&&wE.test(e))return s();const b=m.map(P=>P.priority).sort((P,q)=>q-P).filter((P,q,X)=>X.indexOf(P)===q).map(P=>m.filter(q=>q.priority===P).sort((q,X)=>X.subPriority-q.subPriority)).map(P=>P[0]);let v=$e(n,r==null?void 0:r.in);if(isNaN(+v))return s();const D={};for(const P of b){if(!P.validate(v,u))return s();const q=P.set(v,D,u);Array.isArray(q)?(v=q[0],Object.assign(D,q[1])):v=q}return v}function _E(e){return e.match(yE)[1].replace(bE,"'")}function SE(e,t,n){const[r,s]=ps(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function kE(e,t,n){const[r,s]=ps(n==null?void 0:n.in,e,t);return+Wf(r)==+Wf(s)}function DE(e,t,n){const[r,s]=ps(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()}function dl(e,t,n){const r=+$e(e,n==null?void 0:n.in),[s,i]=[+$e(t.start,n==null?void 0:n.in),+$e(t.end,n==null?void 0:n.in)].sort((o,l)=>o-l);return r>=s&&r<=i}function CE(e,t,n){return wr(e,-1,n)}function PE(e,t){const n=()=>yt(t==null?void 0:t.in,NaN),s=OE(e);let i;if(s.date){const u=FE(s.date,2);i=AE(u.restDateString,u.year)}if(!i||isNaN(+i))return n();const o=+i;let l=0,c;if(s.time&&(l=LE(s.time),isNaN(l)))return n();if(s.timezone){if(c=RE(s.timezone),isNaN(c))return n()}else{const u=new Date(o+l),m=$e(0,t==null?void 0:t.in);return m.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),m.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),m}return $e(o+l+c,t==null?void 0:t.in)}const ec={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},EE=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ME=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,TE=/^([+-])(\d{2})(?::?(\d{2}))?$/;function OE(e){const t={},n=e.split(ec.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],ec.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ec.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const s=ec.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function FE(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((r[1]||r[2]).length)}}function AE(e,t){if(t===null)return new Date(NaN);const n=e.match(EE);if(!n)return new Date(NaN);const r=!!n[4],s=no(n[1]),i=no(n[2])-1,o=no(n[3]),l=no(n[4]),c=no(n[5])-1;if(r)return BE(t,l,c)?IE(t,l,c):new Date(NaN);{const u=new Date(0);return!zE(t,i,o)||!HE(t,s)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(s,o)),u)}}function no(e){return e?parseInt(e):1}function LE(e){const t=e.match(ME);if(!t)return NaN;const n=pm(t[1]),r=pm(t[2]),s=pm(t[3]);return VE(n,r,s)?n*Sd+r*_d+s*1e3:NaN}function pm(e){return e&&parseFloat(e.replace(",","."))||0}function RE(e){if(e==="Z")return 0;const t=e.match(TE);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return UE(r,s)?n*(r*Sd+s*_d):NaN}function IE(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const s=r.getUTCDay()||7,i=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const $E=[31,null,31,30,31,30,31,31,30,31,30,31];function Yw(e){return e%400===0||e%4===0&&e%100!==0}function zE(e,t,n){return t>=0&&t<=11&&n>=1&&n<=($E[t]||(Yw(e)?29:28))}function HE(e,t){return t>=1&&t<=(Yw(e)?366:365)}function BE(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function VE(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function UE(e,t){return t>=0&&t<=59}function er(e,t,n){const r=$e(e,n==null?void 0:n.in),s=r.getFullYear(),i=r.getDate(),o=yt(e,0);o.setFullYear(s,t,15),o.setHours(0,0,0,0);const l=SP(o);return r.setMonth(t,Math.min(i,l)),r}function fi(e,t,n){const r=$e(e,n==null?void 0:n.in);return r.setHours(t),r}function hi(e,t,n){const r=$e(e,n==null?void 0:n.in);return r.setMinutes(t),r}function qa(e,t,n){const r=$e(e,n==null?void 0:n.in),s=Math.trunc(r.getMonth()/3)+1,i=t-s;return er(r,r.getMonth()+i*3)}function zc(e,t,n){const r=$e(e,n==null?void 0:n.in);return r.setSeconds(t),r}function Mr(e,t,n){const r=$e(e,n==null?void 0:n.in);return isNaN(+r)?yt(e,NaN):(r.setFullYear(t),r)}function wa(e,t,n){return jr(e,-t,n)}function qw(e,t,n){return up(e,-1,n)}function Mx(e,t,n){return Su(e,-1,n)}function Pi(e,t,n){return ts(e,-t,n)}function Dd(){return typeof window<"u"}function Wi(e){return Kw(e)?(e.nodeName||"").toLowerCase():"#document"}function Bn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ur(e){var t;return(t=(Kw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Kw(e){return Dd()?e instanceof Node||e instanceof Bn(e).Node:!1}function wn(e){return Dd()?e instanceof Element||e instanceof Bn(e).Element:!1}function Vr(e){return Dd()?e instanceof HTMLElement||e instanceof Bn(e).HTMLElement:!1}function Tx(e){return!Dd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Bn(e).ShadowRoot}const WE=new Set(["inline","contents"]);function El(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=ur(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!WE.has(s)}const YE=new Set(["table","td","th"]);function qE(e){return YE.has(Wi(e))}const KE=[":popover-open",":modal"];function Cd(e){return KE.some(t=>{try{return e.matches(t)}catch{return!1}})}const QE=["transform","translate","scale","rotate","perspective"],GE=["transform","translate","scale","rotate","perspective","filter"],JE=["paint","layout","strict","content"];function pp(e){const t=gp(),n=wn(e)?ur(e):e;return QE.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||GE.some(r=>(n.willChange||"").includes(r))||JE.some(r=>(n.contain||"").includes(r))}function XE(e){let t=Ws(e);for(;Vr(t)&&!Ei(t);){if(pp(t))return t;if(Cd(t))return null;t=Ws(t)}return null}function gp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ZE=new Set(["html","body","#document"]);function Ei(e){return ZE.has(Wi(e))}function ur(e){return Bn(e).getComputedStyle(e)}function Pd(e){return wn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ws(e){if(Wi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Tx(e)&&e.host||Ur(e);return Tx(t)?t.host:t}function Qw(e){const t=Ws(e);return Ei(t)?e.ownerDocument?e.ownerDocument.body:e.body:Vr(t)&&El(t)?t:Qw(t)}function ml(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Qw(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=Bn(s);if(i){const l=Kf(o);return t.concat(o,o.visualViewport||[],El(s)?s:[],l&&n?ml(l):[])}return t.concat(s,ml(s,[],n))}function Kf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Mi=Math.min,Na=Math.max,Mu=Math.round,tc=Math.floor,Hr=e=>({x:e,y:e}),e5={left:"right",right:"left",bottom:"top",top:"bottom"},t5={start:"end",end:"start"};function n5(e,t,n){return Na(e,Mi(t,n))}function Ed(e,t){return typeof e=="function"?e(t):e}function Ti(e){return e.split("-")[0]}function Ml(e){return e.split("-")[1]}function r5(e){return e==="x"?"y":"x"}function xp(e){return e==="y"?"height":"width"}const s5=new Set(["top","bottom"]);function ma(e){return s5.has(Ti(e))?"y":"x"}function vp(e){return r5(ma(e))}function a5(e,t,n){n===void 0&&(n=!1);const r=Ml(e),s=vp(e),i=xp(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Tu(o)),[o,Tu(o)]}function i5(e){const t=Tu(e);return[Qf(e),t,Qf(t)]}function Qf(e){return e.replace(/start|end/g,t=>t5[t])}const Ox=["left","right"],Fx=["right","left"],o5=["top","bottom"],l5=["bottom","top"];function c5(e,t,n){switch(e){case"top":case"bottom":return n?t?Fx:Ox:t?Ox:Fx;case"left":case"right":return t?o5:l5;default:return[]}}function u5(e,t,n,r){const s=Ml(e);let i=c5(Ti(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(Qf)))),i}function Tu(e){return e.replace(/left|right|bottom|top/g,t=>e5[t])}function d5(e){return{top:0,right:0,bottom:0,left:0,...e}}function Gw(e){return typeof e!="number"?d5(e):{top:e,right:e,bottom:e,left:e}}function Ou(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}var m5=typeof document<"u",f5=function(){},Fu=m5?E.useLayoutEffect:f5;const h5={...fh},p5=h5.useInsertionEffect,g5=p5||(e=>e());function x5(e){const t=E.useRef(()=>{});return g5(()=>{t.current=e}),E.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Ax(e,t,n){let{reference:r,floating:s}=e;const i=ma(t),o=vp(t),l=xp(o),c=Ti(t),u=i==="y",m=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[l]/2-s[l]/2;let b;switch(c){case"top":b={x:m,y:r.y-s.height};break;case"bottom":b={x:m,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:h};break;case"left":b={x:r.x-s.width,y:h};break;default:b={x:r.x,y:r.y}}switch(Ml(t)){case"start":b[o]-=f*(n&&u?-1:1);break;case"end":b[o]+=f*(n&&u?-1:1);break}return b}const v5=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:m,y:h}=Ax(u,r,c),f=r,b={},v=0;for(let D=0;D<l.length;D++){const{name:g,fn:w}=l[D],{x:y,y:_,data:j,reset:L}=await w({x:m,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:b,rects:u,platform:o,elements:{reference:e,floating:t}});m=y??m,h=_??h,b={...b,[g]:{...b[g],...j}},L&&v<=50&&(v++,typeof L=="object"&&(L.placement&&(f=L.placement),L.rects&&(u=L.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):L.rects),{x:m,y:h}=Ax(u,f,c)),D=-1)}return{x:m,y:h,placement:f,strategy:s,middlewareData:b}};async function y5(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:h="floating",altBoundary:f=!1,padding:b=0}=Ed(t,e),v=Gw(b),g=l[f?h==="floating"?"reference":"floating":h],w=Ou(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:m,strategy:c})),y=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},L=Ou(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:_,strategy:c}):y);return{top:(w.top-L.top+v.top)/j.y,bottom:(L.bottom-w.bottom+v.bottom)/j.y,left:(w.left-L.left+v.left)/j.x,right:(L.right-w.right+v.right)/j.x}}const b5=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:m=0}=Ed(e,t)||{};if(u==null)return{};const h=Gw(m),f={x:n,y:r},b=vp(s),v=xp(b),D=await o.getDimensions(u),g=b==="y",w=g?"top":"left",y=g?"bottom":"right",_=g?"clientHeight":"clientWidth",j=i.reference[v]+i.reference[b]-f[b]-i.floating[v],L=f[b]-i.reference[b],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=C?C[_]:0;(!T||!await(o.isElement==null?void 0:o.isElement(C)))&&(T=l.floating[_]||i.floating[v]);const P=j/2-L/2,q=T/2-D[v]/2-1,X=Mi(h[w],q),te=Mi(h[y],q),oe=X,fe=T-D[v]-te,G=T/2-D[v]/2+P,se=n5(oe,G,fe),W=!c.arrow&&Ml(s)!=null&&G!==se&&i.reference[v]/2-(G<oe?X:te)-D[v]/2<0,$=W?G<oe?G-oe:G-fe:0;return{[b]:f[b]+$,data:{[b]:se,centerOffset:G-se-$,...W&&{alignmentOffset:$}},reset:W}}}),w5=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:m=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:D=!0,...g}=Ed(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=Ti(s),y=ma(l),_=Ti(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),L=f||(_||!D?[Tu(l)]:i5(l)),C=v!=="none";!f&&C&&L.push(...u5(l,D,v,j));const T=[l,...L],P=await y5(t,g),q=[];let X=((r=i.flip)==null?void 0:r.overflows)||[];if(m&&q.push(P[w]),h){const G=a5(s,o,j);q.push(P[G[0]],P[G[1]])}if(X=[...X,{placement:s,overflows:q}],!q.every(G=>G<=0)){var te,oe;const G=(((te=i.flip)==null?void 0:te.index)||0)+1,se=T[G];if(se&&(!(h==="alignment"?y!==ma(se):!1)||X.every(K=>K.overflows[0]>0&&ma(K.placement)===y)))return{data:{index:G,overflows:X},reset:{placement:se}};let W=(oe=X.filter($=>$.overflows[0]<=0).sort(($,K)=>$.overflows[1]-K.overflows[1])[0])==null?void 0:oe.placement;if(!W)switch(b){case"bestFit":{var fe;const $=(fe=X.filter(K=>{if(C){const ee=ma(K.placement);return ee===y||ee==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(ee=>ee>0).reduce((ee,Q)=>ee+Q,0)]).sort((K,ee)=>K[1]-ee[1])[0])==null?void 0:fe[0];$&&(W=$);break}case"initialPlacement":W=l;break}if(s!==W)return{reset:{placement:W}}}return{}}}},N5=new Set(["left","top"]);async function j5(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ti(n),l=Ml(n),c=ma(n)==="y",u=N5.has(o)?-1:1,m=i&&c?-1:1,h=Ed(t,e);let{mainAxis:f,crossAxis:b,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(b=l==="end"?v*-1:v),c?{x:b*m,y:f*u}:{x:f*u,y:b*m}}const _5=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=t,c=await j5(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}};function Jw(e){const t=ur(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Vr(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,l=Mu(n)!==i||Mu(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function yp(e){return wn(e)?e:e.contextElement}function pi(e){const t=yp(e);if(!Vr(t))return Hr(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=Jw(t);let o=(i?Mu(n.width):n.width)/r,l=(i?Mu(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const S5=Hr(0);function Xw(e){const t=Bn(e);return!gp()||!t.visualViewport?S5:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function k5(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Bn(e)?!1:t}function Ta(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=yp(e);let o=Hr(1);t&&(r?wn(r)&&(o=pi(r)):o=pi(e));const l=k5(i,n,r)?Xw(i):Hr(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,m=s.width/o.x,h=s.height/o.y;if(i){const f=Bn(i),b=r&&wn(r)?Bn(r):r;let v=f,D=Kf(v);for(;D&&r&&b!==v;){const g=pi(D),w=D.getBoundingClientRect(),y=ur(D),_=w.left+(D.clientLeft+parseFloat(y.paddingLeft))*g.x,j=w.top+(D.clientTop+parseFloat(y.paddingTop))*g.y;c*=g.x,u*=g.y,m*=g.x,h*=g.y,c+=_,u+=j,v=Bn(D),D=Kf(v)}}return Ou({width:m,height:h,x:c,y:u})}function bp(e,t){const n=Pd(e).scrollLeft;return t?t.left+n:Ta(Ur(e)).left+n}function Zw(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:bp(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function D5(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=Ur(r),l=t?Cd(t.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Hr(1);const m=Hr(0),h=Vr(r);if((h||!h&&!i)&&((Wi(r)!=="body"||El(o))&&(c=Pd(r)),Vr(r))){const b=Ta(r);u=pi(r),m.x=b.x+r.clientLeft,m.y=b.y+r.clientTop}const f=o&&!h&&!i?Zw(o,c,!0):Hr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+m.x+f.x,y:n.y*u.y-c.scrollTop*u.y+m.y+f.y}}function C5(e){return Array.from(e.getClientRects())}function P5(e){const t=Ur(e),n=Pd(e),r=e.ownerDocument.body,s=Na(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Na(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+bp(e);const l=-n.scrollTop;return ur(r).direction==="rtl"&&(o+=Na(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function E5(e,t){const n=Bn(e),r=Ur(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=gp();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const M5=new Set(["absolute","fixed"]);function T5(e,t){const n=Ta(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Vr(e)?pi(e):Hr(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function Lx(e,t,n){let r;if(t==="viewport")r=E5(e,n);else if(t==="document")r=P5(Ur(e));else if(wn(t))r=T5(t,n);else{const s=Xw(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Ou(r)}function eN(e,t){const n=Ws(e);return n===t||!wn(n)||Ei(n)?!1:ur(n).position==="fixed"||eN(n,t)}function O5(e,t){const n=t.get(e);if(n)return n;let r=ml(e,[],!1).filter(l=>wn(l)&&Wi(l)!=="body"),s=null;const i=ur(e).position==="fixed";let o=i?Ws(e):e;for(;wn(o)&&!Ei(o);){const l=ur(o),c=pp(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&M5.has(s.position)||El(o)&&!c&&eN(e,o))?r=r.filter(m=>m!==o):s=l,o=Ws(o)}return t.set(e,r),r}function F5(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?Cd(t)?[]:O5(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,m)=>{const h=Lx(t,m,s);return u.top=Na(h.top,u.top),u.right=Mi(h.right,u.right),u.bottom=Mi(h.bottom,u.bottom),u.left=Na(h.left,u.left),u},Lx(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function A5(e){const{width:t,height:n}=Jw(e);return{width:t,height:n}}function L5(e,t,n){const r=Vr(t),s=Ur(t),i=n==="fixed",o=Ta(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Hr(0);function u(){c.x=bp(s)}if(r||!r&&!i)if((Wi(t)!=="body"||El(s))&&(l=Pd(t)),r){const b=Ta(t,!0,i,t);c.x=b.x+t.clientLeft,c.y=b.y+t.clientTop}else s&&u();i&&!r&&s&&u();const m=s&&!r&&!i?Zw(s,l):Hr(0),h=o.left+l.scrollLeft-c.x-m.x,f=o.top+l.scrollTop-c.y-m.y;return{x:h,y:f,width:o.width,height:o.height}}function gm(e){return ur(e).position==="static"}function Rx(e,t){if(!Vr(e)||ur(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ur(e)===n&&(n=n.ownerDocument.body),n}function tN(e,t){const n=Bn(e);if(Cd(e))return n;if(!Vr(e)){let s=Ws(e);for(;s&&!Ei(s);){if(wn(s)&&!gm(s))return s;s=Ws(s)}return n}let r=Rx(e,t);for(;r&&qE(r)&&gm(r);)r=Rx(r,t);return r&&Ei(r)&&gm(r)&&!pp(r)?n:r||XE(e)||n}const R5=async function(e){const t=this.getOffsetParent||tN,n=this.getDimensions,r=await n(e.floating);return{reference:L5(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function I5(e){return ur(e).direction==="rtl"}const $5={convertOffsetParentRelativeRectToViewportRelativeRect:D5,getDocumentElement:Ur,getClippingRect:F5,getOffsetParent:tN,getElementRects:R5,getClientRects:C5,getDimensions:A5,getScale:pi,isElement:wn,isRTL:I5};function nN(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function z5(e,t){let n=null,r;const s=Ur(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:m,top:h,width:f,height:b}=u;if(l||t(),!f||!b)return;const v=tc(h),D=tc(s.clientWidth-(m+f)),g=tc(s.clientHeight-(h+b)),w=tc(m),_={rootMargin:-v+"px "+-D+"px "+-g+"px "+-w+"px",threshold:Na(0,Mi(1,c))||1};let j=!0;function L(C){const T=C[0].intersectionRatio;if(T!==c){if(!j)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!nN(u,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(L,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(L,_)}n.observe(e)}return o(!0),i}function H5(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=yp(e),m=s||i?[...u?ml(u):[],...ml(t)]:[];m.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=u&&l?z5(u,n):null;let f=-1,b=null;o&&(b=new ResizeObserver(w=>{let[y]=w;y&&y.target===u&&b&&(b.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=b)==null||_.observe(t)})),n()}),u&&!c&&b.observe(u),b.observe(t));let v,D=c?Ta(e):null;c&&g();function g(){const w=Ta(e);D&&!nN(D,w)&&n(),D=w,v=requestAnimationFrame(g)}return n(),()=>{var w;m.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(w=b)==null||w.disconnect(),b=null,c&&cancelAnimationFrame(v)}}const B5=_5,V5=w5,Ix=b5,U5=(e,t,n)=>{const r=new Map,s={platform:$5,...n},i={...s.platform,_c:r};return v5(e,t,{...s,platform:i})};var W5=typeof document<"u",Y5=function(){},Hc=W5?E.useLayoutEffect:Y5;function Au(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Au(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!Au(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function rN(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $x(e,t){const n=rN(e);return Math.round(t*n)/n}function xm(e){const t=E.useRef(e);return Hc(()=>{t.current=e}),t}function q5(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[m,h]=E.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,b]=E.useState(r);Au(f,r)||b(r);const[v,D]=E.useState(null),[g,w]=E.useState(null),y=E.useCallback(K=>{K!==C.current&&(C.current=K,D(K))},[]),_=E.useCallback(K=>{K!==T.current&&(T.current=K,w(K))},[]),j=i||v,L=o||g,C=E.useRef(null),T=E.useRef(null),P=E.useRef(m),q=c!=null,X=xm(c),te=xm(s),oe=xm(u),fe=E.useCallback(()=>{if(!C.current||!T.current)return;const K={placement:t,strategy:n,middleware:f};te.current&&(K.platform=te.current),U5(C.current,T.current,K).then(ee=>{const Q={...ee,isPositioned:oe.current!==!1};G.current&&!Au(P.current,Q)&&(P.current=Q,sp.flushSync(()=>{h(Q)}))})},[f,t,n,te,oe]);Hc(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(K=>({...K,isPositioned:!1})))},[u]);const G=E.useRef(!1);Hc(()=>(G.current=!0,()=>{G.current=!1}),[]),Hc(()=>{if(j&&(C.current=j),L&&(T.current=L),j&&L){if(X.current)return X.current(j,L,fe);fe()}},[j,L,fe,X,q]);const se=E.useMemo(()=>({reference:C,floating:T,setReference:y,setFloating:_}),[y,_]),W=E.useMemo(()=>({reference:j,floating:L}),[j,L]),$=E.useMemo(()=>{const K={position:n,left:0,top:0};if(!W.floating)return K;const ee=$x(W.floating,m.x),Q=$x(W.floating,m.y);return l?{...K,transform:"translate("+ee+"px, "+Q+"px)",...rN(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ee,top:Q}},[n,l,W.floating,m.x,m.y]);return E.useMemo(()=>({...m,update:fe,refs:se,elements:W,floatingStyles:$}),[m,fe,se,W,$])}const K5=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Ix({element:r.current,padding:s}).fn(n):{}:r?Ix({element:r,padding:s}).fn(n):{}}}},Q5=(e,t)=>({...B5(e),options:[e,t]}),G5=(e,t)=>({...V5(e),options:[e,t]}),J5=(e,t)=>({...K5(e),options:[e,t]}),X5={...fh};let zx=!1,Z5=0;const Hx=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Z5++;function eM(){const[e,t]=E.useState(()=>zx?Hx():void 0);return Fu(()=>{e==null&&t(Hx())},[]),E.useEffect(()=>{zx=!0},[]),e}const tM=X5.useId,sN=tM||eM,nM=E.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:l=14,height:c=7,tipRadius:u=0,strokeWidth:m=0,staticOffset:h,stroke:f,d:b,style:{transform:v,...D}={},...g}=t,w=sN(),[y,_]=E.useState(!1);if(Fu(()=>{if(!s)return;ur(s).direction==="rtl"&&_(!0)},[s]),!s)return null;const[j,L]=r.split("-"),C=j==="top"||j==="bottom";let T=h;(C&&o!=null&&o.x||!C&&o!=null&&o.y)&&(T=null);const P=m*2,q=P/2,X=l/2*(u/-8+1),te=c/2*u/4,oe=!!b,fe=T&&L==="end"?"bottom":"top";let G=T&&L==="end"?"right":"left";T&&y&&(G=L==="end"?"left":"right");const se=(i==null?void 0:i.x)!=null?T||i.x:"",W=(i==null?void 0:i.y)!=null?T||i.y:"",$=b||"M0,0"+(" H"+l)+(" L"+(l-X)+","+(c-te))+(" Q"+l/2+","+c+" "+X+","+(c-te))+" Z",K={top:oe?"rotate(180deg)":"",left:oe?"rotate(90deg)":"rotate(-90deg)",bottom:oe?"":"rotate(180deg)",right:oe?"rotate(-90deg)":"rotate(90deg)"}[j];return a.jsxs("svg",{...g,"aria-hidden":!0,ref:n,width:oe?l:l+P,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[G]:se,[fe]:W,[j]:C||oe?"100%":"calc(100% - "+P/2+"px)",transform:[K,v].filter(ee=>!!ee).join(" "),...D},children:[P>0&&a.jsx("path",{clipPath:"url(#"+w+")",fill:"none",stroke:f,strokeWidth:P+(b?0:1),d:$}),a.jsx("path",{stroke:P&&!b?g.fill:"none",d:$}),a.jsx("clipPath",{id:w,children:a.jsx("rect",{x:-q,y:q*(oe?-1:1),width:l+P,height:l})})]})});function rM(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const sM=E.createContext(null),aM=E.createContext(null),iM=()=>{var e;return((e=E.useContext(sM))==null?void 0:e.id)||null},oM=()=>E.useContext(aM);function lM(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=sN(),i=E.useRef({}),[o]=E.useState(()=>rM()),l=iM()!=null,[c,u]=E.useState(r.reference),m=x5((b,v,D)=>{i.current.openEvent=b?v:void 0,o.emit("openchange",{open:b,event:v,reason:D,nested:l}),n==null||n(b,v,D)}),h=E.useMemo(()=>({setPositionReference:u}),[]),f=E.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return E.useMemo(()=>({dataRef:i,open:t,onOpenChange:m,elements:f,events:o,floatingId:s,refs:h}),[t,m,f,o,s,h])}function cM(e){e===void 0&&(e={});const{nodeId:t}=e,n=lM({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[i,o]=E.useState(null),[l,c]=E.useState(null),m=(s==null?void 0:s.domReference)||i,h=E.useRef(null),f=oM();Fu(()=>{m&&(h.current=m)},[m]);const b=q5({...e,elements:{...s,...l&&{reference:l}}}),v=E.useCallback(_=>{const j=wn(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),getClientRects:()=>_.getClientRects(),contextElement:_}:_;c(j),b.refs.setReference(j)},[b.refs]),D=E.useCallback(_=>{(wn(_)||_===null)&&(h.current=_,o(_)),(wn(b.refs.reference.current)||b.refs.reference.current===null||_!==null&&!wn(_))&&b.refs.setReference(_)},[b.refs]),g=E.useMemo(()=>({...b.refs,setReference:D,setPositionReference:v,domReference:h}),[b.refs,D,v]),w=E.useMemo(()=>({...b.elements,domReference:m}),[b.elements,m]),y=E.useMemo(()=>({...b,...r,refs:g,elements:w,nodeId:t}),[b,g,w,t,r]);return Fu(()=>{r.dataRef.current.floatingContext=y;const _=f==null?void 0:f.nodesRef.current.find(j=>j.id===t);_&&(_.context=y)}),E.useMemo(()=>({...b,context:y,refs:g,elements:w}),[b,g,w,y])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var Gf=function(t,n){return Gf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},Gf(t,n)};function en(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Gf(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ct=function(){return ct=Object.assign||function(n){for(var r,s=1,i=arguments.length;s<i;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},ct.apply(this,arguments)};function Ir(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var uM=function(e){var t=e.showTimeSelectOnly,n=t===void 0?!1:t,r=e.showTime,s=r===void 0?!1:r,i=e.className,o=e.children,l=n?"Choose Time":"Choose Date".concat(s?" and Time":"");return xe.createElement("div",{className:i,role:"dialog","aria-label":l,"aria-modal":"true"},o)},dM=function(e,t){var n=E.useRef(null),r=E.useRef(e);r.current=e;var s=E.useCallback(function(i){var o,l=i.composed&&i.composedPath&&i.composedPath().find(function(c){return c instanceof Node})||i.target;n.current&&!n.current.contains(l)&&(t&&l instanceof HTMLElement&&l.classList.contains(t)||(o=r.current)===null||o===void 0||o.call(r,i))},[t]);return E.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),n},Md=function(e){var t=e.children,n=e.onClickOutside,r=e.className,s=e.containerRef,i=e.style,o=e.ignoreClass,l=dM(n,o);return xe.createElement("div",{className:r,style:i,ref:function(c){l.current=c,s&&(s.current=c)}},t)},Ae;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(Ae||(Ae={}));function wp(){var e=typeof window<"u"?window:globalThis;return e}var Tl=12;function ht(e){if(e==null)return new Date;var t=typeof e=="string"?PE(e):$e(e);return Td(t)?t:new Date}function vm(e,t,n,r,s){s===void 0&&(s=ht());for(var i=Oi(n)||Oi(Np()),o=Array.isArray(t)?t:[t],l=0,c=o;l<c.length;l++){var u=c[l],m=jE(e,u,s,{locale:i});if(Td(m)&&(!r||e===Dt(m,u,n)))return m}return null}function Td(e,t){return ku(e)&&!Ma(e,new Date("1/1/1800"))}function Dt(e,t,n){if(n==="en")return Px(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?Oi(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),r=r||Oi(Np()),Px(e,t,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Zn(e,t){var n=t.dateFormat,r=t.locale,s=Array.isArray(n)&&n.length>0?n[0]:n;return e&&Dt(e,s,r)||""}var aN=" - ";function mM(e,t,n){if(!e)return"";var r=Zn(e,n),s=t?Zn(t,n):"";return"".concat(r).concat(aN).concat(s)}function fM(e,t){if(!(e!=null&&e.length))return"";var n=e[0]?Zn(e[0],t):"";if(e.length===1)return n;if(e.length===2&&e[1]){var r=Zn(e[1],t);return"".concat(n,", ").concat(r)}var s=e.length-1;return"".concat(n," (+").concat(s,")")}function ym(e,t){var n=t.hour,r=n===void 0?0:n,s=t.minute,i=s===void 0?0:s,o=t.second,l=o===void 0?0:o;return fi(hi(zc(e,l),i),r)}function hM(e){return dp(e)}function pM(e,t){return Dt(e,"ddd",t)}function Bc(e){return Ea(e)}function zs(e,t,n){var r=Oi(t||Np());return ds(e,{locale:r,weekStartsOn:n})}function as(e){return Lw(e)}function yo(e){return kd(e)}function Bx(e){return Wf(e)}function Vx(){return Ea(ht())}function Ux(e){return Fw(e)}function gM(e){return EC(e)}function xM(e){return Aw(e)}function Tr(e,t){return e&&t?DE(e,t):!e&&!t}function yn(e,t){return e&&t?SE(e,t):!e&&!t}function Lu(e,t){return e&&t?kE(e,t):!e&&!t}function lt(e,t){return e&&t?CC(e,t):!e&&!t}function fa(e,t){return e&&t?CP(e,t):!e&&!t}function bo(e,t,n){var r,s=Ea(t),i=Fw(n);try{r=dl(e,{start:s,end:i})}catch{r=!1}return r}function kn(e,t){var n=wp();n.__localeData__||(n.__localeData__={}),n.__localeData__[e]=t}function Np(){var e=wp();return e.__localeId__}function Oi(e){if(typeof e=="string"){var t=wp();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function vM(e,t,n){return t(Dt(e,"EEEE",n))}function yM(e,t){return Dt(e,"EEEEEE",t)}function bM(e,t){return Dt(e,"EEE",t)}function jp(e,t){return Dt(er(ht(),e),"LLLL",t)}function iN(e,t){return Dt(er(ht(),e),"LLL",t)}function wM(e,t){return Dt(qa(ht(),e),"QQQ",t)}function rr(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.excludeDateIntervals,l=n.includeDates,c=n.includeDateIntervals,u=n.filterDate;return Ol(e,{minDate:r,maxDate:s})||i&&i.some(function(m){return m instanceof Date?lt(e,m):lt(e,m.date)})||o&&o.some(function(m){var h=m.start,f=m.end;return dl(e,{start:h,end:f})})||l&&!l.some(function(m){return lt(e,m)})||c&&!c.some(function(m){var h=m.start,f=m.end;return dl(e,{start:h,end:f})})||u&&!u(ht(e))||!1}function _p(e,t){var n=t===void 0?{}:t,r=n.excludeDates,s=n.excludeDateIntervals;return s&&s.length>0?s.some(function(i){var o=i.start,l=i.end;return dl(e,{start:o,end:l})}):r&&r.some(function(i){var o;return i instanceof Date?lt(e,i):lt(e,(o=i.date)!==null&&o!==void 0?o:new Date)})||!1}function oN(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.includeDates,l=n.filterDate;return Ol(e,{minDate:r?Lw(r):void 0,maxDate:s?Aw(s):void 0})||(i==null?void 0:i.some(function(c){return yn(e,c instanceof Date?c:c.date)}))||o&&!o.some(function(c){return yn(e,c)})||l&&!l(ht(e))||!1}function nc(e,t,n,r){var s=rt(e),i=mn(e),o=rt(t),l=mn(t),c=rt(r);return s===o&&s===c?i<=n&&n<=l:s<o?c===s&&i<=n||c===o&&l>=n||c<o&&c>s:!1}function NM(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.includeDates;return Ol(e,{minDate:r,maxDate:s})||i&&i.some(function(l){return yn(l instanceof Date?l:l.date,e)})||o&&!o.some(function(l){return yn(l,e)})||!1}function rc(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.includeDates,l=n.filterDate;return Ol(e,{minDate:r,maxDate:s})||(i==null?void 0:i.some(function(c){return Lu(e,c instanceof Date?c:c.date)}))||o&&!o.some(function(c){return Lu(e,c)})||l&&!l(ht(e))||!1}function sc(e,t,n){if(!t||!n||!ku(t)||!ku(n))return!1;var r=rt(t),s=rt(n);return r<=e&&s>=e}function Vc(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.includeDates,l=n.filterDate,c=new Date(e,0,1);return Ol(c,{minDate:r?kd(r):void 0,maxDate:s?Rw(s):void 0})||(i==null?void 0:i.some(function(u){return Tr(c,u instanceof Date?u:u.date)}))||o&&!o.some(function(u){return Tr(c,u)})||l&&!l(ht(c))||!1}function ac(e,t,n,r){var s=rt(e),i=ba(e),o=rt(t),l=ba(t),c=rt(r);return s===o&&s===c?i<=n&&n<=l:s<o?c===s&&i<=n||c===o&&l>=n||c<o&&c>s:!1}function Ol(e,t){var n,r=t===void 0?{}:t,s=r.minDate,i=r.maxDate;return(n=s&&Ci(e,s)<0||i&&Ci(e,i)>0)!==null&&n!==void 0?n:!1}function Wx(e,t){return t.some(function(n){return rs(n)===rs(e)&&ss(n)===ss(e)&&$s(n)===$s(e)})}function Yx(e,t){var n=t===void 0?{}:t,r=n.excludeTimes,s=n.includeTimes,i=n.filterTime;return r&&Wx(e,r)||s&&!Wx(e,s)||i&&!i(e)||!1}function qx(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var s=ht();s=fi(s,rs(e)),s=hi(s,ss(e)),s=zc(s,$s(e));var i=ht();i=fi(i,rs(n)),i=hi(i,ss(n)),i=zc(i,$s(n));var o=ht();o=fi(o,rs(r)),o=hi(o,ss(r)),o=zc(o,$s(r));var l;try{l=!dl(s,{start:i,end:o})}catch{l=!1}return l}function Kx(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.includeDates,i=wa(e,1);return r&&Du(r,i)>0||s&&s.every(function(o){return Du(o,i)>0})||!1}function Qx(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.includeDates,i=jr(e,1);return r&&Du(i,r)>0||s&&s.every(function(o){return Du(i,o)>0})||!1}function jM(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.includeDates,i=kd(e),o=qw(i);return r&&Cu(r,o)>0||s&&s.every(function(l){return Cu(l,o)>0})||!1}function _M(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.includeDates,i=Rw(e),o=up(i,1);return r&&Cu(o,r)>0||s&&s.every(function(l){return Cu(o,l)>0})||!1}function Gx(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.includeDates,i=Pi(e,1);return r&&Pu(r,i)>0||s&&s.every(function(o){return Pu(o,i)>0})||!1}function SM(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.yearItemNumber,i=s===void 0?Tl:s,o=yo(Pi(e,i)),l=Cs(o,i).endPeriod,c=r&&rt(r);return c&&c>l||!1}function Jx(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.includeDates,i=ts(e,1);return r&&Pu(i,r)>0||s&&s.every(function(o){return Pu(i,o)>0})||!1}function kM(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.yearItemNumber,i=s===void 0?Tl:s,o=ts(e,i),l=Cs(o,i).startPeriod,c=r&&rt(r);return c&&c<l||!1}function lN(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter(function(s){return Ci(s,t)>=0});return jx(r)}else return n?jx(n):t}function cN(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter(function(s){return Ci(s,t)<=0});return Nx(r)}else return n?Nx(n):t}function Xx(e,t){var n;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var r=new Map,s=0,i=e.length;s<i;s++){var o=e[s];if(ns(o)){var l=Dt(o,"MM.dd.yyyy"),c=r.get(l)||[];c.includes(t)||(c.push(t),r.set(l,c))}else if(typeof o=="object"){var u=Object.keys(o),m=(n=u[0])!==null&&n!==void 0?n:"",h=o[m];if(typeof m=="string"&&Array.isArray(h))for(var f=0,b=h.length;f<b;f++){var v=h[f];if(v){var l=Dt(v,"MM.dd.yyyy"),c=r.get(l)||[];c.includes(m)||(c.push(m),r.set(l,c))}}}}return r}function DM(e,t){return e.length!==t.length?!1:e.every(function(n,r){return n===t[r]})}function CM(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach(function(r){var s=r.date,i=r.holidayName;if(ns(s)){var o=Dt(s,"MM.dd.yyyy"),l=n.get(o)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===t&&DM(l.holidayNames,[i]))){l.className=t;var c=l.holidayNames;l.holidayNames=c?Ir(Ir([],c,!0),[i],!1):[i],n.set(o,l)}}}),n}function PM(e,t,n,r,s){for(var i=s.length,o=[],l=0;l<i;l++){var c=e,u=s[l];u&&(c=_C(c,rs(u)),c=Uf(c,ss(u)),c=DC(c,$s(u)));var m=Uf(e,(n+1)*r);Us(c,t)&&Ma(c,m)&&u!=null&&o.push(u)}return o}function Zx(e){return e<10?"0".concat(e):"".concat(e)}function Cs(e,t){t===void 0&&(t=Tl);var n=Math.ceil(rt(e)/t)*t,r=n-(t-1);return{startPeriod:r,endPeriod:n}}function EM(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}function e0(e){var t=e.getSeconds(),n=e.getMilliseconds();return $e(e.getTime()-t*1e3-n)}function MM(e,t){return e0(e).getTime()===e0(t).getTime()}function t0(e){if(!ns(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function n0(e,t){if(!ns(e)||!ns(t))throw new Error("Invalid date received");var n=t0(e),r=t0(t);return Ma(n,r)}function uN(e){return e.key===Ae.Space}var TM=function(e){en(t,e);function t(n){var r=e.call(this,n)||this;return r.inputRef=xe.createRef(),r.onTimeChange=function(s){var i,o;r.setState({time:s});var l=r.props.date,c=l instanceof Date&&!isNaN(+l),u=c?l:new Date;if(s!=null&&s.includes(":")){var m=s.split(":"),h=m[0],f=m[1];u.setHours(Number(h)),u.setMinutes(Number(f))}(o=(i=r.props).onChange)===null||o===void 0||o.call(i,u)},r.renderTimeInput=function(){var s=r.state.time,i=r.props,o=i.date,l=i.timeString,c=i.customTimeInput;return c?E.cloneElement(c,{date:o,value:s,onChange:r.onTimeChange}):xe.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var u;(u=r.inputRef.current)===null||u===void 0||u.focus()},required:!0,value:s,onChange:function(u){r.onTimeChange(u.target.value||l)}})},r.state={time:r.props.timeString},r}return t.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},t.prototype.render=function(){return xe.createElement("div",{className:"react-datepicker__input-time-container"},xe.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),xe.createElement("div",{className:"react-datepicker-time__input-container"},xe.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(E.Component),OM=function(e){en(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.dayEl=E.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var s,i,o=r.key;o===Ae.Space&&(r.preventDefault(),r.key=Ae.Enter),(i=(s=n.props).handleOnKeyDown)===null||i===void 0||i.call(s,r)},n.isSameDay=function(r){return lt(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var s=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(o){return n.isSameDayOrWeek(o)}):n.isSameDayOrWeek(n.props.selected),i=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!s&&n.isSameDayOrWeek(n.props.preSelection)&&!i},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),rr(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(){return _p(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return lt(n.props.day,zs(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&lt(r,zs(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,s=r.day,i=r.highlightDates;if(!i)return!1;var o=Dt(s,"MM.dd.yyyy");return i.get(o)},n.getHolidaysClass=function(){var r,s=n.props,i=s.day,o=s.holidays;if(!o)return[void 0];var l=Dt(i,"MM.dd.yyyy");return o.has(l)?[(r=o.get(l))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,s=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:bo(s,i,o)},n.isInSelectingRange=function(){var r,s=n.props,i=s.day,o=s.selectsStart,l=s.selectsEnd,c=s.selectsRange,u=s.selectsDisabledDaysInRange,m=s.startDate,h=s.endDate,f=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(o||l||c)||!f||!u&&n.isDisabled()?!1:o&&h&&(Ma(f,h)||fa(f,h))?bo(i,f,h):l&&m&&(Us(f,m)||fa(f,m))||c&&m&&!h&&(Us(f,m)||fa(f,m))?bo(i,m,f):!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,i=s.day,o=s.startDate,l=s.selectsStart,c=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return l?lt(i,c):lt(i,o)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,i=s.day,o=s.endDate,l=s.selectsEnd,c=s.selectsRange,u=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return l||c?lt(i,u):lt(i,o)},n.isRangeStart=function(){var r=n.props,s=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:lt(i,s)},n.isRangeEnd=function(){var r=n.props,s=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:lt(o,s)},n.isWeekend=function(){var r=_P(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===mn(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(mn(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(ht())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(s){return n.isSameDayOrWeek(s)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var s=n.props.dayClassName?n.props.dayClassName(r):void 0;return rn("react-datepicker__day",s,"react-datepicker__day--"+pM(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,s=r.day,i=r.ariaLabelPrefixWhenEnabled,o=i===void 0?"Choose":i,l=r.ariaLabelPrefixWhenDisabled,c=l===void 0?"Not available":l,u=n.isDisabled()||n.isExcluded()?c:o;return"".concat(u," ").concat(Dt(s,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,s=r.day,i=r.holidays,o=i===void 0?new Map:i,l=r.excludeDates,c=Dt(s,"MM.dd.yyyy"),u=[];return o.has(c)&&u.push.apply(u,o.get(c).holidayNames),n.isExcluded()&&u.push(l==null?void 0:l.filter(function(m){return m instanceof Date?lt(m,s):lt(m==null?void 0:m.date,s)}).map(function(m){if(!(m instanceof Date))return m==null?void 0:m.message})),u.join(", ")},n.getTabIndex=function(){var r=n.props.selected,s=n.props.preSelection,i=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&lt(s,r))?0:-1;return i},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(Ex(n.props.day),n.props.day):Ex(n.props.day)},n.render=function(){return xe.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&xe.createElement("span",{className:"overlay"},n.getTitle()))},n}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},t.prototype.isDayActiveElement=function(){var n,r,s;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(E.Component),FM=function(e){en(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.weekNumberEl=E.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var s,i,o=r.key;o===Ae.Space&&(r.preventDefault(),r.key=Ae.Enter),(i=(s=n.props).handleOnKeyDown)===null||i===void 0||i.call(s,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!lt(n.props.date,n.props.selected)&&lt(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||lt(n.props.date,n.props.selected)&&lt(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var s=!1;n.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&lt(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(s=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},t.prototype.render=function(){var n=this.props,r=n.weekNumber,s=n.isWeekDisabled,i=n.ariaLabelPrefix,o=i===void 0?t.defaultProps.ariaLabelPrefix:i,l=n.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l&&!s,"react-datepicker__week-number--selected":!!l&&lt(this.props.date,this.props.selected)};return xe.createElement("div",{ref:this.weekNumberEl,className:rn(c),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},t}(E.Component),AM=function(e){en(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isDisabled=function(r){return rr(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,s){n.props.onDayClick&&n.props.onDayClick(r,s)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,s,i){for(var o,l,c,u=new Date(r),m=0;m<7;m++){var h=new Date(r);h.setDate(h.getDate()+m);var f=!n.isDisabled(h);if(f){u=h;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(u,s,i),n.props.showWeekPicker&&n.handleDayClick(u,i),((o=n.props.shouldCloseOnSelect)!==null&&o!==void 0?o:t.defaultProps.shouldCloseOnSelect)&&((c=(l=n.props).setOpen)===null||c===void 0||c.call(l,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):hM(r)},n.isWeekDisabled=function(){for(var r=n.startOfWeek(),s=wr(r,6),i=new Date(r);i<=s;){if(!n.isDisabled(i))return!1;i=wr(i,1)}return!0},n.renderDays=function(){var r=n.startOfWeek(),s=[],i=n.formatWeekNumber(r);if(n.props.showWeekNumber){var o=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,i):void 0;s.push(xe.createElement(FM,ct({key:"W"},t.defaultProps,n.props,{weekNumber:i,isWeekDisabled:n.isWeekDisabled(),date:r,onClick:o})))}return s.concat([0,1,2,3,4,5,6].map(function(l){var c=wr(r,l);return xe.createElement(OM,ct({},t.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:c.valueOf(),day:c,onClick:n.handleDayClick.bind(n,c),onMouseEnter:n.handleDayMouseEnter.bind(n,c)}))}))},n.startOfWeek=function(){return zs(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!lt(n.startOfWeek(),n.props.selected)&&lt(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":lt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return xe.createElement("div",{className:rn(n)},this.renderDays())},t}(E.Component),ro,LM=6,gi={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},bm=(ro={},ro[gi.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},ro[gi.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},ro[gi.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},ro),ic=1;function r0(e,t){return e?gi.FOUR_COLUMNS:t?gi.TWO_COLUMNS:gi.THREE_COLUMNS}var RM=function(e){en(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.MONTH_REFS=Ir([],Array(12),!0).map(function(){return E.createRef()}),n.QUARTER_REFS=Ir([],Array(4),!0).map(function(){return E.createRef()}),n.isDisabled=function(r){return rr(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return _p(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,s){var i,o;(o=(i=n.props).onDayClick)===null||o===void 0||o.call(i,r,s,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var s,i;(i=(s=n.props).onDayMouseEnter)===null||i===void 0||i.call(s,r)},n.handleMouseLeave=function(){var r,s;(s=(r=n.props).onMouseLeave)===null||s===void 0||s.call(r)},n.isRangeStartMonth=function(r){var s=n.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:yn(er(i,r),o)},n.isRangeStartQuarter=function(r){var s=n.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Lu(qa(i,r),o)},n.isRangeEndMonth=function(r){var s=n.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:yn(er(i,r),l)},n.isRangeEndQuarter=function(r){var s=n.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Lu(qa(i,r),l)},n.isInSelectingRangeMonth=function(r){var s,i=n.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,u=i.selectsRange,m=i.startDate,h=i.endDate,f=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(l||c||u)||!f?!1:l&&h?nc(f,h,r,o):c&&m||u&&m&&!h?nc(m,f,r,o):!1},n.isSelectingMonthRangeStart=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var i=n.props,o=i.day,l=i.startDate,c=i.selectsStart,u=er(o,r),m=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return c?yn(u,m):yn(u,l)},n.isSelectingMonthRangeEnd=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var i=n.props,o=i.day,l=i.endDate,c=i.selectsEnd,u=i.selectsRange,m=er(o,r),h=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return c||u?yn(m,h):yn(m,l)},n.isInSelectingRangeQuarter=function(r){var s,i=n.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,u=i.selectsRange,m=i.startDate,h=i.endDate,f=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(l||c||u)||!f?!1:l&&h?ac(f,h,r,o):c&&m||u&&m&&!h?ac(m,f,r,o):!1},n.isWeekInMonth=function(r){var s=n.props.day,i=wr(r,6);return yn(r,s)||yn(i,s)},n.isCurrentMonth=function(r,s){return rt(r)===rt(ht())&&s===mn(ht())},n.isCurrentQuarter=function(r,s){return rt(r)===rt(ht())&&s===ba(ht())},n.isSelectedMonth=function(r,s,i){return mn(i)===s&&rt(r)===rt(i)},n.isSelectMonthInList=function(r,s,i){return i.some(function(o){return n.isSelectedMonth(r,s,o)})},n.isSelectedQuarter=function(r,s,i){return ba(r)===s&&rt(r)===rt(i)},n.isMonthSelected=function(){var r=n.props,s=r.day,i=r.selected,o=r.selectedDates,l=r.selectsMultiple,c=mn(s);return l?o==null?void 0:o.some(function(u){return n.isSelectedMonth(s,c,u)}):!!i&&n.isSelectedMonth(s,c,i)},n.renderWeeks=function(){for(var r=[],s=n.props.fixedHeight,i=0,o=!1,l=zs(as(n.props.day),n.props.locale,n.props.calendarStartDay),c=function(v){return n.props.showWeekPicker?zs(v,n.props.locale,n.props.calendarStartDay):n.props.preSelection},u=function(v){return n.props.showWeekPicker?zs(v,n.props.locale,n.props.calendarStartDay):n.props.selected},m=n.props.selected?u(n.props.selected):void 0,h=n.props.preSelection?c(n.props.preSelection):void 0;r.push(xe.createElement(AM,ct({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:i,day:l,month:mn(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:m,preSelection:h,showWeekNumber:n.props.showWeekNumbers}))),!o;){i++,l=Su(l,1);var f=s&&i>=LM,b=!s&&!n.isWeekInMonth(l);if(f||b)if(n.props.peekNextMonth)o=!0;else break}return r},n.onMonthClick=function(r,s){var i=n.isMonthDisabledForLabelDate(s),o=i.isDisabled,l=i.labelDate;o||n.handleDayClick(as(l),r)},n.onMonthMouseEnter=function(r){var s=n.isMonthDisabledForLabelDate(r),i=s.isDisabled,o=s.labelDate;i||n.handleDayMouseEnter(as(o))},n.handleMonthNavigation=function(r,s){var i,o,l,c;(o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=n.MONTH_REFS[r])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus()},n.handleKeyboardNavigation=function(r,s,i){var o,l=n.props,c=l.selected,u=l.preSelection,m=l.setPreSelection,h=l.minDate,f=l.maxDate,b=l.showFourColumnMonthYearPicker,v=l.showTwoColumnMonthYearPicker;if(u){var D=r0(b,v),g=n.getVerticalOffset(D),w=(o=bm[D])===null||o===void 0?void 0:o.grid,y=function(T,P,q){var X,te,oe=P,fe=q;switch(T){case Ae.ArrowRight:oe=jr(P,ic),fe=q===11?0:q+ic;break;case Ae.ArrowLeft:oe=wa(P,ic),fe=q===0?11:q-ic;break;case Ae.ArrowUp:oe=wa(P,g),fe=!((X=w==null?void 0:w[0])===null||X===void 0)&&X.includes(q)?q+12-g:q-g;break;case Ae.ArrowDown:oe=jr(P,g),fe=!((te=w==null?void 0:w[w.length-1])===null||te===void 0)&&te.includes(q)?q-12+g:q+g;break}return{newCalculatedDate:oe,newCalculatedMonth:fe}},_=function(T,P,q){for(var X=40,te=T,oe=!1,fe=0,G=y(te,P,q),se=G.newCalculatedDate,W=G.newCalculatedMonth;!oe;){if(fe>=X){se=P,W=q;break}if(h&&se<h){te=Ae.ArrowRight;var $=y(te,se,W);se=$.newCalculatedDate,W=$.newCalculatedMonth}if(f&&se>f){te=Ae.ArrowLeft;var $=y(te,se,W);se=$.newCalculatedDate,W=$.newCalculatedMonth}if(NM(se,n.props)){var $=y(te,se,W);se=$.newCalculatedDate,W=$.newCalculatedMonth}else oe=!0;fe++}return{newCalculatedDate:se,newCalculatedMonth:W}};if(s===Ae.Enter){n.isMonthDisabled(i)||(n.onMonthClick(r,i),m==null||m(c));return}var j=_(s,u,i),L=j.newCalculatedDate,C=j.newCalculatedMonth;switch(s){case Ae.ArrowRight:case Ae.ArrowLeft:case Ae.ArrowUp:case Ae.ArrowDown:n.handleMonthNavigation(C,L);break}}},n.getVerticalOffset=function(r){var s,i;return(i=(s=bm[r])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&i!==void 0?i:0},n.onMonthKeyDown=function(r,s){var i=n.props,o=i.disabledKeyboardNavigation,l=i.handleOnMonthKeyDown,c=r.key;c!==Ae.Tab&&r.preventDefault(),o||n.handleKeyboardNavigation(r,c,s),l&&l(r)},n.onQuarterClick=function(r,s){var i=qa(n.props.day,s);rc(i,n.props)||n.handleDayClick(Bx(i),r)},n.onQuarterMouseEnter=function(r){var s=qa(n.props.day,r);rc(s,n.props)||n.handleDayMouseEnter(Bx(s))},n.handleQuarterNavigation=function(r,s){var i,o,l,c;n.isDisabled(s)||n.isExcluded(s)||((o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=n.QUARTER_REFS[r-1])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())},n.onQuarterKeyDown=function(r,s){var i,o,l=r.key;if(!n.props.disabledKeyboardNavigation)switch(l){case Ae.Enter:n.onQuarterClick(r,s),(o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,n.props.selected);break;case Ae.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===4?1:s+1,up(n.props.preSelection,1));break;case Ae.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===1?4:s-1,qw(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(r){var s,i=n.props,o=i.day,l=i.minDate,c=i.maxDate,u=i.excludeDates,m=i.includeDates,h=er(o,r);return{isDisabled:(s=(l||c||u||m)&&oN(h,n.props))!==null&&s!==void 0?s:!1,labelDate:h}},n.isMonthDisabled=function(r){var s=n.isMonthDisabledForLabelDate(r).isDisabled;return s},n.getMonthClassNames=function(r){var s=n.props,i=s.day,o=s.startDate,l=s.endDate,c=s.preSelection,u=s.monthClassName,m=u?u(er(i,r)):void 0,h=n.getSelection();return rn("react-datepicker__month-text","react-datepicker__month-".concat(r),m,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":h?n.isSelectMonthInList(i,r,h):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&c&&n.isSelectedMonth(i,r,c)&&!n.isMonthSelected()&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":o&&l?nc(o,l,r,i):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(i,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=mn(n.props.preSelection),i=n.isMonthDisabledForLabelDate(s).isDisabled,o=r===s&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return o},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=ba(n.props.preSelection),i=rc(n.props.day,n.props),o=r===s&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return o},n.getAriaLabel=function(r){var s=n.props,i=s.chooseDayAriaLabelPrefix,o=i===void 0?"Choose":i,l=s.disabledDayAriaLabelPrefix,c=l===void 0?"Not available":l,u=s.day,m=s.locale,h=er(u,r),f=n.isDisabled(h)||n.isExcluded(h)?c:o;return"".concat(f," ").concat(Dt(h,"MMMM yyyy",m))},n.getQuarterClassNames=function(r){var s=n.props,i=s.day,o=s.startDate,l=s.endDate,c=s.selected,u=s.minDate,m=s.maxDate,h=s.excludeDates,f=s.includeDates,b=s.filterDate,v=s.preSelection,D=s.disabledKeyboardNavigation,g=(u||m||h||f||b)&&rc(qa(i,r),n.props);return rn("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":g,"react-datepicker__quarter-text--selected":c?n.isSelectedQuarter(i,r,c):void 0,"react-datepicker__quarter-text--keyboard-selected":!D&&v&&n.isSelectedQuarter(i,r,v)&&!g,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":o&&l?ac(o,l,r,i):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r),"react-datepicker__quarter-text--today":n.isCurrentQuarter(i,r)})},n.getMonthContent=function(r){var s=n.props,i=s.showFullMonthYearPicker,o=s.renderMonthContent,l=s.locale,c=s.day,u=iN(r,l),m=jp(r,l);return o?o(r,u,m,c):i?m:u},n.getQuarterContent=function(r){var s,i=n.props,o=i.renderQuarterContent,l=i.locale,c=wM(r,l);return(s=o==null?void 0:o(r,c))!==null&&s!==void 0?s:c},n.renderMonths=function(){var r,s=n.props,i=s.showTwoColumnMonthYearPicker,o=s.showFourColumnMonthYearPicker,l=s.day,c=s.selected,u=(r=bm[r0(o,i)])===null||r===void 0?void 0:r.grid;return u==null?void 0:u.map(function(m,h){return xe.createElement("div",{className:"react-datepicker__month-wrapper",key:h},m.map(function(f,b){return xe.createElement("div",{ref:n.MONTH_REFS[f],key:b,onClick:function(v){n.onMonthClick(v,f)},onKeyDown:function(v){uN(v)&&(v.preventDefault(),v.key=Ae.Enter),n.onMonthKeyDown(v,f)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(f)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(f)}:void 0,tabIndex:Number(n.getTabIndex(f)),className:n.getMonthClassNames(f),"aria-disabled":n.isMonthDisabled(f),role:"option","aria-label":n.getAriaLabel(f),"aria-current":n.isCurrentMonth(l,f)?"date":void 0,"aria-selected":c?n.isSelectedMonth(l,f,c):void 0},n.getMonthContent(f))}))})},n.renderQuarters=function(){var r=n.props,s=r.day,i=r.selected,o=[1,2,3,4];return xe.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(l,c){return xe.createElement("div",{key:c,ref:n.QUARTER_REFS[c],role:"option",onClick:function(u){n.onQuarterClick(u,l)},onKeyDown:function(u){n.onQuarterKeyDown(u,l)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(l)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(l)}:void 0,className:n.getQuarterClassNames(l),"aria-selected":i?n.isSelectedQuarter(s,l,i):void 0,tabIndex:Number(n.getQuarterTabIndex(l)),"aria-current":n.isCurrentQuarter(s,l)?"date":void 0},n.getQuarterContent(l))}))},n.getClassNames=function(){var r=n.props,s=r.selectingDate,i=r.selectsStart,o=r.selectsEnd,l=r.showMonthYearPicker,c=r.showQuarterYearPicker,u=r.showWeekPicker;return rn("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(i||o)},{"react-datepicker__monthPicker":l},{"react-datepicker__quarterPicker":c},{"react-datepicker__weekPicker":u})},n}return t.prototype.getSelection=function(){var n=this.props,r=n.selected,s=n.selectedDates,i=n.selectsMultiple;if(i)return s;if(r)return[r]},t.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,s=n.showQuarterYearPicker,i=n.day,o=n.ariaLabelPrefix,l=o===void 0?"Month ":o,c=l?l.trim()+" ":"";return xe.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(c).concat(Dt(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},t}(E.Component),IM=function(e){en(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isSelectedMonth=function(r){return n.props.month===r},n.renderOptions=function(){return n.props.monthNames.map(function(r,s){return xe.createElement("div",{className:n.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,s),"aria-selected":n.isSelectedMonth(s)?"true":void 0},n.isSelectedMonth(s)?xe.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return t.prototype.render=function(){return xe.createElement(Md,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(E.Component),$M=function(e){en(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(s,i){return xe.createElement("option",{key:s,value:i},s)})},n.renderSelectMode=function(r){return xe.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(s){return n.onChange(parseInt(s.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,s){return xe.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},xe.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),xe.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[n.props.month]))},n.renderDropdown=function(r){return xe.createElement(IM,ct({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var s=n.state.dropdownVisible,i=[n.renderReadView(!s,r)];return s&&i.unshift(n.renderDropdown(r)),i},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return iN(i,n.props.locale)}:function(i){return jp(i,n.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(r);break;case"select":s=this.renderSelectMode(r);break}return xe.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(E.Component);function zM(e,t){for(var n=[],r=as(e),s=as(t);!Us(r,s);)n.push(ht(r)),r=jr(r,1);return n}var HM=function(e){en(t,e);function t(n){var r=e.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(s){var i=qf(s),o=Tr(r.props.date,s)&&yn(r.props.date,s);return xe.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:r.onChange.bind(r,i),"aria-selected":o?"true":void 0},o?xe.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",Dt(s,r.props.dateFormat,r.props.locale))})},r.onChange=function(s){return r.props.onChange(s)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:zM(r.props.minDate,r.props.maxDate)},r}return t.prototype.render=function(){var n=rn({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return xe.createElement(Md,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(E.Component),BM=function(e){en(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=as(n.props.minDate),s=as(n.props.maxDate),i=[];!Us(r,s);){var o=qf(r);i.push(xe.createElement("option",{key:o,value:o},Dt(r,n.props.dateFormat,n.props.locale))),r=jr(r,1)}return i},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return xe.createElement("select",{value:qf(as(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var s=Dt(n.props.date,n.props.dateFormat,n.props.locale);return xe.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},xe.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),xe.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},n.renderDropdown=function(){return xe.createElement(HM,ct({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown();var s=ht(r);Tr(n.props.date,s)&&yn(n.props.date,s)||n.props.onChange(s)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return xe.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(E.Component),VM=function(e){en(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,s,i;n.list&&(n.list.scrollTop=(i=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((s=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&s!==void 0?s:0):n.list.clientHeight,n.centerLi))!==null&&i!==void 0?i:0)})},n.handleClick=function(r){var s,i;(n.props.minTime||n.props.maxTime)&&qx(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&Yx(r,n.props)||(i=(s=n.props).onChange)===null||i===void 0||i.call(s,r)},n.isSelectedTime=function(r){return n.props.selected&&MM(n.props.selected,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&qx(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&Yx(r,n.props)},n.liClasses=function(r){var s,i=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&i.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&i.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(rs(r)*3600+ss(r)*60+$s(r))%(((s=n.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},n.handleOnKeyDown=function(r,s){var i,o;r.key===Ae.Space&&(r.preventDefault(),r.key=Ae.Enter),(r.key===Ae.ArrowUp||r.key===Ae.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===Ae.ArrowDown||r.key===Ae.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===Ae.Enter&&n.handleClick(s),(o=(i=n.props).handleOnKeyDown)===null||o===void 0||o.call(i,r)},n.renderTimes=function(){for(var r,s=[],i=typeof n.props.format=="string"?n.props.format:"p",o=(r=n.props.intervals)!==null&&r!==void 0?r:t.defaultProps.intervals,l=n.props.selected||n.props.openToDate||ht(),c=Bc(l),u=n.props.injectTimes&&n.props.injectTimes.sort(function(g,w){return g.getTime()-w.getTime()}),m=60*EM(l),h=m/o,f=0;f<h;f++){var b=Uf(c,f*o);if(s.push(b),u){var v=PM(c,b,f,o,u);s=s.concat(v)}}var D=s.reduce(function(g,w){return w.getTime()<=l.getTime()?w:g},s[0]);return s.map(function(g){return xe.createElement("li",{key:g.valueOf(),onClick:n.handleClick.bind(n,g),className:n.liClasses(g),ref:function(w){g===D&&(n.centerLi=w)},onKeyDown:function(w){n.handleOnKeyDown(w,g)},tabIndex:g===D?0:-1,role:"option","aria-selected":n.isSelectedTime(g)?"true":void 0,"aria-disabled":n.isDisabledTime(g)?"true":void 0},Dt(g,i,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?xe.createElement(xe.Fragment,null):xe.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){n.header=r}},xe.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var n;(n=this.resizeObserver)===null||n===void 0||n.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var n=this,r=this.props.monthRef;this.updateContainerHeight(),r&&(this.resizeObserver=new ResizeObserver(function(){n.updateContainerHeight()}),this.resizeObserver.observe(r))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var n=this,r,s=this.state.height;return xe.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),xe.createElement("div",{className:"react-datepicker__time"},xe.createElement("div",{className:"react-datepicker__time-box"},xe.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){n.list=i},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},t}(E.Component),s0=3,UM=function(e){en(t,e);function t(n){var r=e.call(this,n)||this;return r.YEAR_REFS=Ir([],Array(r.props.yearItemNumber),!0).map(function(){return E.createRef()}),r.isDisabled=function(s){return rr(s,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(s){return _p(s,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var s;return(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection},r.updateFocusOnPaginate=function(s){var i=function(){var o,l;(l=(o=r.YEAR_REFS[s])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()};window.requestAnimationFrame(i)},r.handleYearClick=function(s,i){r.props.onDayClick&&r.props.onDayClick(s,i)},r.handleYearNavigation=function(s,i){var o,l,c,u,m=r.props,h=m.date,f=m.yearItemNumber;if(!(h===void 0||f===void 0)){var b=Cs(h,f).startPeriod;r.isDisabled(i)||r.isExcluded(i)||((l=(o=r.props).setPreSelection)===null||l===void 0||l.call(o,i),s-b<0?r.updateFocusOnPaginate(f-(b-s)):s-b>=f?r.updateFocusOnPaginate(Math.abs(f-(s-b))):(u=(c=r.YEAR_REFS[s-b])===null||c===void 0?void 0:c.current)===null||u===void 0||u.focus())}},r.isSameDay=function(s,i){return lt(s,i)},r.isCurrentYear=function(s){return s===rt(ht())},r.isRangeStart=function(s){return r.props.startDate&&r.props.endDate&&Tr(Mr(ht(),s),r.props.startDate)},r.isRangeEnd=function(s){return r.props.startDate&&r.props.endDate&&Tr(Mr(ht(),s),r.props.endDate)},r.isInRange=function(s){return sc(s,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(s){var i=r.props,o=i.selectsStart,l=i.selectsEnd,c=i.selectsRange,u=i.startDate,m=i.endDate;return!(o||l||c)||!r.selectingDate()?!1:o&&m?sc(s,r.selectingDate(),m):l&&u||c&&u&&!m?sc(s,u,r.selectingDate()):!1},r.isSelectingRangeStart=function(s){var i;if(!r.isInSelectingRange(s))return!1;var o=r.props,l=o.startDate,c=o.selectsStart,u=Mr(ht(),s);return c?Tr(u,(i=r.selectingDate())!==null&&i!==void 0?i:null):Tr(u,l??null)},r.isSelectingRangeEnd=function(s){var i;if(!r.isInSelectingRange(s))return!1;var o=r.props,l=o.endDate,c=o.selectsEnd,u=o.selectsRange,m=Mr(ht(),s);return c||u?Tr(m,(i=r.selectingDate())!==null&&i!==void 0?i:null):Tr(m,l??null)},r.isKeyboardSelected=function(s){if(!(r.props.date===void 0||r.props.selected==null||r.props.preSelection==null)){var i=r.props,o=i.minDate,l=i.maxDate,c=i.excludeDates,u=i.includeDates,m=i.filterDate,h=yo(Mr(r.props.date,s)),f=(o||l||c||u||m)&&Vc(s,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!lt(h,yo(r.props.selected))&&lt(h,yo(r.props.preSelection))&&!f}},r.isSelectedYear=function(s){var i=r.props,o=i.selectsMultiple,l=i.selected,c=i.selectedDates;return o?c==null?void 0:c.some(function(u){return s===rt(u)}):!!l&&s===rt(l)},r.onYearClick=function(s,i){var o=r.props.date;o!==void 0&&r.handleYearClick(yo(Mr(o,i)),s)},r.onYearKeyDown=function(s,i){var o,l,c=s.key,u=r.props,m=u.date,h=u.yearItemNumber,f=u.handleOnKeyDown;if(c!==Ae.Tab&&s.preventDefault(),!r.props.disabledKeyboardNavigation)switch(c){case Ae.Enter:if(r.props.selected==null)break;r.onYearClick(s,i),(l=(o=r.props).setPreSelection)===null||l===void 0||l.call(o,r.props.selected);break;case Ae.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(i+1,ts(r.props.preSelection,1));break;case Ae.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(i-1,Pi(r.props.preSelection,1));break;case Ae.ArrowUp:{if(m===void 0||h===void 0||r.props.preSelection==null)break;var b=Cs(m,h).startPeriod,v=s0,D=i-v;if(D<b){var g=h%v;i>=b&&i<b+g?v=g:v+=g,D=i-v}r.handleYearNavigation(D,Pi(r.props.preSelection,v));break}case Ae.ArrowDown:{if(m===void 0||h===void 0||r.props.preSelection==null)break;var w=Cs(m,h).endPeriod,v=s0,D=i+v;if(D>w){var g=h%v;i<=w&&i>w-g?v=g:v+=g,D=i+v}r.handleYearNavigation(D,ts(r.props.preSelection,v));break}}f&&f(s)},r.getYearClassNames=function(s){var i=r.props,o=i.date,l=i.minDate,c=i.maxDate,u=i.excludeDates,m=i.includeDates,h=i.filterDate,f=i.yearClassName;return rn("react-datepicker__year-text","react-datepicker__year-".concat(s),o?f==null?void 0:f(Mr(o,s)):void 0,{"react-datepicker__year-text--selected":r.isSelectedYear(s),"react-datepicker__year-text--disabled":(l||c||u||m||h)&&Vc(s,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(s),"react-datepicker__year-text--range-start":r.isRangeStart(s),"react-datepicker__year-text--range-end":r.isRangeEnd(s),"react-datepicker__year-text--in-range":r.isInRange(s),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(s),"react-datepicker__year-text--today":r.isCurrentYear(s)})},r.getYearTabIndex=function(s){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var i=rt(r.props.preSelection),o=Vc(s,r.props);return s===i&&!o?"0":"-1"},r.getYearContent=function(s){return r.props.renderYearContent?r.props.renderYearContent(s):s},r}return t.prototype.render=function(){var n=this,r=[],s=this.props,i=s.date,o=s.yearItemNumber,l=s.onYearMouseEnter,c=s.onYearMouseLeave;if(i===void 0)return null;for(var u=Cs(i,o),m=u.startPeriod,h=u.endPeriod,f=function(D){r.push(xe.createElement("div",{ref:b.YEAR_REFS[D-m],onClick:function(g){n.onYearClick(g,D)},onKeyDown:function(g){uN(g)&&(g.preventDefault(),g.key=Ae.Enter),n.onYearKeyDown(g,D)},tabIndex:Number(b.getYearTabIndex(D)),className:b.getYearClassNames(D),onMouseEnter:b.props.usePointerEvent?void 0:function(g){return l(g,D)},onPointerEnter:b.props.usePointerEvent?function(g){return l(g,D)}:void 0,onMouseLeave:b.props.usePointerEvent?void 0:function(g){return c(g,D)},onPointerLeave:b.props.usePointerEvent?function(g){return c(g,D)}:void 0,key:D,"aria-current":b.isCurrentYear(D)?"date":void 0},b.getYearContent(D)))},b=this,v=m;v<=h;v++)f(v);return xe.createElement("div",{className:"react-datepicker__year"},xe.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},t}(E.Component);function WM(e,t,n,r){for(var s=[],i=0;i<2*t+1;i++){var o=e+t-i,l=!0;n&&(l=rt(n)<=o),r&&l&&(l=rt(r)>=o),l&&s.push(o)}return s}var YM=function(e){en(t,e);function t(n){var r=e.call(this,n)||this;r.renderOptions=function(){var l=r.props.year,c=r.state.yearsList.map(function(h){return xe.createElement("div",{className:l===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:r.onChange.bind(r,h),"aria-selected":l===h?"true":void 0},l===h?xe.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",h)}),u=r.props.minDate?rt(r.props.minDate):null,m=r.props.maxDate?rt(r.props.maxDate):null;return(!m||!r.state.yearsList.find(function(h){return h===m}))&&c.unshift(xe.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},xe.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!u||!r.state.yearsList.find(function(h){return h===u}))&&c.push(xe.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},xe.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c},r.onChange=function(l){r.props.onChange(l)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(l){var c=r.state.yearsList.map(function(u){return u+l});r.setState({yearsList:c})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var s=n.yearDropdownItemNumber,i=n.scrollableYearDropdown,o=s||(i?10:5);return r.state={yearsList:WM(r.props.year,o,r.props.minDate,r.props.maxDate)},r.dropdownRef=E.createRef(),r}return t.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,s=r?r.find(function(i){return i.ariaSelected}):null;n.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},t.prototype.render=function(){var n=rn({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return xe.createElement(Md,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(E.Component),qM=function(e){en(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?rt(n.props.minDate):1900,s=n.props.maxDate?rt(n.props.maxDate):2100,i=[],o=r;o<=s;o++)i.push(xe.createElement("option",{key:o,value:o},o));return i},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return xe.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return xe.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return n.toggleDropdown(s)}},xe.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),xe.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return xe.createElement(YM,ct({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,s){var i;(i=n.onSelect)===null||i===void 0||i.call(n,r,s),n.setOpen()},n.onSelect=function(r,s){var i,o;(o=(i=n.props).onSelect)===null||o===void 0||o.call(i,r,s)},n.setOpen=function(){var r,s;(s=(r=n.props).setOpen)===null||s===void 0||s.call(r,!0)},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return xe.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(E.Component),KM=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],QM=function(e){var t=(e.className||"").split(/\s+/);return KM.some(function(n){return t.indexOf(n)>=0})},GM=function(e){en(t,e);function t(n){var r=e.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(s){r.props.onClickOutside(s)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(s){var i,o;QM(s.target)&&((o=(i=r.props).onDropdownFocus)===null||o===void 0||o.call(i,s))},r.getDateInView=function(){var s=r.props,i=s.preSelection,o=s.selected,l=s.openToDate,c=lN(r.props),u=cN(r.props),m=ht(),h=l||o||i;return h||(c&&Ma(m,c)?c:u&&Us(m,u)?u:m)},r.increaseMonth=function(){r.setState(function(s){var i=s.date;return{date:jr(i,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(s){var i=s.date;return{date:wa(i,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(s,i,o){r.props.onSelect(s,i,o),r.props.setPreSelection&&r.props.setPreSelection(s)},r.handleDayMouseEnter=function(s){r.setState({selectingDate:s}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(s)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(s,i){r.setState({selectingDate:Mr(ht(),i)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(s,i)},r.handleYearMouseLeave=function(s,i){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(s,i)},r.handleYearChange=function(s){var i,o,l,c;(o=(i=r.props).onYearChange)===null||o===void 0||o.call(i,s),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(s),(c=(l=r.props).setOpen)===null||c===void 0||c.call(l,!0)),r.props.setPreSelection&&r.props.setPreSelection(s)},r.getEnabledPreSelectionDateForMonth=function(s){if(!rr(s,r.props))return s;for(var i=as(s),o=xM(s),l=PC(o,i),c=null,u=0;u<=l;u++){var m=wr(i,u);if(!rr(m,r.props)){c=m;break}}return c},r.handleMonthChange=function(s){var i,o,l,c=(i=r.getEnabledPreSelectionDateForMonth(s))!==null&&i!==void 0?i:s;r.handleCustomMonthChange(c),r.props.adjustDateOnChange&&(r.props.onSelect(c),(l=(o=r.props).setOpen)===null||l===void 0||l.call(o,!0)),r.props.setPreSelection&&r.props.setPreSelection(c)},r.handleCustomMonthChange=function(s){var i,o;(o=(i=r.props).onMonthChange)===null||o===void 0||o.call(i,s),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(s){r.handleYearChange(s),r.handleMonthChange(s)},r.changeYear=function(s){r.setState(function(i){var o=i.date;return{date:Mr(o,Number(s))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(s){r.setState(function(i){var o=i.date;return{date:er(o,Number(s))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(s){r.setState(function(i){var o=i.date;return{date:Mr(er(o,mn(s)),rt(s))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(s){s===void 0&&(s=r.state.date);var i=zs(s,r.props.locale,r.props.calendarStartDay),o=[];return r.props.showWeekNumbers&&o.push(xe.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(l){var c=wr(i,l),u=r.formatWeekday(c,r.props.locale),m=r.props.weekDayClassName?r.props.weekDayClassName(c):void 0;return xe.createElement("div",{key:l,"aria-label":Dt(c,"EEEE",r.props.locale),className:rn("react-datepicker__day-name",m)},u)}))},r.formatWeekday=function(s,i){return r.props.formatWeekDay?vM(s,r.props.formatWeekDay,i):r.props.useWeekdaysShort?bM(s,i):yM(s,i)},r.decreaseYear=function(){r.setState(function(s){var i,o=s.date;return{date:Pi(o,r.props.showYearPicker?(i=r.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var s,i,o;if(!r.props.renderCustomHeader){var l=(s=r.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=r.props.showPreviousMonths?l-1:0,u=(i=r.props.monthSelectedIn)!==null&&i!==void 0?i:c,m=wa(r.state.date,u),h;switch(!0){case r.props.showMonthYearPicker:h=Gx(r.state.date,r.props);break;case r.props.showYearPicker:h=SM(r.state.date,r.props);break;case r.props.showQuarterYearPicker:h=jM(r.state.date,r.props);break;default:h=Kx(m,r.props);break}if(!(!((o=r.props.forceShowMonthNavigation)!==null&&o!==void 0?o:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&h||r.props.showTimeSelectOnly)){var f=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],b=["react-datepicker__navigation","react-datepicker__navigation--previous"],v=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(v=r.decreaseYear),h&&r.props.showDisabledMonthNavigation&&(b.push("react-datepicker__navigation--previous--disabled"),v=void 0);var D=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,g=r.props,w=g.previousMonthButtonLabel,y=w===void 0?t.defaultProps.previousMonthButtonLabel:w,_=g.previousYearButtonLabel,j=_===void 0?t.defaultProps.previousYearButtonLabel:_,L=r.props,C=L.previousMonthAriaLabel,T=C===void 0?typeof y=="string"?y:"Previous Month":C,P=L.previousYearAriaLabel,q=P===void 0?typeof j=="string"?j:"Previous Year":P;return xe.createElement("button",{type:"button",className:b.join(" "),onClick:v,onKeyDown:r.props.handleOnKeyDown,"aria-label":D?q:T},xe.createElement("span",{className:f.join(" ")},D?j:y))}}},r.increaseYear=function(){r.setState(function(s){var i,o=s.date;return{date:ts(o,r.props.showYearPicker?(i=r.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var s;if(!r.props.renderCustomHeader){var i;switch(!0){case r.props.showMonthYearPicker:i=Jx(r.state.date,r.props);break;case r.props.showYearPicker:i=kM(r.state.date,r.props);break;case r.props.showQuarterYearPicker:i=_M(r.state.date,r.props);break;default:i=Qx(r.state.date,r.props);break}if(!(!((s=r.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&i||r.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],l=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var c=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(c=r.increaseYear),i&&r.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),c=void 0);var u=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,m=r.props,h=m.nextMonthButtonLabel,f=h===void 0?t.defaultProps.nextMonthButtonLabel:h,b=m.nextYearButtonLabel,v=b===void 0?t.defaultProps.nextYearButtonLabel:b,D=r.props,g=D.nextMonthAriaLabel,w=g===void 0?typeof f=="string"?f:"Next Month":g,y=D.nextYearAriaLabel,_=y===void 0?typeof v=="string"?v:"Next Year":y;return xe.createElement("button",{type:"button",className:o.join(" "),onClick:c,onKeyDown:r.props.handleOnKeyDown,"aria-label":u?_:w},xe.createElement("span",{className:l.join(" ")},u?v:f))}}},r.renderCurrentMonth=function(s){s===void 0&&(s=r.state.date);var i=["react-datepicker__current-month"];return r.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),xe.createElement("h2",{className:i.join(" ")},Dt(s,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showYearDropdown||s))return xe.createElement(qM,ct({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:rt(r.state.date)}))},r.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthDropdown||s))return xe.createElement($M,ct({},t.defaultProps,r.props,{month:mn(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthYearDropdown||s))return xe.createElement(BM,ct({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(s){r.props.onSelect(Vx(),s),r.props.setPreSelection&&r.props.setPreSelection(Vx())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return xe.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDefaultHeader=function(s){var i=s.monthDate,o=s.i;return xe.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(i),xe.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(o!==0),r.renderMonthYearDropdown(o!==0),r.renderYearDropdown(o!==0)),xe.createElement("div",{className:"react-datepicker__day-names"},r.header(i)))},r.renderCustomHeader=function(s){var i,o,l=s.monthDate,c=s.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var u=Kx(r.state.date,r.props),m=Qx(r.state.date,r.props),h=Gx(r.state.date,r.props),f=Jx(r.state.date,r.props),b=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return xe.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(o=(i=r.props).renderCustomHeader)===null||o===void 0?void 0:o.call(i,ct(ct({},r.state),{customHeaderCount:c,monthDate:l,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:u,nextMonthButtonDisabled:m,prevYearButtonDisabled:h,nextYearButtonDisabled:f})),b&&xe.createElement("div",{className:"react-datepicker__day-names"},r.header(l)))},r.renderYearHeader=function(s){var i=s.monthDate,o=r.props,l=o.showYearPicker,c=o.yearItemNumber,u=c===void 0?t.defaultProps.yearItemNumber:c,m=Cs(i,u),h=m.startPeriod,f=m.endPeriod;return xe.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(h," - ").concat(f):rt(i))},r.renderHeader=function(s){var i=s.monthDate,o=s.i,l=o===void 0?0:o,c={monthDate:i,i:l};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(c);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(c);default:return r.renderDefaultHeader(c)}},r.renderMonths=function(){var s,i;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var o=[],l=(s=r.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=r.props.showPreviousMonths?l-1:0,u=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?ts(r.state.date,c):wa(r.state.date,c),m=(i=r.props.monthSelectedIn)!==null&&i!==void 0?i:c,h=0;h<l;++h){var f=h-m+c,b=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?ts(u,f):jr(u,f),v="month-".concat(h),D=h<l-1,g=h>0;o.push(xe.createElement("div",{key:v,ref:function(w){r.monthContainer=w??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:b,i:h}),xe.createElement(RM,ct({},t.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:b,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:h,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:D,monthShowsDuplicateDaysStart:g}))))}return o}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return xe.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),xe.createElement(UM,ct({},t.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return xe.createElement(VM,ct({},t.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var s=r.props.selected?new Date(r.props.selected):void 0,i=s&&Td(s)&&!!r.props.selected,o=i?"".concat(Zx(s.getHours()),":").concat(Zx(s.getMinutes())):"";if(r.props.showTimeInput)return xe.createElement(TM,ct({},t.defaultProps,r.props,{date:s,timeString:o,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var s,i=Cs(r.state.date,(s=r.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),o=i.startPeriod,l=i.endPeriod,c;return r.props.showYearPicker?c="".concat(o," - ").concat(l):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?c=rt(r.state.date):c="".concat(jp(mn(r.state.date),r.props.locale)," ").concat(rt(r.state.date)),xe.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&c)},r.renderChildren=function(){if(r.props.children)return xe.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=E.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Tl}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){n.setState({monthContainer:n.monthContainer})}())},t.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&(!lt(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var s=!yn(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!lt(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var n=this.props.container||uM;return xe.createElement(Md,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},xe.createElement("div",{style:{display:"contents"},ref:this.containerRef},xe.createElement(n,{className:rn("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(E.Component),JM=function(e){var t=e.icon,n=e.className,r=n===void 0?"":n,s=e.onClick,i="react-datepicker__calendar-icon";if(typeof t=="string")return xe.createElement("i",{className:"".concat(i," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:s});if(xe.isValidElement(t)){var o=t;return xe.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(i," ").concat(r),onClick:function(l){typeof o.props.onClick=="function"&&o.props.onClick(l),typeof s=="function"&&s(l)}})}return xe.createElement("svg",{className:"".concat(i," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},xe.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},dN=function(e){en(t,e);function t(n){var r=e.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return F_.createPortal(this.props.children,this.el)},t}(E.Component),XM="[tabindex], a, button, input, select, textarea",ZM=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},mN=function(e){en(t,e);function t(n){var r=e.call(this,n)||this;return r.getTabChildren=function(){var s;return Array.prototype.slice.call((s=r.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(XM),1,-1).filter(ZM)},r.handleFocusStart=function(){var s=r.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},r.handleFocusEnd=function(){var s=r.getTabChildren();s&&s.length>1&&s[0].focus()},r.tabLoopRef=E.createRef(),r}return t.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:t.defaultProps.enableTabLoop)?xe.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},xe.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,xe.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(E.Component);function eT(e){var t=function(n){var r,s=typeof n.hidePopper=="boolean"?n.hidePopper:!0,i=E.useRef(null),o=cM(ct({open:!s,whileElementsMounted:H5,placement:n.popperPlacement,middleware:Ir([G5({padding:15}),Q5(10),J5({element:i})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),l=ct(ct({},n),{hidePopper:s,popperProps:ct(ct({},o),{arrowRef:i})});return xe.createElement(e,ct({},l))};return t}var tT=function(e){en(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n=this.props,r=n.className,s=n.wrapperClassName,i=n.hidePopper,o=i===void 0?t.defaultProps.hidePopper:i,l=n.popperComponent,c=n.targetComponent,u=n.enableTabLoop,m=n.popperOnKeyDown,h=n.portalId,f=n.portalHost,b=n.popperProps,v=n.showArrow,D=void 0;if(!o){var g=rn("react-datepicker-popper",r);D=xe.createElement(mN,{enableTabLoop:u},xe.createElement("div",{ref:b.refs.setFloating,style:b.floatingStyles,className:g,"data-placement":b.placement,onKeyDown:m},l,v&&xe.createElement(nM,{ref:b.arrowRef,context:b.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(D=E.createElement(this.props.popperContainer,{},D)),h&&!o&&(D=xe.createElement(dN,{portalId:h,portalHost:f},D));var w=rn("react-datepicker-wrapper",s);return xe.createElement(xe.Fragment,null,xe.createElement("div",{ref:b.refs.setReference,className:w},c),D)},t}(E.Component),nT=eT(tT),a0="react-datepicker-ignore-onclickoutside";function rT(e,t){return e&&t?mn(e)!==mn(t)||rt(e)!==rt(t):e!==t}var wm="Date input not valid.",Pe=function(e){en(t,e);function t(n){var r=e.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:ht()},r.modifyHolidays=function(){var s;return(s=r.props.holidays)===null||s===void 0?void 0:s.reduce(function(i,o){var l=new Date(o.date);return Td(l)?Ir(Ir([],i,!0),[ct(ct({},o),{date:l})],!1):i},[])},r.calcInitialState=function(){var s,i=r.getPreSelection(),o=lN(r.props),l=cN(r.props),c=o&&Ma(i,Bc(o))?o:l&&Us(i,Ux(l))?l:i;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&s!==void 0?s:c,highlightDates:Xx(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.resetHiddenStatus=function(){r.setState(ct(ct({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(ct(ct({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var s,i;(i=(s=r.input)===null||s===void 0?void 0:s.focus)===null||i===void 0||i.call(s,{preventScroll:!0})},r.setBlur=function(){var s,i;(i=(s=r.input)===null||s===void 0?void 0:s.blur)===null||i===void 0||i.call(s),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(s,i){i===void 0&&(i=!1),r.setState({open:s,preSelection:s&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:Nm},function(){s||r.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return ns(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(s){var i,o,l=r.state.wasHidden,c=l?r.state.open:!0;l&&r.resetHiddenStatus(),r.state.preventFocus||((o=(i=r.props).onFocus)===null||o===void 0||o.call(i,s),c&&!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.handleBlur=function(s){var i,o;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((o=(i=r.props).onBlur)===null||o===void 0||o.call(i,s)),r.state.open&&r.props.open===!1&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(s){var i,o;r.props.inline||r.setOpen(!1),(o=(i=r.props).onClickOutside)===null||o===void 0||o.call(i,s),r.props.withPortal&&s.preventDefault()},r.handleChange=function(){for(var s,i,o,l,c,u=[],m=0;m<arguments.length;m++)u[m]=arguments[m];var h=u[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,u),!h||typeof h.isDefaultPrevented!="function"||h.isDefaultPrevented()))){r.setState({inputValue:(h==null?void 0:h.target)instanceof HTMLInputElement?h.target.value:null,lastPreSelectChange:sT});var f=r.props,b=f.selectsRange,v=f.startDate,D=f.endDate,g=(s=r.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,w=(i=r.props.strictParsing)!==null&&i!==void 0?i:t.defaultProps.strictParsing,y=(h==null?void 0:h.target)instanceof HTMLInputElement?h.target.value:"";if(b){var _=y.split(g.includes("-")?aN:"-",2).map(function(te){return te.trim()}),j=_[0],L=_[1],C=vm(j??"",g,r.props.locale,w),T=vm(L??"",g,r.props.locale,w),P=(v==null?void 0:v.getTime())!==(C==null?void 0:C.getTime()),q=(D==null?void 0:D.getTime())!==(T==null?void 0:T.getTime());if(!P&&!q||C&&rr(C,r.props)||T&&rr(T,r.props))return;(l=(o=r.props).onChange)===null||l===void 0||l.call(o,[C,T],h)}else{var X=vm(y,g,r.props.locale,w,(c=r.props.selected)!==null&&c!==void 0?c:void 0);(X||!y)&&r.setSelected(X,h,!0)}}},r.handleSelect=function(s,i,o){if(!r.props.readOnly){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(i),r.setSelected(s,i,!1,o),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(s);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var l=r.props,c=l.startDate,u=l.endDate;c&&!u&&(r.props.swapRange||!n0(s,c))&&r.setOpen(!1)}}},r.setSelected=function(s,i,o,l){var c,u,m=s;if(r.props.showYearPicker){if(m!==null&&Vc(rt(m),r.props))return}else if(r.props.showMonthYearPicker){if(m!==null&&oN(m,r.props))return}else if(m!==null&&rr(m,r.props))return;var h=r.props,f=h.onChange,b=h.selectsRange,v=h.startDate,D=h.endDate,g=h.selectsMultiple,w=h.selectedDates,y=h.minTime,_=h.swapRange;if(!fa(r.props.selected,m)||r.props.allowSameDay||b||g)if(m!==null&&(r.props.selected&&(!o||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(m=ym(m,{hour:rs(r.props.selected),minute:ss(r.props.selected),second:$s(r.props.selected)})),!o&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&y&&(m=ym(m,{hour:y.getHours(),minute:y.getMinutes(),second:y.getSeconds()})),r.props.inline||r.setState({preSelection:m}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:l})),b){var j=!v&&!D,L=v&&!D,C=v&&D;j?f==null||f([m,null],i):L&&(m===null?f==null||f([null,null],i):n0(m,v)?_?f==null||f([m,v],i):f==null||f([m,null],i):f==null||f([v,m],i)),C&&(f==null||f([m,null],i))}else if(g){if(m!==null)if(!(w!=null&&w.length))f==null||f([m],i);else{var T=w.some(function(q){return lt(q,m)});if(T){var P=w.filter(function(q){return!lt(q,m)});f==null||f(P,i)}else f==null||f(Ir(Ir([],w,!0),[m],!1),i)}}else f==null||f(m,i);o||((u=(c=r.props).onSelect)===null||u===void 0||u.call(c,m,i),r.setState({inputValue:null}))},r.setPreSelection=function(s){if(!r.props.readOnly){var i=ns(r.props.minDate),o=ns(r.props.maxDate),l=!0;if(s){var c=Bc(s);if(i&&o)l=bo(s,r.props.minDate,r.props.maxDate);else if(i){var u=Bc(r.props.minDate);l=Us(s,u)||fa(c,u)}else if(o){var m=Ux(r.props.maxDate);l=Ma(s,m)||fa(c,m)}}l&&r.setState({preSelection:s})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(s){var i,o;if(!(r.props.selectsRange||r.props.selectsMultiple)){var l=r.props.selected?r.props.selected:r.getPreSelection(),c=r.props.selected?s:ym(l,{hour:rs(s),minute:ss(s)});r.setState({preSelection:c}),(o=(i=r.props).onChange)===null||o===void 0||o.call(i,c),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var s,i;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(i=(s=r.props).onInputClick)===null||i===void 0||i.call(s)},r.onInputKeyDown=function(s){var i,o,l,c,u,m;(o=(i=r.props).onKeyDown)===null||o===void 0||o.call(i,s);var h=s.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(h===Ae.ArrowDown||h===Ae.ArrowUp||h===Ae.Enter)&&((l=r.onInputClick)===null||l===void 0||l.call(r));return}if(r.state.open){if(h===Ae.ArrowDown||h===Ae.ArrowUp){s.preventDefault();var f=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',b=((c=r.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(f);b instanceof HTMLElement&&b.focus({preventScroll:!0});return}var v=ht(r.state.preSelection);h===Ae.Enter?(s.preventDefault(),s.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===Nm?(r.handleSelect(v,s),!r.props.shouldCloseOnSelect&&r.setPreSelection(v)):r.setOpen(!1)):h===Ae.Escape?(s.preventDefault(),s.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):h===Ae.Tab&&r.setOpen(!1),r.inputOk()||(m=(u=r.props).onInputError)===null||m===void 0||m.call(u,{code:1,msg:wm})}},r.onPortalKeyDown=function(s){var i=s.key;i===Ae.Escape&&(s.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(s){var i,o,l,c,u,m,h=r.props,f=h.minDate,b=h.maxDate,v=h.disabledKeyboardNavigation,D=h.showWeekPicker,g=h.shouldCloseOnSelect,w=h.locale,y=h.calendarStartDay,_=h.adjustDateOnChange,j=h.inline;if((o=(i=r.props).onKeyDown)===null||o===void 0||o.call(i,s),!v){var L=s.key,C=s.shiftKey,T=ht(r.state.preSelection),P=function(se,W){var $=W;switch(se){case Ae.ArrowRight:$=D?Su(W,1):wr(W,1);break;case Ae.ArrowLeft:$=D?Mx(W):CE(W);break;case Ae.ArrowUp:$=Mx(W);break;case Ae.ArrowDown:$=Su(W,1);break;case Ae.PageUp:$=C?Pi(W,1):wa(W,1);break;case Ae.PageDown:$=C?ts(W,1):jr(W,1);break;case Ae.Home:$=zs(W,w,y);break;case Ae.End:$=gM(W);break}return $},q=function(se,W){for(var $=40,K=se,ee=!1,Q=0,ce=P(se,W);!ee;){if(Q>=$){ce=W;break}f&&ce<f&&(K=Ae.ArrowRight,ce=rr(f,r.props)?P(K,ce):f),b&&ce>b&&(K=Ae.ArrowLeft,ce=rr(b,r.props)?P(K,ce):b),rr(ce,r.props)?((K===Ae.PageUp||K===Ae.Home)&&(K=Ae.ArrowRight),(K===Ae.PageDown||K===Ae.End)&&(K=Ae.ArrowLeft),ce=P(K,ce)):ee=!0,Q++}return ce};if(L===Ae.Enter){s.preventDefault(),r.handleSelect(T,s),!g&&r.setPreSelection(T);return}else if(L===Ae.Escape){s.preventDefault(),r.setOpen(!1),r.inputOk()||(c=(l=r.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:wm});return}var X=null;switch(L){case Ae.ArrowLeft:case Ae.ArrowRight:case Ae.ArrowUp:case Ae.ArrowDown:case Ae.PageUp:case Ae.PageDown:case Ae.Home:case Ae.End:X=q(L,T);break}if(!X){(m=(u=r.props).onInputError)===null||m===void 0||m.call(u,{code:1,msg:wm});return}if(s.preventDefault(),r.setState({lastPreSelectChange:Nm}),_&&r.setSelected(X),r.setPreSelection(X),j){var te=mn(T),oe=mn(X),fe=rt(T),G=rt(X);te!==oe||fe!==G?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(s){var i=s.key;i===Ae.Escape&&(s.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),r.sendFocusBackToInput();var i=r.props,o=i.selectsRange,l=i.onChange;o?l==null||l([null,null],s):l==null||l(null,s),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(s){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(s)&&r.setOpen(!1)},r.renderCalendar=function(){var s,i;return!r.props.inline&&!r.isCalendarOpen()?null:xe.createElement(GM,ct({showMonthYearDropdown:void 0,ref:function(o){r.calendar=o}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(s=r.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:CM(r.modifyHolidays()),outsideClickIgnoreClass:a0,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(i=r.props.dropdownMode)!==null&&i!==void 0?i:t.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var s=r.props,i=s.dateFormat,o=i===void 0?t.defaultProps.dateFormat:i,l=s.locale,c=r.props.showTimeInput||r.props.showTimeSelect,u=c?"PPPPp":"PPPP",m;return r.props.selectsRange?m="Selected start date: ".concat(Zn(r.props.startDate,{dateFormat:u,locale:l}),". ").concat(r.props.endDate?"End date: "+Zn(r.props.endDate,{dateFormat:u,locale:l}):""):r.props.showTimeSelectOnly?m="Selected time: ".concat(Zn(r.props.selected,{dateFormat:o,locale:l})):r.props.showYearPicker?m="Selected year: ".concat(Zn(r.props.selected,{dateFormat:"yyyy",locale:l})):r.props.showMonthYearPicker?m="Selected month: ".concat(Zn(r.props.selected,{dateFormat:"MMMM yyyy",locale:l})):r.props.showQuarterYearPicker?m="Selected quarter: ".concat(Zn(r.props.selected,{dateFormat:"yyyy, QQQ",locale:l})):m="Selected date: ".concat(Zn(r.props.selected,{dateFormat:u,locale:l})),xe.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},m)},r.renderDateInput=function(){var s,i,o,l=rn(r.props.className,(s={},s[a0]=r.state.open,s)),c=r.props.customInput||xe.createElement("input",{type:"text"}),u=r.props.customInputRef||"ref",m=r.props,h=m.dateFormat,f=h===void 0?t.defaultProps.dateFormat:h,b=m.locale,v=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?mM(r.props.startDate,r.props.endDate,{dateFormat:f,locale:b}):r.props.selectsMultiple?fM((o=r.props.selectedDates)!==null&&o!==void 0?o:[],{dateFormat:f,locale:b}):Zn(r.props.selected,{dateFormat:f,locale:b});return E.cloneElement(c,(i={},i[u]=function(D){r.input=D},i.value=v,i.onBlur=r.handleBlur,i.onChange=r.handleChange,i.onClick=r.onInputClick,i.onFocus=r.handleFocus,i.onKeyDown=r.onInputKeyDown,i.id=r.props.id,i.name=r.props.name,i.form=r.props.form,i.autoFocus=r.props.autoFocus,i.placeholder=r.props.placeholderText,i.disabled=r.props.disabled,i.autoComplete=r.props.autoComplete,i.className=rn(c.props.className,l),i.title=r.props.title,i.readOnly=r.props.readOnly,i.required=r.props.required,i.tabIndex=r.props.tabIndex,i["aria-describedby"]=r.props.ariaDescribedBy,i["aria-invalid"]=r.props.ariaInvalid,i["aria-labelledby"]=r.props.ariaLabelledBy,i["aria-required"]=r.props.ariaRequired,i))},r.renderClearButton=function(){var s=r.props,i=s.isClearable,o=s.disabled,l=s.selected,c=s.startDate,u=s.endDate,m=s.clearButtonTitle,h=s.clearButtonClassName,f=h===void 0?"":h,b=s.ariaLabelClose,v=b===void 0?"Close":b,D=s.selectedDates,g=s.readOnly;return i&&!g&&(l!=null||c!=null||u!=null||D!=null&&D.length)?xe.createElement("button",{type:"button",className:rn("react-datepicker__close-icon",f,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":v,onClick:r.onClearClick,title:m,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Tl,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(n,r){var s,i,o,l;n.inline&&rT(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Xx(this.props.highlightDates)}),!r.focused&&!fa(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((i=(s=this.props).onCalendarOpen)===null||i===void 0||i.call(s)),r.open===!0&&this.state.open===!1&&((l=(o=this.props).onCalendarClose)===null||l===void 0||l.call(o)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,s=n.icon,i=n.calendarIconClassname,o=n.calendarIconClassName,l=n.toggleCalendarOnIconClick,c=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),xe.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&xe.createElement(JM,ct({icon:s,className:rn(o,!o&&i,c&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?xe.createElement(mN,{enableTabLoop:this.props.enableTabLoop},xe.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=xe.createElement(dN,ct({portalId:this.props.portalId},this.props),r)),xe.createElement("div",null,this.renderInputContainer(),r)}return xe.createElement(nT,ct({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(E.Component),sT="input",Nm="navigate";const aT={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},iT=(e,t,n)=>{let r;const s=aT[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},oT={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},lT={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},cT={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uT={date:mi({formats:oT,defaultWidth:"full"}),time:mi({formats:lT,defaultWidth:"full"}),dateTime:mi({formats:cT,defaultWidth:"full"})},dT={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},mT=(e,t,n,r)=>dT[e],fT={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},hT={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},pT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},gT={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},xT={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},vT=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let i;return n===1?i=r&&s.includes(r)?"ère":"er":i="ème",n+i},yT=["MMM","MMMM"],bT={preprocessor:(e,t)=>e.getDate()===1||!t.some(r=>r.isToken&&yT.includes(r.value))?t:t.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:vT,era:Fr({values:fT,defaultWidth:"wide"}),quarter:Fr({values:hT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Fr({values:pT,defaultWidth:"wide"}),day:Fr({values:gT,defaultWidth:"wide"}),dayPeriod:Fr({values:xT,defaultWidth:"wide"})},wT=/^(\d+)(ième|ère|ème|er|e)?/i,NT=/\d+/i,jT={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},_T={any:[/^av/i,/^ap/i]},ST={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},kT={any:[/1/i,/2/i,/3/i,/4/i]},DT={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},CT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},PT={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},ET={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},MT={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},TT={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},OT={ordinalNumber:Iw({matchPattern:wT,parsePattern:NT,valueCallback:e=>parseInt(e)}),era:Ar({matchPatterns:jT,defaultMatchWidth:"wide",parsePatterns:_T,defaultParseWidth:"any"}),quarter:Ar({matchPatterns:ST,defaultMatchWidth:"wide",parsePatterns:kT,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ar({matchPatterns:DT,defaultMatchWidth:"wide",parsePatterns:CT,defaultParseWidth:"any"}),day:Ar({matchPatterns:PT,defaultMatchWidth:"wide",parsePatterns:ET,defaultParseWidth:"any"}),dayPeriod:Ar({matchPatterns:MT,defaultMatchWidth:"any",parsePatterns:TT,defaultParseWidth:"any"})},Dn={code:"fr",formatDistance:iT,formatLong:uT,formatRelative:mT,localize:bT,match:OT,options:{weekStartsOn:1,firstWeekContainsDate:4}};kn("fr",Dn);const Ru=e=>typeof e=="string"&&e.trim().length===0,so=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},FT=({status:e})=>{const n={en_cours:{color:"bg-blue-100 text-blue-800",label:"En cours"},validee:{color:"bg-green-100 text-green-800",label:"Validée"},annulee:{color:"bg-red-100 text-red-800",label:"Annulée"},fin_de_periode:{color:"bg-gray-100 text-gray-800",label:"Fin de période"}}[e];return a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${n.color}`,children:n.label})},ao="http://localhost:5000",AT=()=>{var ce,ve;const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState([]),[o,l]=E.useState(!0),[c,u]=E.useState(null),[m,h]=E.useState(""),[f,b]=E.useState(null),[v,D]=E.useState(""),[g,w]=E.useState(!1),[y,_]=E.useState(null),[j,L]=E.useState(!1),[C,T]=E.useState(null),[P,q]=E.useState({}),X=`${ao}/api/reservations`,te=`${ao}/api/customers`,oe=`${ao}/api/vehicles`,fe=E.useCallback(async()=>{l(!0),u(null);try{const[U,H,J]=await Promise.all([we.get(X),we.get(te),we.get(oe)]),S=U.data.map(O=>{const d=H.data.find(N=>N._id===O.customer),p=J.data.find(N=>N._id===O.vehicle);return{...O,customer:d||O.customer,vehicle:p||O.vehicle}});t(S),r(H.data),i(J.data)}catch(U){console.error("Error fetching data:",U),u("Failed to load data."),ie.error("Failed to load data.")}finally{l(!1)}},[]);E.useEffect(()=>{fe()},[fe]);const G=e.filter(U=>{const H=m.toLowerCase(),J=typeof U.customer=="object"&&U.customer?U.customer:null,S=J?`${J.prenomFr||""} ${J.nomFr||""}`.toLowerCase():"",O=typeof U.vehicle=="object"&&U.vehicle?U.vehicle:null,d=O?(O.model||"").toLowerCase():"",p=U.reservationNumber.toLowerCase().includes(H)||S.includes(H)||d.includes(H),N=new Date(U.reservationDate),k=f?N.toDateString()===f.toDateString():!0,x=v?U.status===v:!0;return p&&k&&x}),se=async U=>{try{const J=(await we.post(X,U)).data,S=n.find(p=>p._id===J.customer),O=s.find(p=>p._id===J.vehicle),d={...J,customer:S||J.customer,vehicle:O||J.vehicle};t([...e,d]),w(!1),ie.success("Reservation added successfully.")}catch(H){console.error("Error adding reservation:",H),ie.error("Failed to add reservation.")}},W=async U=>{if(!y||!C)return;const H={};if(C.notes&&Ru(C.notes)&&(H.notes="Les notes ne peuvent pas contenir uniquement des espaces."),C.advance!==void 0&&C.advance<0&&(H.advance="L'avance ne peut pas être inférieure à 0."),q(H),Object.keys(H).length>0){ie.error("Veuillez corriger les erreurs de validation.");return}try{const S=(await we.put(`${X}/${y._id}`,U)).data,O=n.find(N=>N._id===S.customer),d=s.find(N=>N._id===S.vehicle),p={...S,customer:O||S.customer,vehicle:d||S.vehicle};t(e.map(N=>N._id===p._id?p:N)),_(p),L(!1),T(null),q({}),ie.success("Reservation updated successfully.")}catch(J){console.error("Error updating reservation:",J),ie.error("Failed to update reservation.")}},[$,K]=E.useState(!1),ee=U=>{_(e.find(H=>H._id===U)||null),K(!0)},Q=async()=>{if(y)try{await we.delete(`${X}/${y._id}`),t(e.filter(U=>U._id!==y._id)),_(null),K(!1),ie.success("Reservation deleted successfully.")}catch(U){console.error("Error deleting reservation:",U),ie.error("Failed to delete reservation.")}};return E.useEffect(()=>{if(j&&C&&C.startDate&&C.endDate){const U=new Date(C.startDate),H=new Date(C.endDate);if(!isNaN(U.getTime())&&!isNaN(H.getTime())&&H>=U){const J=Math.abs(H.getTime()-U.getTime()),S=Math.ceil(J/(1e3*60*60*24));let O=C.totalAmount,d=null;typeof C.vehicle=="object"&&C.vehicle?d=C.vehicle._id:typeof C.vehicle=="string"&&(d=C.vehicle);const p=s.find(N=>N._id===d);p?O=S*p.rentalPrice:O=0,T(N=>!N||N.duration===S&&N.totalAmount===O?N:{...N,duration:S,totalAmount:O})}}},[C==null?void 0:C.startDate,C==null?void 0:C.endDate,C==null?void 0:C.vehicle,s,j]),o?a.jsx("p",{children:"Loading..."}):c?a.jsx("p",{children:c}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des Réservations"}),a.jsxs("button",{onClick:()=>{_(null),w(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Nouvelle Réservation"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-[200px]",children:[a.jsx("label",{htmlFor:"search-reservation",className:"sr-only",children:"Rechercher une réservation"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Yn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-reservation",type:"text",placeholder:"Rechercher une réservation...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:m,onChange:U=>h(U.target.value)})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"status-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Statut"}),a.jsxs("select",{id:"status-filter",value:v,onChange:U=>D(U.target.value),className:"px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",children:[a.jsx("option",{value:"",children:"Tous les statuts"}),a.jsx("option",{value:"en_cours",children:"En cours"}),a.jsx("option",{value:"validee",children:"Validée"}),a.jsx("option",{value:"annulee",children:"Annulée"}),a.jsx("option",{value:"fin_de_periode",children:"Fin de période"})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de réservation"}),a.jsx(Pe,{id:"date-filter",selected:f,onChange:U=>b(U),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"Sélectionner une date",className:"px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Réservation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client & Véhicule"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Dates"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(U=>{var H;return a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(y==null?void 0:y._id)===U._id?"bg-blue-50":""}`,onClick:()=>_(U),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:typeof U.vehicle=="object"&&((H=U.vehicle)!=null&&H.imageUrl)?a.jsx("img",{src:U.vehicle.imageUrl.startsWith("data:")?U.vehicle.imageUrl:`${ao}/${U.vehicle.imageUrl.replace(/\\/g,"/")}`,alt:`${U.vehicle.brand||"N/A"} ${U.vehicle.model||"N/A"}`,className:"w-10 h-10 object-cover rounded-full"}):a.jsx(bt,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.reservationNumber}),a.jsx("div",{className:"text-xs text-gray-500",children:typeof U.customer=="object"&&U.customer&&`${U.customer.prenomFr||""} ${U.customer.nomFr||""}`.trim()||"N/A"})]})]})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium",children:typeof U.vehicle=="object"&&U.vehicle&&U.vehicle.model||"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:typeof U.vehicle=="object"&&U.vehicle&&U.vehicle.licensePlate||"N/A"})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:so(U.startDate)}),a.jsx("div",{className:"text-sm text-gray-500",children:so(U.endDate)})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[U.totalAmount.toLocaleString("fr-FR")," DH"]}),a.jsx("div",{className:`text-xs ${U.totalAmount-U.advance>0?"text-amber-600":"text-green-600"}`,children:U.totalAmount-U.advance>0?`Reste: ${(U.totalAmount-U.advance).toLocaleString("fr-FR")} DH`:"Payé"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${U.status==="en_cours"?"bg-blue-100 text-blue-800":U.status==="validee"?"bg-green-100 text-green-800":U.status==="annulee"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:U.status==="en_cours"?"En cours":U.status==="validee"?"Validée":U.status==="annulee"?"Annulée":"Fin de période"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(gn,{onClick:J=>{J.stopPropagation(),_(U),L(!0),T({...U,customer:typeof U.customer=="object"?U.customer._id:U.customer,vehicle:typeof U.vehicle=="object"?U.vehicle._id:U.vehicle})},size:"md",className:"mr-3"}),a.jsx("button",{onClick:J=>{J.stopPropagation(),ee(U._id)},children:a.jsx(Rn,{size:18})})]})]},U._id)})})]})})}),a.jsx("div",{className:"lg:col-span-1",children:y?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de la réservation"}),j?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{confirm("Êtes-vous sûr de vouloir annuler les modifications ?")&&(L(!1),T(null),q({}))},className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:()=>{C&&W(C)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:()=>{T({...y}),L(!0),q({})},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsxs("div",{className:"p-4 space-y-4",children:[y.vehicle&&typeof y.vehicle=="object"?a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[y.vehicle.imageUrl?a.jsx("img",{src:y.vehicle.imageUrl.startsWith("data:")?y.vehicle.imageUrl:`${ao}/${y.vehicle.imageUrl.replace(/\\/g,"/").replace(/^\//,"")}`,alt:`${y.vehicle.brand||"N/A"} ${y.vehicle.model||"N/A"}`,className:"w-24 h-24 object-cover rounded-lg shadow"}):a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(bt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-lg",children:[y.vehicle.brand||"N/A"," ",y.vehicle.model||"N/A"]}),a.jsx("p",{className:"text-sm text-gray-600",children:y.vehicle.licensePlate||"N/A"})]})]})]}):a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(bt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg",children:"N/A"}),a.jsx("p",{className:"text-sm text-gray-600",children:"N/A"})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"N° de Réservation"}),j&&C?a.jsx("input",{type:"text",name:"reservationNumber",value:C.reservationNumber||"",onChange:U=>T(H=>H?{...H,reservationNumber:U.target.value}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:y.reservationNumber||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Client"}),j&&C?a.jsxs("select",{name:"customer",onChange:U=>{const H=U.target.value;T(J=>J?{...J,customer:H}:null)},value:typeof(C==null?void 0:C.customer)=="object"&&C.customer?C.customer._id:(C==null?void 0:C.customer)||"",className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),n.map(U=>a.jsxs("option",{value:U._id,children:[U.prenomFr," ",U.nomFr]},U._id))]}):a.jsx("p",{className:"font-medium",children:typeof y.customer=="object"&&y.customer&&`${y.customer.prenomFr||""} ${y.customer.nomFr||""}`.trim()||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Véhicule"}),j&&C?a.jsxs("select",{name:"vehicle",onChange:U=>{const H=U.target.value;T(J=>J?{...J,vehicle:H}:null)},value:typeof(C==null?void 0:C.vehicle)=="object"&&C.vehicle?C.vehicle._id:(C==null?void 0:C.vehicle)||"",className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),s.map(U=>a.jsxs("option",{value:U._id,children:[U.licensePlate," - ",U.model]},U._id))]}):a.jsx("p",{className:"font-medium",children:typeof y.vehicle=="object"&&y.vehicle?`${y.vehicle.brand||"N/A"} ${y.vehicle.model||"N/A"}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de Réservation"}),j&&C?a.jsx(Pe,{selected:C.reservationDate?new Date(C.reservationDate):null,onChange:U=>T(H=>H?{...H,reservationDate:U?U.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:so(y.reservationDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de Début"}),j&&C?a.jsx(Pe,{selected:C.startDate?new Date(C.startDate):null,onChange:U=>T(H=>H?{...H,startDate:U?U.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:so(y.startDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de Fin"}),j&&C?a.jsx(Pe,{selected:C.endDate?new Date(C.endDate):null,onChange:U=>T(H=>H?{...H,endDate:U?U.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:so(y.endDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Durée"}),a.jsxs("p",{className:"font-medium",children:[y.duration||"N/A"," jours"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant Total"}),j&&C?a.jsx("input",{type:"number",name:"totalAmount",value:C.totalAmount||0,onChange:U=>T(H=>H?{...H,totalAmount:Number(U.target.value)}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsxs("p",{className:"font-medium",children:[((ce=y.totalAmount)==null?void 0:ce.toLocaleString("fr-FR"))||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Avance"}),j&&C?a.jsx("input",{type:"number",name:"advance",value:C.advance||0,onChange:U=>{T(H=>H?{...H,advance:Number(U.target.value)}:null),Number(U.target.value)<0?q(H=>({...H,advance:"L'avance ne peut pas être inférieure à 0."})):q(H=>{const J={...H};return delete J.advance,J})},className:`w-full border rounded-lg p-2 mt-1 ${P.advance?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}):a.jsxs("p",{className:"font-medium",children:[((ve=y.advance)==null?void 0:ve.toLocaleString("fr-FR"))||"N/A"," DH"]}),P.advance&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.advance})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Reste à payer"}),a.jsxs("p",{className:"font-medium",children:[(y.totalAmount-y.advance).toLocaleString("fr-FR")||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Statut"}),j&&C?a.jsxs("select",{name:"status",value:C.status||"",onChange:U=>T(H=>H?{...H,status:U.target.value}:null),className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"en_cours",children:"En cours"}),a.jsx("option",{value:"validee",children:"Validée"}),a.jsx("option",{value:"annulee",children:"Annulée"}),a.jsx("option",{value:"fin_de_periode",children:"Fin de période"})]}):a.jsx("p",{className:"font-medium",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${y.status==="en_cours"?"bg-blue-100 text-blue-800":y.status==="validee"?"bg-green-100 text-green-800":y.status==="annulee"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:y.status==="en_cours"?"En cours":y.status==="validee"?"Validée":y.status==="annulee"?"Annulée":"Fin de période"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Notes"}),j&&C?a.jsx("textarea",{name:"notes",value:C.notes||"",onChange:U=>{T(H=>H?{...H,notes:U.target.value}:null),Ru(U.target.value)?q(H=>({...H,notes:"Les notes ne peuvent pas contenir uniquement des espaces."})):q(H=>{const J={...H};return delete J.notes,J})},rows:3,className:`w-full border rounded-lg p-2 mt-1 ${P.notes?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}):a.jsx("p",{className:"font-medium",children:y.notes||"Aucune note"}),P.notes&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.notes})]})]})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(jd,{size:64,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune réservation sélectionnée"})]})})]}),g&&a.jsx(LT,{onSubmit:se,onClose:()=>w(!1),initialData:null,customers:n,vehicles:s}),$&&y&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirmer la suppression"}),a.jsxs("p",{children:['Êtes-vous sûr de vouloir supprimer la réservation "',y.reservationNumber,'" ?']}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>K(!1),className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"button",onClick:Q,className:"px-4 py-2 bg-red-600 text-white rounded-lg",children:"Supprimer"})]})]})})]})},LT=({onSubmit:e,onClose:t,initialData:n,customers:r,vehicles:s})=>{var D;const i=new Date().toISOString().split("T")[0],o=new Date;o.setDate(o.getDate()+1);const l=o.toISOString().split("T")[0],[c,u]=E.useState(()=>n?{...n,customer:typeof n.customer=="object"?n.customer._id:n.customer,vehicle:typeof n.vehicle=="object"?n.vehicle._id:n.vehicle}:{reservationNumber:"",reservationDate:i,startDate:i,endDate:l,duration:0,status:"en_cours",customer:"",vehicle:"",totalAmount:0,advance:0,notes:""}),[m,h]=E.useState({});E.useEffect(()=>{if(c.startDate&&c.endDate){const g=new Date(c.startDate),w=new Date(c.endDate);if(!isNaN(g.getTime())&&!isNaN(w.getTime())&&w>=g){const y=Math.abs(w.getTime()-g.getTime()),_=Math.ceil(y/(1e3*60*60*24));let j=c.totalAmount||0;if(c.vehicle){const L=s.find(C=>C._id===c.vehicle);L&&(j=_*L.rentalPrice)}u(L=>({...L,duration:_,totalAmount:j}))}}},[c.startDate,c.endDate,c.vehicle,s]);const f=g=>{const{name:w,value:y}=g.target;w==="notes"&&(y&&Ru(y)?h(_=>({..._,[w]:"Les notes ne peuvent pas contenir uniquement des espaces."})):h(_=>{const j={..._};return delete j[w],j})),u(_=>({..._,[w]:y}))},b=(g,w)=>{u(y=>({...y,[w]:g?g.toISOString().split("T")[0]:""}))},v=g=>{g.preventDefault();const w={};if(!c.customer||!c.vehicle||!c.startDate||!c.endDate||!c.reservationDate){ie.error("Veuillez remplir tous les champs obligatoires.");return}if(c.notes&&Ru(c.notes)&&(w.notes="Les notes ne peuvent pas contenir uniquement des espaces."),c.advance!==void 0&&c.advance<0&&(w.advance="L'avance ne peut pas être inférieure à 0."),h(w),Object.keys(w).length>0){ie.error("Veuillez corriger les erreurs de validation.");return}const y={...c,customer:c.customer,vehicle:c.vehicle,duration:Number(c.duration),totalAmount:Number(c.totalAmount),advance:Number(c.advance)};e(y)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sn,{onClick:t}),a.jsxs("h2",{className:"text-xl font-bold mb-4",children:[n?"Modifier":"Nouvelle"," Réservation"]}),a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations sur la Réservation"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"customer",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),a.jsxs("select",{id:"customer",name:"customer",value:c.customer||"",onChange:f,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),r.map(g=>a.jsxs("option",{value:g._id,children:[g.prenomFr," ",g.nomFr]},g._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",value:c.vehicle||"",onChange:f,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),s.map(g=>a.jsxs("option",{value:g._id,children:[g.licensePlate," - ",g.model]},g._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"reservationDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Réservation"}),a.jsx(Pe,{selected:c.reservationDate?new Date(c.reservationDate):null,onChange:g=>b(g,"reservationDate"),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"Date de réservation",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Début"}),a.jsx(Pe,{selected:c.startDate?new Date(c.startDate):null,onChange:g=>b(g,"startDate"),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"Date de début",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Fin"}),a.jsx(Pe,{selected:c.endDate?new Date(c.endDate):null,onChange:g=>b(g,"endDate"),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"Date de fin",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Durée"}),a.jsx("input",{type:"number",id:"duration",name:"duration",placeholder:"Durée",value:c.duration||"",readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"rentalPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix de journée"}),a.jsx("input",{type:"number",id:"rentalPrice",name:"rentalPrice",placeholder:"Prix de journée",value:((D=s.find(g=>g._id===c.vehicle))==null?void 0:D.rentalPrice)||"",readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut"}),a.jsxs("select",{id:"status",name:"status",value:c.status||"",onChange:f,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3",children:[a.jsx("option",{value:"en_cours",children:"En cours"}),a.jsx("option",{value:"validee",children:"Validée"}),a.jsx("option",{value:"annulee",children:"Annulée"}),a.jsx("option",{value:"fin_de_periode",children:"Fin de période"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"totalAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant Total"}),a.jsx("input",{type:"number",id:"totalAmount",name:"totalAmount",placeholder:"Montant total",value:c.totalAmount||"",onChange:g=>u(w=>({...w,totalAmount:parseFloat(g.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"advance",className:"block text-sm font-medium text-gray-700 mb-1",children:"Avance"}),a.jsx("input",{type:"number",id:"advance",name:"advance",placeholder:"Avance",value:c.advance||"",onChange:g=>{u(w=>({...w,advance:parseFloat(g.target.value)})),parseFloat(g.target.value)<0?h(w=>({...w,advance:"L'avance ne peut pas être inférieure à 0."})):h(w=>{const y={...w};return delete y.advance,y})},className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 ${m.advance?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),m.advance&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.advance})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("textarea",{id:"notes",name:"notes",placeholder:"Notes",value:c.notes||"",onChange:f,className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 ${m.notes?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),m.notes&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.notes})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:n?"Mettre à jour":"Ajouter"})]})]})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Fl(e){return e+.5|0}const Ps=(e,t,n)=>Math.max(Math.min(e,n),t);function wo(e){return Ps(Fl(e*2.55),0,255)}function Hs(e){return Ps(Fl(e*255),0,255)}function Jr(e){return Ps(Fl(e/2.55)/100,0,1)}function i0(e){return Ps(Fl(e*100),0,100)}const Xn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Jf=[..."0123456789ABCDEF"],RT=e=>Jf[e&15],IT=e=>Jf[(e&240)>>4]+Jf[e&15],oc=e=>(e&240)>>4===(e&15),$T=e=>oc(e.r)&&oc(e.g)&&oc(e.b)&&oc(e.a);function zT(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Xn[e[1]]*17,g:255&Xn[e[2]]*17,b:255&Xn[e[3]]*17,a:t===5?Xn[e[4]]*17:255}:(t===7||t===9)&&(n={r:Xn[e[1]]<<4|Xn[e[2]],g:Xn[e[3]]<<4|Xn[e[4]],b:Xn[e[5]]<<4|Xn[e[6]],a:t===9?Xn[e[7]]<<4|Xn[e[8]]:255})),n}const HT=(e,t)=>e<255?t(e):"";function BT(e){var t=$T(e)?RT:IT;return e?"#"+t(e.r)+t(e.g)+t(e.b)+HT(e.a,t):void 0}const VT=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function fN(e,t,n){const r=t*Math.min(n,1-n),s=(i,o=(i+e/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function UT(e,t,n){const r=(s,i=(s+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function WT(e,t,n){const r=fN(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function YT(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}function Sp(e){const n=e.r/255,r=e.g/255,s=e.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),l=(i+o)/2;let c,u,m;return i!==o&&(m=i-o,u=l>.5?m/(2-i-o):m/(i+o),c=YT(n,r,s,m,i),c=c*60+.5),[c|0,u||0,l]}function kp(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Hs)}function Dp(e,t,n){return kp(fN,e,t,n)}function qT(e,t,n){return kp(WT,e,t,n)}function KT(e,t,n){return kp(UT,e,t,n)}function hN(e){return(e%360+360)%360}function QT(e){const t=VT.exec(e);let n=255,r;if(!t)return;t[5]!==r&&(n=t[6]?wo(+t[5]):Hs(+t[5]));const s=hN(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?r=qT(s,i,o):t[1]==="hsv"?r=KT(s,i,o):r=Dp(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function GT(e,t){var n=Sp(e);n[0]=hN(n[0]+t),n=Dp(n),e.r=n[0],e.g=n[1],e.b=n[2]}function JT(e){if(!e)return;const t=Sp(e),n=t[0],r=i0(t[1]),s=i0(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${s}%, ${Jr(e.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const o0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},l0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function XT(){const e={},t=Object.keys(l0),n=Object.keys(o0);let r,s,i,o,l;for(r=0;r<t.length;r++){for(o=l=t[r],s=0;s<n.length;s++)i=n[s],l=l.replace(i,o0[i]);i=parseInt(l0[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let lc;function ZT(e){lc||(lc=XT(),lc.transparent=[0,0,0,0]);const t=lc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const e4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function t4(e){const t=e4.exec(e);let n=255,r,s,i;if(t){if(t[7]!==r){const o=+t[7];n=t[8]?wo(o):Ps(o*255,0,255)}return r=+t[1],s=+t[3],i=+t[5],r=255&(t[2]?wo(r):Ps(r,0,255)),s=255&(t[4]?wo(s):Ps(s,0,255)),i=255&(t[6]?wo(i):Ps(i,0,255)),{r,g:s,b:i,a:n}}}function n4(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Jr(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const jm=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Va=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function r4(e,t,n){const r=Va(Jr(e.r)),s=Va(Jr(e.g)),i=Va(Jr(e.b));return{r:Hs(jm(r+n*(Va(Jr(t.r))-r))),g:Hs(jm(s+n*(Va(Jr(t.g))-s))),b:Hs(jm(i+n*(Va(Jr(t.b))-i))),a:e.a+n*(t.a-e.a)}}function cc(e,t,n){if(e){let r=Sp(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,t===0?360:1)),r=Dp(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function pN(e,t){return e&&Object.assign(t||{},e)}function c0(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Hs(e[3]))):(t=pN(e,{r:0,g:0,b:0,a:1}),t.a=Hs(t.a)),t}function s4(e){return e.charAt(0)==="r"?t4(e):QT(e)}class fl{constructor(t){if(t instanceof fl)return t;const n=typeof t;let r;n==="object"?r=c0(t):n==="string"&&(r=zT(t)||ZT(t)||s4(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=pN(this._rgb);return t&&(t.a=Jr(t.a)),t}set rgb(t){this._rgb=c0(t)}rgbString(){return this._valid?n4(this._rgb):void 0}hexString(){return this._valid?BT(this._rgb):void 0}hslString(){return this._valid?JT(this._rgb):void 0}mix(t,n){if(t){const r=this.rgb,s=t.rgb;let i;const o=n===i?.5:n,l=2*o-1,c=r.a-s.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(t,n){return t&&(this._rgb=r4(this._rgb,t._rgb,n)),this}clone(){return new fl(this.rgb)}alpha(t){return this._rgb.a=Hs(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Fl(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return cc(this._rgb,2,t),this}darken(t){return cc(this._rgb,2,-t),this}saturate(t){return cc(this._rgb,1,t),this}desaturate(t){return cc(this._rgb,1,-t),this}rotate(t){return GT(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Yr(){}const a4=(()=>{let e=0;return()=>e++})();function Nt(e){return e==null}function Jt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function dt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function dr(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Dr(e,t){return dr(e)?e:t}function ot(e,t){return typeof e>"u"?t:e}const i4=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function _t(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function xt(e,t,n,r){let s,i,o;if(Jt(e))for(i=e.length,s=0;s<i;s++)t.call(n,e[s],s);else if(dt(e))for(o=Object.keys(e),i=o.length,s=0;s<i;s++)t.call(n,e[o[s]],o[s])}function Iu(e,t){let n,r,s,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],i=t[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function $u(e){if(Jt(e))return e.map($u);if(dt(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=$u(e[n[s]]);return t}return e}function gN(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function o4(e,t,n,r){if(!gN(e))return;const s=t[e],i=n[e];dt(s)&&dt(i)?hl(s,i,r):t[e]=$u(i)}function hl(e,t,n){const r=Jt(t)?t:[t],s=r.length;if(!dt(e))return e;n=n||{};const i=n.merger||o4;let o;for(let l=0;l<s;++l){if(o=r[l],!dt(o))continue;const c=Object.keys(o);for(let u=0,m=c.length;u<m;++u)i(c[u],e,o,n)}return e}function Ro(e,t){return hl(e,t,{merger:l4})}function l4(e,t,n){if(!gN(e))return;const r=t[e],s=n[e];dt(r)&&dt(s)?Ro(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=$u(s))}const u0={"":e=>e,x:e=>e.x,y:e=>e.y};function c4(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function u4(e){const t=c4(e);return n=>{for(const r of t){if(r==="")break;n=n&&n[r]}return n}}function zu(e,t){return(u0[t]||(u0[t]=u4(t)))(e)}function Cp(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Hu=e=>typeof e<"u",Ys=e=>typeof e=="function",d0=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function d4(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Zt=Math.PI,Br=2*Zt,m4=Br+Zt,Bu=Number.POSITIVE_INFINITY,f4=Zt/180,vr=Zt/2,Xs=Zt/4,m0=Zt*2/3,xN=Math.log10,Fi=Math.sign;function Io(e,t,n){return Math.abs(e-t)<n}function f0(e){const t=Math.round(e);e=Io(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(xN(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function h4(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(n|0)&&t.push(n),t.sort((s,i)=>s-i).pop(),t}function p4(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function pl(e){return!p4(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function g4(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function x4(e,t,n){let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function ha(e){return e*(Zt/180)}function v4(e){return e*(180/Zt)}function h0(e){if(!dr(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function y4(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Zt&&(i+=Br),{angle:i,distance:s}}function Xf(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function b4(e,t){return(e-t+m4)%Br-Zt}function ys(e){return(e%Br+Br)%Br}function vN(e,t,n,r){const s=ys(e),i=ys(t),o=ys(n),l=ys(i-s),c=ys(o-s),u=ys(s-i),m=ys(s-o);return s===i||s===o||r&&i===o||l>c&&u<m}function ar(e,t,n){return Math.max(t,Math.min(n,e))}function w4(e){return ar(e,-32768,32767)}function No(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function Pp(e,t,n){n=n||(o=>e[o]<t);let r=e.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const pa=(e,t,n,r)=>Pp(e,n,r?s=>{const i=e[s][t];return i<n||i===n&&e[s+1][t]===n}:s=>e[s][t]<n),N4=(e,t,n)=>Pp(e,n,r=>e[r][t]>=n);function j4(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}const yN=["push","pop","shift","splice","unshift"];function _4(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),yN.forEach(n=>{const r="_onData"+Cp(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...i)}),o}})})}function p0(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);s!==-1&&r.splice(s,1),!(r.length>0)&&(yN.forEach(i=>{delete e[i]}),delete e._chartjs)}function S4(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const bN=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function wN(e,t){let n=[],r=!1;return function(...s){n=s,r||(r=!0,bN.call(window,()=>{r=!1,e.apply(t,n)}))}}function k4(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const Ep=e=>e==="start"?"left":e==="end"?"right":"center",cn=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,D4=(e,t,n,r)=>e===(r?"left":"right")?n:e==="center"?(t+n)/2:t;function C4(e,t,n){const r=t.length;let s=0,i=r;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,m=o.axis,{min:h,max:f,minDefined:b,maxDefined:v}=o.getUserBounds();if(b){if(s=Math.min(pa(c,m,h).lo,n?r:pa(t,m,o.getPixelForValue(h)).lo),u){const D=c.slice(0,s+1).reverse().findIndex(g=>!Nt(g[l.axis]));s-=Math.max(0,D)}s=ar(s,0,r-1)}if(v){let D=Math.max(pa(c,o.axis,f,!0).hi+1,n?0:pa(t,m,o.getPixelForValue(f),!0).hi+1);if(u){const g=c.slice(D-1).findIndex(w=>!Nt(w[l.axis]));D+=Math.max(0,g)}i=ar(D,s,r)-s}else i=r-s}return{start:s,count:i}}function P4(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const uc=e=>e===0||e===1,g0=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Br/n)),x0=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Br/n)+1,$o={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*vr)+1,easeOutSine:e=>Math.sin(e*vr),easeInOutSine:e=>-.5*(Math.cos(Zt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>uc(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>uc(e)?e:g0(e,.075,.3),easeOutElastic:e=>uc(e)?e:x0(e,.075,.3),easeInOutElastic(e){return uc(e)?e:e<.5?.5*g0(e*2,.1125,.45):.5+.5*x0(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-$o.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?$o.easeInBounce(e*2)*.5:$o.easeOutBounce(e*2-1)*.5+.5};function Mp(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function v0(e){return Mp(e)?e:new fl(e)}function _m(e){return Mp(e)?e:new fl(e).saturate(.5).darken(.1).hexString()}const E4=["x","y","borderWidth","radius","tension"],M4=["color","borderColor","backgroundColor"];function T4(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:M4},numbers:{type:"number",properties:E4}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function O4(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const y0=new Map;function F4(e,t){t=t||{};const n=e+JSON.stringify(t);let r=y0.get(n);return r||(r=new Intl.NumberFormat(e,t),y0.set(n,r)),r}function NN(e,t,n){return F4(t,n).format(e)}const A4={values(e){return Jt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const r=this.chart.options.locale;let s,i=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=L4(e,n)}const o=xN(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),NN(e,r,c)}};function L4(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var jN={formatters:A4};function R4(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:jN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Oa=Object.create(null),Zf=Object.create(null);function zo(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];e=e[i]||(e[i]=Object.create(null))}return e}function Sm(e,t,n){return typeof t=="string"?hl(zo(e,t),n):hl(zo(e,""),t)}class I4{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>_m(s.backgroundColor),this.hoverBorderColor=(r,s)=>_m(s.borderColor),this.hoverColor=(r,s)=>_m(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Sm(this,t,n)}get(t){return zo(this,t)}describe(t,n){return Sm(Zf,t,n)}override(t,n){return Sm(Oa,t,n)}route(t,n,r,s){const i=zo(this,t),o=zo(this,r),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=o[s];return dt(c)?Object.assign({},u,c):ot(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var zt=new I4({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[T4,O4,R4]);function $4(e){return!e||Nt(e.size)||Nt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function b0(e,t,n,r,s){let i=t[s];return i||(i=t[s]=e.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Zs(e,t,n){const r=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function w0(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function eh(e,t,n,r){_N(e,t,n,r,null)}function _N(e,t,n,r,s){let i,o,l,c,u,m,h,f;const b=t.pointStyle,v=t.rotation,D=t.radius;let g=(v||0)*f4;if(b&&typeof b=="object"&&(i=b.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,r),e.rotate(g),e.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),e.restore();return}if(!(isNaN(D)||D<=0)){switch(e.beginPath(),b){default:s?e.ellipse(n,r,s/2,D,0,0,Br):e.arc(n,r,D,0,Br),e.closePath();break;case"triangle":m=s?s/2:D,e.moveTo(n+Math.sin(g)*m,r-Math.cos(g)*D),g+=m0,e.lineTo(n+Math.sin(g)*m,r-Math.cos(g)*D),g+=m0,e.lineTo(n+Math.sin(g)*m,r-Math.cos(g)*D),e.closePath();break;case"rectRounded":u=D*.516,c=D-u,o=Math.cos(g+Xs)*c,h=Math.cos(g+Xs)*(s?s/2-u:c),l=Math.sin(g+Xs)*c,f=Math.sin(g+Xs)*(s?s/2-u:c),e.arc(n-h,r-l,u,g-Zt,g-vr),e.arc(n+f,r-o,u,g-vr,g),e.arc(n+h,r+l,u,g,g+vr),e.arc(n-f,r+o,u,g+vr,g+Zt),e.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*D,m=s?s/2:c,e.rect(n-m,r-c,2*m,2*c);break}g+=Xs;case"rectRot":h=Math.cos(g)*(s?s/2:D),o=Math.cos(g)*D,l=Math.sin(g)*D,f=Math.sin(g)*(s?s/2:D),e.moveTo(n-h,r-l),e.lineTo(n+f,r-o),e.lineTo(n+h,r+l),e.lineTo(n-f,r+o),e.closePath();break;case"crossRot":g+=Xs;case"cross":h=Math.cos(g)*(s?s/2:D),o=Math.cos(g)*D,l=Math.sin(g)*D,f=Math.sin(g)*(s?s/2:D),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o);break;case"star":h=Math.cos(g)*(s?s/2:D),o=Math.cos(g)*D,l=Math.sin(g)*D,f=Math.sin(g)*(s?s/2:D),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o),g+=Xs,h=Math.cos(g)*(s?s/2:D),o=Math.cos(g)*D,l=Math.sin(g)*D,f=Math.sin(g)*(s?s/2:D),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o);break;case"line":o=s?s/2:Math.cos(g)*D,l=Math.sin(g)*D,e.moveTo(n-o,r-l),e.lineTo(n+o,r+l);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(s?s/2:D),r+Math.sin(g)*D);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function gl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Tp(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Op(e){e.restore()}function z4(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else s==="after"!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function H4(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function B4(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Nt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function V4(e,t,n,r,s){if(s.strikethrough||s.underline){const i=e.measureText(r),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,m=s.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,m),e.lineTo(l,m),e.stroke()}}function U4(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function xl(e,t,n,r,s,i={}){const o=Jt(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(e.save(),e.font=s.string,B4(e,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&U4(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Nt(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,n,r,i.maxWidth)),e.fillText(u,n,r,i.maxWidth),V4(e,n,r,u,i),r+=Number(s.lineHeight);e.restore()}function th(e,t){const{x:n,y:r,w:s,h:i,radius:o}=t;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Zt,Zt,!0),e.lineTo(n,r+i-o.bottomLeft),e.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Zt,vr,!0),e.lineTo(n+s-o.bottomRight,r+i),e.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,vr,0,!0),e.lineTo(n+s,r+o.topRight),e.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-vr,!0),e.lineTo(n+o.topLeft,r)}const W4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Y4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function q4(e,t){const n=(""+e).match(W4);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const K4=e=>+e||0;function SN(e,t){const n={},r=dt(t),s=r?Object.keys(t):t,i=dt(e)?r?o=>ot(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of s)n[o]=K4(i(o));return n}function Q4(e){return SN(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Ho(e){return SN(e,["topLeft","topRight","bottomLeft","bottomRight"])}function mr(e){const t=Q4(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function fn(e,t){e=e||{},t=t||zt.font;let n=ot(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let r=ot(e.style,t.style);r&&!(""+r).match(Y4)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ot(e.family,t.family),lineHeight:q4(ot(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:ot(e.weight,t.weight),string:""};return s.string=$4(s),s}function dc(e,t,n,r){let s,i,o;for(s=0,i=e.length;s<i;++s)if(o=e[s],o!==void 0&&o!==void 0)return o}function G4(e,t,n){const{min:r,max:s}=e,i=i4(t,(s-r)/2),o=(l,c)=>n&&l===0?0:l+c;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function $a(e,t){return Object.assign(Object.create(e),t)}function Fp(e,t=[""],n,r,s=()=>e[0]){const i=n||e;typeof r>"u"&&(r=PN("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:r,_getTarget:s,override:l=>Fp([l,...e],t,i,r)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return DN(l,c,()=>sO(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return j0(l).includes(c)},ownKeys(l){return j0(l)},set(l,c,u){const m=l._storage||(l._storage=s());return l[c]=m[c]=u,delete l._keys,!0}})}function Ai(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:kN(e,r),setContext:i=>Ai(e,i,n,r),override:i=>Ai(e.override(i),t,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return DN(i,o,()=>X4(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function kN(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Ys(n)?n:()=>n,isIndexable:Ys(r)?r:()=>r}}const J4=(e,t)=>e?e+Cp(t):t,Ap=(e,t)=>dt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function DN(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const r=n();return e[t]=r,r}function X4(e,t,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=e;let l=r[t];return Ys(l)&&o.isScriptable(t)&&(l=Z4(t,l,e,n)),Jt(l)&&l.length&&(l=eO(t,l,e,o.isIndexable)),Ap(t,l)&&(l=Ai(l,s,i&&i[t],o)),l}function Z4(e,t,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||r);return l.delete(e),Ap(e,c)&&(c=Lp(s._scopes,s,e,c)),c}function eO(e,t,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:l}=n;if(typeof i.index<"u"&&r(e))return t[i.index%t.length];if(dt(t[0])){const c=t,u=s._scopes.filter(m=>m!==c);t=[];for(const m of c){const h=Lp(u,s,e,m);t.push(Ai(h,i,o&&o[e],l))}}return t}function CN(e,t,n){return Ys(e)?e(t,n):e}const tO=(e,t)=>e===!0?t:typeof e=="string"?zu(t,e):void 0;function nO(e,t,n,r,s){for(const i of t){const o=tO(n,i);if(o){e.add(o);const l=CN(o._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Lp(e,t,n,r){const s=t._rootScopes,i=CN(t._fallback,n,r),o=[...e,...s],l=new Set;l.add(r);let c=N0(l,o,n,i||n,r);return c===null||typeof i<"u"&&i!==n&&(c=N0(l,o,i,c,r),c===null)?!1:Fp(Array.from(l),[""],s,i,()=>rO(t,n,r))}function N0(e,t,n,r,s){for(;n;)n=nO(e,t,n,r,s);return n}function rO(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];return Jt(s)&&dt(n)?n:s||{}}function sO(e,t,n,r){let s;for(const i of t)if(s=PN(J4(i,e),n),typeof s<"u")return Ap(e,s)?Lp(n,r,e,s):s}function PN(e,t){for(const n of t){if(!n)continue;const r=n[e];if(typeof r<"u")return r}}function j0(e){let t=e._keys;return t||(t=e._keys=aO(e._scopes)),t}function aO(e){const t=new Set;for(const n of e)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(r);return Array.from(t)}const iO=Number.EPSILON||1e-14,Li=(e,t)=>t<e.length&&!e[t].skip&&e[t],EN=e=>e==="x"?"y":"x";function oO(e,t,n,r){const s=e.skip?t:e,i=t,o=n.skip?t:n,l=Xf(i,s),c=Xf(o,i);let u=l/(l+c),m=c/(l+c);u=isNaN(u)?0:u,m=isNaN(m)?0:m;const h=r*u,f=r*m;return{previous:{x:i.x-h*(o.x-s.x),y:i.y-h*(o.y-s.y)},next:{x:i.x+f*(o.x-s.x),y:i.y+f*(o.y-s.y)}}}function lO(e,t,n){const r=e.length;let s,i,o,l,c,u=Li(e,0);for(let m=0;m<r-1;++m)if(c=u,u=Li(e,m+1),!(!c||!u)){if(Io(t[m],0,iO)){n[m]=n[m+1]=0;continue}s=n[m]/t[m],i=n[m+1]/t[m],l=Math.pow(s,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),n[m]=s*o*t[m],n[m+1]=i*o*t[m])}}function cO(e,t,n="x"){const r=EN(n),s=e.length;let i,o,l,c=Li(e,0);for(let u=0;u<s;++u){if(o=l,l=c,c=Li(e,u+1),!l)continue;const m=l[n],h=l[r];o&&(i=(m-o[n])/3,l[`cp1${n}`]=m-i,l[`cp1${r}`]=h-i*t[u]),c&&(i=(c[n]-m)/3,l[`cp2${n}`]=m+i,l[`cp2${r}`]=h+i*t[u])}}function uO(e,t="x"){const n=EN(t),r=e.length,s=Array(r).fill(0),i=Array(r);let o,l,c,u=Li(e,0);for(o=0;o<r;++o)if(l=c,c=u,u=Li(e,o+1),!!c){if(u){const m=u[t]-c[t];s[o]=m!==0?(u[n]-c[n])/m:0}i[o]=l?u?Fi(s[o-1])!==Fi(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}lO(e,s,i),cO(e,i,t)}function mc(e,t,n){return Math.max(Math.min(e,n),t)}function dO(e,t){let n,r,s,i,o,l=gl(e[0],t);for(n=0,r=e.length;n<r;++n)o=i,i=l,l=n<r-1&&gl(e[n+1],t),i&&(s=e[n],o&&(s.cp1x=mc(s.cp1x,t.left,t.right),s.cp1y=mc(s.cp1y,t.top,t.bottom)),l&&(s.cp2x=mc(s.cp2x,t.left,t.right),s.cp2y=mc(s.cp2y,t.top,t.bottom)))}function mO(e,t,n,r,s){let i,o,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")uO(e,s);else{let u=r?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=oO(u,l,e[Math.min(i+1,o-(r?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&dO(e,n)}function Rp(){return typeof window<"u"&&typeof document<"u"}function Ip(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Vu(e,t,n){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}const Od=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function fO(e,t){return Od(e).getPropertyValue(t)}const hO=["top","right","bottom","left"];function ja(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=hO[s];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const pO=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function gO(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:i}=r;let o=!1,l,c;if(pO(s,i,e.target))l=s,c=i;else{const u=t.getBoundingClientRect();l=r.clientX-u.left,c=r.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function sa(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=Od(n),i=s.boxSizing==="border-box",o=ja(s,"padding"),l=ja(s,"border","width"),{x:c,y:u,box:m}=gO(e,n),h=o.left+(m&&l.left),f=o.top+(m&&l.top);let{width:b,height:v}=t;return i&&(b-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-h)/b*n.width/r),y:Math.round((u-f)/v*n.height/r)}}function xO(e,t,n){let r,s;if(t===void 0||n===void 0){const i=e&&Ip(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const o=i.getBoundingClientRect(),l=Od(i),c=ja(l,"border","width"),u=ja(l,"padding");t=o.width-u.width-c.width,n=o.height-u.height-c.height,r=Vu(l.maxWidth,i,"clientWidth"),s=Vu(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:r||Bu,maxHeight:s||Bu}}const fc=e=>Math.round(e*10)/10;function vO(e,t,n,r){const s=Od(e),i=ja(s,"margin"),o=Vu(s.maxWidth,e,"clientWidth")||Bu,l=Vu(s.maxHeight,e,"clientHeight")||Bu,c=xO(e,t,n);let{width:u,height:m}=c;if(s.boxSizing==="content-box"){const f=ja(s,"border","width"),b=ja(s,"padding");u-=b.width+f.width,m-=b.height+f.height}return u=Math.max(0,u-i.width),m=Math.max(0,r?u/r:m-i.height),u=fc(Math.min(u,o,c.maxWidth)),m=fc(Math.min(m,l,c.maxHeight)),u&&!m&&(m=fc(u/2)),(t!==void 0||n!==void 0)&&r&&c.height&&m>c.height&&(m=c.height,u=fc(Math.floor(m*r))),{width:u,height:m}}function _0(e,t,n){const r=t||1,s=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(e.currentDevicePixelRatio=r,o.height=s,o.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}const yO=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Rp()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function S0(e,t){const n=fO(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function aa(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function bO(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:r==="middle"?n<.5?e.y:t.y:r==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function wO(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=aa(e,s,n),l=aa(s,i,n),c=aa(i,t,n),u=aa(o,l,n),m=aa(l,c,n);return aa(u,m,n)}const NO=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},jO=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function xi(e,t,n){return e?NO(t,n):jO()}function MN(e,t){let n,r;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function TN(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function ON(e){return e==="angle"?{between:vN,compare:b4,normalize:ys}:{between:No,compare:(t,n)=>t-n,normalize:t=>t}}function k0({start:e,end:t,count:n,loop:r,style:s}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n===0,style:s}}function _O(e,t,n){const{property:r,start:s,end:i}=n,{between:o,normalize:l}=ON(r),c=t.length;let{start:u,end:m,loop:h}=e,f,b;if(h){for(u+=c,m+=c,f=0,b=c;f<b&&o(l(t[u%c][r]),s,i);++f)u--,m--;u%=c,m%=c}return m<u&&(m+=c),{start:u,end:m,loop:h,style:e.style}}function SO(e,t,n){if(!n)return[e];const{property:r,start:s,end:i}=n,o=t.length,{compare:l,between:c,normalize:u}=ON(r),{start:m,end:h,loop:f,style:b}=_O(e,t,n),v=[];let D=!1,g=null,w,y,_;const j=()=>c(s,_,w)&&l(s,_)!==0,L=()=>l(i,w)===0||c(i,_,w),C=()=>D||j(),T=()=>!D||L();for(let P=m,q=m;P<=h;++P)y=t[P%o],!y.skip&&(w=u(y[r]),w!==_&&(D=c(w,s,i),g===null&&C()&&(g=l(w,s)===0?P:q),g!==null&&T()&&(v.push(k0({start:g,end:P,loop:f,count:o,style:b})),g=null),q=P,_=w));return g!==null&&v.push(k0({start:g,end:h,loop:f,count:o,style:b})),v}function kO(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const i=SO(r[s],e.points,t);i.length&&n.push(...i)}return n}function DO(e,t,n,r){let s=0,i=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(i+=s);i>s&&e[i%t].skip;)i--;return i%=t,{start:s,end:i}}function CO(e,t,n,r){const s=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=n;++c){const u=e[c%s];u.skip||u.stop?l.skip||(r=!1,i.push({start:t%s,end:(c-1)%s,loop:r}),t=o=u.stop?c:null):(o=c,l.skip&&(t=c)),l=u}return o!==null&&i.push({start:t%s,end:o%s,loop:r}),i}function PO(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const i=!!e._loop,{start:o,end:l}=DO(n,s,i,r);if(r===!0)return D0(e,[{start:o,end:l,loop:i}],n,t);const c=l<o?l+s:l,u=!!e._fullLoop&&o===0&&l===s-1;return D0(e,CO(n,o,c,u),n,t)}function D0(e,t,n,r){return!r||!r.setContext||!n?t:EO(e,t,n,r)}function EO(e,t,n,r){const s=e._chart.getContext(),i=C0(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=n.length,u=[];let m=i,h=t[0].start,f=h;function b(v,D,g,w){const y=l?-1:1;if(v!==D){for(v+=c;n[v%c].skip;)v-=y;for(;n[D%c].skip;)D+=y;v%c!==D%c&&(u.push({start:v%c,end:D%c,loop:g,style:w}),m=w,h=D%c)}}for(const v of t){h=l?h:v.start;let D=n[h%c],g;for(f=h+1;f<=v.end;f++){const w=n[f%c];g=C0(r.setContext($a(s,{type:"segment",p0:D,p1:w,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),MO(g,m)&&b(h,f-1,v.loop,m),D=w,m=g}h<f-1&&b(h,f-1,v.loop,m)}return u}function C0(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function MO(e,t){if(!t)return!1;const n=[],r=function(s,i){return Mp(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function hc(e,t,n){return e.options.clip?e[n]:t[n]}function TO(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:hc(n,t,"left"),right:hc(n,t,"right"),top:hc(r,t,"top"),bottom:hc(r,t,"bottom")}:t}function OO(e,t){const n=t._clip;if(n.disabled)return!1;const r=TO(t,e.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class FO{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=bN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(s.draw(),this._notify(s,r,t,"progress")),i.length||(r.running=!1,this._notify(s,r,t,"complete"),r.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let r=n.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,r)),r}listen(t,n,r){this._getAnims(t).listeners[n].push(r)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var qr=new FO;const P0="transparent",AO={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=v0(e||P0),s=r.valid&&v0(t||P0);return s&&s.valid?s.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class LO{constructor(t,n,r,s){const i=n[r];s=dc([t.to,s,i,t.from]);const o=dc([t.from,i,s]);this._active=!0,this._fn=t.fn||AO[t.type||typeof o],this._easing=$o[t.easing]||$o.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=dc([t.to,n,s,t.from]),this._from=dc([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||n<r),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=i;return}c=n/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,r)=>{t.push({res:n,rej:r})})}_notify(t){const n=t?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class FN{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!dt(t))return;const n=Object.keys(zt.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const i=t[s];if(!dt(i))return;const o={};for(const l of n)o[l]=i[l];(Jt(i.properties)&&i.properties||[s]).forEach(l=>{(l===s||!r.has(l))&&r.set(l,o)})})}_animateOptions(t,n){const r=n.options,s=IO(t,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&RO(t.options.$animations,r).then(()=>{t.options=r},()=>{}),i}_createAnimations(t,n){const r=this._properties,s=[],i=t.$animations||(t.$animations={}),o=Object.keys(n),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(t,n));continue}const m=n[u];let h=i[u];const f=r.get(u);if(h)if(f&&h.active()){h.update(f,m,l);continue}else h.cancel();if(!f||!f.duration){t[u]=m;continue}i[u]=h=new LO(f,t,u,m),s.push(h)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const r=this._createAnimations(t,n);if(r.length)return qr.add(this._chart,r),!0}}function RO(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const i=e[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function IO(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function E0(e,t){const n=e&&e.options||{},r=n.reverse,s=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:r?i:s,end:r?s:i}}function $O(e,t,n){if(n===!1)return!1;const r=E0(e,n),s=E0(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function zO(e){let t,n,r,s;return dt(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:e===!1}}function AN(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function M0(e,t,n,r={}){const s=e.keys,i=r.mode==="single";let o,l,c,u;if(t===null)return;let m=!1;for(o=0,l=s.length;o<l;++o){if(c=+s[o],c===n){if(m=!0,r.all)continue;break}u=e.values[c],dr(u)&&(i||t===0||Fi(t)===Fi(u))&&(t+=u)}return!m&&!r.all?0:t}function HO(e,t){const{iScale:n,vScale:r}=t,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,u,m;for(c=0,u=o.length;c<u;++c)m=o[c],l[c]={[s]:m,[i]:e[m]};return l}function km(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function BO(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function VO(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function UO(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function T0(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const i=e[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function O0(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:l}=r,c=i.axis,u=o.axis,m=BO(i,o,r),h=t.length;let f;for(let b=0;b<h;++b){const v=t[b],{[c]:D,[u]:g}=v,w=v._stacks||(v._stacks={});f=w[u]=UO(s,m,D),f[l]=g,f._top=T0(f,o,!0,r.type),f._bottom=T0(f,o,!1,r.type);const y=f._visualValues||(f._visualValues={});y[l]=g}}function Dm(e,t){const n=e.scales;return Object.keys(n).filter(r=>n[r].axis===t).shift()}function WO(e,t){return $a(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function YO(e,t,n){return $a(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function io(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const s of t){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Cm=e=>e==="reset"||e==="none",F0=(e,t)=>t?e:Object.assign({},e),qO=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:AN(n,!0),values:null};class Bo{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=km(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&io(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,f,b,v)=>h==="x"?f:h==="r"?v:b,i=n.xAxisID=ot(r.xAxisID,Dm(t,"x")),o=n.yAxisID=ot(r.yAxisID,Dm(t,"y")),l=n.rAxisID=ot(r.rAxisID,Dm(t,"r")),c=n.indexAxis,u=n.iAxisID=s(c,i,o,l),m=n.vAxisID=s(c,o,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&p0(this._data,this),t._stacked&&io(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(dt(n)){const s=this._cachedMeta;this._data=HO(n,s)}else if(r!==n){if(r){p0(r,this);const s=this._cachedMeta;io(s),s._parsed=[]}n&&Object.isExtensible(n)&&_4(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=km(n.vScale,n),n.stack!==r.stack&&(s=!0,io(n),n.stack=r.stack),this._resyncElements(t),(s||i!==n._stacked)&&(O0(this,n._parsed),n._stacked=km(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,l=i.axis;let c=t===0&&n===s.length?!0:r._sorted,u=t>0&&r._parsed[t-1],m,h,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{Jt(s[t])?f=this.parseArrayData(r,s,t,n):dt(s[t])?f=this.parseObjectData(r,s,t,n):f=this.parsePrimitiveData(r,s,t,n);const b=()=>h[l]===null||u&&h[l]<u[l];for(m=0;m<n;++m)r._parsed[m+t]=h=f[m],c&&(b()&&(c=!1),u=h);r._sorted=c}o&&O0(this,f)}parsePrimitiveData(t,n,r,s){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,u=i.getLabels(),m=i===o,h=new Array(s);let f,b,v;for(f=0,b=s;f<b;++f)v=f+r,h[f]={[l]:m||i.parse(u[v],v),[c]:o.parse(n[v],v)};return h}parseArrayData(t,n,r,s){const{xScale:i,yScale:o}=t,l=new Array(s);let c,u,m,h;for(c=0,u=s;c<u;++c)m=c+r,h=n[m],l[c]={x:i.parse(h[0],m),y:o.parse(h[1],m)};return l}parseObjectData(t,n,r,s){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let m,h,f,b;for(m=0,h=s;m<h;++m)f=m+r,b=n[f],u[m]={x:i.parse(zu(b,l),f),y:o.parse(zu(b,c),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const s=this.chart,i=this._cachedMeta,o=n[t.axis],l={keys:AN(s,!0),values:n._stacks[t.axis]._visualValues};return M0(l,o,i.index,{mode:r})}updateRangeFromParsed(t,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const l=s&&r._stacks[n.axis];s&&l&&(s.values=l,o=M0(s,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&t===r.iScale,o=s.length,l=this._getOtherScale(t),c=qO(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:h}=VO(l);let f,b;function v(){b=s[f];const D=b[l.axis];return!dr(b[t.axis])||m>D||h<D}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(u,t,b,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(u,t,b,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][t.axis],dr(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(t);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=zO(ot(this.options.clip,$O(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let m;for(r.dataset&&r.dataset.draw(t,i,l,c),m=l;m<l+c;++m){const h=s[m];h.hidden||(h.active&&u?o.push(h):h.draw(t,i))}for(m=0;m<o.length;++m)o[m].draw(t,i)}getStyle(t,n){const r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const s=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=YO(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=s.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=WO(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=t+"-"+n,l=i[o],c=this.enableOptionSharing&&Hu(r);if(l)return F0(l,c);const u=this.chart.config,m=u.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),m),b=Object.keys(zt.elements[t]),v=()=>this.getContext(r,s,n),D=u.resolveNamedOptions(f,b,v,h);return D.$shared&&(D.$shared=c,i[o]=Object.freeze(F0(D,c))),D}_resolveAnimations(t,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,l=i[o];if(l)return l;let c;if(s.options.animation!==!1){const m=this.chart.config,h=m.datasetAnimationScopeKeys(this._type,n),f=m.getOptionScopes(this.getDataset(),h);c=m.createResolver(f,this.getContext(t,r,n))}const u=new FN(s,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Cm(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const r=this.resolveDataElementOptions(t,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(t,n,r,s){Cm(s)?Object.assign(t,r):this._resolveAnimations(n,s).update(t,r)}updateSharedOptions(t,n,r){t&&!Cm(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,s){t.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(t,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,t):i<s&&this._removeElements(i,s-i)}_insertElements(t,n,r=!0){const s=this._cachedMeta,i=s.data,o=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=o;l--)u[l]=u[l-n]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,n),r&&this.updateElements(i,t,n,"reset")}updateElements(t,n,r,s){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(t,n);r._stacked&&io(r,s)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,s]=t;this[n](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}_e(Bo,"defaults",{}),_e(Bo,"datasetElementType",null),_e(Bo,"dataElementType",null);class Uc extends Bo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:l,count:c}=C4(n,s,o);this._drawStart=l,this._drawCount=c,P4(n)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},t),this.updateElements(s,l,c,t)}updateElements(t,n,r,s){const i=s==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:m,includeOptions:h}=this._getSharedOptions(n,s),f=o.axis,b=l.axis,{spanGaps:v,segment:D}=this.options,g=pl(v)?v:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||i||s==="none",y=n+r,_=t.length;let j=n>0&&this.getParsed(n-1);for(let L=0;L<_;++L){const C=t[L],T=w?C:{};if(L<n||L>=y){T.skip=!0;continue}const P=this.getParsed(L),q=Nt(P[b]),X=T[f]=o.getPixelForValue(P[f],L),te=T[b]=i||q?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,P,c):P[b],L);T.skip=isNaN(X)||isNaN(te)||q,T.stop=L>0&&Math.abs(P[f]-j[f])>g,D&&(T.parsed=P,T.raw=u.data[L]),h&&(T.options=m||this.resolveDataElementOptions(L,C.active?"active":s)),w||this.updateElement(C,L,T,s),j=P}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}_e(Uc,"id","line"),_e(Uc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),_e(Uc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function ea(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $p{constructor(t){_e(this,"options");this.options=t||{}}static override(t){Object.assign($p.prototype,t)}init(){}formats(){return ea()}parse(){return ea()}format(){return ea()}add(){return ea()}diff(){return ea()}startOf(){return ea()}endOf(){return ea()}}var KO={_date:$p};function QO(e,t,n,r){const{controller:s,data:i,_sorted:o}=e,l=s._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const u=l._reversePixels?N4:pa;if(r){if(s._sharedOptions){const m=i[0],h=typeof m.getRange=="function"&&m.getRange(t);if(h){const f=u(i,t,n-h),b=u(i,t,n+h);return{lo:f.lo,hi:b.hi}}}}else{const m=u(i,t,n);if(c){const{vScale:h}=s._cachedMeta,{_parsed:f}=e,b=f.slice(0,m.lo+1).reverse().findIndex(D=>!Nt(D[h.axis]));m.lo-=Math.max(0,b);const v=f.slice(m.hi).findIndex(D=>!Nt(D[h.axis]));m.hi+=Math.max(0,v)}return m}}return{lo:0,hi:i.length-1}}function Fd(e,t,n,r,s){const i=e.getSortedVisibleDatasetMetas(),o=n[t];for(let l=0,c=i.length;l<c;++l){const{index:u,data:m}=i[l],{lo:h,hi:f}=QO(i[l],t,o,s);for(let b=h;b<=f;++b){const v=m[b];v.skip||r(v,u,b)}}}function GO(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(r,s){const i=t?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Pm(e,t,n,r,s){const i=[];return!s&&!e.isPointInArea(t)||Fd(e,n,t,function(l,c,u){!s&&!gl(l,e.chartArea,0)||l.inRange(t.x,t.y,r)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function JO(e,t,n,r){let s=[];function i(o,l,c){const{startAngle:u,endAngle:m}=o.getProps(["startAngle","endAngle"],r),{angle:h}=y4(o,{x:t.x,y:t.y});vN(h,u,m)&&s.push({element:o,datasetIndex:l,index:c})}return Fd(e,n,t,i),s}function XO(e,t,n,r,s,i){let o=[];const l=GO(n);let c=Number.POSITIVE_INFINITY;function u(m,h,f){const b=m.inRange(t.x,t.y,s);if(r&&!b)return;const v=m.getCenterPoint(s);if(!(!!i||e.isPointInArea(v))&&!b)return;const g=l(t,v);g<c?(o=[{element:m,datasetIndex:h,index:f}],c=g):g===c&&o.push({element:m,datasetIndex:h,index:f})}return Fd(e,n,t,u),o}function Em(e,t,n,r,s,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!r?JO(e,t,n,s):XO(e,t,n,r,s,i)}function A0(e,t,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return Fd(e,n,t,(c,u,m)=>{c[o]&&c[o](t[n],s)&&(i.push({element:c,datasetIndex:u,index:m}),l=l||c.inRange(t.x,t.y,s))}),r&&!l?[]:i}var ZO={modes:{index(e,t,n,r){const s=sa(t,e),i=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?Pm(e,s,i,r,o):Em(e,s,i,!1,r,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const m=l[0].index,h=u.data[m];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:m})}),c):[]},dataset(e,t,n,r){const s=sa(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?Pm(e,s,i,r,o):Em(e,s,i,!1,r,o);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let m=0;m<u.length;++m)l.push({element:u[m],datasetIndex:c,index:m})}return l},point(e,t,n,r){const s=sa(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return Pm(e,s,i,r,o)},nearest(e,t,n,r){const s=sa(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return Em(e,s,i,n.intersect,r,o)},x(e,t,n,r){const s=sa(t,e);return A0(e,s,"x",n.intersect,r)},y(e,t,n,r){const s=sa(t,e);return A0(e,s,"y",n.intersect,r)}}};const LN=["left","top","right","bottom"];function oo(e,t){return e.filter(n=>n.pos===t)}function L0(e,t){return e.filter(n=>LN.indexOf(n.pos)===-1&&n.box.axis===t)}function lo(e,t){return e.sort((n,r)=>{const s=t?r:n,i=t?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function eF(e){const t=[];let n,r,s,i,o,l;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],{position:i,options:{stack:o,stackWeight:l=1}}=s,t.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:l});return t}function tF(e){const t={};for(const n of e){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!LN.includes(s))continue;const o=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function nF(e,t){const n=tF(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,u=n[l.stack],m=u&&l.stackWeight/u.weight;l.horizontal?(l.width=m?m*r:c&&t.availableWidth,l.height=s):(l.width=r,l.height=m?m*s:c&&t.availableHeight)}return n}function rF(e){const t=eF(e),n=lo(t.filter(u=>u.box.fullSize),!0),r=lo(oo(t,"left"),!0),s=lo(oo(t,"right")),i=lo(oo(t,"top"),!0),o=lo(oo(t,"bottom")),l=L0(t,"x"),c=L0(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(c).concat(o).concat(l),chartArea:oo(t,"chartArea"),vertical:r.concat(s).concat(c),horizontal:i.concat(o).concat(l)}}function R0(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function RN(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function sF(e,t,n,r){const{pos:s,box:i}=n,o=e.maxPadding;if(!dt(s)){n.size&&(e[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[s]+=n.size}i.getPadding&&RN(o,i.getPadding());const l=Math.max(0,t.outerWidth-R0(o,e,"left","right")),c=Math.max(0,t.outerHeight-R0(o,e,"top","bottom")),u=l!==e.w,m=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:m}:{same:m,other:u}}function aF(e){const t=e.maxPadding;function n(r){const s=Math.max(t[r]-e[r],0);return e[r]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function iF(e,t){const n=t.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(t[o],n[o])}),i}return r(e?["left","right"]:["top","bottom"])}function jo(e,t,n,r){const s=[];let i,o,l,c,u,m;for(i=0,o=e.length,u=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,iF(l.horizontal,t));const{same:h,other:f}=sF(t,n,l,r);u|=h&&s.length,m=m||f,c.fullSize||s.push(l)}return u&&jo(s,t,n,r)||m}function pc(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function I0(e,t,n,r){const s=n.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,u=r[l.stack]||{placed:0,weight:1},m=l.stackWeight/u.weight||1;if(l.horizontal){const h=t.w*m,f=u.size||c.height;Hu(u.start)&&(o=u.start),c.fullSize?pc(c,s.left,o,n.outerWidth-s.right-s.left,f):pc(c,t.left+u.placed,o,h,f),u.start=o,u.placed+=h,o=c.bottom}else{const h=t.h*m,f=u.size||c.width;Hu(u.start)&&(i=u.start),c.fullSize?pc(c,i,s.top,f,n.outerHeight-s.bottom-s.top):pc(c,i,t.top+u.placed,f,h),u.start=i,u.placed+=h,i=c.right}}t.x=i,t.y=o}var ir={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=mr(e.options.layout.padding),i=Math.max(t-s.width,0),o=Math.max(n-s.height,0),l=rF(e.boxes),c=l.vertical,u=l.horizontal;xt(e.boxes,D=>{typeof D.beforeLayout=="function"&&D.beforeLayout()});const m=c.reduce((D,g)=>g.box.options&&g.box.options.display===!1?D:D+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/m,hBoxMaxHeight:o/2}),f=Object.assign({},s);RN(f,mr(r));const b=Object.assign({maxPadding:f,w:i,h:o,x:s.left,y:s.top},s),v=nF(c.concat(u),h);jo(l.fullSize,b,h,v),jo(c,b,h,v),jo(u,b,h,v)&&jo(c,b,h,v),aF(b),I0(l.leftAndTop,b,h,v),b.x+=b.w,b.y+=b.h,I0(l.rightAndBottom,b,h,v),e.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},xt(l.chartArea,D=>{const g=D.box;Object.assign(g,e.chartArea),g.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class IN{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,r){}removeEventListener(t,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,r,s){return n=Math.max(0,n||t.width),r=r||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(t){return!0}updateConfig(t){}}class oF extends IN{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Wc="$chartjs",lF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},$0=e=>e===null||e==="";function cF(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[Wc]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",$0(s)){const i=S0(e,"width");i!==void 0&&(e.width=i)}if($0(r))if(e.style.height==="")e.height=e.width/(t||2);else{const i=S0(e,"height");i!==void 0&&(e.height=i)}return e}const $N=yO?{passive:!0}:!1;function uF(e,t,n){e&&e.addEventListener(t,n,$N)}function dF(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,$N)}function mF(e,t){const n=lF[e.type]||e.type,{x:r,y:s}=sa(e,t);return{type:n,chart:t,native:e,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Uu(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function fF(e,t,n){const r=e.canvas,s=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Uu(l.addedNodes,r),o=o&&!Uu(l.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function hF(e,t,n){const r=e.canvas,s=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Uu(l.removedNodes,r),o=o&&!Uu(l.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const vl=new Map;let z0=0;function zN(){const e=window.devicePixelRatio;e!==z0&&(z0=e,vl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function pF(e,t){vl.size||window.addEventListener("resize",zN),vl.set(e,t)}function gF(e){vl.delete(e),vl.size||window.removeEventListener("resize",zN)}function xF(e,t,n){const r=e.canvas,s=r&&Ip(r);if(!s)return;const i=wN((l,c)=>{const u=s.clientWidth;n(l,c),u<s.clientWidth&&n()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,m=c.contentRect.height;u===0&&m===0||i(u,m)});return o.observe(s),pF(e,i),o}function Mm(e,t,n){n&&n.disconnect(),t==="resize"&&gF(e)}function vF(e,t,n){const r=e.canvas,s=wN(i=>{e.ctx!==null&&n(mF(i,e))},e);return uF(r,t,s),s}class yF extends IN{acquireContext(t,n){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(cF(t,n),r):null}releaseContext(t){const n=t.canvas;if(!n[Wc])return!1;const r=n[Wc].initial;["height","width"].forEach(i=>{const o=r[i];Nt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Wc],!0}addEventListener(t,n,r){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),o={attach:fF,detach:hF,resize:xF}[n]||vF;s[n]=o(t,n,r)}removeEventListener(t,n){const r=t.$proxies||(t.$proxies={}),s=r[n];if(!s)return;({attach:Mm,detach:Mm,resize:Mm}[n]||dF)(t,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,r,s){return vO(t,n,r,s)}isAttached(t){const n=t&&Ip(t);return!!(n&&n.isConnected)}}function bF(e){return!Rp()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?oF:yF}var Nc;let za=(Nc=class{constructor(){_e(this,"x");_e(this,"y");_e(this,"active",!1);_e(this,"options");_e(this,"$animations")}tooltipPosition(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}hasValue(){return pl(this.x)&&pl(this.y)}getProps(t,n){const r=this.$animations;if(!n||!r)return this;const s={};return t.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},_e(Nc,"defaults",{}),_e(Nc,"defaultRoutes"),Nc);function wF(e,t){const n=e.options.ticks,r=NF(e),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?_F(t):[],o=i.length,l=i[0],c=i[o-1],u=[];if(o>s)return SF(t,u,i,o/s),u;const m=jF(i,t,s);if(o>0){let h,f;const b=o>1?Math.round((c-l)/(o-1)):null;for(gc(t,u,m,Nt(b)?0:l-b,l),h=0,f=o-1;h<f;h++)gc(t,u,m,i[h],i[h+1]);return gc(t,u,m,c,Nt(b)?t.length:c+b),u}return gc(t,u,m),u}function NF(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}function jF(e,t,n){const r=kF(e),s=t.length/n;if(!r)return Math.max(s,1);const i=h4(r);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>s)return c}return Math.max(s,1)}function _F(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function SF(e,t,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<e.length;o++)o===i&&(t.push(e[o]),s++,i=n[s*r])}function gc(e,t,n,r,s){const i=ot(r,0),o=Math.min(ot(s,e.length),e.length);let l=0,c,u,m;for(n=Math.ceil(n),s&&(c=s-r,n=c/Math.floor(c/n)),m=i;m<0;)l++,m=Math.round(i+l*n);for(u=Math.max(i,0);u<o;u++)u===m&&(t.push(e[u]),l++,m=Math.round(i+l*n))}function kF(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}const DF=e=>e==="left"?"right":e==="right"?"left":e,H0=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,B0=(e,t)=>Math.min(t||e,e);function V0(e,t){const n=[],r=e.length/t,s=e.length;let i=0;for(;i<s;i+=r)n.push(e[Math.floor(i)]);return n}function CF(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(c-i,o-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(s-1))/2,c+=s<t?u:-u,c<i-l||c>o+l)))return c}function PF(e,t){xt(e,n=>{const r=n.gc,s=r.length/2;let i;if(s>t){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function co(e){return e.drawTicks?e.tickLength:0}function U0(e,t){if(!e.display)return 0;const n=fn(e.font,t),r=mr(e.padding);return(Jt(e.text)?e.text.length:1)*n.lineHeight+r.height}function EF(e,t){return $a(e,{scale:t,type:"scale"})}function MF(e,t,n){return $a(e,{tick:n,index:t,type:"tick"})}function TF(e,t,n){let r=Ep(e);return(n&&t!=="right"||!n&&t==="right")&&(r=DF(r)),r}function OF(e,t,n,r){const{top:s,left:i,bottom:o,right:l,chart:c}=e,{chartArea:u,scales:m}=c;let h=0,f,b,v;const D=o-s,g=l-i;if(e.isHorizontal()){if(b=cn(r,i,l),dt(n)){const w=Object.keys(n)[0],y=n[w];v=m[w].getPixelForValue(y)+D-t}else n==="center"?v=(u.bottom+u.top)/2+D-t:v=H0(e,n,t);f=l-i}else{if(dt(n)){const w=Object.keys(n)[0],y=n[w];b=m[w].getPixelForValue(y)-g+t}else n==="center"?b=(u.left+u.right)/2-g+t:b=H0(e,n,t);v=cn(r,o,s),h=n==="left"?-vr:vr}return{titleX:b,titleY:v,maxWidth:f,rotation:h}}class Yi extends za{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return t=Dr(t,Number.POSITIVE_INFINITY),n=Dr(n,Number.NEGATIVE_INFINITY),r=Dr(r,Number.POSITIVE_INFINITY),s=Dr(s,Number.NEGATIVE_INFINITY),{min:Dr(t,r),max:Dr(n,s),minDefined:dr(t),maxDefined:dr(n)}}getMinMax(t){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,t),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Dr(n,Dr(r,n)),max:Dr(r,Dr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_t(this.options.beforeUpdate,[this])}update(t,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=G4(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?V0(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=wF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,t=!t),this._startPixel=n,this._endPixel=r,this._reversePixels=t,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_t(this.options.afterUpdate,[this])}beforeSetDimensions(){_t(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_t(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),_t(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_t(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r],i.label=_t(n.callback,[i.value,r,t],this)}afterTickToLabelConversion(){_t(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_t(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,r=B0(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,l,c,u;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const m=this._getLabelSizes(),h=m.widest.width,f=m.highest.height,b=ar(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/r:b/(r-1),h+6>l&&(l=b/(r-(t.offset?.5:1)),c=this.maxHeight-co(t.grid)-n.padding-U0(t.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),o=v4(Math.min(Math.asin(ar((m.highest.height+6)/l,-1,1)),Math.asin(ar(c/u,-1,1))-Math.asin(ar(f/u,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){_t(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_t(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=U0(s,n.options.font);if(l?(t.width=this.maxWidth,t.height=co(i)+c):(t.height=this.maxHeight,t.width=co(i)+c),r.display&&this.ticks.length){const{first:u,last:m,widest:h,highest:f}=this._getLabelSizes(),b=r.padding*2,v=ha(this.labelRotation),D=Math.cos(v),g=Math.sin(v);if(l){const w=r.mirror?0:g*h.width+D*f.height;t.height=Math.min(this.maxHeight,t.height+w+b)}else{const w=r.mirror?0:D*h.width+g*f.height;t.width=Math.min(this.maxWidth,t.width+w+b)}this._calculatePadding(u,m,g,D)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,r,s){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,b=0;c?u?(f=s*t.width,b=r*n.height):(f=r*t.height,b=s*n.width):i==="start"?b=n.width:i==="end"?f=t.width:i!=="inner"&&(f=t.width/2,b=n.width/2),this.paddingLeft=Math.max((f-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((b-h+o)*this.width/(this.width-h),0)}else{let m=n.height/2,h=t.height/2;i==="start"?(m=0,h=t.height):i==="end"&&(m=n.height,h=0),this.paddingTop=m+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_t(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,r;for(n=0,r=t.length;n<r;n++)Nt(t[n].label)&&(t.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=V0(r,n)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(n/B0(n,r));let u=0,m=0,h,f,b,v,D,g,w,y,_,j,L;for(h=0;h<n;h+=c){if(v=t[h].label,D=this._resolveTickFontOptions(h),s.font=g=D.string,w=i[g]=i[g]||{data:{},gc:[]},y=D.lineHeight,_=j=0,!Nt(v)&&!Jt(v))_=b0(s,w.data,w.gc,_,v),j=y;else if(Jt(v))for(f=0,b=v.length;f<b;++f)L=v[f],!Nt(L)&&!Jt(L)&&(_=b0(s,w.data,w.gc,_,L),j+=y);o.push(_),l.push(j),u=Math.max(_,u),m=Math.max(j,m)}PF(i,n);const C=o.indexOf(u),T=l.indexOf(m),P=q=>({width:o[q]||0,height:l[q]||0});return{first:P(0),last:P(n-1),widest:P(C),highest:P(T),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return w4(this._alignToPixels?Zs(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const r=n[t];return r.$context||(r.$context=MF(this.getContext(),t,r))}return this.$context||(this.$context=EF(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=ha(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*r>l*s?l/r:c/s:c*s<l*r?c/r:l/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:l}=s,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=co(i),b=[],v=l.setContext(this.getContext()),D=v.display?v.width:0,g=D/2,w=function(W){return Zs(r,W,D)};let y,_,j,L,C,T,P,q,X,te,oe,fe;if(o==="top")y=w(this.bottom),T=this.bottom-f,q=y-g,te=w(t.top)+g,fe=t.bottom;else if(o==="bottom")y=w(this.top),te=t.top,fe=w(t.bottom)-g,T=y+g,q=this.top+f;else if(o==="left")y=w(this.right),C=this.right-f,P=y-g,X=w(t.left)+g,oe=t.right;else if(o==="right")y=w(this.left),X=t.left,oe=w(t.right)-g,C=y+g,P=this.left+f;else if(n==="x"){if(o==="center")y=w((t.top+t.bottom)/2+.5);else if(dt(o)){const W=Object.keys(o)[0],$=o[W];y=w(this.chart.scales[W].getPixelForValue($))}te=t.top,fe=t.bottom,T=y+g,q=T+f}else if(n==="y"){if(o==="center")y=w((t.left+t.right)/2);else if(dt(o)){const W=Object.keys(o)[0],$=o[W];y=w(this.chart.scales[W].getPixelForValue($))}C=y-g,P=C-f,X=t.left,oe=t.right}const G=ot(s.ticks.maxTicksLimit,h),se=Math.max(1,Math.ceil(h/G));for(_=0;_<h;_+=se){const W=this.getContext(_),$=i.setContext(W),K=l.setContext(W),ee=$.lineWidth,Q=$.color,ce=K.dash||[],ve=K.dashOffset,U=$.tickWidth,H=$.tickColor,J=$.tickBorderDash||[],S=$.tickBorderDashOffset;j=CF(this,_,c),j!==void 0&&(L=Zs(r,j,ee),u?C=P=X=oe=L:T=q=te=fe=L,b.push({tx1:C,ty1:T,tx2:P,ty2:q,x1:X,y1:te,x2:oe,y2:fe,width:ee,color:Q,borderDash:ce,borderDashOffset:ve,tickWidth:U,tickColor:H,tickBorderDash:J,tickBorderDashOffset:S}))}return this._ticksLength=h,this._borderValue=y,b}_computeLabelItems(t){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:m,mirror:h}=i,f=co(r.grid),b=f+m,v=h?-m:b,D=-ha(this.labelRotation),g=[];let w,y,_,j,L,C,T,P,q,X,te,oe,fe="middle";if(s==="top")C=this.bottom-v,T=this._getXAxisLabelAlignment();else if(s==="bottom")C=this.top+v,T=this._getXAxisLabelAlignment();else if(s==="left"){const se=this._getYAxisLabelAlignment(f);T=se.textAlign,L=se.x}else if(s==="right"){const se=this._getYAxisLabelAlignment(f);T=se.textAlign,L=se.x}else if(n==="x"){if(s==="center")C=(t.top+t.bottom)/2+b;else if(dt(s)){const se=Object.keys(s)[0],W=s[se];C=this.chart.scales[se].getPixelForValue(W)+b}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")L=(t.left+t.right)/2-b;else if(dt(s)){const se=Object.keys(s)[0],W=s[se];L=this.chart.scales[se].getPixelForValue(W)}T=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(c==="start"?fe="top":c==="end"&&(fe="bottom"));const G=this._getLabelSizes();for(w=0,y=l.length;w<y;++w){_=l[w],j=_.label;const se=i.setContext(this.getContext(w));P=this.getPixelForTick(w)+i.labelOffset,q=this._resolveTickFontOptions(w),X=q.lineHeight,te=Jt(j)?j.length:1;const W=te/2,$=se.color,K=se.textStrokeColor,ee=se.textStrokeWidth;let Q=T;o?(L=P,T==="inner"&&(w===y-1?Q=this.options.reverse?"left":"right":w===0?Q=this.options.reverse?"right":"left":Q="center"),s==="top"?u==="near"||D!==0?oe=-te*X+X/2:u==="center"?oe=-G.highest.height/2-W*X+X:oe=-G.highest.height+X/2:u==="near"||D!==0?oe=X/2:u==="center"?oe=G.highest.height/2-W*X:oe=G.highest.height-te*X,h&&(oe*=-1),D!==0&&!se.showLabelBackdrop&&(L+=X/2*Math.sin(D))):(C=P,oe=(1-te)*X/2);let ce;if(se.showLabelBackdrop){const ve=mr(se.backdropPadding),U=G.heights[w],H=G.widths[w];let J=oe-ve.top,S=0-ve.left;switch(fe){case"middle":J-=U/2;break;case"bottom":J-=U;break}switch(T){case"center":S-=H/2;break;case"right":S-=H;break;case"inner":w===y-1?S-=H:w>0&&(S-=H/2);break}ce={left:S,top:J,width:H+ve.width,height:U+ve.height,color:se.backdropColor}}g.push({label:j,font:q,textOffset:oe,options:{rotation:D,color:$,strokeColor:K,strokeWidth:ee,textAlign:Q,textBaseline:fe,translation:[L,C],backdrop:ce}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-ha(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let u,m;return n==="left"?s?(m=this.right+i,r==="near"?u="left":r==="center"?(u="center",m+=c/2):(u="right",m+=c)):(m=this.right-l,r==="near"?u="right":r==="center"?(u="center",m-=c/2):(u="left",m=this.left)):n==="right"?s?(m=this.left+i,r==="near"?u="right":r==="center"?(u="center",m-=c/2):(u="left",m-=c)):(m=this.left+l,r==="near"?u="left":r==="center"?(u="center",m+=c/2):(u="right",m=this.right)):u="right",{textAlign:u,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(r,s,i,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,u,m)=>{!m.width||!m.color||(r.save(),r.lineWidth=m.width,r.strokeStyle=m.color,r.setLineDash(m.borderDash||[]),r.lineDashOffset=m.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const c=s[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,m,h,f;this.isHorizontal()?(u=Zs(t,this.left,o)-o/2,m=Zs(t,this.right,l)+l/2,h=f=c):(h=Zs(t,this.top,o)-o/2,f=Zs(t,this.bottom,l)+l/2,u=m=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(m,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Tp(r,s);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,u=o.label,m=o.textOffset;xl(r,u,0,m,c,l)}s&&Op(r)}drawTitle(){const{ctx:t,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=fn(r.font),o=mr(r.padding),l=r.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||dt(n)?(c+=o.bottom,Jt(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:u,titleY:m,maxWidth:h,rotation:f}=OF(this,c,n,l);xl(t,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:f,textAlign:TF(l,n,s),textBaseline:"middle",translation:[u,m]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,r=ot(t.grid&&t.grid.z,-1),s=ot(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Yi.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const l=n[i];l[r]===this.id&&(!t||l.type===t)&&s.push(l)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return fn(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class xc{constructor(t,n,r){this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let r;LF(n)&&(r=this.register(n));const s=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in s||(s[i]=t,FF(t,o,r),this.override&&zt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,r=t.id,s=this.scope;r in n&&delete n[r],s&&r in zt[s]&&(delete zt[s][r],this.override&&delete Oa[r])}}function FF(e,t,n){const r=hl(Object.create(null),[n?zt.get(n):{},zt.get(t),e.defaults]);zt.set(t,r),e.defaultRoutes&&AF(t,e.defaultRoutes),e.descriptors&&zt.describe(t,e.descriptors)}function AF(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),i=[e].concat(r).join("."),o=t[n].split("."),l=o.pop(),c=o.join(".");zt.route(i,s,c,l)})}function LF(e){return"id"in e&&"defaults"in e}class RF{constructor(){this.controllers=new xc(Bo,"datasets",!0),this.elements=new xc(za,"elements"),this.plugins=new xc(Object,"plugins"),this.scales=new xc(Yi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(t,i,s):xt(s,o=>{const l=r||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,n,r){const s=Cp(t);_t(r["before"+s],[],r),n[t](r),_t(r["after"+s],[],r)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(t))return r}return this.plugins}_get(t,n,r){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return s}}var Er=new RF;class IF{constructor(){this._init=[]}notify(t,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(i,t,n,r);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,r,s){s=s||{};for(const i of t){const o=i.plugin,l=o[r],c=[n,s,i.options];if(_t(l,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Nt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const r=t&&t.config,s=ot(r.options&&r.options.plugins,{}),i=$F(r);return s===!1&&!n?[]:HF(t,i,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(s(n,r),t,"stop"),this._notify(s(r,n),t,"start")}}function $F(e){const t={},n=[],r=Object.keys(Er.plugins.items);for(let i=0;i<r.length;i++)n.push(Er.getPlugin(r[i]));const s=e.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function zF(e,t){return!t&&e===!1?null:e===!0?{}:e}function HF(e,{plugins:t,localIds:n},r,s){const i=[],o=e.getContext();for(const l of t){const c=l.id,u=zF(r[c],s);u!==null&&i.push({plugin:l,options:BF(e.config,{plugin:l,local:n[c]},u,o)})}return i}function BF(e,{plugin:t,local:n},r,s){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(r,i);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function nh(e,t){const n=zt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function VF(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function UF(e,t){return e===t?"_index_":"_value_"}function W0(e){if(e==="x"||e==="y"||e==="r")return e}function WF(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function rh(e,...t){if(W0(e))return e;for(const n of t){const r=n.axis||WF(n.position)||e.length>1&&W0(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Y0(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function YF(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(n.length)return Y0(e,"x",n[0])||Y0(e,"y",n[0])}return{}}function qF(e,t){const n=Oa[e.type]||{scales:{}},r=t.scales||{},s=nh(e.type,t),i=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!dt(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=rh(o,l,YF(o,e),zt.scales[l.type]),u=UF(c,s),m=n.scales||{};i[o]=Ro(Object.create(null),[{axis:c},l,m[c],m[u]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||nh(l,t),m=(Oa[l]||{}).scales||{};Object.keys(m).forEach(h=>{const f=VF(h,c),b=o[f+"AxisID"]||f;i[b]=i[b]||Object.create(null),Ro(i[b],[{axis:f},r[b],m[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];Ro(l,[zt.scales[l.type],zt.scale])}),i}function HN(e){const t=e.options||(e.options={});t.plugins=ot(t.plugins,{}),t.scales=qF(e,t)}function BN(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function KF(e){return e=e||{},e.data=BN(e.data),HN(e),e}const q0=new Map,VN=new Set;function vc(e,t){let n=q0.get(e);return n||(n=t(),q0.set(e,n),VN.add(n)),n}const uo=(e,t,n)=>{const r=zu(t,n);r!==void 0&&e.add(r)};class QF{constructor(t){this._config=KF(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=BN(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),HN(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return vc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return vc(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return vc(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,r=this.type;return vc(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const r=this._scopeCache;let s=r.get(t);return(!s||n)&&(s=new Map,r.set(t,s)),s}getOptionScopes(t,n,r){const{options:s,type:i}=this,o=this._cachedScopes(t,r),l=o.get(n);if(l)return l;const c=new Set;n.forEach(m=>{t&&(c.add(t),m.forEach(h=>uo(c,t,h))),m.forEach(h=>uo(c,s,h)),m.forEach(h=>uo(c,Oa[i]||{},h)),m.forEach(h=>uo(c,zt,h)),m.forEach(h=>uo(c,Zf,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),VN.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,Oa[n]||{},zt.datasets[n]||{},{type:n},zt,Zf]}resolveNamedOptions(t,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=K0(this._resolverCache,t,s);let c=o;if(JF(o,n)){i.$shared=!1,r=Ys(r)?r():r;const u=this.createResolver(t,r,l);c=Ai(o,r,u)}for(const u of n)i[u]=c[u];return i}createResolver(t,n,r=[""],s){const{resolver:i}=K0(this._resolverCache,t,r);return dt(n)?Ai(i,n,void 0,s):i}}function K0(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Fp(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(s,i)),i}const GF=e=>dt(e)&&Object.getOwnPropertyNames(e).some(t=>Ys(e[t]));function JF(e,t){const{isScriptable:n,isIndexable:r}=kN(e);for(const s of t){const i=n(s),o=r(s),l=(o||i)&&e[s];if(i&&(Ys(l)||GF(l))||o&&Jt(l))return!0}return!1}var XF="4.5.0";const ZF=["top","bottom","left","right","chartArea"];function Q0(e,t){return e==="top"||e==="bottom"||ZF.indexOf(e)===-1&&t==="x"}function G0(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function J0(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),_t(n&&n.onComplete,[e],t)}function eA(e){const t=e.chart,n=t.options.animation;_t(n&&n.onProgress,[e],t)}function UN(e){return Rp()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Yc={},X0=e=>{const t=UN(e);return Object.values(Yc).filter(n=>n.canvas===t).pop()};function tA(e,t,n){const r=Object.keys(e);for(const s of r){const i=+s;if(i>=t){const o=e[s];delete e[s],(n>0||i>t)&&(e[i+n]=o)}}}function nA(e,t,n,r){return!n||e.type==="mouseout"?null:r?t:e}var vs;let Ad=(vs=class{static register(...t){Er.add(...t),Z0()}static unregister(...t){Er.remove(...t),Z0()}constructor(t,n){const r=this.config=new QF(n),s=UN(t),i=X0(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||bF(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,m=c&&c.width;if(this.id=a4(),this.ctx=l,this.canvas=c,this.width=m,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new IF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=k4(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Yc[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}qr.listen(this,"complete",J0),qr.listen(this,"progress",eA),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Nt(t)?n&&i?i:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Er}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return w0(this.canvas,this.ctx),this}stop(){return qr.stop(this),this}resize(t,n){qr.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,n,i),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,_0(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),_t(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};xt(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,r=this.scales,s=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const l=n[o],c=rh(o,l),u=c==="r",m=c==="x";return{options:l,dposition:u?"chartArea":m?"bottom":"left",dtype:u?"radialLinear":m?"category":"linear"}}))),xt(i,o=>{const l=o.options,c=l.id,u=rh(c,l),m=ot(l.type,o.dtype);(l.position===void 0||Q0(l.position,u)!==Q0(o.dposition))&&(l.position=o.dposition),s[c]=!0;let h=null;if(c in r&&r[c].type===m)h=r[c];else{const f=Er.getScale(m);h=new f({id:c,type:m,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,t)}),xt(s,(o,l)=>{o||delete r[l]}),xt(r,o=>{ir.configure(this,o,o.options),ir.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(G0("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=i.indexAxis||nh(l,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=Er.getController(l),{datasetElementType:u,dataElementType:m}=zt.datasets[l];Object.assign(c,{dataElementType:Er.getElement(m),datasetElementType:u&&Er.getElement(u)}),o.controller=new c(this,r),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){xt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,m=this.data.datasets.length;u<m;u++){const{controller:h}=this.getDatasetMeta(u),f=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||xt(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(G0("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){xt(this.scales,t=>{ir.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!d0(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;tA(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!d0(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ir.update(this,this.width,this.height,t);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],xt(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ys(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const r=this.getDatasetMeta(t),s={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qr.has(this)?this.attached&&!qr.running(this)&&qr.start(this):(this.draw(),J0({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!t||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,r={meta:t,index:t.index,cancelable:!0},s=OO(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Tp(n,s),t.controller.draw(),s&&Op(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return gl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,r,s){const i=ZO.modes[n];return typeof i=="function"?i(this,t,r,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=$a(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){const r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,s);Hu(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),o.update(i,{visible:r}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),qr.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),w0(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Yc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),t[i]=o},s=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};xt(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,r=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},s=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){xt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},xt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){const s=r?"set":"remove";let i,o,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],r=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Iu(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,r){const s=this.options.hover,i=(c,u)=>c.filter(m=>!u.some(h=>m.datasetIndex===h.datasetIndex&&m.index===h.index)),o=i(n,t),l=r?t:i(t,n);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,n){const r={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(t,n,r){const{_active:s=[],options:i}=this,o=n,l=this._getActiveElements(t,s,r,o),c=d4(t),u=nA(t,this._lastEvent,r,c);r&&(this._lastEvent=null,_t(i.onHover,[t,l,this],this),c&&_t(i.onClick,[t,l,this],this));const m=!Iu(l,s);return(m||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=u,m}_getActiveElements(t,n,r,s){if(t.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,s)}},_e(vs,"defaults",zt),_e(vs,"instances",Yc),_e(vs,"overrides",Oa),_e(vs,"registry",Er),_e(vs,"version",XF),_e(vs,"getChart",X0),vs);function Z0(){return xt(Ad.instances,e=>e._plugins.invalidate())}function WN(e,t,n=t){e.lineCap=ot(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ot(n.borderDash,t.borderDash)),e.lineDashOffset=ot(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ot(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ot(n.borderWidth,t.borderWidth),e.strokeStyle=ot(n.borderColor,t.borderColor)}function rA(e,t,n){e.lineTo(n.x,n.y)}function sA(e){return e.stepped?z4:e.tension||e.cubicInterpolationMode==="monotone"?H4:rA}function YN(e,t,n={}){const r=e.length,{start:s=0,end:i=r-1}=n,{start:o,end:l}=t,c=Math.max(s,o),u=Math.min(i,l),m=s<o&&i<o||s>l&&i>l;return{count:r,start:c,loop:t.loop,ilen:u<c&&!m?r+u-c:u-c}}function aA(e,t,n,r){const{points:s,options:i}=t,{count:o,start:l,loop:c,ilen:u}=YN(s,n,r),m=sA(i);let{move:h=!0,reverse:f}=r||{},b,v,D;for(b=0;b<=u;++b)v=s[(l+(f?u-b:b))%o],!v.skip&&(h?(e.moveTo(v.x,v.y),h=!1):m(e,D,v,f,i.stepped),D=v);return c&&(v=s[(l+(f?u:0))%o],m(e,D,v,f,i.stepped)),!!c}function iA(e,t,n,r){const s=t.points,{count:i,start:o,ilen:l}=YN(s,n,r),{move:c=!0,reverse:u}=r||{};let m=0,h=0,f,b,v,D,g,w;const y=j=>(o+(u?l-j:j))%i,_=()=>{D!==g&&(e.lineTo(m,g),e.lineTo(m,D),e.lineTo(m,w))};for(c&&(b=s[y(0)],e.moveTo(b.x,b.y)),f=0;f<=l;++f){if(b=s[y(f)],b.skip)continue;const j=b.x,L=b.y,C=j|0;C===v?(L<D?D=L:L>g&&(g=L),m=(h*m+j)/++h):(_(),e.lineTo(j,L),v=C,h=0,D=g=L),w=L}_()}function sh(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?iA:aA}function oA(e){return e.stepped?bO:e.tension||e.cubicInterpolationMode==="monotone"?wO:aa}function lA(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),WN(e,t.options),e.stroke(s)}function cA(e,t,n,r){const{segments:s,options:i}=t,o=sh(t);for(const l of s)WN(e,i,l.style),e.beginPath(),o(e,t,l,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}const uA=typeof Path2D=="function";function dA(e,t,n,r){uA&&!t.options.segment?lA(e,t,n,r):cA(e,t,n,r)}class _o extends za{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;mO(this._points,r,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=PO(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){const r=this.options,s=t[n],i=this.points,o=kO(this,{property:n,start:s,end:s});if(!o.length)return;const l=[],c=oA(r);let u,m;for(u=0,m=o.length;u<m;++u){const{start:h,end:f}=o[u],b=i[h],v=i[f];if(b===v){l.push(b);continue}const D=Math.abs((s-b[n])/(v[n]-b[n])),g=c(b,v,D,r.stepped);g[n]=t[n],l.push(g)}return l.length===1?l[0]:l}pathSegment(t,n,r){return sh(this)(t,this,n,r)}path(t,n,r){const s=this.segments,i=sh(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const l of s)o&=i(t,this,l,{start:n,end:n+r-1});return!!o}draw(t,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),dA(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}_e(_o,"id","line"),_e(_o,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),_e(_o,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),_e(_o,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function ev(e,t,n,r){const s=e.options,{[n]:i}=e.getProps([n],r);return Math.abs(t-i)<s.radius+s.hitRadius}class qc extends za{constructor(n){super();_e(this,"parsed");_e(this,"skip");_e(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return ev(this,n,"x",r)}inYRange(n,r){return ev(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!gl(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,eh(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}_e(qc,"id","point"),_e(qc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),_e(qc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const tv=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},mA=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class nv extends za{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,r){this.maxWidth=t,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=_t(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(r=>t.filter(r,this.chart.data))),t.sort&&(n=n.sort((r,s)=>t.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,s=fn(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=tv(r,i);let u,m;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,m=this._fitRows(o,i,l,c)+10):(m=this.maxHeight,u=this._fitCols(o,s,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(m,t.maxHeight||this.maxHeight)}_fitRows(t,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],m=s+l;let h=t;i.textAlign="left",i.textBaseline="middle";let f=-1,b=-m;return this.legendItems.forEach((v,D)=>{const g=r+n/2+i.measureText(v.text).width;(D===0||u[u.length-1]+g+2*l>o)&&(h+=m,u[u.length-(D>0?0:1)]=0,b+=m,f++),c[D]={left:0,top:b,row:f,width:g,height:s},u[u.length-1]+=g+l}),h}_fitCols(t,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],m=o-t;let h=l,f=0,b=0,v=0,D=0;return this.legendItems.forEach((g,w)=>{const{itemWidth:y,itemHeight:_}=fA(r,n,i,g,s);w>0&&b+_+2*l>m&&(h+=f+l,u.push({width:f,height:b}),v+=f+l,D++,f=b=0),c[w]={left:v,top:b,col:D,width:y,height:_},f=Math.max(f,y),b+=_+l}),h+=f,u.push({width:f,height:b}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=xi(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=cn(r,this.left+s,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=cn(r,this.left+s,this.right-this.lineWidths[l])),u.top+=this.top+t+s,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+s}else{let l=0,c=cn(r,this.top+t+s,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=cn(r,this.top+t+s,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Tp(t,this),this._draw(),Op(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=t,l=zt.color,c=xi(t.rtl,this.left,this.width),u=fn(o.font),{padding:m}=o,h=u.size,f=h/2;let b;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:v,boxHeight:D,itemHeight:g}=tv(o,h),w=function(C,T,P){if(isNaN(v)||v<=0||isNaN(D)||D<0)return;s.save();const q=ot(P.lineWidth,1);if(s.fillStyle=ot(P.fillStyle,l),s.lineCap=ot(P.lineCap,"butt"),s.lineDashOffset=ot(P.lineDashOffset,0),s.lineJoin=ot(P.lineJoin,"miter"),s.lineWidth=q,s.strokeStyle=ot(P.strokeStyle,l),s.setLineDash(ot(P.lineDash,[])),o.usePointStyle){const X={radius:D*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:q},te=c.xPlus(C,v/2),oe=T+f;_N(s,X,te,oe,o.pointStyleWidth&&v)}else{const X=T+Math.max((h-D)/2,0),te=c.leftForLtr(C,v),oe=Ho(P.borderRadius);s.beginPath(),Object.values(oe).some(fe=>fe!==0)?th(s,{x:te,y:X,w:v,h:D,radius:oe}):s.rect(te,X,v,D),s.fill(),q!==0&&s.stroke()}s.restore()},y=function(C,T,P){xl(s,P.text,C,T+g/2,u,{strikethrough:P.hidden,textAlign:c.textAlign(P.textAlign)})},_=this.isHorizontal(),j=this._computeTitleHeight();_?b={x:cn(i,this.left+m,this.right-r[0]),y:this.top+m+j,line:0}:b={x:this.left+m,y:cn(i,this.top+j+m,this.bottom-n[0].height),line:0},MN(this.ctx,t.textDirection);const L=g+m;this.legendItems.forEach((C,T)=>{s.strokeStyle=C.fontColor,s.fillStyle=C.fontColor;const P=s.measureText(C.text).width,q=c.textAlign(C.textAlign||(C.textAlign=o.textAlign)),X=v+f+P;let te=b.x,oe=b.y;c.setWidth(this.width),_?T>0&&te+X+m>this.right&&(oe=b.y+=L,b.line++,te=b.x=cn(i,this.left+m,this.right-r[b.line])):T>0&&oe+L>this.bottom&&(te=b.x=te+n[b.line].width+m,b.line++,oe=b.y=cn(i,this.top+j+m,this.bottom-n[b.line].height));const fe=c.x(te);if(w(fe,oe,C),te=D4(q,te+v+f,_?te+X:this.right,t.rtl),y(c.x(te),oe,C),_)b.x+=X+m;else if(typeof C.text!="string"){const G=u.lineHeight;b.y+=qN(C,G)+m}else b.y+=L}),TN(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,r=fn(n.font),s=mr(n.padding);if(!n.display)return;const i=xi(t.rtl,this.left,this.width),o=this.ctx,l=n.position,c=r.size/2,u=s.top+c;let m,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),m=this.top+u,h=cn(t.align,h,this.right-f);else{const v=this.columnSizes.reduce((D,g)=>Math.max(D,g.height),0);m=u+cn(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const b=cn(l,h,h+f);o.textAlign=i.textAlign(Ep(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,xl(o,n.text,b,m,r)}_computeTitleHeight(){const t=this.options.title,n=fn(t.font),r=mr(t.padding);return t.display?n.lineHeight+r.height:0}_getLegendItemAt(t,n){let r,s,i;if(No(t,this.left,this.right)&&No(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],No(t,s.left,s.left+s.width)&&No(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(t){const n=this.options;if(!gA(t.type,n))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,i=mA(s,r);s&&!i&&_t(n.onLeave,[t,s,this],this),this._hoveredItem=r,r&&!i&&_t(n.onHover,[t,r,this],this)}else r&&_t(n.onClick,[t,r,this],this)}}function fA(e,t,n,r,s){const i=hA(r,e,t,n),o=pA(s,r,t.lineHeight);return{itemWidth:i,itemHeight:o}}function hA(e,t,n,r){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),t+n.size/2+r.measureText(s).width}function pA(e,t,n){let r=e;return typeof t.text!="string"&&(r=qN(t,n)),r}function qN(e,t){const n=e.text?e.text.length:0;return t*n}function gA(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var xA={id:"legend",_element:nv,start(e,t,n){const r=e.legend=new nv({ctx:e.ctx,options:n,chart:e});ir.configure(e,r,n),ir.addBox(e,r)},stop(e){ir.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;ir.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),m=mr(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class KN extends za{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const s=Jt(r.text)?r.text.length:1;this._padding=mr(r.padding);const i=s*fn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:r,bottom:s,right:i,options:o}=this,l=o.align;let c=0,u,m,h;return this.isHorizontal()?(m=cn(l,r,i),h=n+t,u=i-r):(o.position==="left"?(m=r+t,h=cn(l,s,n),c=Zt*-.5):(m=i-t,h=cn(l,n,s),c=Zt*.5),u=s-n),{titleX:m,titleY:h,maxWidth:u,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const r=fn(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);xl(t,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:u,textAlign:Ep(n.align),textBaseline:"middle",translation:[o,l]})}}function vA(e,t){const n=new KN({ctx:e.ctx,options:t,chart:e});ir.configure(e,n,t),ir.addBox(e,n),e.titleBlock=n}var yA={id:"title",_element:KN,start(e,t,n){vA(e,n)},stop(e){const t=e.titleBlock;ir.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;ir.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const So={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),s+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:s/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,r=t.y,s=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),m=Xf(t,u);m<s&&(s=m,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,r=c.y}return{x:n,y:r}}};function Cr(e,t){return t&&(Jt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Kr(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function bA(e,t){const{element:n,datasetIndex:r,index:s}=t,i=e.getDatasetMeta(r).controller,{label:o,value:l}=i.getLabelAndValue(s);return{chart:e,label:o,parsed:i.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:l,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function rv(e,t){const n=e.chart.ctx,{body:r,footer:s,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=fn(t.bodyFont),u=fn(t.titleFont),m=fn(t.footerFont),h=i.length,f=s.length,b=r.length,v=mr(t.padding);let D=v.height,g=0,w=r.reduce((j,L)=>j+L.before.length+L.lines.length+L.after.length,0);if(w+=e.beforeBody.length+e.afterBody.length,h&&(D+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),w){const j=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;D+=b*j+(w-b)*c.lineHeight+(w-1)*t.bodySpacing}f&&(D+=t.footerMarginTop+f*m.lineHeight+(f-1)*t.footerSpacing);let y=0;const _=function(j){g=Math.max(g,n.measureText(j).width+y)};return n.save(),n.font=u.string,xt(e.title,_),n.font=c.string,xt(e.beforeBody.concat(e.afterBody),_),y=t.displayColors?o+2+t.boxPadding:0,xt(r,j=>{xt(j.before,_),xt(j.lines,_),xt(j.after,_)}),y=0,n.font=m.string,xt(e.footer,_),n.restore(),g+=v.width,{width:g,height:D}}function wA(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function NA(e,t,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(e==="left"&&s+i+o>t.width||e==="right"&&s-i-o<0)return!0}function jA(e,t,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:l,right:c}}=e;let u="center";return r==="center"?u=s<=(l+c)/2?"left":"right":s<=i/2?u="left":s>=o-i/2&&(u="right"),NA(u,e,t,n)&&(u="center"),u}function sv(e,t,n){const r=n.yAlign||t.yAlign||wA(e,n);return{xAlign:n.xAlign||t.xAlign||jA(e,t,n,r),yAlign:r}}function _A(e,t){let{x:n,width:r}=e;return t==="right"?n-=r:t==="center"&&(n-=r/2),n}function SA(e,t,n){let{y:r,height:s}=e;return t==="top"?r+=n:t==="bottom"?r-=s+n:r-=s/2,r}function av(e,t,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=n,u=s+i,{topLeft:m,topRight:h,bottomLeft:f,bottomRight:b}=Ho(o);let v=_A(t,l);const D=SA(t,c,u);return c==="center"?l==="left"?v+=u:l==="right"&&(v-=u):l==="left"?v-=Math.max(m,f)+s:l==="right"&&(v+=Math.max(h,b)+s),{x:ar(v,0,r.width-t.width),y:ar(D,0,r.height-t.height)}}function yc(e,t,n){const r=mr(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-r.right:e.x+r.left}function iv(e){return Cr([],Kr(e))}function kA(e,t,n){return $a(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function ov(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const QN={beforeTitle:Yr,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:Yr,beforeBody:Yr,beforeLabel:Yr,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Nt(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Yr,afterBody:Yr,beforeFooter:Yr,footer:Yr,afterFooter:Yr};function Cn(e,t,n,r){const s=e[t].call(n,r);return typeof s>"u"?QN[t].call(n,r):s}class ah extends za{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new FN(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=kA(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,s=Cn(r,"beforeTitle",this,t),i=Cn(r,"title",this,t),o=Cn(r,"afterTitle",this,t);let l=[];return l=Cr(l,Kr(s)),l=Cr(l,Kr(i)),l=Cr(l,Kr(o)),l}getBeforeBody(t,n){return iv(Cn(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:r}=n,s=[];return xt(t,i=>{const o={before:[],lines:[],after:[]},l=ov(r,i);Cr(o.before,Kr(Cn(l,"beforeLabel",this,i))),Cr(o.lines,Cn(l,"label",this,i)),Cr(o.after,Kr(Cn(l,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(t,n){return iv(Cn(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:r}=n,s=Cn(r,"beforeFooter",this,t),i=Cn(r,"footer",this,t),o=Cn(r,"afterFooter",this,t);let l=[];return l=Cr(l,Kr(s)),l=Cr(l,Kr(i)),l=Cr(l,Kr(o)),l}_createItems(t){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(bA(this.chart,n[c]));return t.filter&&(l=l.filter((m,h,f)=>t.filter(m,h,f,r))),t.itemSort&&(l=l.sort((m,h)=>t.itemSort(m,h,r))),xt(l,m=>{const h=ov(t.callbacks,m);s.push(Cn(h,"labelColor",this,m)),i.push(Cn(h,"labelPointStyle",this,m)),o.push(Cn(h,"labelTextColor",this,m))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const l=So[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=rv(this,r),u=Object.assign({},l,c),m=sv(this.chart,r,u),h=av(r,u,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,s){const i=this.getCaretPosition(t,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:m,bottomRight:h}=Ho(l),{x:f,y:b}=t,{width:v,height:D}=n;let g,w,y,_,j,L;return i==="center"?(j=b+D/2,s==="left"?(g=f,w=g-o,_=j+o,L=j-o):(g=f+v,w=g+o,_=j-o,L=j+o),y=g):(s==="left"?w=f+Math.max(c,m)+o:s==="right"?w=f+v-Math.max(u,h)-o:w=this.caretX,i==="top"?(_=b,j=_-o,g=w-o,y=w+o):(_=b+D,j=_+o,g=w+o,y=w-o),L=_),{x1:g,x2:w,x3:y,y1:_,y2:j,y3:L}}drawTitle(t,n,r){const s=this.title,i=s.length;let o,l,c;if(i){const u=xi(r.rtl,this.x,this.width);for(t.x=yc(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=fn(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,c=0;c<i;++c)n.fillText(s[c],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=r.titleMarginBottom-l)}}_drawColorBox(t,n,r,s,i){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=i,m=fn(i.bodyFont),h=yc(this,"left",i),f=s.x(h),b=c<m.lineHeight?(m.lineHeight-c)/2:0,v=n.y+b;if(i.usePointStyle){const D={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},g=s.leftForLtr(f,u)+u/2,w=v+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,eh(t,D,g,w),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,eh(t,D,g,w)}else{t.lineWidth=dt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const D=s.leftForLtr(f,u),g=s.leftForLtr(s.xPlus(f,1),u-2),w=Ho(o.borderRadius);Object.values(w).some(y=>y!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,th(t,{x:D,y:v,w:u,h:c,radius:w}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),th(t,{x:g,y:v+1,w:u-2,h:c-2,radius:w}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(D,v,u,c),t.strokeRect(D,v,u,c),t.fillStyle=o.backgroundColor,t.fillRect(g,v+1,u-2,c-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:m}=r,h=fn(r.bodyFont);let f=h.lineHeight,b=0;const v=xi(r.rtl,this.x,this.width),D=function(P){n.fillText(P,v.x(t.x+b),t.y+f/2),t.y+=f+i},g=v.textAlign(o);let w,y,_,j,L,C,T;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,t.x=yc(this,g,r),n.fillStyle=r.bodyColor,xt(this.beforeBody,D),b=l&&g!=="right"?o==="center"?u/2+m:u+2+m:0,j=0,C=s.length;j<C;++j){for(w=s[j],y=this.labelTextColors[j],n.fillStyle=y,xt(w.before,D),_=w.lines,l&&_.length&&(this._drawColorBox(n,t,j,v,r),f=Math.max(h.lineHeight,c)),L=0,T=_.length;L<T;++L)D(_[L]),f=h.lineHeight;xt(w.after,D)}b=0,f=h.lineHeight,xt(this.afterBody,D),t.y-=i}drawFooter(t,n,r){const s=this.footer,i=s.length;let o,l;if(i){const c=xi(r.rtl,this.x,this.width);for(t.x=yc(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",o=fn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+r.footerSpacing}}drawBackground(t,n,r,s){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:u,height:m}=r,{topLeft:h,topRight:f,bottomLeft:b,bottomRight:v}=Ho(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+h,c),o==="top"&&this.drawCaret(t,n,r,s),n.lineTo(l+u-f,c),n.quadraticCurveTo(l+u,c,l+u,c+f),o==="center"&&i==="right"&&this.drawCaret(t,n,r,s),n.lineTo(l+u,c+m-v),n.quadraticCurveTo(l+u,c+m,l+u-v,c+m),o==="bottom"&&this.drawCaret(t,n,r,s),n.lineTo(l+b,c+m),n.quadraticCurveTo(l,c+m,l,c+m-b),o==="center"&&i==="left"&&this.drawCaret(t,n,r,s),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=So[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=rv(this,t),c=Object.assign({},o,this._size),u=sv(n,t,c),m=av(t,c,u,n);(s._to!==m.x||i._to!==m.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=mr(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(i,t,s,n),MN(t,n.textDirection),i.y+=o.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),TN(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,s=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!Iu(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(t,i,n,r),l=this._positionChanged(o,t),c=n||!Iu(o,i)||l;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,r,s){const i=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:r,caretY:s,options:i}=this,o=So[i.position].call(this,t,n);return o!==!1&&(r!==o.x||s!==o.y)}}_e(ah,"positioners",So);var DA={id:"tooltip",_element:ah,positioners:So,afterInit(e,t,n){n&&(e.tooltip=new ah({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:QN},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const CA=(e,t,n,r)=>(typeof t=="string"?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function PA(e,t,n,r){const s=e.indexOf(t);if(s===-1)return CA(e,t,n,r);const i=e.lastIndexOf(t);return s!==i?n:s}const EA=(e,t)=>e===null?null:ar(Math.round(e),0,t);function lv(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ih extends Yi{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Nt(t))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===t?n:PA(r,t,ot(n,t),this._addedLabels),EA(n,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const t=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=t;o<=n;o++)s.push({value:o});return s}getLabelForValue(t){return lv.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}_e(ih,"id","category"),_e(ih,"defaults",{ticks:{callback:lv}});function MA(e,t){const n=[],{bounds:s,step:i,min:o,max:l,precision:c,count:u,maxTicks:m,maxDigits:h,includeBounds:f}=e,b=i||1,v=m-1,{min:D,max:g}=t,w=!Nt(o),y=!Nt(l),_=!Nt(u),j=(g-D)/(h+1);let L=f0((g-D)/v/b)*b,C,T,P,q;if(L<1e-14&&!w&&!y)return[{value:D},{value:g}];q=Math.ceil(g/L)-Math.floor(D/L),q>v&&(L=f0(q*L/v/b)*b),Nt(c)||(C=Math.pow(10,c),L=Math.ceil(L*C)/C),s==="ticks"?(T=Math.floor(D/L)*L,P=Math.ceil(g/L)*L):(T=D,P=g),w&&y&&i&&g4((l-o)/i,L/1e3)?(q=Math.round(Math.min((l-o)/L,m)),L=(l-o)/q,T=o,P=l):_?(T=w?o:T,P=y?l:P,q=u-1,L=(P-T)/q):(q=(P-T)/L,Io(q,Math.round(q),L/1e3)?q=Math.round(q):q=Math.ceil(q));const X=Math.max(h0(L),h0(T));C=Math.pow(10,Nt(c)?X:c),T=Math.round(T*C)/C,P=Math.round(P*C)/C;let te=0;for(w&&(f&&T!==o?(n.push({value:o}),T<o&&te++,Io(Math.round((T+te*L)*C)/C,o,cv(o,j,e))&&te++):T<o&&te++);te<q;++te){const oe=Math.round((T+te*L)*C)/C;if(y&&oe>l)break;n.push({value:oe})}return y&&f&&P!==l?n.length&&Io(n[n.length-1].value,l,cv(l,j,e))?n[n.length-1].value=l:n.push({value:l}):(!y||P===l)&&n.push({value:P}),n}function cv(e,t,{horizontal:n,minRotation:r}){const s=ha(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class TA extends Yi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Nt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=c=>s=n?s:c,l=c=>i=r?i:c;if(t){const c=Fi(s),u=Fi(i);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(s===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(s-c)}this.min=s,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=t,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=MA(s,i);return t.bounds==="ticks"&&x4(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const s=(r-n)/Math.max(t.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(t){return NN(t,this.chart.options.locale,this.options.ticks.format)}}class oh extends TA{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=dr(t)?t:0,this.max=dr(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,r=ha(this.options.ticks.minRotation),s=(t?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}_e(oh,"id","linear"),_e(oh,"defaults",{ticks:{callback:jN.formatters.numeric}});const Ld={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},En=Object.keys(Ld);function uv(e,t){return e-t}function dv(e,t){if(Nt(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:i}=e._parseOpts;let o=t;return typeof r=="function"&&(o=r(o)),dr(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(pl(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function mv(e,t,n,r){const s=En.length;for(let i=En.indexOf(e);i<s-1;++i){const o=Ld[En[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(l*o.size))<=r)return En[i]}return En[s-1]}function OA(e,t,n,r,s){for(let i=En.length-1;i>=En.indexOf(n);i--){const o=En[i];if(Ld[o].common&&e._adapter.diff(s,r,o)>=t-1)return o}return En[n?En.indexOf(n):0]}function FA(e){for(let t=En.indexOf(e)+1,n=En.length;t<n;++t)if(Ld[En[t]].common)return En[t]}function fv(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:r,hi:s}=Pp(n,t),i=n[r]>=t?n[r]:n[s];e[i]=!0}}function AA(e,t,n,r){const s=e._adapter,i=+s.startOf(t[0].value,r),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+s.add(l,1,r))c=n[l],c>=0&&(t[c].major=!0);return t}function hv(e,t,n){const r=[],s={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],s[l]=o,r.push({value:l,major:!1});return i===0||!n?r:AA(e,r,s,n)}class Wu extends Yi{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const r=t.time||(t.time={}),s=this._adapter=new KO._date(t.adapters.date);s.init(n),Ro(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:dv(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=dr(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=dr(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,l=j4(s,i,o);return this._unit=n.unit||(r.autoSkip?mv(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):OA(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:FA(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),hv(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,r=0,s,i;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?r=i:r=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=ar(n,0,o),r=ar(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||mv(i.minUnit,n,r,this._getLabelCapacity(n)),l=ot(s.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=pl(c)||c===!0,m={};let h=n,f,b;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":o),t.diff(r,n,o)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,b=0;f<r;f=+t.add(f,l,o),b++)fv(m,f,v);return(f===r||s.bounds==="ticks"||b===1)&&fv(m,f,v),Object.keys(m).sort(uv).map(D=>+D)}getLabelForValue(t){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(t,o)}_tickFormatFunction(t,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return _t(o,[t,n,r],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,m=c&&l[c],h=u&&l[u],f=r[n],b=u&&h&&f&&f.major;return this._adapter.format(t,s||(b?h:m))}generateTickLabels(t){let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,s=ha(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*i+l*o,h:r*o+l*i}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(t,0,hv(this,[t],this._majorUnit),s),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)t.push(dv(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return S4(t.sort(uv))}}_e(Wu,"id","time"),_e(Wu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function bc(e,t,n){let r=0,s=e.length-1,i,o,l,c;n?(t>=e[r].pos&&t<=e[s].pos&&({lo:r,hi:s}=pa(e,"pos",t)),{pos:i,time:l}=e[r],{pos:o,time:c}=e[s]):(t>=e[r].time&&t<=e[s].time&&({lo:r,hi:s}=pa(e,"time",t)),{time:i,pos:l}=e[r],{time:o,pos:c}=e[s]);const u=o-i;return u?l+(c-l)*(t-i)/u:l}class pv extends Wu{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=bc(n,this.min),this._tableRange=bc(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:r}=this,s=[],i=[];let o,l,c,u,m;for(o=0,l=t.length;o<l;++o)u=t[o],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,l=s.length;o<l;++o)m=s[o+1],c=s[o-1],u=s[o],Math.round((m+c)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const t=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?t=this.normalize(n.concat(r)):t=n.length?n:r,t=this._cache.all=t,t}getDecimalForValue(t){return(bc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return bc(this._table,r*this._tableRange+this._minPos,!0)}}_e(pv,"id","timeseries"),_e(pv,"defaults",Wu.defaults);const GN="label";function gv(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function LA(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function JN(e,t){e.labels=t}function XN(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:GN;const r=[];e.datasets=t.map(s=>{const i=e.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function RA(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:GN;const n={labels:[],datasets:[]};return JN(n,e.labels),XN(n,e.datasets,t),n}function IA(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:u=[],fallbackContent:m,updateMode:h,...f}=e,b=E.useRef(null),v=E.useRef(null),D=()=>{b.current&&(v.current=new Ad(b.current,{type:o,data:RA(l,i),options:c&&{...c},plugins:u}),gv(t,v.current))},g=()=>{gv(t,null),v.current&&(v.current.destroy(),v.current=null)};return E.useEffect(()=>{!s&&v.current&&c&&LA(v.current,c)},[s,c]),E.useEffect(()=>{!s&&v.current&&JN(v.current.config.data,l.labels)},[s,l.labels]),E.useEffect(()=>{!s&&v.current&&l.datasets&&XN(v.current.config.data,l.datasets,i)},[s,l.datasets]),E.useEffect(()=>{v.current&&(s?(g(),setTimeout(D)):v.current.update(h))},[s,c,l.labels,l.datasets,h]),E.useEffect(()=>{v.current&&(g(),setTimeout(D))},[o]),E.useEffect(()=>(D(),()=>g()),[]),xe.createElement("canvas",{ref:b,role:"img",height:n,width:r,...f},m)}const $A=E.forwardRef(IA);function zA(e,t){return Ad.register(t),E.forwardRef((n,r)=>xe.createElement($A,{...n,ref:r,type:e}))}const HA=zA("line",Uc);Ad.register(ih,oh,qc,_o,yA,DA,xA);const BA=({title:e,value:t,icon:n,color:r})=>a.jsx("div",{className:"bg-white rounded-lg shadow p-5 transition-all duration-300 hover:shadow-md",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 font-medium",children:e}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:t})]}),a.jsx("div",{className:`p-3 rounded-full ${r}`,children:n})]})}),VA=()=>{const e=hd(),[t,n]=E.useState([]),[r,s]=E.useState([]),[i,o]=E.useState([]),[l,c]=E.useState([]),[u,m]=E.useState([]),[h,f]=E.useState([]),[b,v]=E.useState([]),[D,g]=E.useState([]),[w,y]=E.useState([]),[_,j]=E.useState([]),[L,C]=E.useState([]),[T,P]=E.useState([]),[q,X]=E.useState([]),[te,oe]=E.useState(!0),[fe,G]=E.useState(null),se="http://localhost:5000/api/customers",W="http://localhost:5000/api/reservations",$="http://localhost:5000/api/vehicles",K="http://localhost:5000/api/interventions",ee="http://localhost:5000/api/factures",Q="http://localhost:5000/api/traites",ce="http://localhost:5000/api/charges",ve="http://localhost:5000/api/vehicleinspections",U="http://localhost:5000/api/vehicleinsurances",H=E.useCallback(async()=>{oe(!0),G(null),console.log("Fetching dashboard data...");try{const[I,V,Y,B,ne,Z,re,ae,ue]=await Promise.all([we.get(se),we.get(W).catch(le=>(console.warn("Reservations API not ready:",le.message),{data:[]})),we.get($),we.get(K).catch(le=>(console.warn("Interventions API not ready:",le.message),{data:[]})),we.get(ee).catch(le=>(console.warn("Factures API not ready:",le.message),{data:[]})),we.get(Q).catch(le=>(console.warn("Traites API not ready:",le.message),{data:[]})),we.get(ce).catch(le=>(console.warn("Charges API not ready:",le.message),{data:[]})),we.get(ve).catch(le=>(console.warn("Vehicle Inspections API not ready:",le.message),{data:[]})),we.get(U).catch(le=>(console.warn("Vehicle Insurances API not ready:",le.message),{data:[]}))]);n(I.data),s(V.data),o(Y.data),c(B.data),m(ne.data),f(Z.data),v(re.data),g(ae.data),y(ue.data),console.log("Dashboard data fetched successfully. Charges:",re.data),ie.success("Dashboard data loaded!")}catch(I){console.error("Error fetching dashboard data:",I),G("Failed to load dashboard data."),ie.error("Failed to load dashboard data.")}finally{oe(!1)}},[]);E.useEffect(()=>{H();const I=()=>{console.log("chargeUpdated event received. Re-fetching data..."),H()};return window.addEventListener("chargeUpdated",I),()=>{window.removeEventListener("chargeUpdated",I)}},[H]),E.useEffect(()=>{const I=new Date;I.setHours(0,0,0,0);const V=new Date(I);V.setDate(I.getDate()+30),V.setHours(0,0,0,0);const Y=[],B=[],ne=[],Z=[];i.forEach(re=>{if(D.some(le=>(le.vehicle&&typeof le.vehicle=="object"?le.vehicle._id:le.vehicle)===re._id&&new Date(le.endDate)>=I)||Y.push(re),w.some(le=>(le.vehicle&&typeof le.vehicle=="object"?le.vehicle._id:le.vehicle)===re._id&&new Date(le.endDate)>=I)||B.push(re),re.autorisationValidity){const le=new Date(re.autorisationValidity);le.setHours(0,0,0,0);const me=le.getTime()-I.getTime(),Ne=Math.ceil(me/(1e3*60*60*24));Ne>=0&&Ne<=30&&ne.push(re)}if(re.carteGriseValidity){const le=new Date(re.carteGriseValidity);le.setHours(0,0,0,0);const me=le.getTime()-I.getTime(),Ne=Math.ceil(me/(1e3*60*60*24));Ne>=0&&Ne<=30&&Z.push(re)}}),j(Y),C(B),P(ne),X(Z)},[i,D,w]);const J=E.useCallback(()=>{const I=new Date().getFullYear(),V=Array(12).fill(0);return r.forEach(Y=>{const B=new Date(Y.reservationDate);B.getFullYear()===I&&Y.status==="validee"&&(V[B.getMonth()]+=Y.totalAmount)}),u.forEach(Y=>{const B=new Date(Y.invoiceDate);B.getFullYear()===I&&(V[B.getMonth()]+=Y.totalTTC)}),V},[r,u]),S=E.useCallback(()=>{const I=new Date().getFullYear(),V=Array(12).fill(0);return h.forEach(Y=>{const B=new Date(Y.datePaiement||Y.createdAt);B.getFullYear()===I&&(V[B.getMonth()]+=Y.montant)}),b.forEach(Y=>{const B=new Date(Y.date||Y.createdAt),ne=Number(Y.montant);B.getFullYear()===I&&!isNaN(ne)&&(V[B.getMonth()]+=ne)}),l.forEach(Y=>{const B=new Date(Y.date);B.getFullYear()===I&&(V[B.getMonth()]+=Y.cost)}),D.forEach(Y=>{const B=new Date(Y.inspectionDate);B.getFullYear()===I&&(V[B.getMonth()]+=Y.price)}),w.forEach(Y=>{const B=new Date(Y.operationDate);B.getFullYear()===I&&(V[B.getMonth()]+=Y.price)}),V},[h,b,l,D,w]),O=J(),d=S(),p=O.reduce((I,V)=>I+V,0),N=d.reduce((I,V)=>I+V,0),k=i.filter(I=>I.statut==="En parc").length,x=t.filter(I=>I.status==="Actif").length,M=[{title:"Véhicules actifs",value:k.toString(),icon:a.jsx(bt,{size:20,className:"text-white"}),color:"bg-blue-600"},{title:"Réservations",value:r.length.toString(),icon:a.jsx(yD,{size:20,className:"text-white"}),color:"bg-green-600"},{title:"Clients",value:x.toString(),icon:a.jsx(Pw,{size:20,className:"text-white"}),color:"bg-purple-600"},{title:"Total des recettes",value:`${p.toLocaleString("fr-FR")} DH`,icon:a.jsx(pD,{size:20,className:"text-white"}),color:"bg-amber-600"},{title:"Total des dépenses",value:`${N.toLocaleString("fr-FR")} DH`,icon:a.jsx(pC,{size:20,className:"text-white"}),color:"bg-red-600"}],F={labels:["Jan","Fév","Mar","Avr","Mai","Juin","Juil","Août","Sep","Oct","Nov","Déc"],datasets:[{label:"Recettes",data:O,borderColor:"rgb(255, 159, 64)",backgroundColor:"rgba(255, 159, 64, 0.5)",tension:.3},{label:"Dépenses",data:d,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",tension:.3}]},A={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Recettes et Dépenses Mensuelles"}}},R=[];return _.length>0&&R.push({title:`Visite Technique requise (${_.length} véhicules)`,description:`Les véhicules suivants nécessitent une visite technique : ${_.map(I=>I.licensePlate).join(", ")}`,action:"Gérer les visites techniques",type:"warning",onClick:()=>e("/vehicules/visites-techniques")}),L.length>0&&R.push({title:`Assurance requise (${L.length} véhicules)`,description:`Les véhicules suivants nécessitent une assurance : ${L.map(I=>I.licensePlate).join(", ")}`,action:"Gérer les assurances",type:"warning",onClick:()=>e("/vehicules/assurances")}),T.length>0&&R.push({title:`Validité autorisation expirant (${T.length} véhicules)`,description:`L'autorisation des véhicules suivants expire bientôt : ${T.map(I=>I.licensePlate).join(", ")}`,action:"Gérer les véhicules",type:"warning",onClick:()=>e("/vehicules")}),q.length>0&&R.push({title:`Validité carte grise expirant (${q.length} véhicules)`,description:`La carte grise des véhicules suivants expire bientôt : ${q.map(I=>I.licensePlate).join(", ")}`,action:"Gérer les véhicules",type:"warning",onClick:()=>e("/vehicules")}),te?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading dashboard data..."})}):fe?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:fe}),a.jsx("button",{onClick:H,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:M.map((I,V)=>a.jsx(BA,{...I},V))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow col-span-2 p-4",children:[a.jsx("h2",{className:"text-lg font-medium mb-4",children:"Recettes et Dépenses Mensuelles"}),a.jsx(HA,{data:F,options:A})]}),a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"border-b border-gray-200 p-4",children:a.jsx("h2",{className:"text-lg font-medium",children:"Alertes"})}),a.jsx("div",{className:"p-4 space-y-4",children:R.map((I,V)=>a.jsx("div",{className:`p-4 rounded-lg ${I.type==="warning"?"bg-red-50 border-l-4 border-red-400":"bg-blue-50 border-l-4 border-blue-400"}`,children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:I.type==="warning"?a.jsx(Ra,{size:18,className:"text-red-400"}):a.jsx(lC,{size:18,className:"text-blue-400"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium",children:I.title}),a.jsx("div",{className:"mt-1 text-sm text-gray-600",children:I.description}),a.jsx("div",{className:"mt-2",children:a.jsx("button",{onClick:I.onClick,className:`text-sm font-medium ${I.type==="warning"?"text-red-700 hover:text-red-600":"text-blue-700 hover:text-blue-600"}`,children:I.action})})]})]})},V))})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow col-span-full",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Réservations récentes"}),a.jsx("button",{onClick:()=>e("/reservations"),className:"text-blue-600 text-sm font-medium hover:text-blue-800 focus:outline-none",children:"Voir tout"})]}),a.jsx("div",{className:"p-4",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de début"}),a.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[r.slice(0,5).map(I=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.customer&&typeof I.customer=="object"?`${I.customer.prenomFr} ${I.customer.nomFr}`:"N/A"})}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:I.vehicle&&typeof I.vehicle=="object"?I.vehicle.model:"N/A"})}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:new Date(I.startDate).toLocaleDateString("fr-FR")})}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsx(FT,{status:I.status})})]},I._id)),r.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-4 py-3 text-center text-sm text-gray-500",children:"Aucune réservation récente."})})]})]})})]})]})]})},UA=({file:e,api_url:t,onRemove:n})=>{var u,m;const[r,s]=E.useState(!1),i=new URL(t).origin;let o=e.url;if((u=e.url)!=null&&u.startsWith("blob:")||(m=e.url)!=null&&m.startsWith("data:"))o=e.url;else{const h=e.url.split(/[\\/]/).pop();h?o=`${i}/uploads/${h}`:o=`${i}/${e.url.replace(/\\/g,"/")}`}const l=()=>{var v,D,g;const h=(D=(v=e.name)==null?void 0:v.split(".").pop())==null?void 0:D.toLowerCase(),f=((g=e.type)==null?void 0:g.startsWith("image/"))||["jpg","jpeg","png","gif","bmp","webp"].includes(h||""),b=e.type==="application/pdf"||h==="pdf";return f?a.jsx("div",{className:"flex items-center",children:a.jsx("div",{className:"w-8 h-8 mr-2 bg-gray-100 rounded overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:o,alt:e.name,className:"max-h-full max-w-full object-cover"})})}):b?a.jsx(ki,{size:16,className:"mr-2 text-red-500"}):a.jsx(ki,{size:16,className:"mr-2 text-blue-500"})},c=()=>{var v,D,g;const h=(D=(v=e.name)==null?void 0:v.split(".").pop())==null?void 0:D.toLowerCase(),f=((g=e.type)==null?void 0:g.startsWith("image/"))||["jpg","jpeg","png","gif","bmp","webp"].includes(h||""),b=e.type==="application/pdf"||h==="pdf";return f?a.jsx("div",{className:"flex flex-col items-center",children:a.jsx("img",{src:o,alt:e.name,className:"max-h-[70vh] max-w-full object-contain shadow-lg rounded"})}):b?a.jsx("div",{className:"w-full h-[70vh] flex flex-col",children:a.jsx("iframe",{src:o,className:"w-full flex-grow border rounded shadow-lg",title:e.name})}):a.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[a.jsx("p",{className:"text-lg font-medium",children:e.name}),a.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-md text-center",children:"L'aperçu n'est pas disponible pour ce type de fichier."})]})};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-2 rounded-lg",onClick:()=>s(!0),children:[l(),a.jsx("span",{className:"text-sm flex-grow",children:e.name}),a.jsx(WD,{size:14,className:"ml-2 text-gray-500"}),n&&a.jsx("button",{type:"button",onClick:h=>{h.stopPropagation(),n(e)},className:"ml-2 text-red-500 hover:text-red-700",children:a.jsx(Rn,{size:16})})]}),r&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-4xl max-h-[90vh] w-full flex flex-col relative",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[a.jsx("h3",{className:"text-lg font-medium",children:e.name}),a.jsx(Sn,{onClick:()=>s(!1)})]}),a.jsx("div",{className:"flex-grow overflow-auto p-4 flex items-center justify-center",children:c()})]})})]})},mt=({api_url:e,existingDocuments:t,newFiles:n,onNewFilesChange:r,onRemoveExistingDocument:s,label:i="Documents",readOnly:o=!1,multiple:l=!0})=>{const c=E.useRef(null),u=f=>{if(f.target.files){const b=Array.from(f.target.files);r(l?[...n,...b]:b.slice(0,1))}},m=f=>{r(n.filter(b=>b!==f))},h=l?[...t.map(f=>({...f,isNew:!1,_file:null})),...n.map(f=>({name:f.name,type:f.type,size:f.size,url:URL.createObjectURL(f),isNew:!0,_file:f}))]:n.length>0?n.map(f=>({name:f.name,type:f.type,size:f.size,url:URL.createObjectURL(f),isNew:!0,_file:f})):t.map(f=>({...f,isNew:!1,_file:null}));return a.jsxs("section",{className:"pb-4",children:[i&&a.jsx("h3",{className:"font-semibold mb-3",children:i}),!o&&a.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:a.jsxs("div",{className:"space-y-1 text-center",children:[a.jsx(Vf,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsxs("div",{className:"flex text-sm text-gray-600",children:[a.jsxs("label",{htmlFor:"attachment-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[a.jsx("span",{children:"Télécharger des fichiers"}),a.jsx("input",{id:"attachment-upload",name:"documents",type:"file",multiple:!0,className:"sr-only",onChange:u,ref:c})]}),a.jsx("p",{className:"pl-1",children:"ou glisser-déposer"})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Tous types de fichiers"})]})}),h.length>0&&a.jsx("div",{className:"space-y-2 mt-4",children:h.map((f,b)=>a.jsx("div",{className:"flex items-center justify-between p-2 border rounded-md bg-gray-50",children:a.jsx(UA,{file:f,api_url:e,onRemove:o?void 0:()=>{f.isNew&&f._file?m(f._file):f.isNew||s(f)}})},`${f.url}-${b}`))})]})};kn("fr",Dn);const mo=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},xv=e=>typeof e=="string"&&e.trim().length===0,ZN=[{id:"pneuDeSecours",label:"PNEU DE SECOURS"},{id:"posteRadio",label:"POSTE RADIO"},{id:"cricManivelle",label:"CRIC MANIVELLE"},{id:"allumeCigare",label:"ALLUME CIGARE"},{id:"jeuDe4Tapis",label:"JEU DE 4 TAPIS"},{id:"vetDeSecurite",label:"VÊT.DE SÉCURITÉ"}],WA=({onSubmit:e,onClose:t,initialData:n=null,API_URL:r})=>{const s=E.useRef(null),[i,o]=E.useState((n==null?void 0:n.imageUrl)||null),[l,c]=E.useState([]),[u,m]=E.useState(n!=null&&n.circulationDate?new Date(n.circulationDate):null),[h,f]=E.useState(n!=null&&n.autorisationDate?new Date(n.autorisationDate):null),[b,v]=E.useState(n!=null&&n.autorisationValidity?new Date(n.autorisationValidity):null),[D,g]=E.useState(n!=null&&n.carteGriseDate?new Date(n.carteGriseDate):null),[w,y]=E.useState(n!=null&&n.carteGriseValidity?new Date(n.carteGriseValidity):null),[_,j]=E.useState({}),L=P=>{var X;const q=(X=P.target.files)==null?void 0:X[0];if(q){const te=new FileReader;te.onloadend=()=>{o(te.result)},te.readAsDataURL(q)}},C=(P,q,X,te)=>{let oe="";return X?typeof q=="string"&&q.trim()===""?oe=`${te} ne peut pas être vide ou contenir uniquement des espaces.`:typeof q=="number"&&q<1?oe=`${te} ne peut pas être inférieur à 1.`:q==null&&(oe=`${te} est obligatoire.`):typeof q=="string"&&q.length>0&&q.trim()===""&&(oe=`${te} ne peut pas contenir uniquement des espaces.`),j(fe=>({...fe,[P]:oe})),oe},T=P=>{P.preventDefault();const q=P.target,X=new FormData(q),te={chassisNumber:X.get("chassisNumber"),temporaryPlate:X.get("temporaryPlate"),licensePlate:X.get("licensePlate"),brand:X.get("brand"),model:X.get("model"),circulationDate:X.get("circulationDate"),fuelType:X.get("fuelType"),fuelLevel:X.get("fuelLevel"),mileage:Number(X.get("mileage")),color:X.get("color"),colorCode:X.get("colorCode"),rentalPrice:Number(X.get("rentalPrice")),nombreDePlaces:Number(X.get("nombreDePlaces")),nombreDeVitesses:Number(X.get("nombreDeVitesses")),transmission:X.get("transmission"),observation:X.get("observation"),statut:X.get("statut"),equipment:{pneuDeSecours:X.get("pneuDeSecours")==="on",posteRadio:X.get("posteRadio")==="on",cricManivelle:X.get("cricManivelle")==="on",allumeCigare:X.get("allumeCigare")==="on",jeuDe4Tapis:X.get("jeuDe4Tapis")==="on",vetDeSecurite:X.get("vetDeSecurite")==="on"},autorisationDate:h?h.toISOString().split("T")[0]:void 0,autorisationValidity:b?b.toISOString().split("T")[0]:void 0,carteGriseDate:D?D.toISOString().split("T")[0]:void 0,carteGriseValidity:w?w.toISOString().split("T")[0]:void 0};let oe=!1;const fe={};fe.chassisNumber=C("chassisNumber",te.chassisNumber,!0,"Numéro de châssis"),fe.temporaryPlate=C("temporaryPlate",te.temporaryPlate,!1,"Matricule WW"),fe.licensePlate=C("licensePlate",te.licensePlate,!0,"Matricule"),fe.brand=C("brand",te.brand,!0,"Marque"),fe.model=C("model",te.model,!0,"Modèle"),fe.color=C("color",te.color,!1,"Couleur"),fe.colorCode=C("colorCode",te.colorCode,!1,"Code couleur"),fe.observation=C("observation",te.observation,!1,"Observation"),fe.nombreDePlaces=C("nombreDePlaces",te.nombreDePlaces,!1,"Nombre de places"),fe.nombreDeVitesses=C("nombreDeVitesses",te.nombreDeVitesses,!1,"Nombre de vitesses"),fe.rentalPrice=C("rentalPrice",te.rentalPrice,!0,"Prix location"),fe.mileage=C("mileage",te.mileage,!0,"Kilométrage"),fe.autorisationDate=C("autorisationDate",h,!0,"Date autorisation (I/C)"),fe.autorisationValidity=C("autorisationValidity",b,!0,"Validité autorisation"),fe.carteGriseDate=C("carteGriseDate",D,!0,"Date carte grise"),fe.carteGriseValidity=C("carteGriseValidity",w,!0,"Validité carte grise");for(const G in fe)if(fe[G]){oe=!0;break}if(j(fe),oe){ie.error("Veuillez corriger les erreurs de validation.");return}i&&(te.imageUrl=i),e(te,l)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold",children:n?"Modifier le véhicule":"Ajouter un véhicule"}),a.jsx("button",{onClick:t,children:a.jsx(Pl,{size:24})})]}),a.jsxs("form",{className:"space-y-6",onSubmit:T,children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informations véhicule"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro de châssis*"}),a.jsx("input",{name:"chassisNumber",type:"text",required:!0,className:`w-full border rounded-lg p-2 ${_.chassisNumber?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.chassisNumber,onChange:P=>C("chassisNumber",P.target.value,!0,"Numéro de châssis")}),_.chassisNumber&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.chassisNumber})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image du véhicule"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{type:"button",onClick:()=>{var P;return(P=s.current)==null?void 0:P.click()},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:[a.jsx(pn,{size:16,className:"inline mr-2"}),"Choisir une image"]}),a.jsx("input",{type:"file",ref:s,className:"hidden",accept:"image/*",onChange:L})]}),i&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:i,alt:"Aperçu",className:"h-20 w-auto rounded-md"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Matricule WW"}),a.jsx("input",{name:"temporaryPlate",type:"text",className:`w-full border rounded-lg p-2 ${_.temporaryPlate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.temporaryPlate,onChange:P=>C("temporaryPlate",P.target.value,!1,"Matricule WW")}),_.temporaryPlate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.temporaryPlate})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Matricule*"}),a.jsx("input",{name:"licensePlate",type:"text",required:!0,className:`w-full border rounded-lg p-2 ${_.licensePlate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.licensePlate,onChange:P=>C("licensePlate",P.target.value,!0,"Matricule")}),_.licensePlate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.licensePlate})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marque*"}),a.jsx("input",{name:"brand",type:"text",required:!0,className:`w-full border rounded-lg p-2 ${_.brand?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.brand,onChange:P=>C("brand",P.target.value,!0,"Marque")}),_.brand&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.brand})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modèle*"}),a.jsx("input",{name:"model",type:"text",required:!0,className:`w-full border rounded-lg p-2 ${_.model?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.model,onChange:P=>C("model",P.target.value,!0,"Modèle")}),_.model&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.model})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date mise en circulation"}),a.jsx(Pe,{selected:u,onChange:P=>m(P),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:"w-full border rounded-lg p-2"}),a.jsx("input",{type:"hidden",name:"circulationDate",value:u?u.toISOString().split("T")[0]:""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type carburant*"}),a.jsxs("select",{name:"fuelType",required:!0,className:"w-full border rounded-lg p-2",defaultValue:n==null?void 0:n.fuelType,children:[a.jsx("option",{value:"diesel",children:"Diesel"}),a.jsx("option",{value:"essence",children:"Essence"}),a.jsx("option",{value:"electrique",children:"Électrique"}),a.jsx("option",{value:"hybride",children:"Hybride"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau carburant*"}),a.jsxs("select",{name:"fuelLevel",required:!0,className:"w-full border rounded-lg p-2",defaultValue:n==null?void 0:n.fuelLevel,children:[a.jsx("option",{value:"reserve",children:"Réserve"}),a.jsx("option",{value:"1/4",children:"1/4"}),a.jsx("option",{value:"1/2",children:"1/2"}),a.jsx("option",{value:"3/4",children:"3/4"}),a.jsx("option",{value:"plein",children:"Plein"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kilométrage*"}),a.jsx("input",{name:"mileage",type:"number",required:!0,className:`w-full border rounded-lg p-2 ${_.mileage?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.mileage,onChange:P=>C("mileage",Number(P.target.value),!0,"Kilométrage")}),_.mileage&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.mileage})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Couleur"}),a.jsx("input",{name:"color",type:"text",className:`w-full border rounded-lg p-2 ${_.color?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.color,onChange:P=>C("color",P.target.value,!1,"Couleur")}),_.color&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.color})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code couleur"}),a.jsx("input",{name:"colorCode",type:"text",className:`w-full border rounded-lg p-2 ${_.colorCode?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.colorCode,onChange:P=>C("colorCode",P.target.value,!1,"Code couleur")}),_.colorCode&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.colorCode})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix location*"}),a.jsx("input",{name:"rentalPrice",type:"number",required:!0,className:`w-full border rounded-lg p-2 ${_.rentalPrice?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.rentalPrice,onChange:P=>C("rentalPrice",Number(P.target.value),!0,"Prix location")}),_.rentalPrice&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.rentalPrice})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de places"}),a.jsx("input",{name:"nombreDePlaces",type:"number",className:`w-full border rounded-lg p-2 ${_.nombreDePlaces?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.nombreDePlaces,onChange:P=>C("nombreDePlaces",Number(P.target.value),!1,"Nombre de places")}),_.nombreDePlaces&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.nombreDePlaces})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de vitesses"}),a.jsx("input",{name:"nombreDeVitesses",type:"number",className:`w-full border rounded-lg p-2 ${_.nombreDeVitesses?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.nombreDeVitesses,onChange:P=>C("nombreDeVitesses",Number(P.target.value),!1,"Nombre de vitesses")}),_.nombreDeVitesses&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.nombreDeVitesses})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transmission"}),a.jsxs("select",{name:"transmission",className:"w-full border rounded-lg p-2",defaultValue:(n==null?void 0:n.transmission)||"",children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"Manuelle",children:"Manuelle"}),a.jsx("option",{value:"Automatique",children:"Automatique"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut*"}),a.jsxs("select",{name:"statut",required:!0,className:"w-full border rounded-lg p-2",defaultValue:(n==null?void 0:n.statut)||"En parc",children:[a.jsx("option",{value:"En parc",children:"En parc"}),a.jsx("option",{value:"En circulation",children:"En circulation"})]})]}),a.jsxs("div",{className:"md:col-span-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observation"}),a.jsx("textarea",{name:"observation",className:`w-full border rounded-lg p-2 ${_.observation?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,rows:3,defaultValue:n==null?void 0:n.observation,onChange:P=>C("observation",P.target.value,!1,"Observation")}),_.observation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.observation})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Équipements/Accessoires"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:ZN.map(P=>{var q;return a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{name:P.id,type:"checkbox",id:P.id,defaultChecked:(q=n==null?void 0:n.equipment)==null?void 0:q[P.id],className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:P.id,className:"ml-2 block text-sm text-gray-900",children:P.label})]},P.id)})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Papiers véhicule"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date autorisation (I/C)*"}),a.jsx(Pe,{selected:h,onChange:P=>{f(P),C("autorisationDate",P,!0,"Date autorisation (I/C)")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`w-full border rounded-lg p-2 ${_.autorisationDate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),_.autorisationDate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.autorisationDate})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Validité autorisation*"}),a.jsx(Pe,{selected:b,onChange:P=>{v(P),C("autorisationValidity",P,!0,"Validité autorisation")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`w-full border rounded-lg p-2 ${_.autorisationValidity?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),_.autorisationValidity&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.autorisationValidity})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date carte grise*"}),a.jsx(Pe,{selected:D,onChange:P=>{g(P),C("carteGriseDate",P,!0,"Date carte grise")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`w-full border rounded-lg p-2 ${_.carteGriseDate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),_.carteGriseDate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.carteGriseDate})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Validité carte grise*"}),a.jsx(Pe,{selected:w,onChange:P=>{y(P),C("carteGriseValidity",P,!0,"Validité carte grise")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`w-full border rounded-lg p-2 ${_.carteGriseValidity?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),_.carteGriseValidity&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.carteGriseValidity})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Documents"}),a.jsx(mt,{api_url:r,newFiles:l,onNewFilesChange:c,existingDocuments:(n==null?void 0:n.documents)||[],onRemoveExistingDocument:async()=>{}})]}),a.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:n?"Modifier":"Ajouter"})]})]})]})})},YA=({vehicle:e,onClose:t,editMode:n=!1,editedVehicle:r=null,onEdit:s=()=>{},onSave:i=()=>{},onCancel:o=()=>{},onInputChange:l=(m,h)=>{},onRemoveExistingDocument:c=async m=>Promise.resolve(),API_URL:u})=>{const[m,h]=E.useState([]),[f,b]=E.useState({});E.useEffect(()=>{n||(h([]),b({}))},[n]);const v=(g,w,y,_)=>{let j="";return y?typeof w=="string"&&w.trim()===""?j=`${_} ne peut pas être vide ou contenir uniquement des espaces.`:typeof w=="number"&&w<1?j=`${_} ne peut pas être inférieur à 1.`:w==null&&(j=`${_} est obligatoire.`):typeof w=="string"&&w.length>0&&w.trim()===""&&(j=`${_} ne peut pas contenir uniquement des espaces.`),b(L=>({...L,[g]:j})),j},D=()=>{if(!r)return;let g=!1;const w={};w.brand=v("brand",r.brand,!0,"Marque"),w.model=v("model",r.model,!0,"Modèle"),w.licensePlate=v("licensePlate",r.licensePlate,!0,"Matricule"),w.temporaryPlate=v("temporaryPlate",r.temporaryPlate,!1,"Matricule WW"),w.chassisNumber=v("chassisNumber",r.chassisNumber,!0,"Numéro de châssis"),w.color=v("color",r.color,!1,"Couleur"),w.colorCode=v("colorCode",r.colorCode,!1,"Code couleur"),w.observation=v("observation",r.observation,!1,"Observation"),w.nombreDePlaces=v("nombreDePlaces",r.nombreDePlaces,!1,"Nombre de places"),w.nombreDeVitesses=v("nombreDeVitesses",r.nombreDeVitesses,!1,"Nombre de vitesses"),w.mileage=v("mileage",r.mileage,!0,"Kilométrage"),w.rentalPrice=v("rentalPrice",r.rentalPrice,!0,"Prix location"),w.autorisationDate=v("autorisationDate",r.autorisationDate,!0,"Date autorisation (I/C)"),w.autorisationValidity=v("autorisationValidity",r.autorisationValidity,!0,"Validité autorisation"),w.carteGriseDate=v("carteGriseDate",r.carteGriseDate,!0,"Date carte grise"),w.carteGriseValidity=v("carteGriseValidity",r.carteGriseValidity,!0,"Validité carte grise");for(const y in w)if(w[y]){g=!0;break}if(b(w),g){ie.error("Veuillez corriger les erreurs de validation.");return}i&&i(m)};return a.jsxs("div",{children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails du véhicule"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[n?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"}),a.jsx("button",{onClick:o,className:"px-4 py-2 border rounded-lg text-sm",children:"Annuler"})]}):a.jsx(gn,{onClick:s,withText:!0,className:"mr-2"}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full",children:a.jsx(Pl,{size:24})})]})]}),a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsx("div",{className:"mb-6 relative",children:(n?r!=null&&r.imageUrl:e.imageUrl)?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:n?r==null?void 0:r.imageUrl:e.imageUrl,alt:`${e.brand} ${e.model}`,className:"w-full h-48 object-cover rounded-lg"}),n&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-lg",children:a.jsxs("button",{type:"button",onClick:()=>{const g=document.createElement("input");g.type="file",g.accept="image/*",g.onchange=w=>{var _;const y=(_=w.target.files)==null?void 0:_[0];if(y){const j=new FileReader;j.onloadend=()=>{l("imageUrl",j.result)},j.readAsDataURL(y)}},g.click()},className:"px-4 py-2 bg-white text-gray-800 rounded-md shadow-sm hover:bg-gray-100 flex items-center",children:[a.jsx(Vf,{size:16,className:"mr-2"}),"Changer l'image"]})})]}):a.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:n?a.jsxs("button",{type:"button",onClick:()=>{const g=document.createElement("input");g.type="file",g.accept="image/*",g.onchange=w=>{var _;const y=(_=w.target.files)==null?void 0:_[0];if(y){const j=new FileReader;j.onloadend=()=>{l("imageUrl",j.result)},j.readAsDataURL(y)}},g.click()},className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 flex items-center",children:[a.jsx(Vf,{size:16,className:"mr-2"}),"Ajouter une image"]}):a.jsx(bt,{size:48,className:"text-gray-400"})})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informations générales"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Marque"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",className:`mt-1 w-full border rounded-lg p-2 ${f.brand?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.brand)||"",onChange:g=>{l("brand",g.target.value),v("brand",g.target.value,!0,"Marque")}}),f.brand&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.brand})]}):a.jsx("p",{className:"mt-1",children:e.brand})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Modèle"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",className:`mt-1 w-full border rounded-lg p-2 ${f.model?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.model)||"",onChange:g=>{l("model",g.target.value),v("model",g.target.value,!0,"Modèle")}}),f.model&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.model})]}):a.jsx("p",{className:"mt-1",children:e.model})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Matricule"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",className:`mt-1 w-full border rounded-lg p-2 ${f.licensePlate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.licensePlate)||"",onChange:g=>{l("licensePlate",g.target.value),v("licensePlate",g.target.value,!0,"Matricule")}}),f.licensePlate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.licensePlate})]}):a.jsx("p",{className:"mt-1",children:e.licensePlate})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Matricule WW"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",className:`mt-1 w-full border rounded-lg p-2 ${f.temporaryPlate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.temporaryPlate)||"",onChange:g=>{l("temporaryPlate",g.target.value),v("temporaryPlate",g.target.value,!1,"Matricule WW")}}),f.temporaryPlate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.temporaryPlate})]}):a.jsx("p",{className:"mt-1",children:e.temporaryPlate||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Numéro de châssis"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",className:`mt-1 w-full border rounded-lg p-2 ${f.chassisNumber?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.chassisNumber)||"",onChange:g=>{l("chassisNumber",g.target.value),v("chassisNumber",g.target.value,!0,"Numéro de châssis")}}),f.chassisNumber&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.chassisNumber})]}):a.jsx("p",{className:"mt-1",children:e.chassisNumber})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date mise en circulation"}),n?a.jsx(Pe,{selected:r!=null&&r.circulationDate?new Date(r.circulationDate):null,onChange:g=>l("circulationDate",g?g.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1",children:mo(e.circulationDate)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Statut"}),n?a.jsxs("select",{className:"mt-1 w-full border rounded-lg p-2",value:(r==null?void 0:r.statut)||"En parc",onChange:g=>l("statut",g.target.value),children:[a.jsx("option",{value:"En parc",children:"En parc"}),a.jsx("option",{value:"En circulation",children:"En circulation"})]}):a.jsx("p",{className:"mt-1",children:e.statut||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Nombre de places"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",className:`mt-1 w-full border rounded-lg p-2 ${f.nombreDePlaces?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.nombreDePlaces)||0,onChange:g=>{l("nombreDePlaces",parseInt(g.target.value)),v("nombreDePlaces",Number(g.target.value),!1,"Nombre de places")}}),f.nombreDePlaces&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.nombreDePlaces})]}):a.jsx("p",{className:"mt-1",children:e.nombreDePlaces||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Nombre de vitesses"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",className:`mt-1 w-full border rounded-lg p-2 ${f.nombreDeVitesses?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.nombreDeVitesses)||0,onChange:g=>{l("nombreDeVitesses",parseInt(g.target.value)),v("nombreDeVitesses",Number(g.target.value),!1,"Nombre de vitesses")}}),f.nombreDeVitesses&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.nombreDeVitesses})]}):a.jsx("p",{className:"mt-1",children:e.nombreDeVitesses||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Transmission"}),n?a.jsxs("select",{className:"mt-1 w-full border rounded-lg p-2",value:(r==null?void 0:r.transmission)||"",onChange:g=>l("transmission",g.target.value),children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"Manuelle",children:"Manuelle"}),a.jsx("option",{value:"Automatique",children:"Automatique"})]}):a.jsx("p",{className:"mt-1",children:e.transmission||"-"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Kilométrage et carburant"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Kilométrage"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",className:`mt-1 w-full border rounded-lg p-2 ${f.mileage?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.mileage)||0,onChange:g=>{l("mileage",parseInt(g.target.value)),v("mileage",Number(g.target.value),!0,"Kilométrage")}}),f.mileage&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.mileage})]}):a.jsxs("p",{className:"mt-1",children:[e.mileage.toLocaleString()," km"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Type carburant"}),n?a.jsxs("select",{className:"mt-1 w-full border rounded-lg p-2",value:(r==null?void 0:r.fuelType)||"diesel",onChange:g=>l("fuelType",g.target.value),children:[a.jsx("option",{value:"diesel",children:"Diesel"}),a.jsx("option",{value:"essence",children:"Essence"}),a.jsx("option",{value:"electrique",children:"Électrique"}),a.jsx("option",{value:"hybride",children:"Hybride"})]}):a.jsx("p",{className:"mt-1",children:e.fuelType})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Niveau carburant"}),n?a.jsxs("select",{className:"mt-1 w-full border rounded-lg p-2",value:(r==null?void 0:r.fuelLevel)||"plein",onChange:g=>l("fuelLevel",g.target.value),children:[a.jsx("option",{value:"reserve",children:"Réserve"}),a.jsx("option",{value:"1/4",children:"1/4"}),a.jsx("option",{value:"1/2",children:"1/2"}),a.jsx("option",{value:"3/4",children:"3/4"}),a.jsx("option",{value:"plein",children:"Plein"})]}):a.jsx("p",{className:"mt-1",children:e.fuelLevel})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Apparence"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Couleur"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",className:`mt-1 w-full border rounded-lg p-2 ${f.color?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.color)||"",onChange:g=>{l("color",g.target.value),v("color",g.target.value,!1,"Couleur")}}),f.color&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.color})]}):a.jsx("p",{className:"mt-1",children:e.color})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Code couleur"}),n?a.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[a.jsx("input",{type:"text",className:`w-full border rounded-lg p-2 ${f.colorCode?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.colorCode)||"",onChange:g=>{l("colorCode",g.target.value),v("colorCode",g.target.value,!1,"Code couleur")},placeholder:"#RRGGBB"}),(r==null?void 0:r.colorCode)&&a.jsx("div",{className:"w-6 h-6 border rounded flex-shrink-0",style:{backgroundColor:r.colorCode}}),f.colorCode&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.colorCode})]}):e.colorCode?a.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[a.jsx("span",{children:e.colorCode}),a.jsx("div",{className:"w-6 h-6 border rounded",style:{backgroundColor:e.colorCode}})]}):a.jsx("p",{className:"mt-1",children:"-"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Prix"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Prix de location"}),n?a.jsxs("div",{className:"mt-1 flex items-center",children:[a.jsx("input",{type:"number",className:`w-32 border rounded-lg p-2 ${f.rentalPrice?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.rentalPrice)||0,onChange:g=>{l("rentalPrice",Number(g.target.value)),v("rentalPrice",Number(g.target.value),!0,"Prix location")},min:"0",step:"10"}),a.jsx("span",{className:"ml-2 text-gray-500",children:"DH/jour"}),f.rentalPrice&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.rentalPrice})]}):a.jsxs("p",{className:"mt-1 text-lg font-semibold text-blue-600",children:[e.rentalPrice," DH",a.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/jour"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Équipements"}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:ZN.map(g=>{var w,y;return a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:(n?(w=r==null?void 0:r.equipment)==null?void 0:w[g.id]:(y=e.equipment)==null?void 0:y[g.id])||!1,onChange:n?_=>l(`equipment.${g.id}`,_.target.checked):void 0,readOnly:!n,className:"h-4 w-4 text-blue-600 border-gray-300 rounded cursor-pointer"}),a.jsx("label",{className:`ml-2 block text-sm text-gray-900 ${n?"cursor-pointer":""}`,children:g.label})]},g.id)})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Papiers véhicule"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date autorisation (I/C)*"}),n?a.jsxs(a.Fragment,{children:[a.jsx(Pe,{selected:r!=null&&r.autorisationDate?new Date(r.autorisationDate):null,onChange:g=>{l("autorisationDate",g?g.toISOString().split("T")[0]:""),v("autorisationDate",g,!0,"Date autorisation (I/C)")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`mt-1 w-full border rounded-lg p-2 ${f.autorisationDate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.autorisationDate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.autorisationDate})]}):a.jsx("p",{className:"mt-1",children:mo(e.autorisationDate)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Validité autorisation*"}),n?a.jsxs(a.Fragment,{children:[a.jsx(Pe,{selected:r!=null&&r.autorisationValidity?new Date(r.autorisationValidity):null,onChange:g=>{l("autorisationValidity",g?g.toISOString().split("T")[0]:""),v("autorisationValidity",g,!0,"Validité autorisation")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`mt-1 w-full border rounded-lg p-2 ${f.autorisationValidity?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.autorisationValidity&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.autorisationValidity})]}):a.jsx("p",{className:"mt-1",children:mo(e.autorisationValidity)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date carte grise*"}),n?a.jsxs(a.Fragment,{children:[a.jsx(Pe,{selected:r!=null&&r.carteGriseDate?new Date(r.carteGriseDate):null,onChange:g=>{l("carteGriseDate",g?g.toISOString().split("T")[0]:""),v("carteGriseDate",g,!0,"Date carte grise")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`mt-1 w-full border rounded-lg p-2 ${f.carteGriseDate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.carteGriseDate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.carteGriseDate})]}):a.jsx("p",{className:"mt-1",children:mo(e.carteGriseDate)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Validité carte grise*"}),n?a.jsxs(a.Fragment,{children:[a.jsx(Pe,{selected:r!=null&&r.carteGriseValidity?new Date(r.carteGriseValidity):null,onChange:g=>{l("carteGriseValidity",g?g.toISOString().split("T")[0]:""),v("carteGriseValidity",g,!0,"Validité carte grise")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`mt-1 w-full border rounded-lg p-2 ${f.carteGriseValidity?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.carteGriseValidity&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.carteGriseValidity})]}):a.jsx("p",{className:"mt-1",children:mo(e.carteGriseValidity)})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ki,{size:18,className:"mr-2 text-gray-500"}),"Observation"]})}),n?a.jsxs(a.Fragment,{children:[a.jsx("textarea",{className:`w-full border rounded-lg p-2 min-h-[100px] ${f.observation?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.observation)||"",onChange:g=>{l("observation",g.target.value),v("observation",g.target.value,!1,"Observation")},placeholder:"Ajouter une observation..."}),f.observation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.observation})]}):e.observation&&a.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.observation})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ki,{size:18,className:"mr-2 text-gray-500"}),"Documents"]})}),a.jsx(mt,{api_url:u,newFiles:m,onNewFilesChange:h,existingDocuments:n?(r==null?void 0:r.documents)||[]:e.documents||[],onRemoveExistingDocument:c,readOnly:!n,label:""})]})]})]})]})},qA=()=>{const[e,t]=E.useState([]),[n,r]=E.useState(""),[s,i]=E.useState("all"),[o,l]=E.useState(!1),[c,u]=E.useState(null),[m,h]=E.useState(null),[f,b]=E.useState(!1),[v,D]=E.useState(null),[g,w]=E.useState([]),[y,_]=E.useState(!0),[j,L]=E.useState(null),C="http://localhost:5000/api/vehicles",T=E.useCallback(async()=>{_(!0),L(null);try{const W=await we.get(C);console.log("Fetched vehicles:",W.data),t(W.data),ie.success("Vehicles loaded successfully!")}catch(W){console.error("Error fetching vehicles:",W),L("Failed to load vehicles."),ie.error("Failed to load vehicles.")}finally{_(!1)}},[]);E.useEffect(()=>{T()},[T]);const P=async(W,$)=>{try{const K=$.map(ee=>({name:ee.name,type:ee.type,size:ee.size,url:URL.createObjectURL(ee)}));if(c){const ee={...W,documents:[...c.documents||[],...K]},Q=await we.put(`${C}/${c._id}`,ee);t(e.map(ce=>ce._id===c._id?Q.data:ce)),h(Q.data),ie.success("Vehicle updated successfully!")}else{const ee={...W,documents:K},Q=await we.post(C,ee);t([...e,Q.data]),ie.success("Vehicle added successfully!")}l(!1),u(null),w([])}catch(K){console.error("Error submitting vehicle:",K),ie.error("Failed to save vehicle.")}},q=e.filter(W=>{const $=W.brand.toLowerCase().includes(n.toLowerCase())||W.model.toLowerCase().includes(n.toLowerCase())||W.licensePlate.toLowerCase().includes(n.toLowerCase()),K=s==="all"||W.statut===s;return $&&K}),X=()=>{m&&(D({...m}),b(!0),w([]))},te=async W=>{var K;if(!v)return;const $=[{name:"Marque",value:v.brand,required:!0},{name:"Modèle",value:v.model,required:!0},{name:"Matricule",value:v.licensePlate,required:!0},{name:"Matricule WW",value:v.temporaryPlate,required:!1},{name:"Numéro de châssis",value:v.chassisNumber,required:!0},{name:"Couleur",value:v.color,required:!1},{name:"Code couleur",value:v.colorCode,required:!1},{name:"Observation",value:v.observation,required:!1}];for(const ee of $){if(ee.required&&xv(ee.value)){ie.error(`${ee.name} ne peut pas être vide ou contenir uniquement des espaces.`);return}if(!ee.required&&ee.value&&xv(ee.value)){ie.error(`${ee.name} ne peut pas contenir uniquement des espaces.`);return}}if(v.nombreDePlaces!==void 0&&v.nombreDePlaces<1){ie.error("Nombre de places ne peut pas être inférieur à 1.");return}if(v.nombreDeVitesses!==void 0&&v.nombreDeVitesses<1){ie.error("Nombre de vitesses ne peut pas être inférieur à 1.");return}try{const ee=((K=v.documents)==null?void 0:K.filter(U=>!U.url.startsWith("blob:")))||[],Q=W.map(U=>({name:U.name,type:U.type,size:U.size,url:URL.createObjectURL(U)})),ce={...v,documents:[...ee,...Q]},ve=await we.put(`${C}/${v._id}`,ce);console.log("Backend response after update:",ve.data),t(e.map(U=>U._id===ve.data._id?ve.data:U)),h(ve.data),b(!1),D(null),w([]),ie.success("Vehicle updated successfully!")}catch(ee){console.error("Error saving vehicle edit:",ee),ie.error("Failed to save vehicle changes.")}},oe=()=>{b(!1),D(null),w([])},fe=(W,$)=>{if(v){const K={...v};if(W.includes(".")){const[ee,Q]=W.split(".");ee==="equipment"&&(K.equipment={...K.equipment,[Q]:typeof $=="boolean"?$:$==="true"||$==="on"})}else K[W]=$;D(K)}},G=async W=>{var $;if(v)try{const K=(($=v.documents)==null?void 0:$.filter(ee=>ee.url!==W.url))||[];D({...v,documents:K}),console.log("Simulating document deletion for:",W.url),ie.success("Document removed successfully (simulated)!"),t(ee=>ee.map(Q=>Q._id===v._id?{...Q,documents:K}:Q)),h(ee=>(ee==null?void 0:ee._id)===v._id?{...ee,documents:K}:ee)}catch(K){console.error("Error removing document:",K),ie.error("Failed to remove document."),D({...v})}},se=async W=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce véhicule ?"))try{await we.delete(`${C}/${W}`),t(e.filter($=>$._id!==W)),(m==null?void 0:m._id)===W&&(h(null),b(!1),D(null)),ie.success("Vehicle deleted successfully!")}catch($){console.error("Error deleting vehicle:",$),ie.error("Failed to delete vehicle.")}};return y?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading vehicles..."})}):j?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:j}),a.jsx("button",{onClick:T,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Véhicules"}),a.jsxs("button",{onClick:()=>{u(null),l(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Ajouter un véhicule"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Yn,{size:18,className:"text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Rechercher un véhicule...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:n,onChange:W=>r(W.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"statut-filter",className:"sr-only",children:"Filtrer par statut"}),a.jsxs("select",{id:"statut-filter",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:s,onChange:W=>i(W.target.value),children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"En parc",children:"En parc"}),a.jsx("option",{value:"En circulation",children:"En circulation"})]})]})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Détails"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Carburant"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix/jour"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(W=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>h(W),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[W.imageUrl?a.jsx("img",{src:W.imageUrl,alt:`${W.brand} ${W.model}`,className:"h-10 w-10 rounded-full object-cover"}):a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsx(bt,{size:20,className:"text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[W.brand," ",W.model]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[W.licensePlate,W.temporaryPlate&&` (WW: ${W.temporaryPlate})`]})]})]})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm text-gray-900",children:W.chassisNumber}),a.jsxs("div",{className:"text-sm text-gray-500",children:[W.mileage.toLocaleString()," km"]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${W.statut==="En parc"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:W.statut})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:W.fuelType}),a.jsx("div",{className:"text-sm text-gray-500",children:W.fuelLevel})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600",children:[W.rentalPrice," DH/jour"]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(gn,{onClick:$=>{$.stopPropagation(),h(W),D({...W}),b(!0)},size:"md",className:"mr-3"}),a.jsx("button",{onClick:$=>{$.stopPropagation(),se(W._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Rn,{size:18})})]})]},W._id))})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:m?a.jsx("div",{className:"bg-white shadow rounded-lg",children:a.jsx(YA,{vehicle:m,onClose:()=>h(null),editMode:f,editedVehicle:v,onEdit:X,onSave:te,onCancel:oe,onInputChange:fe,onRemoveExistingDocument:G,API_URL:C})}):a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-center h-full py-10",children:[a.jsx(bt,{size:64,className:"text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucun véhicule sélectionné"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Sélectionnez un véhicule pour voir ses détails"}),a.jsxs("button",{onClick:()=>{u(null),l(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Ajouter un véhicule"]})]})})})]}),o&&a.jsx(WA,{onSubmit:P,onClose:()=>{l(!1),u(null)},initialData:c,API_URL:C})]})},ej=[{code:"MA",name:"Maroc"},{code:"FR",name:"France"},{code:"ES",name:"Espagne"},{code:"IT",name:"Italie"},{code:"DE",name:"Allemagne"},{code:"UK",name:"Royaume-Uni"},{code:"US",name:"États-Unis"},{code:"CA",name:"Canada"},{code:"AL",name:"Algeria"},{code:"TN",name:"Tunisie"},{code:"DZ",name:"Algérie"},{code:"PT",name:"Portugal"},{code:"BE",name:"Belgique"},{code:"NL",name:"Pays-Bas"},{code:"CH",name:"Suisse"},{code:"AT",name:"Autriche"},{code:"NO",name:"Norvège"},{code:"SE",name:"Suède"},{code:"FI",name:"Finlande"},{code:"DK",name:"Danemark"},{code:"IE",name:"Irlande"},{code:"LU",name:"Luxembourg"},{code:"LI",name:"Liechtenstein"},{code:"IS",name:"Islande"},{code:"EE",name:"Estonie"},{code:"LT",name:"Lituanie"},{code:"LV",name:"Lettonie"},{code:"BG",name:"Bulgarie"},{code:"RO",name:"Roumanie"},{code:"SK",name:"Slovaquie"},{code:"CZ",name:"République tchèque"},{code:"HR",name:"Croatie"},{code:"SI",name:"Slovénie"},{code:"GR",name:"Grèce"},{code:"MD",name:"Moldavie"},{code:"UA",name:"Ukraine"},{code:"BY",name:"Biélorussie"},{code:"KZ",name:"Kazakhstan"},{code:"UZ",name:"Ouzbékistan"},{code:"KG",name:"Kirghizistan"},{code:"TJ",name:"Tadjikistan"},{code:"TM",name:"Turkménistan"},{code:"AZ",name:"Azerbaïdjan"},{code:"AM",name:"Arménie"},{code:"GE",name:"Géorgie"},{code:"AF",name:"Afghanistan"},{code:"PK",name:"Pakistan"},{code:"IN",name:"Inde"},{code:"BD",name:"Bangladesh"},{code:"LK",name:"Sri Lanka"},{code:"NP",name:"Népal"},{code:"BT",name:"Bhoutan"},{code:"MV",name:"Maldives"},{code:"TH",name:"Thaïlande"},{code:"VN",name:"Vietnam"},{code:"KH",name:"Cambodge"},{code:"LA",name:"Laos"},{code:"MY",name:"Malaisie"},{code:"SG",name:"Singapour"},{code:"PH",name:"Philippines"},{code:"ID",name:"Indonésie"},{code:"TL",name:"Timor oriental"},{code:"BN",name:"Brunéi"},{code:"MM",name:"Birmanie"},{code:"KH",name:"Cambodge"},{code:"MN",name:"Mongolie"},{code:"JP",name:"Japon"},{code:"KR",name:"Corée du Sud"},{code:"KP",name:"Corée du Nord"},{code:"CN",name:"Chine"},{code:"HK",name:"Hong Kong"},{code:"MO",name:"Macao"},{code:"MA",name:"Maroc"},{code:"FR",name:"France"},{code:"ES",name:"Espagne"},{code:"IT",name:"Italie"},{code:"DE",name:"Allemagne"},{code:"UK",name:"Royaume-Uni"},{code:"US",name:"États-Unis"}];kn("fr",Dn);const Tm=e=>typeof e=="string"&&e.trim().length===0,KA=({onSubmit:e,onClose:t,initialData:n,readOnly:r=!1,existingDocuments:s=[],onRemoveExistingDocument:i,api_url:o})=>{const[l,c]=E.useState([]),[u,m]=E.useState([]),[h,f]=E.useState({}),[b,v]=E.useState({civilite:(n==null?void 0:n.civilite)||"",nationalite:(n==null?void 0:n.nationalite)||"",type:(n==null?void 0:n.type)||"Particulier",listeNoire:(n==null?void 0:n.listeNoire)||!1,nomFr:(n==null?void 0:n.nomFr)||"",nomAr:(n==null?void 0:n.nomAr)||"",prenomFr:(n==null?void 0:n.prenomFr)||"",prenomAr:(n==null?void 0:n.prenomAr)||"",dateNaissance:(n==null?void 0:n.dateNaissance)||"",age:(n==null?void 0:n.age)||"",lieuNaissance:(n==null?void 0:n.lieuNaissance)||"",ice:(n==null?void 0:n.ice)||"",cin:(n==null?void 0:n.cin)||"",cinDelivreLe:(n==null?void 0:n.cinDelivreLe)||"",cinDelivreA:(n==null?void 0:n.cinDelivreA)||"",cinValidite:(n==null?void 0:n.cinValidite)||"",numeroPermis:(n==null?void 0:n.numeroPermis)||"",permisDelivreLe:(n==null?void 0:n.permisDelivreLe)||"",permisDelivreA:(n==null?void 0:n.permisDelivreA)||"",permisValidite:(n==null?void 0:n.permisValidite)||"",numeroPasseport:(n==null?void 0:n.numeroPasseport)||"",passportDelivreLe:(n==null?void 0:n.passportDelivreLe)||"",passportDelivreA:(n==null?void 0:n.passportDelivreA)||"",passportValidite:(n==null?void 0:n.passportValidite)||"",adresseFr:(n==null?void 0:n.adresseFr)||"",ville:(n==null?void 0:n.ville)||"",adresseAr:(n==null?void 0:n.adresseAr)||"",codePostal:(n==null?void 0:n.codePostal)||"",telephone:(n==null?void 0:n.telephone)||"",telephone2:(n==null?void 0:n.telephone2)||"",fix:(n==null?void 0:n.fix)||"",fax:(n==null?void 0:n.fax)||"",remarque:(n==null?void 0:n.remarque)||"",email:(n==null?void 0:n.email)||""});E.useEffect(()=>{if(b.dateNaissance){const _=new Date(b.dateNaissance),j=new Date;let L=j.getFullYear()-_.getFullYear();const C=j.getMonth()-_.getMonth();(C<0||C===0&&j.getDate()<_.getDate())&&L--,v(T=>({...T,age:L.toString()})),L<18?f(T=>({...T,dateNaissance:"Le client doit avoir au moins 18 ans."})):f(T=>{const P={...T};return delete P.dateNaissance,P})}else f(_=>{const j={..._};return delete j.dateNaissance,j})},[b.dateNaissance]);const D=_=>{c(_)},g=async _=>{i&&m(j=>[...j,_])},w=_=>{if(_.preventDefault(),r)return;let j={};j={...h};const L=["nomFr","nomAr","prenomFr","prenomAr","lieuNaissance","cin","cinDelivreA","numeroPermis","permisDelivreA","numeroPasseport","passportDelivreA","adresseFr","ville","adresseAr","codePostal","telephone","telephone2","fix","fax","remarque","email"],C=["civilite","nationalite","type","nomFr","prenomFr","dateNaissance","lieuNaissance","cin","cinDelivreLe","cinDelivreA","cinValidite","numeroPermis","permisDelivreLe","permisDelivreA","permisValidite"];if(b.permisDelivreLe){const T=new Date(b.permisDelivreLe),P=new Date;P.setFullYear(P.getFullYear()-2),T>P&&(j.permisDelivreLe="La date de délivrance du permis doit être supérieure à 2 ans.")}if(C.forEach(T=>{(!b[T]||typeof b[T]=="string"&&Tm(b[T]))&&(j[T]="Ce champ est obligatoire et ne peut pas contenir uniquement des espaces.")}),L.forEach(T=>{b[T]&&Tm(b[T])&&(j[T]="Ce champ ne peut pas contenir uniquement des espaces.")}),f(j),Object.keys(j).length>0){alert("Veuillez corriger les erreurs de validation.");return}e(b,l,u)},y=_=>{const{name:j,value:L,type:C}=_.target,T=C==="checkbox"?_.target.checked:void 0;if((C==="text"||C==="textarea"||C==="email"||C==="tel")&&(L.length>0&&Tm(L)?f(P=>({...P,[j]:"Ce champ ne peut pas contenir uniquement des espaces."})):f(P=>{const q={...P};return delete q[j],q})),v(P=>({...P,[j]:C==="checkbox"?T:L})),j==="permisDelivreLe"&&L){const P=new Date(L),q=new Date;q.setFullYear(q.getFullYear()-2),P>q?f(X=>({...X,permisDelivreLe:"La date de délivrance du permis doit être supérieure à 2 ans."})):f(X=>{const te={...X};return delete te.permisDelivreLe,te})}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sn,{onClick:t}),a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h2",{className:"text-2xl font-bold",children:n?"Modifier le client":"Ajouter un client"})}),a.jsxs("form",{onSubmit:w,className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Conducteur"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Civilité (*)"}),a.jsxs("select",{name:"civilite",value:b.civilite,onChange:y,className:"w-full border rounded p-2",required:!0,disabled:r,children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"M.",children:"M."}),a.jsx("option",{value:"Mme",children:"Mme"}),a.jsx("option",{value:"Mlle",children:"Mlle"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Nationalité (*)"}),a.jsxs("select",{name:"nationalite",value:b.nationalite,onChange:y,className:"w-full border rounded p-2",required:!0,disabled:r,children:[a.jsx("option",{value:"",children:"Sélectionner"}),ej.map(_=>a.jsx("option",{value:_.name,children:_.name},_.code))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Type (*)"}),a.jsxs("select",{name:"type",value:b.type,onChange:y,className:"w-full border rounded p-2",required:!0,disabled:r,children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"Particulier",children:"Particulier"}),a.jsx("option",{value:"Professionel",children:"Professionel"})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",name:"listeNoire",checked:b.listeNoire,onChange:_=>y({target:{name:"listeNoire",type:"checkbox",checked:_.target.checked,value:_.target.checked.toString()}}),className:"mr-2",disabled:r}),a.jsx("label",{children:"Liste noire"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Nom français (*)"}),a.jsx("input",{type:"text",name:"nomFr",value:b.nomFr,onChange:y,className:`w-full border rounded p-2 ${h.nomFr?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.nomFr&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.nomFr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Nom arabe"}),a.jsx("input",{type:"text",name:"nomAr",value:b.nomAr,onChange:y,className:`w-full border rounded p-2 ${h.nomAr?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,dir:"rtl",readOnly:r}),h.nomAr&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.nomAr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Prénom français (*)"}),a.jsx("input",{type:"text",name:"prenomFr",value:b.prenomFr,onChange:y,className:`w-full border rounded p-2 ${h.prenomFr?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.prenomFr&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.prenomFr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Prénom arabe"}),a.jsx("input",{type:"text",name:"prenomAr",value:b.prenomAr,onChange:y,className:`w-full border rounded p-2 ${h.prenomAr?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,dir:"rtl",readOnly:r}),h.prenomAr&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.prenomAr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Date naissance (*)"}),a.jsx(Pe,{selected:b.dateNaissance?new Date(b.dateNaissance):null,onChange:_=>y({target:{name:"dateNaissance",value:_?_.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:`w-full border rounded p-2 ${h.dateNaissance?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,disabled:r}),h.dateNaissance&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.dateNaissance})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Age"}),a.jsx("input",{type:"text",name:"age",value:b.age,className:"w-full border rounded p-2",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Lieu de naissance (*)"}),a.jsx("input",{type:"text",name:"lieuNaissance",value:b.lieuNaissance,onChange:y,className:`w-full border rounded p-2 ${h.lieuNaissance?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.lieuNaissance&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.lieuNaissance})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"ICE"}),a.jsx("input",{type:"text",name:"ice",value:b.ice,onChange:y,className:`w-full border rounded p-2 ${h.ice?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.ice&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.ice})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Pièce d'identité"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"C.I.N (*)"}),a.jsx("input",{type:"text",name:"cin",value:b.cin,onChange:y,className:`w-full border rounded p-2 ${h.cin?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.cin&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.cin})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Délivré le (*)"}),a.jsx(Pe,{selected:b.cinDelivreLe?new Date(b.cinDelivreLe):null,onChange:_=>y({target:{name:"cinDelivreLe",value:_?_.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded p-2",required:!0,disabled:r})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Délivrée à (*)"}),a.jsx("input",{type:"text",name:"cinDelivreA",value:b.cinDelivreA,onChange:y,className:`w-full border rounded p-2 ${h.cinDelivreA?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.cinDelivreA&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.cinDelivreA})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Validité (*)"}),a.jsx(Pe,{selected:b.cinValidite?new Date(b.cinValidite):null,onChange:_=>y({target:{name:"cinValidite",value:_?_.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded p-2",required:!0,disabled:r})]})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Numéro permis (*)"}),a.jsx("input",{type:"text",name:"numeroPermis",value:b.numeroPermis,onChange:y,className:`w-full border rounded p-2 ${h.numeroPermis?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.numeroPermis&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.numeroPermis})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Délivré le (*)"}),a.jsx(Pe,{selected:b.permisDelivreLe?new Date(b.permisDelivreLe):null,onChange:_=>y({target:{name:"permisDelivreLe",value:_?_.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded p-2",required:!0,disabled:r}),h.permisDelivreLe&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.permisDelivreLe})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Délivrée à (*)"}),a.jsx("input",{type:"text",name:"permisDelivreA",value:b.permisDelivreA,onChange:y,className:`w-full border rounded p-2 ${h.permisDelivreA?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.permisDelivreA&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.permisDelivreA})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Validité (*)"}),a.jsx(Pe,{selected:b.permisValidite?new Date(b.permisValidite):null,onChange:_=>y({target:{name:"permisValidite",value:_?_.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded p-2",required:!0,disabled:r})]})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Numéro passeport"}),a.jsx("input",{type:"text",name:"numeroPasseport",value:b.numeroPasseport,onChange:y,className:`w-full border rounded p-2 ${h.numeroPasseport?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.numeroPasseport&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.numeroPasseport})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Délivré le"}),a.jsx(Pe,{selected:b.passportDelivreLe?new Date(b.passportDelivreLe):null,onChange:_=>y({target:{name:"passportDelivreLe",value:_?_.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded p-2",disabled:r})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Délivrée à"}),a.jsx("input",{type:"text",name:"passportDelivreA",value:b.passportDelivreA,onChange:y,className:`w-full border rounded p-2 ${h.passportDelivreA?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.passportDelivreA&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.passportDelivreA})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Validité"}),a.jsx(Pe,{selected:b.passportValidite?new Date(b.passportValidite):null,onChange:_=>y({target:{name:"passportValidite",value:_?_.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded p-2",disabled:r})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Email"}),a.jsx("input",{type:"email",name:"email",value:b.email,onChange:y,className:`w-full border rounded p-2 ${h.email?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.email&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Adresse"}),a.jsx("input",{type:"text",name:"adresseFr",value:b.adresseFr,onChange:y,className:`w-full border rounded p-2 ${h.adresseFr?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.adresseFr&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.adresseFr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Ville"}),a.jsx("input",{type:"text",name:"ville",value:b.ville,onChange:y,className:`w-full border rounded p-2 ${h.ville?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.ville&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.ville})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Adresse au l'étranger"}),a.jsx("input",{type:"text",name:"adresseAr",value:b.adresseAr,onChange:y,className:`w-full border rounded p-2 ${h.adresseAr?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.adresseAr&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.adresseAr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Code postal"}),a.jsx("input",{type:"text",name:"codePostal",value:b.codePostal,onChange:y,className:`w-full border rounded p-2 ${h.codePostal?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.codePostal&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.codePostal})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Téléphone"}),a.jsx("input",{type:"tel",name:"telephone",value:b.telephone,onChange:y,className:`w-full border rounded p-2 ${h.telephone?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.telephone&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.telephone})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Téléphone 2"}),a.jsx("input",{type:"tel",name:"telephone2",value:b.telephone2,onChange:y,className:`w-full border rounded p-2 ${h.telephone2?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.telephone2&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.telephone2})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Fix"}),a.jsx("input",{type:"tel",name:"fix",value:b.fix,onChange:y,className:`w-full border rounded p-2 ${h.fix?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.fix&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.fix})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Fax"}),a.jsx("input",{type:"tel",name:"fax",value:b.fax,onChange:y,className:`w-full border rounded p-2 ${h.fax?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.fax&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.fax})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block mb-1",children:"Remarque"}),a.jsx("textarea",{name:"remarque",value:b.remarque,onChange:y,className:`w-full border rounded p-2 h-24 ${h.remarque?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.remarque&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.remarque})]})]})]}),a.jsx(mt,{api_url:o,existingDocuments:s,newFiles:l,onNewFilesChange:D,onRemoveExistingDocument:g,label:"Documents",readOnly:r}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded hover:bg-gray-100",children:"Annuler"}),!r&&a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Enregistrer"})]})]})]})})};var tj={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.106
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(e,t){(function(n,r){e.exports=r(E)})(lj,function(n){return function(){var r={442:function(l){l.exports=n},548:function(l){l.exports=function(){var c={34:function(S,O,d){var p=d(4901);S.exports=function(N){return typeof N=="object"?N!==null:p(N)}},81:function(S,O,d){var p=d(9565),N=d(9306),k=d(8551),x=d(6823),M=d(851),F=TypeError;S.exports=function(A,R){var I=arguments.length<2?M(A):R;if(N(I))return k(p(I,A));throw new F(x(A)+" is not iterable")}},235:function(S,O,d){var p=d(9213).forEach,N=d(4598)("forEach");S.exports=N?[].forEach:function(k){return p(this,k,arguments.length>1?arguments[1]:void 0)}},283:function(S,O,d){var p=d(9504),N=d(9039),k=d(4901),x=d(9297),M=d(3724),F=d(350).CONFIGURABLE,A=d(3706),R=d(1181),I=R.enforce,V=R.get,Y=String,B=Object.defineProperty,ne=p("".slice),Z=p("".replace),re=p([].join),ae=M&&!N(function(){return B(function(){},"length",{value:8}).length!==8}),ue=String(String).split("String"),le=S.exports=function(me,Ne,pe){ne(Y(Ne),0,7)==="Symbol("&&(Ne="["+Z(Y(Ne),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),pe&&pe.getter&&(Ne="get "+Ne),pe&&pe.setter&&(Ne="set "+Ne),(!x(me,"name")||F&&me.name!==Ne)&&(M?B(me,"name",{value:Ne,configurable:!0}):me.name=Ne),ae&&pe&&x(pe,"arity")&&me.length!==pe.arity&&B(me,"length",{value:pe.arity});try{pe&&x(pe,"constructor")&&pe.constructor?M&&B(me,"prototype",{writable:!1}):me.prototype&&(me.prototype=void 0)}catch{}var ge=I(me);return x(ge,"source")||(ge.source=re(ue,typeof Ne=="string"?Ne:"")),me};Function.prototype.toString=le(function(){return k(this)&&V(this).source||A(this)},"toString")},298:function(S,O,d){var p=d(2195),N=d(5397),k=d(8480).f,x=d(7680),M=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];S.exports.f=function(F){return M&&p(F)==="Window"?function(A){try{return k(A)}catch{return x(M)}}(F):k(N(F))}},350:function(S,O,d){var p=d(3724),N=d(9297),k=Function.prototype,x=p&&Object.getOwnPropertyDescriptor,M=N(k,"name"),F=M&&(function(){}).name==="something",A=M&&(!p||p&&x(k,"name").configurable);S.exports={EXISTS:M,PROPER:F,CONFIGURABLE:A}},397:function(S,O,d){var p=d(7751);S.exports=p("document","documentElement")},421:function(S){S.exports={}},511:function(S,O,d){var p=d(9167),N=d(9297),k=d(1951),x=d(4913).f;S.exports=function(M){var F=p.Symbol||(p.Symbol={});N(F,M)||x(F,M,{value:k.f(M)})}},566:function(S,O,d){var p=d(9504),N=d(9306),k=d(34),x=d(9297),M=d(7680),F=d(616),A=Function,R=p([].concat),I=p([].join),V={};S.exports=F?A.bind:function(Y){var B=N(this),ne=B.prototype,Z=M(arguments,1),re=function(){var ae=R(Z,M(arguments));return this instanceof re?function(ue,le,me){if(!x(V,le)){for(var Ne=[],pe=0;pe<le;pe++)Ne[pe]="a["+pe+"]";V[le]=A("C,a","return new C("+I(Ne,",")+")")}return V[le](ue,me)}(B,ae.length,ae):B.apply(Y,ae)};return k(ne)&&(re.prototype=ne),re}},597:function(S,O,d){var p=d(9039),N=d(8227),k=d(9519),x=N("species");S.exports=function(M){return k>=51||!p(function(){var F=[];return(F.constructor={})[x]=function(){return{foo:1}},F[M](Boolean).foo!==1})}},616:function(S,O,d){var p=d(9039);S.exports=!p(function(){var N=(function(){}).bind();return typeof N!="function"||N.hasOwnProperty("prototype")})},655:function(S,O,d){var p=d(6955),N=String;S.exports=function(k){if(p(k)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return N(k)}},687:function(S,O,d){var p=d(4913).f,N=d(9297),k=d(8227)("toStringTag");S.exports=function(x,M,F){x&&!F&&(x=x.prototype),x&&!N(x,k)&&p(x,k,{configurable:!0,value:M})}},706:function(S,O,d){var p=d(350).PROPER,N=d(9039),k=d(7452);S.exports=function(x){return N(function(){return!!k[x]()||"​᠎"[x]()!=="​᠎"||p&&k[x].name!==x})}},739:function(S,O,d){var p=d(6518),N=d(9039),k=d(8981),x=d(2777);p({target:"Date",proto:!0,arity:1,forced:N(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1})},{toJSON:function(M){var F=k(this),A=x(F,"number");return typeof A!="number"||isFinite(A)?F.toISOString():null}})},741:function(S){var O=Math.ceil,d=Math.floor;S.exports=Math.trunc||function(p){var N=+p;return(N>0?d:O)(N)}},744:function(S,O,d){var p=d(9565),N=d(9504),k=d(9228),x=d(8551),M=d(34),F=d(7750),A=d(2293),R=d(7829),I=d(8014),V=d(655),Y=d(5966),B=d(6682),ne=d(8429),Z=d(9039),re=ne.UNSUPPORTED_Y,ae=Math.min,ue=N([].push),le=N("".slice),me=!Z(function(){var pe=/(?:)/,ge=pe.exec;pe.exec=function(){return ge.apply(this,arguments)};var ke="ab".split(pe);return ke.length!==2||ke[0]!=="a"||ke[1]!=="b"}),Ne="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;k("split",function(pe,ge,ke){var Me="0".split(void 0,0).length?function(ye,Le){return ye===void 0&&Le===0?[]:p(ge,this,ye,Le)}:ge;return[function(ye,Le){var Te=F(this),Oe=M(ye)?Y(ye,pe):void 0;return Oe?p(Oe,ye,Te,Le):p(Me,V(Te),ye,Le)},function(ye,Le){var Te=x(this),Oe=V(ye);if(!Ne){var Qe=ke(Me,Te,Oe,Le,Me!==ge);if(Qe.done)return Qe.value}var ze=A(Te,RegExp),Fe=Te.unicode,Ve=(Te.ignoreCase?"i":"")+(Te.multiline?"m":"")+(Te.unicode?"u":"")+(re?"g":"y"),Be=new ze(re?"^(?:"+Te.source+")":Te,Ve),Ye=Le===void 0?4294967295:Le>>>0;if(Ye===0)return[];if(Oe.length===0)return B(Be,Oe)===null?[Oe]:[];for(var qe=0,Je=0,He=[];Je<Oe.length;){Be.lastIndex=re?0:Je;var Ie,We=B(Be,re?le(Oe,Je):Oe);if(We===null||(Ie=ae(I(Be.lastIndex+(re?Je:0)),Oe.length))===qe)Je=R(Oe,Je,Fe);else{if(ue(He,le(Oe,qe,Je)),He.length===Ye)return He;for(var et=1;et<=We.length-1;et++)if(ue(He,We[et]),He.length===Ye)return He;Je=qe=Ie}}return ue(He,le(Oe,qe)),He}]},Ne||!me,re)},757:function(S,O,d){var p=d(7751),N=d(4901),k=d(1625),x=d(7040),M=Object;S.exports=x?function(F){return typeof F=="symbol"}:function(F){var A=p("Symbol");return N(A)&&k(A.prototype,M(F))}},788:function(S,O,d){var p=d(34),N=d(2195),k=d(8227)("match");S.exports=function(x){var M;return p(x)&&((M=x[k])!==void 0?!!M:N(x)==="RegExp")}},825:function(S,O,d){var p=d(6518),N=d(7751),k=d(8745),x=d(566),M=d(5548),F=d(8551),A=d(34),R=d(2360),I=d(9039),V=N("Reflect","construct"),Y=Object.prototype,B=[].push,ne=I(function(){function ae(){}return!(V(function(){},[],ae)instanceof ae)}),Z=!I(function(){V(function(){})}),re=ne||Z;p({target:"Reflect",stat:!0,forced:re,sham:re},{construct:function(ae,ue){M(ae),F(ue);var le=arguments.length<3?ae:M(arguments[2]);if(Z&&!ne)return V(ae,ue,le);if(ae===le){switch(ue.length){case 0:return new ae;case 1:return new ae(ue[0]);case 2:return new ae(ue[0],ue[1]);case 3:return new ae(ue[0],ue[1],ue[2]);case 4:return new ae(ue[0],ue[1],ue[2],ue[3])}var me=[null];return k(B,me,ue),new(k(x,ae,me))}var Ne=le.prototype,pe=R(A(Ne)?Ne:Y),ge=k(ae,pe,ue);return A(ge)?ge:pe}})},851:function(S,O,d){var p=d(6955),N=d(5966),k=d(4117),x=d(6269),M=d(8227)("iterator");S.exports=function(F){if(!k(F))return N(F,M)||N(F,"@@iterator")||x[p(F)]}},926:function(S,O,d){var p=d(9306),N=d(8981),k=d(7055),x=d(6198),M=TypeError,F="Reduce of empty array with no initial value",A=function(R){return function(I,V,Y,B){var ne=N(I),Z=k(ne),re=x(ne);if(p(V),re===0&&Y<2)throw new M(F);var ae=R?re-1:0,ue=R?-1:1;if(Y<2)for(;;){if(ae in Z){B=Z[ae],ae+=ue;break}if(ae+=ue,R?ae<0:re<=ae)throw new M(F)}for(;R?ae>=0:re>ae;ae+=ue)ae in Z&&(B=V(B,Z[ae],ae,ne));return B}};S.exports={left:A(!1),right:A(!0)}},1034:function(S,O,d){var p=d(9565),N=d(9297),k=d(1625),x=d(5213),M=d(7979),F=RegExp.prototype;S.exports=x.correct?function(A){return A.flags}:function(A){return x.correct||!k(F,A)||N(A,"flags")?A.flags:p(M,A)}},1056:function(S,O,d){var p=d(4913).f;S.exports=function(N,k,x){x in N||p(N,x,{configurable:!0,get:function(){return k[x]},set:function(M){k[x]=M}})}},1072:function(S,O,d){var p=d(1828),N=d(8727);S.exports=Object.keys||function(k){return p(k,N)}},1088:function(S,O,d){var p=d(6518),N=d(9565),k=d(6395),x=d(350),M=d(4901),F=d(3994),A=d(2787),R=d(2967),I=d(687),V=d(6699),Y=d(6840),B=d(8227),ne=d(6269),Z=d(7657),re=x.PROPER,ae=x.CONFIGURABLE,ue=Z.IteratorPrototype,le=Z.BUGGY_SAFARI_ITERATORS,me=B("iterator"),Ne="keys",pe="values",ge="entries",ke=function(){return this};S.exports=function(Me,ye,Le,Te,Oe,Qe,ze){F(Le,ye,Te);var Fe,Ve,Be,Ye=function(it){if(it===Oe&&We)return We;if(!le&&it&&it in He)return He[it];switch(it){case Ne:case pe:case ge:return function(){return new Le(this,it)}}return function(){return new Le(this)}},qe=ye+" Iterator",Je=!1,He=Me.prototype,Ie=He[me]||He["@@iterator"]||Oe&&He[Oe],We=!le&&Ie||Ye(Oe),et=ye==="Array"&&He.entries||Ie;if(et&&(Fe=A(et.call(new Me)))!==Object.prototype&&Fe.next&&(k||A(Fe)===ue||(R?R(Fe,ue):M(Fe[me])||Y(Fe,me,ke)),I(Fe,qe,!0,!0),k&&(ne[qe]=ke)),re&&Oe===pe&&Ie&&Ie.name!==pe&&(!k&&ae?V(He,"name",pe):(Je=!0,We=function(){return N(Ie,this)})),Oe)if(Ve={values:Ye(pe),keys:Qe?We:Ye(Ne),entries:Ye(ge)},ze)for(Be in Ve)(le||Je||!(Be in He))&&Y(He,Be,Ve[Be]);else p({target:ye,proto:!0,forced:le||Je},Ve);return k&&!ze||He[me]===We||Y(He,me,We,{name:Oe}),ne[ye]=We,Ve}},1181:function(S,O,d){var p,N,k,x=d(8622),M=d(4576),F=d(34),A=d(6699),R=d(9297),I=d(7629),V=d(6119),Y=d(421),B="Object already initialized",ne=M.TypeError,Z=M.WeakMap;if(x||I.state){var re=I.state||(I.state=new Z);re.get=re.get,re.has=re.has,re.set=re.set,p=function(ue,le){if(re.has(ue))throw new ne(B);return le.facade=ue,re.set(ue,le),le},N=function(ue){return re.get(ue)||{}},k=function(ue){return re.has(ue)}}else{var ae=V("state");Y[ae]=!0,p=function(ue,le){if(R(ue,ae))throw new ne(B);return le.facade=ue,A(ue,ae,le),le},N=function(ue){return R(ue,ae)?ue[ae]:{}},k=function(ue){return R(ue,ae)}}S.exports={set:p,get:N,has:k,enforce:function(ue){return k(ue)?N(ue):p(ue,{})},getterFor:function(ue){return function(le){var me;if(!F(le)||(me=N(le)).type!==ue)throw new ne("Incompatible receiver, "+ue+" required");return me}}}},1240:function(S,O,d){var p=d(9504);S.exports=p(1.1.valueOf)},1278:function(S,O,d){var p=d(6518),N=d(3724),k=d(5031),x=d(5397),M=d(7347),F=d(4659);p({target:"Object",stat:!0,sham:!N},{getOwnPropertyDescriptors:function(A){for(var R,I,V=x(A),Y=M.f,B=k(V),ne={},Z=0;B.length>Z;)(I=Y(V,R=B[Z++]))!==void 0&&F(ne,R,I);return ne}})},1291:function(S,O,d){var p=d(741);S.exports=function(N){var k=+N;return k!=k||k===0?0:p(k)}},1296:function(S,O,d){var p=d(4495);S.exports=p&&!!Symbol.for&&!!Symbol.keyFor},1436:function(S,O,d){var p=d(8227)("match");S.exports=function(N){var k=/./;try{"/./"[N](k)}catch{try{return k[p]=!1,"/./"[N](k)}catch{}}return!1}},1469:function(S,O,d){var p=d(7433);S.exports=function(N,k){return new(p(N))(k===0?0:k)}},1480:function(S,O,d){var p=d(6518),N=d(9039),k=d(298).f;p({target:"Object",stat:!0,forced:N(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:k})},1510:function(S,O,d){var p=d(6518),N=d(7751),k=d(9297),x=d(655),M=d(5745),F=d(1296),A=M("string-to-symbol-registry"),R=M("symbol-to-string-registry");p({target:"Symbol",stat:!0,forced:!F},{for:function(I){var V=x(I);if(k(A,V))return A[V];var Y=N("Symbol")(V);return A[V]=Y,R[Y]=V,Y}})},1625:function(S,O,d){var p=d(9504);S.exports=p({}.isPrototypeOf)},1699:function(S,O,d){var p=d(6518),N=d(9504),k=d(5749),x=d(7750),M=d(655),F=d(1436),A=N("".indexOf);p({target:"String",proto:!0,forced:!F("includes")},{includes:function(R){return!!~A(M(x(this)),M(k(R)),arguments.length>1?arguments[1]:void 0)}})},1761:function(S,O,d){var p=d(9565),N=d(9504),k=d(9228),x=d(8551),M=d(34),F=d(8014),A=d(655),R=d(7750),I=d(5966),V=d(7829),Y=d(1034),B=d(6682),ne=N("".indexOf);k("match",function(Z,re,ae){return[function(ue){var le=R(this),me=M(ue)?I(ue,Z):void 0;return me?p(me,ue,le):new RegExp(ue)[Z](A(le))},function(ue){var le=x(this),me=A(ue),Ne=ae(re,le,me);if(Ne.done)return Ne.value;var pe=A(Y(le));if(ne(pe,"g")===-1)return B(le,me);var ge=ne(pe,"u")!==-1;le.lastIndex=0;for(var ke,Me=[],ye=0;(ke=B(le,me))!==null;){var Le=A(ke[0]);Me[ye]=Le,Le===""&&(le.lastIndex=V(me,F(le.lastIndex),ge)),ye++}return ye===0?null:Me}]})},1828:function(S,O,d){var p=d(9504),N=d(9297),k=d(5397),x=d(9617).indexOf,M=d(421),F=p([].push);S.exports=function(A,R){var I,V=k(A),Y=0,B=[];for(I in V)!N(M,I)&&N(V,I)&&F(B,I);for(;R.length>Y;)N(V,I=R[Y++])&&(~x(B,I)||F(B,I));return B}},1951:function(S,O,d){var p=d(8227);O.f=p},2008:function(S,O,d){var p=d(6518),N=d(9213).filter;p({target:"Array",proto:!0,forced:!d(597)("filter")},{filter:function(k){return N(this,k,arguments.length>1?arguments[1]:void 0)}})},2010:function(S,O,d){var p=d(3724),N=d(350).EXISTS,k=d(9504),x=d(2106),M=Function.prototype,F=k(M.toString),A=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,R=k(A.exec);p&&!N&&x(M,"name",{configurable:!0,get:function(){try{return R(A,F(this))[1]}catch{return""}}})},2062:function(S,O,d){var p=d(6518),N=d(9213).map;p({target:"Array",proto:!0,forced:!d(597)("map")},{map:function(k){return N(this,k,arguments.length>1?arguments[1]:void 0)}})},2087:function(S,O,d){var p=d(34),N=Math.floor;S.exports=Number.isInteger||function(k){return!p(k)&&isFinite(k)&&N(k)===k}},2106:function(S,O,d){var p=d(283),N=d(4913);S.exports=function(k,x,M){return M.get&&p(M.get,x,{getter:!0}),M.set&&p(M.set,x,{setter:!0}),N.f(k,x,M)}},2140:function(S,O,d){var p={};p[d(8227)("toStringTag")]="z",S.exports=String(p)==="[object z]"},2195:function(S,O,d){var p=d(9504),N=p({}.toString),k=p("".slice);S.exports=function(x){return k(N(x),8,-1)}},2211:function(S,O,d){var p=d(9039);S.exports=!p(function(){function N(){}return N.prototype.constructor=null,Object.getPrototypeOf(new N)!==N.prototype})},2259:function(S,O,d){d(511)("iterator")},2293:function(S,O,d){var p=d(8551),N=d(5548),k=d(4117),x=d(8227)("species");S.exports=function(M,F){var A,R=p(M).constructor;return R===void 0||k(A=p(R)[x])?F:N(A)}},2360:function(S,O,d){var p,N=d(8551),k=d(6801),x=d(8727),M=d(421),F=d(397),A=d(4055),R=d(6119),I="prototype",V="script",Y=R("IE_PROTO"),B=function(){},ne=function(ae){return"<"+V+">"+ae+"</"+V+">"},Z=function(ae){ae.write(ne("")),ae.close();var ue=ae.parentWindow.Object;return ae=null,ue},re=function(){try{p=new ActiveXObject("htmlfile")}catch{}var ae,ue,le;re=typeof document<"u"?document.domain&&p?Z(p):(ue=A("iframe"),le="java"+V+":",ue.style.display="none",F.appendChild(ue),ue.src=String(le),(ae=ue.contentWindow.document).open(),ae.write(ne("document.F=Object")),ae.close(),ae.F):Z(p);for(var me=x.length;me--;)delete re[I][x[me]];return re()};M[Y]=!0,S.exports=Object.create||function(ae,ue){var le;return ae!==null?(B[I]=N(ae),le=new B,B[I]=null,le[Y]=ae):le=re(),ue===void 0?le:k.f(le,ue)}},2478:function(S,O,d){var p=d(9504),N=d(8981),k=Math.floor,x=p("".charAt),M=p("".replace),F=p("".slice),A=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,R=/\$([$&'`]|\d{1,2})/g;S.exports=function(I,V,Y,B,ne,Z){var re=Y+I.length,ae=B.length,ue=R;return ne!==void 0&&(ne=N(ne),ue=A),M(Z,ue,function(le,me){var Ne;switch(x(me,0)){case"$":return"$";case"&":return I;case"`":return F(V,0,Y);case"'":return F(V,re);case"<":Ne=ne[F(me,1,-1)];break;default:var pe=+me;if(pe===0)return le;if(pe>ae){var ge=k(pe/10);return ge===0?le:ge<=ae?B[ge-1]===void 0?x(me,1):B[ge-1]+x(me,1):le}Ne=B[pe-1]}return Ne===void 0?"":Ne})}},2529:function(S){S.exports=function(O,d){return{value:O,done:d}}},2551:function(S,O,d){var p=d(6395),N=d(4576),k=d(9039),x=d(3607);S.exports=p||!k(function(){if(!(x&&x<535)){var M=Math.random();__defineSetter__.call(null,M,function(){}),delete N[M]}})},2637:function(S,O,d){d(6518)({target:"Number",stat:!0},{isInteger:d(2087)})},2675:function(S,O,d){d(6761),d(1510),d(7812),d(3110),d(9773)},2712:function(S,O,d){var p=d(6518),N=d(926).left,k=d(4598),x=d(9519);p({target:"Array",proto:!0,forced:!d(6193)&&x>79&&x<83||!k("reduce")},{reduce:function(M){var F=arguments.length;return N(this,M,F,F>1?arguments[1]:void 0)}})},2762:function(S,O,d){var p=d(6518),N=d(3802).trim;p({target:"String",proto:!0,forced:d(706)("trim")},{trim:function(){return N(this)}})},2777:function(S,O,d){var p=d(9565),N=d(34),k=d(757),x=d(5966),M=d(4270),F=d(8227),A=TypeError,R=F("toPrimitive");S.exports=function(I,V){if(!N(I)||k(I))return I;var Y,B=x(I,R);if(B){if(V===void 0&&(V="default"),Y=p(B,I,V),!N(Y)||k(Y))return Y;throw new A("Can't convert object to primitive value")}return V===void 0&&(V="number"),M(I,V)}},2787:function(S,O,d){var p=d(9297),N=d(4901),k=d(8981),x=d(6119),M=d(2211),F=x("IE_PROTO"),A=Object,R=A.prototype;S.exports=M?A.getPrototypeOf:function(I){var V=k(I);if(p(V,F))return V[F];var Y=V.constructor;return N(Y)&&V instanceof Y?Y.prototype:V instanceof A?R:null}},2796:function(S,O,d){var p=d(9039),N=d(4901),k=/#|\.prototype\./,x=function(I,V){var Y=F[M(I)];return Y===R||Y!==A&&(N(V)?p(V):!!V)},M=x.normalize=function(I){return String(I).replace(k,".").toLowerCase()},F=x.data={},A=x.NATIVE="N",R=x.POLYFILL="P";S.exports=x},2839:function(S,O,d){var p=d(4576).navigator,N=p&&p.userAgent;S.exports=N?String(N):""},2892:function(S,O,d){var p=d(6518),N=d(6395),k=d(3724),x=d(4576),M=d(9167),F=d(9504),A=d(2796),R=d(9297),I=d(3167),V=d(1625),Y=d(757),B=d(2777),ne=d(9039),Z=d(8480).f,re=d(7347).f,ae=d(4913).f,ue=d(1240),le=d(3802).trim,me="Number",Ne=x[me],pe=M[me],ge=Ne.prototype,ke=x.TypeError,Me=F("".slice),ye=F("".charCodeAt),Le=function(ze){var Fe,Ve,Be,Ye,qe,Je,He,Ie,We=B(ze,"number");if(Y(We))throw new ke("Cannot convert a Symbol value to a number");if(typeof We=="string"&&We.length>2){if(We=le(We),(Fe=ye(We,0))===43||Fe===45){if((Ve=ye(We,2))===88||Ve===120)return NaN}else if(Fe===48){switch(ye(We,1)){case 66:case 98:Be=2,Ye=49;break;case 79:case 111:Be=8,Ye=55;break;default:return+We}for(Je=(qe=Me(We,2)).length,He=0;He<Je;He++)if((Ie=ye(qe,He))<48||Ie>Ye)return NaN;return parseInt(qe,Be)}}return+We},Te=A(me,!Ne(" 0o1")||!Ne("0b1")||Ne("+0x1")),Oe=function(ze){var Fe,Ve=arguments.length<1?0:Ne(function(Be){var Ye=B(Be,"number");return typeof Ye=="bigint"?Ye:Le(Ye)}(ze));return V(ge,Fe=this)&&ne(function(){ue(Fe)})?I(Object(Ve),this,Oe):Ve};Oe.prototype=ge,Te&&!N&&(ge.constructor=Oe),p({global:!0,constructor:!0,wrap:!0,forced:Te},{Number:Oe});var Qe=function(ze,Fe){for(var Ve,Be=k?Z(Fe):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Ye=0;Be.length>Ye;Ye++)R(Fe,Ve=Be[Ye])&&!R(ze,Ve)&&ae(ze,Ve,re(Fe,Ve))};N&&pe&&Qe(M[me],pe),(Te||N)&&Qe(M[me],Ne)},2953:function(S,O,d){var p=d(4576),N=d(7400),k=d(9296),x=d(3792),M=d(6699),F=d(687),A=d(8227)("iterator"),R=x.values,I=function(Y,B){if(Y){if(Y[A]!==R)try{M(Y,A,R)}catch{Y[A]=R}if(F(Y,B,!0),N[B]){for(var ne in x)if(Y[ne]!==x[ne])try{M(Y,ne,x[ne])}catch{Y[ne]=x[ne]}}}};for(var V in N)I(p[V]&&p[V].prototype,V);I(k,"DOMTokenList")},2967:function(S,O,d){var p=d(6706),N=d(34),k=d(7750),x=d(3506);S.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var M,F=!1,A={};try{(M=p(Object.prototype,"__proto__","set"))(A,[]),F=A instanceof Array}catch{}return function(R,I){return k(R),x(I),N(R)&&(F?M(R,I):R.__proto__=I),R}}():void 0)},3110:function(S,O,d){var p=d(6518),N=d(7751),k=d(8745),x=d(9565),M=d(9504),F=d(9039),A=d(4901),R=d(757),I=d(7680),V=d(6933),Y=d(4495),B=String,ne=N("JSON","stringify"),Z=M(/./.exec),re=M("".charAt),ae=M("".charCodeAt),ue=M("".replace),le=M(1.1.toString),me=/[\uD800-\uDFFF]/g,Ne=/^[\uD800-\uDBFF]$/,pe=/^[\uDC00-\uDFFF]$/,ge=!Y||F(function(){var Le=N("Symbol")("stringify detection");return ne([Le])!=="[null]"||ne({a:Le})!=="{}"||ne(Object(Le))!=="{}"}),ke=F(function(){return ne("\uDF06\uD834")!=='"\\udf06\\ud834"'||ne("\uDEAD")!=='"\\udead"'}),Me=function(Le,Te){var Oe=I(arguments),Qe=V(Te);if(A(Qe)||Le!==void 0&&!R(Le))return Oe[1]=function(ze,Fe){if(A(Qe)&&(Fe=x(Qe,this,B(ze),Fe)),!R(Fe))return Fe},k(ne,null,Oe)},ye=function(Le,Te,Oe){var Qe=re(Oe,Te-1),ze=re(Oe,Te+1);return Z(Ne,Le)&&!Z(pe,ze)||Z(pe,Le)&&!Z(Ne,Qe)?"\\u"+le(ae(Le,0),16):Le};ne&&p({target:"JSON",stat:!0,arity:3,forced:ge||ke},{stringify:function(Le,Te,Oe){var Qe=I(arguments),ze=k(ge?Me:ne,null,Qe);return ke&&typeof ze=="string"?ue(ze,me,ye):ze}})},3167:function(S,O,d){var p=d(4901),N=d(34),k=d(2967);S.exports=function(x,M,F){var A,R;return k&&p(A=M.constructor)&&A!==F&&N(R=A.prototype)&&R!==F.prototype&&k(x,R),x}},3179:function(S,O,d){var p=d(2140),N=d(6955);S.exports=p?{}.toString:function(){return"[object "+N(this)+"]"}},3392:function(S,O,d){var p=d(9504),N=0,k=Math.random(),x=p(1.1.toString);S.exports=function(M){return"Symbol("+(M===void 0?"":M)+")_"+x(++N+k,36)}},3418:function(S,O,d){var p=d(6518),N=d(7916);p({target:"Array",stat:!0,forced:!d(4428)(function(k){Array.from(k)})},{from:N})},3500:function(S,O,d){var p=d(4576),N=d(7400),k=d(9296),x=d(235),M=d(6699),F=function(R){if(R&&R.forEach!==x)try{M(R,"forEach",x)}catch{R.forEach=x}};for(var A in N)N[A]&&F(p[A]&&p[A].prototype);F(k)},3506:function(S,O,d){var p=d(3925),N=String,k=TypeError;S.exports=function(x){if(p(x))return x;throw new k("Can't set "+N(x)+" as a prototype")}},3517:function(S,O,d){var p=d(9504),N=d(9039),k=d(4901),x=d(6955),M=d(7751),F=d(3706),A=function(){},R=M("Reflect","construct"),I=/^\s*(?:class|function)\b/,V=p(I.exec),Y=!I.test(A),B=function(Z){if(!k(Z))return!1;try{return R(A,[],Z),!0}catch{return!1}},ne=function(Z){if(!k(Z))return!1;switch(x(Z)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Y||!!V(I,F(Z))}catch{return!0}};ne.sham=!0,S.exports=!R||N(function(){var Z;return B(B.call)||!B(Object)||!B(function(){Z=!0})||Z})?ne:B},3607:function(S,O,d){var p=d(2839).match(/AppleWebKit\/(\d+)\./);S.exports=!!p&&+p[1]},3635:function(S,O,d){var p=d(9039),N=d(4576).RegExp;S.exports=p(function(){var k=N(".","s");return!(k.dotAll&&k.test(`
`)&&k.flags==="s")})},3640:function(S,O,d){var p=d(8551),N=d(4270),k=TypeError;S.exports=function(x){if(p(this),x==="string"||x==="default")x="string";else if(x!=="number")throw new k("Incorrect hint");return N(this,x)}},3706:function(S,O,d){var p=d(9504),N=d(4901),k=d(7629),x=p(Function.toString);N(k.inspectSource)||(k.inspectSource=function(M){return x(M)}),S.exports=k.inspectSource},3709:function(S,O,d){var p=d(2839).match(/firefox\/(\d+)/i);S.exports=!!p&&+p[1]},3717:function(S,O){O.f=Object.getOwnPropertySymbols},3724:function(S,O,d){var p=d(9039);S.exports=!p(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},3763:function(S,O,d){var p=d(2839);S.exports=/MSIE|Trident/.test(p)},3792:function(S,O,d){var p=d(5397),N=d(6469),k=d(6269),x=d(1181),M=d(4913).f,F=d(1088),A=d(2529),R=d(6395),I=d(3724),V="Array Iterator",Y=x.set,B=x.getterFor(V);S.exports=F(Array,"Array",function(Z,re){Y(this,{type:V,target:p(Z),index:0,kind:re})},function(){var Z=B(this),re=Z.target,ae=Z.index++;if(!re||ae>=re.length)return Z.target=null,A(void 0,!0);switch(Z.kind){case"keys":return A(ae,!1);case"values":return A(re[ae],!1)}return A([ae,re[ae]],!1)},"values");var ne=k.Arguments=k.Array;if(N("keys"),N("values"),N("entries"),!R&&I&&ne.name!=="values")try{M(ne,"name",{value:"values"})}catch{}},3802:function(S,O,d){var p=d(9504),N=d(7750),k=d(655),x=d(7452),M=p("".replace),F=RegExp("^["+x+"]+"),A=RegExp("(^|[^"+x+"])["+x+"]+$"),R=function(I){return function(V){var Y=k(N(V));return 1&I&&(Y=M(Y,F,"")),2&I&&(Y=M(Y,A,"$1")),Y}};S.exports={start:R(1),end:R(2),trim:R(3)}},3851:function(S,O,d){var p=d(6518),N=d(9039),k=d(5397),x=d(7347).f,M=d(3724);p({target:"Object",stat:!0,forced:!M||N(function(){x(1)}),sham:!M},{getOwnPropertyDescriptor:function(F,A){return x(k(F),A)}})},3925:function(S,O,d){var p=d(34);S.exports=function(N){return p(N)||N===null}},3994:function(S,O,d){var p=d(7657).IteratorPrototype,N=d(2360),k=d(6980),x=d(687),M=d(6269),F=function(){return this};S.exports=function(A,R,I,V){var Y=R+" Iterator";return A.prototype=N(p,{next:k(+!V,I)}),x(A,Y,!1,!0),M[Y]=F,A}},4055:function(S,O,d){var p=d(4576),N=d(34),k=p.document,x=N(k)&&N(k.createElement);S.exports=function(M){return x?k.createElement(M):{}}},4117:function(S){S.exports=function(O){return O==null}},4209:function(S,O,d){var p=d(8227),N=d(6269),k=p("iterator"),x=Array.prototype;S.exports=function(M){return M!==void 0&&(N.Array===M||x[k]===M)}},4213:function(S,O,d){var p=d(3724),N=d(9504),k=d(9565),x=d(9039),M=d(1072),F=d(3717),A=d(8773),R=d(8981),I=d(7055),V=Object.assign,Y=Object.defineProperty,B=N([].concat);S.exports=!V||x(function(){if(p&&V({b:1},V(Y({},"a",{enumerable:!0,get:function(){Y(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var ne={},Z={},re=Symbol("assign detection"),ae="abcdefghijklmnopqrst";return ne[re]=7,ae.split("").forEach(function(ue){Z[ue]=ue}),V({},ne)[re]!==7||M(V({},Z)).join("")!==ae})?function(ne,Z){for(var re=R(ne),ae=arguments.length,ue=1,le=F.f,me=A.f;ae>ue;)for(var Ne,pe=I(arguments[ue++]),ge=le?B(M(pe),le(pe)):M(pe),ke=ge.length,Me=0;ke>Me;)Ne=ge[Me++],p&&!k(me,pe,Ne)||(re[Ne]=pe[Ne]);return re}:V},4215:function(S,O,d){var p=d(4576),N=d(2839),k=d(2195),x=function(M){return N.slice(0,M.length)===M};S.exports=x("Bun/")?"BUN":x("Cloudflare-Workers")?"CLOUDFLARE":x("Deno/")?"DENO":x("Node.js/")?"NODE":p.Bun&&typeof Bun.version=="string"?"BUN":p.Deno&&typeof Deno.version=="object"?"DENO":k(p.process)==="process"?"NODE":p.window&&p.document?"BROWSER":"REST"},4270:function(S,O,d){var p=d(9565),N=d(4901),k=d(34),x=TypeError;S.exports=function(M,F){var A,R;if(F==="string"&&N(A=M.toString)&&!k(R=p(A,M))||N(A=M.valueOf)&&!k(R=p(A,M))||F!=="string"&&N(A=M.toString)&&!k(R=p(A,M)))return R;throw new x("Can't convert object to primitive value")}},4376:function(S,O,d){var p=d(2195);S.exports=Array.isArray||function(N){return p(N)==="Array"}},4423:function(S,O,d){var p=d(6518),N=d(9617).includes,k=d(9039),x=d(6469);p({target:"Array",proto:!0,forced:k(function(){return!Array(1).includes()})},{includes:function(M){return N(this,M,arguments.length>1?arguments[1]:void 0)}}),x("includes")},4428:function(S,O,d){var p=d(8227)("iterator"),N=!1;try{var k=0,x={next:function(){return{done:!!k++}},return:function(){N=!0}};x[p]=function(){return this},Array.from(x,function(){throw 2})}catch{}S.exports=function(M,F){try{if(!F&&!N)return!1}catch{return!1}var A=!1;try{var R={};R[p]=function(){return{next:function(){return{done:A=!0}}}},M(R)}catch{}return A}},4488:function(S,O,d){var p=d(7680),N=Math.floor,k=function(x,M){var F=x.length;if(F<8)for(var A,R,I=1;I<F;){for(R=I,A=x[I];R&&M(x[R-1],A)>0;)x[R]=x[--R];R!==I++&&(x[R]=A)}else for(var V=N(F/2),Y=k(p(x,0,V),M),B=k(p(x,V),M),ne=Y.length,Z=B.length,re=0,ae=0;re<ne||ae<Z;)x[re+ae]=re<ne&&ae<Z?M(Y[re],B[ae])<=0?Y[re++]:B[ae++]:re<ne?Y[re++]:B[ae++];return x};S.exports=k},4495:function(S,O,d){var p=d(9519),N=d(9039),k=d(4576).String;S.exports=!!Object.getOwnPropertySymbols&&!N(function(){var x=Symbol("symbol detection");return!k(x)||!(Object(x)instanceof Symbol)||!Symbol.sham&&p&&p<41})},4527:function(S,O,d){var p=d(3724),N=d(4376),k=TypeError,x=Object.getOwnPropertyDescriptor,M=p&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(F){return F instanceof TypeError}}();S.exports=M?function(F,A){if(N(F)&&!x(F,"length").writable)throw new k("Cannot set read only .length");return F.length=A}:function(F,A){return F.length=A}},4554:function(S,O,d){var p=d(6518),N=d(8981),k=d(5610),x=d(1291),M=d(6198),F=d(4527),A=d(6837),R=d(1469),I=d(4659),V=d(4606),Y=d(597)("splice"),B=Math.max,ne=Math.min;p({target:"Array",proto:!0,forced:!Y},{splice:function(Z,re){var ae,ue,le,me,Ne,pe,ge=N(this),ke=M(ge),Me=k(Z,ke),ye=arguments.length;for(ye===0?ae=ue=0:ye===1?(ae=0,ue=ke-Me):(ae=ye-2,ue=ne(B(x(re),0),ke-Me)),A(ke+ae-ue),le=R(ge,ue),me=0;me<ue;me++)(Ne=Me+me)in ge&&I(le,me,ge[Ne]);if(le.length=ue,ae<ue){for(me=Me;me<ke-ue;me++)pe=me+ae,(Ne=me+ue)in ge?ge[pe]=ge[Ne]:V(ge,pe);for(me=ke;me>ke-ue+ae;me--)V(ge,me-1)}else if(ae>ue)for(me=ke-ue;me>Me;me--)pe=me+ae-1,(Ne=me+ue-1)in ge?ge[pe]=ge[Ne]:V(ge,pe);for(me=0;me<ae;me++)ge[me+Me]=arguments[me+2];return F(ge,ke-ue+ae),le}})},4576:function(S,O,d){var p=function(N){return N&&N.Math===Math&&N};S.exports=p(typeof globalThis=="object"&&globalThis)||p(typeof window=="object"&&window)||p(typeof self=="object"&&self)||p(typeof d.g=="object"&&d.g)||p(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},4598:function(S,O,d){var p=d(9039);S.exports=function(N,k){var x=[][N];return!!x&&p(function(){x.call(null,k||function(){return 1},1)})}},4606:function(S,O,d){var p=d(6823),N=TypeError;S.exports=function(k,x){if(!delete k[x])throw new N("Cannot delete property "+p(x)+" of "+p(k))}},4659:function(S,O,d){var p=d(3724),N=d(4913),k=d(6980);S.exports=function(x,M,F){p?N.f(x,M,k(0,F)):x[M]=F}},4782:function(S,O,d){var p=d(6518),N=d(4376),k=d(3517),x=d(34),M=d(5610),F=d(6198),A=d(5397),R=d(4659),I=d(8227),V=d(597),Y=d(7680),B=V("slice"),ne=I("species"),Z=Array,re=Math.max;p({target:"Array",proto:!0,forced:!B},{slice:function(ae,ue){var le,me,Ne,pe=A(this),ge=F(pe),ke=M(ae,ge),Me=M(ue===void 0?ge:ue,ge);if(N(pe)&&(le=pe.constructor,(k(le)&&(le===Z||N(le.prototype))||x(le)&&(le=le[ne])===null)&&(le=void 0),le===Z||le===void 0))return Y(pe,ke,Me);for(me=new(le===void 0?Z:le)(re(Me-ke,0)),Ne=0;ke<Me;ke++,Ne++)ke in pe&&R(me,Ne,pe[ke]);return me.length=Ne,me}})},4864:function(S,O,d){var p=d(3724),N=d(4576),k=d(9504),x=d(2796),M=d(3167),F=d(6699),A=d(2360),R=d(8480).f,I=d(1625),V=d(788),Y=d(655),B=d(1034),ne=d(8429),Z=d(1056),re=d(6840),ae=d(9039),ue=d(9297),le=d(1181).enforce,me=d(7633),Ne=d(8227),pe=d(3635),ge=d(8814),ke=Ne("match"),Me=N.RegExp,ye=Me.prototype,Le=N.SyntaxError,Te=k(ye.exec),Oe=k("".charAt),Qe=k("".replace),ze=k("".indexOf),Fe=k("".slice),Ve=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Be=/a/g,Ye=/a/g,qe=new Me(Be)!==Be,Je=ne.MISSED_STICKY,He=ne.UNSUPPORTED_Y;if(x("RegExp",p&&(!qe||Je||pe||ge||ae(function(){return Ye[ke]=!1,Me(Be)!==Be||Me(Ye)===Ye||String(Me(Be,"i"))!=="/a/i"})))){for(var Ie=function(it,pt){var At,Ut,xn,qn,In,Qt,Kn=I(ye,this),tn=V(it),Qn=pt===void 0,Gn=[],z=it;if(!Kn&&tn&&Qn&&it.constructor===Ie)return it;if((tn||I(ye,it))&&(it=it.source,Qn&&(pt=B(z))),it=it===void 0?"":Y(it),pt=pt===void 0?"":Y(pt),z=it,pe&&"dotAll"in Be&&(Ut=!!pt&&ze(pt,"s")>-1)&&(pt=Qe(pt,/s/g,"")),At=pt,Je&&"sticky"in Be&&(xn=!!pt&&ze(pt,"y")>-1)&&He&&(pt=Qe(pt,/y/g,"")),ge&&(qn=function(de){for(var je,De=de.length,be=0,Se="",Ee=[],Ke=A(null),Ht=!1,Jn=!1,Wt=0,Ue="";be<=De;be++){if((je=Oe(de,be))==="\\")je+=Oe(de,++be);else if(je==="]")Ht=!1;else if(!Ht)switch(!0){case je==="[":Ht=!0;break;case je==="(":if(Se+=je,Fe(de,be+1,be+3)==="?:")continue;Te(Ve,Fe(de,be+1))&&(be+=2,Jn=!0),Wt++;continue;case(je===">"&&Jn):if(Ue===""||ue(Ke,Ue))throw new Le("Invalid capture group name");Ke[Ue]=!0,Ee[Ee.length]=[Ue,Wt],Jn=!1,Ue="";continue}Jn?Ue+=je:Se+=je}return[Se,Ee]}(it),it=qn[0],Gn=qn[1]),In=M(Me(it,pt),Kn?this:ye,Ie),(Ut||xn||Gn.length)&&(Qt=le(In),Ut&&(Qt.dotAll=!0,Qt.raw=Ie(function(de){for(var je,De=de.length,be=0,Se="",Ee=!1;be<=De;be++)(je=Oe(de,be))!=="\\"?Ee||je!=="."?(je==="["?Ee=!0:je==="]"&&(Ee=!1),Se+=je):Se+="[\\s\\S]":Se+=je+Oe(de,++be);return Se}(it),At)),xn&&(Qt.sticky=!0),Gn.length&&(Qt.groups=Gn)),it!==z)try{F(In,"source",z===""?"(?:)":z)}catch{}return In},We=R(Me),et=0;We.length>et;)Z(Ie,Me,We[et++]);ye.constructor=Ie,Ie.prototype=ye,re(N,"RegExp",Ie,{constructor:!0})}me("RegExp")},4901:function(S){var O=typeof document=="object"&&document.all;S.exports=O===void 0&&O!==void 0?function(d){return typeof d=="function"||d===O}:function(d){return typeof d=="function"}},4913:function(S,O,d){var p=d(3724),N=d(5917),k=d(8686),x=d(8551),M=d(6969),F=TypeError,A=Object.defineProperty,R=Object.getOwnPropertyDescriptor,I="enumerable",V="configurable",Y="writable";O.f=p?k?function(B,ne,Z){if(x(B),ne=M(ne),x(Z),typeof B=="function"&&ne==="prototype"&&"value"in Z&&Y in Z&&!Z[Y]){var re=R(B,ne);re&&re[Y]&&(B[ne]=Z.value,Z={configurable:V in Z?Z[V]:re[V],enumerable:I in Z?Z[I]:re[I],writable:!1})}return A(B,ne,Z)}:A:function(B,ne,Z){if(x(B),ne=M(ne),x(Z),N)try{return A(B,ne,Z)}catch{}if("get"in Z||"set"in Z)throw new F("Accessors not supported");return"value"in Z&&(B[ne]=Z.value),B}},5031:function(S,O,d){var p=d(7751),N=d(9504),k=d(8480),x=d(3717),M=d(8551),F=N([].concat);S.exports=p("Reflect","ownKeys")||function(A){var R=k.f(M(A)),I=x.f;return I?F(R,I(A)):R}},5213:function(S,O,d){var p=d(4576),N=d(9039),k=p.RegExp,x=!N(function(){var M=!0;try{k(".","d")}catch{M=!1}var F={},A="",R=M?"dgimsy":"gimsy",I=function(B,ne){Object.defineProperty(F,B,{get:function(){return A+=ne,!0}})},V={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var Y in M&&(V.hasIndices="d"),V)I(Y,V[Y]);return Object.getOwnPropertyDescriptor(k.prototype,"flags").get.call(F)!==R||A!==R});S.exports={correct:x}},5276:function(S,O,d){var p=d(6518),N=d(7476),k=d(9617).indexOf,x=d(4598),M=N([].indexOf),F=!!M&&1/M([1],1,-0)<0;p({target:"Array",proto:!0,forced:F||!x("indexOf")},{indexOf:function(A){var R=arguments.length>1?arguments[1]:void 0;return F?M(this,A,R)||0:k(this,A,R)}})},5397:function(S,O,d){var p=d(7055),N=d(7750);S.exports=function(k){return p(N(k))}},5440:function(S,O,d){var p=d(8745),N=d(9565),k=d(9504),x=d(9228),M=d(9039),F=d(8551),A=d(4901),R=d(34),I=d(1291),V=d(8014),Y=d(655),B=d(7750),ne=d(7829),Z=d(5966),re=d(2478),ae=d(1034),ue=d(6682),le=d(8227)("replace"),me=Math.max,Ne=Math.min,pe=k([].concat),ge=k([].push),ke=k("".indexOf),Me=k("".slice),ye="a".replace(/./,"$0")==="$0",Le=!!/./[le]&&/./[le]("a","$0")==="";x("replace",function(Te,Oe,Qe){var ze=Le?"$":"$0";return[function(Fe,Ve){var Be=B(this),Ye=R(Fe)?Z(Fe,le):void 0;return Ye?N(Ye,Fe,Be,Ve):N(Oe,Y(Be),Fe,Ve)},function(Fe,Ve){var Be=F(this),Ye=Y(Fe);if(typeof Ve=="string"&&ke(Ve,ze)===-1&&ke(Ve,"$<")===-1){var qe=Qe(Oe,Be,Ye,Ve);if(qe.done)return qe.value}var Je=A(Ve);Je||(Ve=Y(Ve));var He,Ie=Y(ae(Be)),We=ke(Ie,"g")!==-1;We&&(He=ke(Ie,"u")!==-1,Be.lastIndex=0);for(var et,it=[];(et=ue(Be,Ye))!==null&&(ge(it,et),We);)Y(et[0])===""&&(Be.lastIndex=ne(Ye,V(Be.lastIndex),He));for(var pt,At="",Ut=0,xn=0;xn<it.length;xn++){for(var qn,In=Y((et=it[xn])[0]),Qt=me(Ne(I(et.index),Ye.length),0),Kn=[],tn=1;tn<et.length;tn++)ge(Kn,(pt=et[tn])===void 0?pt:String(pt));var Qn=et.groups;if(Je){var Gn=pe([In],Kn,Qt,Ye);Qn!==void 0&&ge(Gn,Qn),qn=Y(p(Ve,void 0,Gn))}else qn=re(In,Ye,Qt,Kn,Qn,Ve);Qt>=Ut&&(At+=Me(Ye,Ut,Qt)+qn,Ut=Qt+In.length)}return At+Me(Ye,Ut)}]},!!M(function(){var Te=/./;return Te.exec=function(){var Oe=[];return Oe.groups={a:"7"},Oe},"".replace(Te,"$<a>")!=="7"})||!ye||Le)},5548:function(S,O,d){var p=d(3517),N=d(6823),k=TypeError;S.exports=function(x){if(p(x))return x;throw new k(N(x)+" is not a constructor")}},5610:function(S,O,d){var p=d(1291),N=Math.max,k=Math.min;S.exports=function(x,M){var F=p(x);return F<0?N(F+M,0):k(F,M)}},5700:function(S,O,d){var p=d(511),N=d(8242);p("toPrimitive"),N()},5745:function(S,O,d){var p=d(7629);S.exports=function(N,k){return p[N]||(p[N]=k||{})}},5749:function(S,O,d){var p=d(788),N=TypeError;S.exports=function(k){if(p(k))throw new N("The method doesn't accept regular expressions");return k}},5917:function(S,O,d){var p=d(3724),N=d(9039),k=d(4055);S.exports=!p&&!N(function(){return Object.defineProperty(k("div"),"a",{get:function(){return 7}}).a!==7})},5966:function(S,O,d){var p=d(9306),N=d(4117);S.exports=function(k,x){var M=k[x];return N(M)?void 0:p(M)}},6080:function(S,O,d){var p=d(7476),N=d(9306),k=d(616),x=p(p.bind);S.exports=function(M,F){return N(M),F===void 0?M:k?x(M,F):function(){return M.apply(F,arguments)}}},6099:function(S,O,d){var p=d(2140),N=d(6840),k=d(3179);p||N(Object.prototype,"toString",k,{unsafe:!0})},6119:function(S,O,d){var p=d(5745),N=d(3392),k=p("keys");S.exports=function(x){return k[x]||(k[x]=N(x))}},6193:function(S,O,d){var p=d(4215);S.exports=p==="NODE"},6198:function(S,O,d){var p=d(8014);S.exports=function(N){return p(N.length)}},6269:function(S){S.exports={}},6319:function(S,O,d){var p=d(8551),N=d(9539);S.exports=function(k,x,M,F){try{return F?x(p(M)[0],M[1]):x(M)}catch(A){N(k,"throw",A)}}},6395:function(S){S.exports=!1},6469:function(S,O,d){var p=d(8227),N=d(2360),k=d(4913).f,x=p("unscopables"),M=Array.prototype;M[x]===void 0&&k(M,x,{configurable:!0,value:N(null)}),S.exports=function(F){M[x][F]=!0}},6518:function(S,O,d){var p=d(4576),N=d(7347).f,k=d(6699),x=d(6840),M=d(9433),F=d(7740),A=d(2796);S.exports=function(R,I){var V,Y,B,ne,Z,re=R.target,ae=R.global,ue=R.stat;if(V=ae?p:ue?p[re]||M(re,{}):p[re]&&p[re].prototype)for(Y in I){if(ne=I[Y],B=R.dontCallGetSet?(Z=N(V,Y))&&Z.value:V[Y],!A(ae?Y:re+(ue?".":"#")+Y,R.forced)&&B!==void 0){if(typeof ne==typeof B)continue;F(ne,B)}(R.sham||B&&B.sham)&&k(ne,"sham",!0),x(V,Y,ne,R)}}},6682:function(S,O,d){var p=d(9565),N=d(8551),k=d(4901),x=d(2195),M=d(7323),F=TypeError;S.exports=function(A,R){var I=A.exec;if(k(I)){var V=p(I,A,R);return V!==null&&N(V),V}if(x(A)==="RegExp")return p(M,A,R);throw new F("RegExp#exec called on incompatible receiver")}},6699:function(S,O,d){var p=d(3724),N=d(4913),k=d(6980);S.exports=p?function(x,M,F){return N.f(x,M,k(1,F))}:function(x,M,F){return x[M]=F,x}},6706:function(S,O,d){var p=d(9504),N=d(9306);S.exports=function(k,x,M){try{return p(N(Object.getOwnPropertyDescriptor(k,x)[M]))}catch{}}},6761:function(S,O,d){var p=d(6518),N=d(4576),k=d(9565),x=d(9504),M=d(6395),F=d(3724),A=d(4495),R=d(9039),I=d(9297),V=d(1625),Y=d(8551),B=d(5397),ne=d(6969),Z=d(655),re=d(6980),ae=d(2360),ue=d(1072),le=d(8480),me=d(298),Ne=d(3717),pe=d(7347),ge=d(4913),ke=d(6801),Me=d(8773),ye=d(6840),Le=d(2106),Te=d(5745),Oe=d(6119),Qe=d(421),ze=d(3392),Fe=d(8227),Ve=d(1951),Be=d(511),Ye=d(8242),qe=d(687),Je=d(1181),He=d(9213).forEach,Ie=Oe("hidden"),We="Symbol",et="prototype",it=Je.set,pt=Je.getterFor(We),At=Object[et],Ut=N.Symbol,xn=Ut&&Ut[et],qn=N.RangeError,In=N.TypeError,Qt=N.QObject,Kn=pe.f,tn=ge.f,Qn=me.f,Gn=Me.f,z=x([].push),de=Te("symbols"),je=Te("op-symbols"),De=Te("wks"),be=!Qt||!Qt[et]||!Qt[et].findChild,Se=function(Ge,tt,Ze){var nt=Kn(At,tt);nt&&delete At[tt],tn(Ge,tt,Ze),nt&&Ge!==At&&tn(At,tt,nt)},Ee=F&&R(function(){return ae(tn({},"a",{get:function(){return tn(this,"a",{value:7}).a}})).a!==7})?Se:tn,Ke=function(Ge,tt){var Ze=de[Ge]=ae(xn);return it(Ze,{type:We,tag:Ge,description:tt}),F||(Ze.description=tt),Ze},Ht=function(Ge,tt,Ze){Ge===At&&Ht(je,tt,Ze),Y(Ge);var nt=ne(tt);return Y(Ze),I(de,nt)?(Ze.enumerable?(I(Ge,Ie)&&Ge[Ie][nt]&&(Ge[Ie][nt]=!1),Ze=ae(Ze,{enumerable:re(0,!1)})):(I(Ge,Ie)||tn(Ge,Ie,re(1,ae(null))),Ge[Ie][nt]=!0),Ee(Ge,nt,Ze)):tn(Ge,nt,Ze)},Jn=function(Ge,tt){Y(Ge);var Ze=B(tt),nt=ue(Ze).concat(Al(Ze));return He(nt,function(Yt){F&&!k(Wt,Ze,Yt)||Ht(Ge,Yt,Ze[Yt])}),Ge},Wt=function(Ge){var tt=ne(Ge),Ze=k(Gn,this,tt);return!(this===At&&I(de,tt)&&!I(je,tt))&&(!(Ze||!I(this,tt)||!I(de,tt)||I(this,Ie)&&this[Ie][tt])||Ze)},Ue=function(Ge,tt){var Ze=B(Ge),nt=ne(tt);if(Ze!==At||!I(de,nt)||I(je,nt)){var Yt=Kn(Ze,nt);return!Yt||!I(de,nt)||I(Ze,Ie)&&Ze[Ie][nt]||(Yt.enumerable=!0),Yt}},Lt=function(Ge){var tt=Qn(B(Ge)),Ze=[];return He(tt,function(nt){I(de,nt)||I(Qe,nt)||z(Ze,nt)}),Ze},Al=function(Ge){var tt=Ge===At,Ze=Qn(tt?je:B(Ge)),nt=[];return He(Ze,function(Yt){!I(de,Yt)||tt&&!I(At,Yt)||z(nt,de[Yt])}),nt};A||(Ut=function(){if(V(xn,this))throw new In("Symbol is not a constructor");var Ge=arguments.length&&arguments[0]!==void 0?Z(arguments[0]):void 0,tt=ze(Ge),Ze=function(nt){var Yt=this===void 0?N:this;Yt===At&&k(Ze,je,nt),I(Yt,Ie)&&I(Yt[Ie],tt)&&(Yt[Ie][tt]=!1);var Hp=re(1,nt);try{Ee(Yt,tt,Hp)}catch(Bp){if(!(Bp instanceof qn))throw Bp;Se(Yt,tt,Hp)}};return F&&be&&Ee(At,tt,{configurable:!0,set:Ze}),Ke(tt,Ge)},ye(xn=Ut[et],"toString",function(){return pt(this).tag}),ye(Ut,"withoutSetter",function(Ge){return Ke(ze(Ge),Ge)}),Me.f=Wt,ge.f=Ht,ke.f=Jn,pe.f=Ue,le.f=me.f=Lt,Ne.f=Al,Ve.f=function(Ge){return Ke(Fe(Ge),Ge)},F&&(Le(xn,"description",{configurable:!0,get:function(){return pt(this).description}}),M||ye(At,"propertyIsEnumerable",Wt,{unsafe:!0}))),p({global:!0,constructor:!0,wrap:!0,forced:!A,sham:!A},{Symbol:Ut}),He(ue(De),function(Ge){Be(Ge)}),p({target:We,stat:!0,forced:!A},{useSetter:function(){be=!0},useSimple:function(){be=!1}}),p({target:"Object",stat:!0,forced:!A,sham:!F},{create:function(Ge,tt){return tt===void 0?ae(Ge):Jn(ae(Ge),tt)},defineProperty:Ht,defineProperties:Jn,getOwnPropertyDescriptor:Ue}),p({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:Lt}),Ye(),qe(Ut,We),Qe[Ie]=!0},6801:function(S,O,d){var p=d(3724),N=d(8686),k=d(4913),x=d(8551),M=d(5397),F=d(1072);O.f=p&&!N?Object.defineProperties:function(A,R){x(A);for(var I,V=M(R),Y=F(R),B=Y.length,ne=0;B>ne;)k.f(A,I=Y[ne++],V[I]);return A}},6823:function(S){var O=String;S.exports=function(d){try{return O(d)}catch{return"Object"}}},6837:function(S){var O=TypeError;S.exports=function(d){if(d>9007199254740991)throw O("Maximum allowed index exceeded");return d}},6840:function(S,O,d){var p=d(4901),N=d(4913),k=d(283),x=d(9433);S.exports=function(M,F,A,R){R||(R={});var I=R.enumerable,V=R.name!==void 0?R.name:F;if(p(A)&&k(A,V,R),R.global)I?M[F]=A:x(F,A);else{try{R.unsafe?M[F]&&(I=!0):delete M[F]}catch{}I?M[F]=A:N.f(M,F,{value:A,enumerable:!1,configurable:!R.nonConfigurable,writable:!R.nonWritable})}return M}},6910:function(S,O,d){var p=d(6518),N=d(9504),k=d(9306),x=d(8981),M=d(6198),F=d(4606),A=d(655),R=d(9039),I=d(4488),V=d(4598),Y=d(3709),B=d(3763),ne=d(9519),Z=d(3607),re=[],ae=N(re.sort),ue=N(re.push),le=R(function(){re.sort(void 0)}),me=R(function(){re.sort(null)}),Ne=V("sort"),pe=!R(function(){if(ne)return ne<70;if(!(Y&&Y>3)){if(B)return!0;if(Z)return Z<603;var ge,ke,Me,ye,Le="";for(ge=65;ge<76;ge++){switch(ke=String.fromCharCode(ge),ge){case 66:case 69:case 70:case 72:Me=3;break;case 68:case 71:Me=4;break;default:Me=2}for(ye=0;ye<47;ye++)re.push({k:ke+ye,v:Me})}for(re.sort(function(Te,Oe){return Oe.v-Te.v}),ye=0;ye<re.length;ye++)ke=re[ye].k.charAt(0),Le.charAt(Le.length-1)!==ke&&(Le+=ke);return Le!=="DGBEFHACIJK"}});p({target:"Array",proto:!0,forced:le||!me||!Ne||!pe},{sort:function(ge){ge!==void 0&&k(ge);var ke=x(this);if(pe)return ge===void 0?ae(ke):ae(ke,ge);var Me,ye,Le=[],Te=M(ke);for(ye=0;ye<Te;ye++)ye in ke&&ue(Le,ke[ye]);for(I(Le,function(Oe){return function(Qe,ze){return ze===void 0?-1:Qe===void 0?1:Oe!==void 0?+Oe(Qe,ze)||0:A(Qe)>A(ze)?1:-1}}(ge)),Me=M(Le),ye=0;ye<Me;)ke[ye]=Le[ye++];for(;ye<Te;)F(ke,ye++);return ke}})},6933:function(S,O,d){var p=d(9504),N=d(4376),k=d(4901),x=d(2195),M=d(655),F=p([].push);S.exports=function(A){if(k(A))return A;if(N(A)){for(var R=A.length,I=[],V=0;V<R;V++){var Y=A[V];typeof Y=="string"?F(I,Y):typeof Y!="number"&&x(Y)!=="Number"&&x(Y)!=="String"||F(I,M(Y))}var B=I.length,ne=!0;return function(Z,re){if(ne)return ne=!1,re;if(N(this))return re;for(var ae=0;ae<B;ae++)if(I[ae]===Z)return re}}}},6955:function(S,O,d){var p=d(2140),N=d(4901),k=d(2195),x=d(8227)("toStringTag"),M=Object,F=k(function(){return arguments}())==="Arguments";S.exports=p?k:function(A){var R,I,V;return A===void 0?"Undefined":A===null?"Null":typeof(I=function(Y,B){try{return Y[B]}catch{}}(R=M(A),x))=="string"?I:F?k(R):(V=k(R))==="Object"&&N(R.callee)?"Arguments":V}},6969:function(S,O,d){var p=d(2777),N=d(757);S.exports=function(k){var x=p(k,"string");return N(x)?x:x+""}},6980:function(S){S.exports=function(O,d){return{enumerable:!(1&O),configurable:!(2&O),writable:!(4&O),value:d}}},7040:function(S,O,d){var p=d(4495);S.exports=p&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7055:function(S,O,d){var p=d(9504),N=d(9039),k=d(2195),x=Object,M=p("".split);S.exports=N(function(){return!x("z").propertyIsEnumerable(0)})?function(F){return k(F)==="String"?M(F,""):x(F)}:x},7323:function(S,O,d){var p,N,k=d(9565),x=d(9504),M=d(655),F=d(7979),A=d(8429),R=d(5745),I=d(2360),V=d(1181).get,Y=d(3635),B=d(8814),ne=R("native-string-replace",String.prototype.replace),Z=RegExp.prototype.exec,re=Z,ae=x("".charAt),ue=x("".indexOf),le=x("".replace),me=x("".slice),Ne=(N=/b*/g,k(Z,p=/a/,"a"),k(Z,N,"a"),p.lastIndex!==0||N.lastIndex!==0),pe=A.BROKEN_CARET,ge=/()??/.exec("")[1]!==void 0;(Ne||ge||pe||Y||B)&&(re=function(ke){var Me,ye,Le,Te,Oe,Qe,ze,Fe=this,Ve=V(Fe),Be=M(ke),Ye=Ve.raw;if(Ye)return Ye.lastIndex=Fe.lastIndex,Me=k(re,Ye,Be),Fe.lastIndex=Ye.lastIndex,Me;var qe=Ve.groups,Je=pe&&Fe.sticky,He=k(F,Fe),Ie=Fe.source,We=0,et=Be;if(Je&&(He=le(He,"y",""),ue(He,"g")===-1&&(He+="g"),et=me(Be,Fe.lastIndex),Fe.lastIndex>0&&(!Fe.multiline||Fe.multiline&&ae(Be,Fe.lastIndex-1)!==`
`)&&(Ie="(?: "+Ie+")",et=" "+et,We++),ye=new RegExp("^(?:"+Ie+")",He)),ge&&(ye=new RegExp("^"+Ie+"$(?!\\s)",He)),Ne&&(Le=Fe.lastIndex),Te=k(Z,Je?ye:Fe,et),Je?Te?(Te.input=me(Te.input,We),Te[0]=me(Te[0],We),Te.index=Fe.lastIndex,Fe.lastIndex+=Te[0].length):Fe.lastIndex=0:Ne&&Te&&(Fe.lastIndex=Fe.global?Te.index+Te[0].length:Le),ge&&Te&&Te.length>1&&k(ne,Te[0],ye,function(){for(Oe=1;Oe<arguments.length-2;Oe++)arguments[Oe]===void 0&&(Te[Oe]=void 0)}),Te&&qe)for(Te.groups=Qe=I(null),Oe=0;Oe<qe.length;Oe++)Qe[(ze=qe[Oe])[0]]=Te[ze[1]];return Te}),S.exports=re},7347:function(S,O,d){var p=d(3724),N=d(9565),k=d(8773),x=d(6980),M=d(5397),F=d(6969),A=d(9297),R=d(5917),I=Object.getOwnPropertyDescriptor;O.f=p?I:function(V,Y){if(V=M(V),Y=F(Y),R)try{return I(V,Y)}catch{}if(A(V,Y))return x(!N(k.f,V,Y),V[Y])}},7400:function(S){S.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},7427:function(S,O,d){var p=d(6518),N=d(3724),k=d(2551),x=d(9306),M=d(8981),F=d(4913);N&&p({target:"Object",proto:!0,forced:k},{__defineGetter__:function(A,R){F.f(M(this),A,{get:x(R),enumerable:!0,configurable:!0})}})},7433:function(S,O,d){var p=d(4376),N=d(3517),k=d(34),x=d(8227)("species"),M=Array;S.exports=function(F){var A;return p(F)&&(A=F.constructor,(N(A)&&(A===M||p(A.prototype))||k(A)&&(A=A[x])===null)&&(A=void 0)),A===void 0?M:A}},7452:function(S){S.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},7476:function(S,O,d){var p=d(2195),N=d(9504);S.exports=function(k){if(p(k)==="Function")return N(k)}},7495:function(S,O,d){var p=d(6518),N=d(7323);p({target:"RegExp",proto:!0,forced:/./.exec!==N},{exec:N})},7629:function(S,O,d){var p=d(6395),N=d(4576),k=d(9433),x="__core-js_shared__",M=S.exports=N[x]||k(x,{});(M.versions||(M.versions=[])).push({version:"3.45.0",mode:p?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7633:function(S,O,d){var p=d(7751),N=d(2106),k=d(8227),x=d(3724),M=k("species");S.exports=function(F){var A=p(F);x&&A&&!A[M]&&N(A,M,{configurable:!0,get:function(){return this}})}},7657:function(S,O,d){var p,N,k,x=d(9039),M=d(4901),F=d(34),A=d(2360),R=d(2787),I=d(6840),V=d(8227),Y=d(6395),B=V("iterator"),ne=!1;[].keys&&("next"in(k=[].keys())?(N=R(R(k)))!==Object.prototype&&(p=N):ne=!0),!F(p)||x(function(){var Z={};return p[B].call(Z)!==Z})?p={}:Y&&(p=A(p)),M(p[B])||I(p,B,function(){return this}),S.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:ne}},7680:function(S,O,d){var p=d(9504);S.exports=p([].slice)},7740:function(S,O,d){var p=d(9297),N=d(5031),k=d(7347),x=d(4913);S.exports=function(M,F,A){for(var R=N(F),I=x.f,V=k.f,Y=0;Y<R.length;Y++){var B=R[Y];p(M,B)||A&&p(A,B)||I(M,B,V(F,B))}}},7750:function(S,O,d){var p=d(4117),N=TypeError;S.exports=function(k){if(p(k))throw new N("Can't call method on "+k);return k}},7751:function(S,O,d){var p=d(4576),N=d(4901);S.exports=function(k,x){return arguments.length<2?(M=p[k],N(M)?M:void 0):p[k]&&p[k][x];var M}},7764:function(S,O,d){var p=d(8183).charAt,N=d(655),k=d(1181),x=d(1088),M=d(2529),F="String Iterator",A=k.set,R=k.getterFor(F);x(String,"String",function(I){A(this,{type:F,string:N(I),index:0})},function(){var I,V=R(this),Y=V.string,B=V.index;return B>=Y.length?M(void 0,!0):(I=p(Y,B),V.index+=I.length,M(I,!1))})},7812:function(S,O,d){var p=d(6518),N=d(9297),k=d(757),x=d(6823),M=d(5745),F=d(1296),A=M("symbol-to-string-registry");p({target:"Symbol",stat:!0,forced:!F},{keyFor:function(R){if(!k(R))throw new TypeError(x(R)+" is not a symbol");if(N(A,R))return A[R]}})},7829:function(S,O,d){var p=d(8183).charAt;S.exports=function(N,k,x){return k+(x?p(N,k).length:1)}},7916:function(S,O,d){var p=d(6080),N=d(9565),k=d(8981),x=d(6319),M=d(4209),F=d(3517),A=d(6198),R=d(4659),I=d(81),V=d(851),Y=Array;S.exports=function(B){var ne=k(B),Z=F(this),re=arguments.length,ae=re>1?arguments[1]:void 0,ue=ae!==void 0;ue&&(ae=p(ae,re>2?arguments[2]:void 0));var le,me,Ne,pe,ge,ke,Me=V(ne),ye=0;if(!Me||this===Y&&M(Me))for(le=A(ne),me=Z?new this(le):Y(le);le>ye;ye++)ke=ue?ae(ne[ye],ye):ne[ye],R(me,ye,ke);else for(me=Z?new this:[],ge=(pe=I(ne,Me)).next;!(Ne=N(ge,pe)).done;ye++)ke=ue?x(pe,ae,[Ne.value,ye],!0):Ne.value,R(me,ye,ke);return me.length=ye,me}},7979:function(S,O,d){var p=d(8551);S.exports=function(){var N=p(this),k="";return N.hasIndices&&(k+="d"),N.global&&(k+="g"),N.ignoreCase&&(k+="i"),N.multiline&&(k+="m"),N.dotAll&&(k+="s"),N.unicode&&(k+="u"),N.unicodeSets&&(k+="v"),N.sticky&&(k+="y"),k}},8014:function(S,O,d){var p=d(1291),N=Math.min;S.exports=function(k){var x=p(k);return x>0?N(x,9007199254740991):0}},8183:function(S,O,d){var p=d(9504),N=d(1291),k=d(655),x=d(7750),M=p("".charAt),F=p("".charCodeAt),A=p("".slice),R=function(I){return function(V,Y){var B,ne,Z=k(x(V)),re=N(Y),ae=Z.length;return re<0||re>=ae?I?"":void 0:(B=F(Z,re))<55296||B>56319||re+1===ae||(ne=F(Z,re+1))<56320||ne>57343?I?M(Z,re):B:I?A(Z,re,re+2):ne-56320+(B-55296<<10)+65536}};S.exports={codeAt:R(!1),charAt:R(!0)}},8227:function(S,O,d){var p=d(4576),N=d(5745),k=d(9297),x=d(3392),M=d(4495),F=d(7040),A=p.Symbol,R=N("wks"),I=F?A.for||A:A&&A.withoutSetter||x;S.exports=function(V){return k(R,V)||(R[V]=M&&k(A,V)?A[V]:I("Symbol."+V)),R[V]}},8242:function(S,O,d){var p=d(9565),N=d(7751),k=d(8227),x=d(6840);S.exports=function(){var M=N("Symbol"),F=M&&M.prototype,A=F&&F.valueOf,R=k("toPrimitive");F&&!F[R]&&x(F,R,function(I){return p(A,this)},{arity:1})}},8344:function(S,O,d){d(8543)},8429:function(S,O,d){var p=d(9039),N=d(4576).RegExp,k=p(function(){var F=N("a","y");return F.lastIndex=2,F.exec("abcd")!==null}),x=k||p(function(){return!N("a","y").sticky}),M=k||p(function(){var F=N("^r","gy");return F.lastIndex=2,F.exec("str")!==null});S.exports={BROKEN_CARET:M,MISSED_STICKY:x,UNSUPPORTED_Y:k}},8480:function(S,O,d){var p=d(1828),N=d(8727).concat("length","prototype");O.f=Object.getOwnPropertyNames||function(k){return p(k,N)}},8543:function(S,O,d){var p=d(6518),N=d(9565),k=d(7476),x=d(3994),M=d(2529),F=d(7750),A=d(8014),R=d(655),I=d(8551),V=d(34),Y=d(2195),B=d(788),ne=d(1034),Z=d(5966),re=d(6840),ae=d(9039),ue=d(8227),le=d(2293),me=d(7829),Ne=d(6682),pe=d(1181),ge=d(6395),ke=ue("matchAll"),Me="RegExp String",ye=Me+" Iterator",Le=pe.set,Te=pe.getterFor(ye),Oe=RegExp.prototype,Qe=TypeError,ze=k("".indexOf),Fe=k("".matchAll),Ve=!!Fe&&!ae(function(){Fe("a",/./)}),Be=x(function(qe,Je,He,Ie){Le(this,{type:ye,regexp:qe,string:Je,global:He,unicode:Ie,done:!1})},Me,function(){var qe=Te(this);if(qe.done)return M(void 0,!0);var Je=qe.regexp,He=qe.string,Ie=Ne(Je,He);return Ie===null?(qe.done=!0,M(void 0,!0)):qe.global?(R(Ie[0])===""&&(Je.lastIndex=me(He,A(Je.lastIndex),qe.unicode)),M(Ie,!1)):(qe.done=!0,M(Ie,!1))}),Ye=function(qe){var Je,He,Ie,We=I(this),et=R(qe),it=le(We,RegExp),pt=R(ne(We));return Je=new it(it===RegExp?We.source:We,pt),He=!!~ze(pt,"g"),Ie=!!~ze(pt,"u"),Je.lastIndex=A(We.lastIndex),new Be(Je,et,He,Ie)};p({target:"String",proto:!0,forced:Ve},{matchAll:function(qe){var Je,He,Ie,We,et=F(this);if(V(qe)){if(B(qe)&&(Je=R(F(ne(qe))),!~ze(Je,"g")))throw new Qe("`.matchAll` does not allow non-global regexes");if(Ve)return Fe(et,qe);if((Ie=Z(qe,ke))===void 0&&ge&&Y(qe)==="RegExp"&&(Ie=Ye),Ie)return N(Ie,qe,et)}else if(Ve)return Fe(et,qe);return He=R(et),We=new RegExp(qe,"g"),ge?N(Ye,We,He):We[ke](He)}}),ge||ke in Oe||re(Oe,ke,Ye)},8551:function(S,O,d){var p=d(34),N=String,k=TypeError;S.exports=function(x){if(p(x))return x;throw new k(N(x)+" is not an object")}},8598:function(S,O,d){var p=d(6518),N=d(9504),k=d(7055),x=d(5397),M=d(4598),F=N([].join);p({target:"Array",proto:!0,forced:k!==Object||!M("join",",")},{join:function(A){return F(x(this),A===void 0?",":A)}})},8622:function(S,O,d){var p=d(4576),N=d(4901),k=p.WeakMap;S.exports=N(k)&&/native code/.test(String(k))},8686:function(S,O,d){var p=d(3724),N=d(9039);S.exports=p&&N(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},8706:function(S,O,d){var p=d(6518),N=d(9039),k=d(4376),x=d(34),M=d(8981),F=d(6198),A=d(6837),R=d(4659),I=d(1469),V=d(597),Y=d(8227),B=d(9519),ne=Y("isConcatSpreadable"),Z=B>=51||!N(function(){var ae=[];return ae[ne]=!1,ae.concat()[0]!==ae}),re=function(ae){if(!x(ae))return!1;var ue=ae[ne];return ue!==void 0?!!ue:k(ae)};p({target:"Array",proto:!0,arity:1,forced:!Z||!V("concat")},{concat:function(ae){var ue,le,me,Ne,pe,ge=M(this),ke=I(ge,0),Me=0;for(ue=-1,me=arguments.length;ue<me;ue++)if(re(pe=ue===-1?ge:arguments[ue]))for(Ne=F(pe),A(Me+Ne),le=0;le<Ne;le++,Me++)le in pe&&R(ke,Me,pe[le]);else A(Me+1),R(ke,Me++,pe);return ke.length=Me,ke}})},8727:function(S){S.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:function(S,O,d){var p=d(616),N=Function.prototype,k=N.apply,x=N.call;S.exports=typeof Reflect=="object"&&Reflect.apply||(p?x.bind(k):function(){return x.apply(k,arguments)})},8773:function(S,O){var d={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,N=p&&!d.call({1:2},1);O.f=N?function(k){var x=p(this,k);return!!x&&x.enumerable}:d},8781:function(S,O,d){var p=d(350).PROPER,N=d(6840),k=d(8551),x=d(655),M=d(9039),F=d(1034),A="toString",R=RegExp.prototype,I=R[A],V=M(function(){return I.call({source:"a",flags:"b"})!=="/a/b"}),Y=p&&I.name!==A;(V||Y)&&N(R,A,function(){var B=k(this);return"/"+x(B.source)+"/"+x(F(B))},{unsafe:!0})},8814:function(S,O,d){var p=d(9039),N=d(4576).RegExp;S.exports=p(function(){var k=N("(?<a>b)","g");return k.exec("b").groups.a!=="b"||"b".replace(k,"$<a>c")!=="bc"})},8981:function(S,O,d){var p=d(7750),N=Object;S.exports=function(k){return N(p(k))}},9039:function(S){S.exports=function(O){try{return!!O()}catch{return!0}}},9085:function(S,O,d){var p=d(6518),N=d(4213);p({target:"Object",stat:!0,arity:2,forced:Object.assign!==N},{assign:N})},9167:function(S,O,d){var p=d(4576);S.exports=p},9213:function(S,O,d){var p=d(6080),N=d(9504),k=d(7055),x=d(8981),M=d(6198),F=d(1469),A=N([].push),R=function(I){var V=I===1,Y=I===2,B=I===3,ne=I===4,Z=I===6,re=I===7,ae=I===5||Z;return function(ue,le,me,Ne){for(var pe,ge,ke=x(ue),Me=k(ke),ye=M(Me),Le=p(le,me),Te=0,Oe=Ne||F,Qe=V?Oe(ue,ye):Y||re?Oe(ue,0):void 0;ye>Te;Te++)if((ae||Te in Me)&&(ge=Le(pe=Me[Te],Te,ke),I))if(V)Qe[Te]=ge;else if(ge)switch(I){case 3:return!0;case 5:return pe;case 6:return Te;case 2:A(Qe,pe)}else switch(I){case 4:return!1;case 7:A(Qe,pe)}return Z?-1:B||ne?ne:Qe}};S.exports={forEach:R(0),map:R(1),filter:R(2),some:R(3),every:R(4),find:R(5),findIndex:R(6),filterReject:R(7)}},9228:function(S,O,d){d(7495);var p=d(9565),N=d(6840),k=d(7323),x=d(9039),M=d(8227),F=d(6699),A=M("species"),R=RegExp.prototype;S.exports=function(I,V,Y,B){var ne=M(I),Z=!x(function(){var le={};return le[ne]=function(){return 7},""[I](le)!==7}),re=Z&&!x(function(){var le=!1,me=/a/;return I==="split"&&((me={}).constructor={},me.constructor[A]=function(){return me},me.flags="",me[ne]=/./[ne]),me.exec=function(){return le=!0,null},me[ne](""),!le});if(!Z||!re||Y){var ae=/./[ne],ue=V(ne,""[I],function(le,me,Ne,pe,ge){var ke=me.exec;return ke===k||ke===R.exec?Z&&!ge?{done:!0,value:p(ae,me,Ne,pe)}:{done:!0,value:p(le,Ne,me,pe)}:{done:!1}});N(String.prototype,I,ue[0]),N(R,ne,ue[1])}B&&F(R[ne],"sham",!0)}},9296:function(S,O,d){var p=d(4055)("span").classList,N=p&&p.constructor&&p.constructor.prototype;S.exports=N===Object.prototype?void 0:N},9297:function(S,O,d){var p=d(9504),N=d(8981),k=p({}.hasOwnProperty);S.exports=Object.hasOwn||function(x,M){return k(N(x),M)}},9306:function(S,O,d){var p=d(4901),N=d(6823),k=TypeError;S.exports=function(x){if(p(x))return x;throw new k(N(x)+" is not a function")}},9432:function(S,O,d){var p=d(6518),N=d(8981),k=d(1072);p({target:"Object",stat:!0,forced:d(9039)(function(){k(1)})},{keys:function(x){return k(N(x))}})},9433:function(S,O,d){var p=d(4576),N=Object.defineProperty;S.exports=function(k,x){try{N(p,k,{value:x,configurable:!0,writable:!0})}catch{p[k]=x}return x}},9463:function(S,O,d){var p=d(6518),N=d(3724),k=d(4576),x=d(9504),M=d(9297),F=d(4901),A=d(1625),R=d(655),I=d(2106),V=d(7740),Y=k.Symbol,B=Y&&Y.prototype;if(N&&F(Y)&&(!("description"in B)||Y().description!==void 0)){var ne={},Z=function(){var pe=arguments.length<1||arguments[0]===void 0?void 0:R(arguments[0]),ge=A(B,this)?new Y(pe):pe===void 0?Y():Y(pe);return pe===""&&(ne[ge]=!0),ge};V(Z,Y),Z.prototype=B,B.constructor=Z;var re=String(Y("description detection"))==="Symbol(description detection)",ae=x(B.valueOf),ue=x(B.toString),le=/^Symbol\((.*)\)[^)]+$/,me=x("".replace),Ne=x("".slice);I(B,"description",{configurable:!0,get:function(){var pe=ae(this);if(M(ne,pe))return"";var ge=ue(pe),ke=re?Ne(ge,7,-1):me(ge,le,"$1");return ke===""?void 0:ke}}),p({global:!0,constructor:!0,forced:!0},{Symbol:Z})}},9504:function(S,O,d){var p=d(616),N=Function.prototype,k=N.call,x=p&&N.bind.bind(k,k);S.exports=p?x:function(M){return function(){return k.apply(M,arguments)}}},9519:function(S,O,d){var p,N,k=d(4576),x=d(2839),M=k.process,F=k.Deno,A=M&&M.versions||F&&F.version,R=A&&A.v8;R&&(N=(p=R.split("."))[0]>0&&p[0]<4?1:+(p[0]+p[1])),!N&&x&&(!(p=x.match(/Edge\/(\d+)/))||p[1]>=74)&&(p=x.match(/Chrome\/(\d+)/))&&(N=+p[1]),S.exports=N},9539:function(S,O,d){var p=d(9565),N=d(8551),k=d(5966);S.exports=function(x,M,F){var A,R;N(x);try{if(!(A=k(x,"return"))){if(M==="throw")throw F;return F}A=p(A,x)}catch(I){R=!0,A=I}if(M==="throw")throw F;if(R)throw A;return N(A),F}},9565:function(S,O,d){var p=d(616),N=Function.prototype.call;S.exports=p?N.bind(N):function(){return N.apply(N,arguments)}},9572:function(S,O,d){var p=d(9297),N=d(6840),k=d(3640),x=d(8227)("toPrimitive"),M=Date.prototype;p(M,x)||N(M,x,k)},9617:function(S,O,d){var p=d(5397),N=d(5610),k=d(6198),x=function(M){return function(F,A,R){var I=p(F),V=k(I);if(V===0)return!M&&-1;var Y,B=N(R,V);if(M&&A!=A){for(;V>B;)if((Y=I[B++])!=Y)return!0}else for(;V>B;B++)if((M||B in I)&&I[B]===A)return M||B||0;return!M&&-1}};S.exports={includes:x(!0),indexOf:x(!1)}},9773:function(S,O,d){var p=d(6518),N=d(4495),k=d(9039),x=d(3717),M=d(8981);p({target:"Object",stat:!0,forced:!N||k(function(){x.f(1)})},{getOwnPropertySymbols:function(F){var A=x.f;return A?A(M(F)):[]}})}},u={};function m(S){var O=u[S];if(O!==void 0)return O.exports;var d=u[S]={exports:{}};return c[S].call(d.exports,d,d.exports,m),d.exports}m.d=function(S,O){for(var d in O)m.o(O,d)&&!m.o(S,d)&&Object.defineProperty(S,d,{enumerable:!0,get:O[d]})},m.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),m.o=function(S,O){return Object.prototype.hasOwnProperty.call(S,O)},m.r=function(S){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})};var h={};function f(S){return function(O){if(Array.isArray(O))return v(O)}(S)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(S)||b(S)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function b(S,O){if(S){if(typeof S=="string")return v(S,O);var d={}.toString.call(S).slice(8,-1);return d==="Object"&&S.constructor&&(d=S.constructor.name),d==="Map"||d==="Set"?Array.from(S):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?v(S,O):void 0}}function v(S,O){(O==null||O>S.length)&&(O=S.length);for(var d=0,p=Array(O);d<O;d++)p[d]=S[d];return p}function D(S){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},D(S)}function g(S,O){for(var d=0;d<O.length;d++){var p=O[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(S,y(p.key),p)}}function w(S,O,d){return(O=y(O))in S?Object.defineProperty(S,O,{value:d,enumerable:!0,configurable:!0,writable:!0}):S[O]=d,S}function y(S){var O=function(d,p){if(D(d)!="object"||!d)return d;var N=d[Symbol.toPrimitive];if(N!==void 0){var k=N.call(d,p);if(D(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(d)}(S,"string");return D(O)=="symbol"?O:O+""}m.r(h),m.d(h,{SimpleKeyboard:function(){return H},default:function(){return J}}),m(5276),m(8598),m(4782),m(4554),m(2010),m(7427),m(6099),m(7495),m(8781),m(5440),m(744),m(2762),typeof Element>"u"||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof self<"u"&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(S){if("Element"in S){var O="classList",d="prototype",p=S.Element[d],N=Object,k=String[d].trim||function(){return this.replace(/^\s+|\s+$/g,"")},x=Array[d].indexOf||function(Y){for(var B=0,ne=this.length;B<ne;B++)if(B in this&&this[B]===Y)return B;return-1},M=function(Y,B){this.name=Y,this.code=DOMException[Y],this.message=B},F=function(Y,B){if(B==="")throw new M("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(B))throw new M("INVALID_CHARACTER_ERR","The token must not contain space characters.");return x.call(Y,B)},A=function(Y){for(var B=k.call(Y.getAttribute("class")||""),ne=B?B.split(/\s+/):[],Z=0,re=ne.length;Z<re;Z++)this.push(ne[Z]);this._updateClassName=function(){Y.setAttribute("class",this.toString())}},R=A[d]=[],I=function(){return new A(this)};if(M[d]=Error[d],R.item=function(Y){return this[Y]||null},R.contains=function(Y){return~F(this,Y+"")},R.add=function(){var Y,B=arguments,ne=0,Z=B.length,re=!1;do~F(this,Y=B[ne]+"")||(this.push(Y),re=!0);while(++ne<Z);re&&this._updateClassName()},R.remove=function(){var Y,B,ne=arguments,Z=0,re=ne.length,ae=!1;do for(B=F(this,Y=ne[Z]+"");~B;)this.splice(B,1),ae=!0,B=F(this,Y);while(++Z<re);ae&&this._updateClassName()},R.toggle=function(Y,B){var ne=this.contains(Y),Z=ne?B!==!0&&"remove":B!==!1&&"add";return Z&&this[Z](Y),B===!0||B===!1?B:!ne},R.replace=function(Y,B){var ne=F(Y+"");~ne&&(this.splice(ne,1,B),this._updateClassName())},R.toString=function(){return this.join(" ")},N.defineProperty){var V={get:I,enumerable:!0,configurable:!0};try{N.defineProperty(p,O,V)}catch(Y){Y.number!==void 0&&Y.number!==-2146823252||(V.enumerable=!1,N.defineProperty(p,O,V))}}else N[d].__defineGetter__&&p.__defineGetter__(O,I)}}(self),function(){var S=document.createElement("_");if(S.classList.add("c1","c2"),!S.classList.contains("c2")){var O=function(p){var N=DOMTokenList.prototype[p];DOMTokenList.prototype[p]=function(k){var x,M=arguments.length;for(x=0;x<M;x++)k=arguments[x],N.call(this,k)}};O("add"),O("remove")}if(S.classList.toggle("c3",!1),S.classList.contains("c3")){var d=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(p,N){return 1 in arguments&&!this.contains(p)==!N?N:d.call(this,p)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(p,N){var k=this.toString().split(" "),x=k.indexOf(p+"");~x&&(k=k.slice(x),this.remove.apply(this,k),this.add(N),this.add.apply(this,k.slice(1)))}),S=null}()),m(2675),m(9463),m(2259),m(5700),m(8706),m(2008),m(3418),m(4423),m(3792),m(2062),m(6910),m(739),m(9572),m(2892),m(9085),m(3851),m(1278),m(9432),m(4864),m(1699),m(7764),m(8344),m(3500),m(2953),m(2712),m(2637),m(1480),m(825),m(1761);var _=function(){return S=function p(N){var k=N.getOptions,x=N.getCaretPosition,M=N.getCaretPositionEnd,F=N.dispatch;(function(A,R){if(!(A instanceof R))throw new TypeError("Cannot call a class as a function")})(this,p),w(this,"getOptions",void 0),w(this,"getCaretPosition",void 0),w(this,"getCaretPositionEnd",void 0),w(this,"dispatch",void 0),w(this,"maxLengthReached",void 0),w(this,"isStandardButton",function(A){return A&&!(A[0]==="{"&&A[A.length-1]==="}")}),this.getOptions=k,this.getCaretPosition=x,this.getCaretPositionEnd=M,this.dispatch=F,p.bindMethods(p,this)},O=[{key:"getButtonType",value:function(p){return p.includes("{")&&p.includes("}")&&p!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(p){var N=this.getButtonType(p),k=p.replace("{","").replace("}",""),x="";return N!=="standardBtn"&&(x=" hg-button-".concat(k)),"hg-".concat(N).concat(x)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(p,N){return(N=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),N):N||this.getDefaultDiplay())[p]||p}},{key:"getUpdatedInput",value:function(p,N,k){var x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,M=arguments.length>4&&arguments[4]!==void 0&&arguments[4],F=this.getOptions(),A=[k,x,M],R=N;return(p==="{bksp}"||p==="{backspace}")&&R.length>0?R=this.removeAt.apply(this,[R].concat(A)):(p==="{delete}"||p==="{forwarddelete}")&&R.length>0?R=this.removeForwardsAt.apply(this,[R].concat(A)):p==="{space}"?R=this.addStringAt.apply(this,[R," "].concat(A)):p!=="{tab}"||typeof F.tabCharOnTab=="boolean"&&F.tabCharOnTab===!1?p!=="{enter}"&&p!=="{numpadenter}"||!F.newLineOnEnter?p.includes("numpad")&&Number.isInteger(Number(p[p.length-2]))?R=this.addStringAt.apply(this,[R,p[p.length-2]].concat(A)):p==="{numpaddivide}"?R=this.addStringAt.apply(this,[R,"/"].concat(A)):p==="{numpadmultiply}"?R=this.addStringAt.apply(this,[R,"*"].concat(A)):p==="{numpadsubtract}"?R=this.addStringAt.apply(this,[R,"-"].concat(A)):p==="{numpadadd}"?R=this.addStringAt.apply(this,[R,"+"].concat(A)):p==="{numpaddecimal}"?R=this.addStringAt.apply(this,[R,"."].concat(A)):p==="{"||p==="}"?R=this.addStringAt.apply(this,[R,p].concat(A)):p.includes("{")||p.includes("}")||(R=this.addStringAt.apply(this,[R,p].concat(A))):R=this.addStringAt.apply(this,[R,`
`].concat(A)):R=this.addStringAt.apply(this,[R,"	"].concat(A)),F.debug&&console.log("Input will be: "+R),R}},{key:"updateCaretPos",value:function(p){var N=arguments.length>1&&arguments[1]!==void 0&&arguments[1],k=this.updateCaretPosAction(p,N);this.dispatch(function(x){x.setCaretPosition(k)})}},{key:"updateCaretPosAction",value:function(p){var N=arguments.length>1&&arguments[1]!==void 0&&arguments[1],k=this.getOptions(),x=this.getCaretPosition();return x!=null&&(N?x>0&&(x-=p):x+=p),k.debug&&console.log("Caret at:",x),x}},{key:"addStringAt",value:function(p,N){var k,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.length,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:p.length,F=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return x||x===0?(k=[p.slice(0,x),N,p.slice(M)].join(""),this.isMaxLengthReached()||F&&this.updateCaretPos(N.length)):k=p+N,k}},{key:"removeAt",value:function(p){var N,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.length,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.length,M=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(k===0&&x===0)return p;if(k===x){var F=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;k&&k>=0?p.substring(k-2,k).match(F)?(N=p.substr(0,k-2)+p.substr(k),M&&this.updateCaretPos(2,!0)):(N=p.substr(0,k-1)+p.substr(k),M&&this.updateCaretPos(1,!0)):p.slice(-2).match(F)?(N=p.slice(0,-2),M&&this.updateCaretPos(2,!0)):(N=p.slice(0,-1),M&&this.updateCaretPos(1,!0))}else N=p.slice(0,k)+p.slice(x),M&&this.dispatch(function(A){A.setCaretPosition(k)});return N}},{key:"removeForwardsAt",value:function(p){var N,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.length,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.length,M=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return p!=null&&p.length&&k!==null?(k===x?N=p.substring(k,k+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?p.substr(0,k)+p.substr(k+2):p.substr(0,k)+p.substr(k+1):(N=p.slice(0,k)+p.slice(x),M&&this.dispatch(function(F){F.setCaretPosition(k)})),N):p}},{key:"handleMaxLength",value:function(p,N){var k=this.getOptions(),x=k.maxLength,M=p[k.inputName||"default"],F=N.length-1>=x;if(N.length<=M.length)return!1;if(Number.isInteger(x))return k.debug&&console.log("maxLength (num) reached:",F),F?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(D(x)==="object"){var A=N.length-1>=x[k.inputName||"default"];return k.debug&&console.log("maxLength (obj) reached:",A),A?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(p){return p?p.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(N,k){return k.length?N+k[0].toUpperCase()+k.slice(1):N}):""}},{key:"chunkArray",value:function(p,N){return f(Array(Math.ceil(p.length/N))).map(function(k,x){return p.slice(N*x,N+N*x)})}},{key:"escapeRegex",value:function(p){return p.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(p,N){var k=p,x=N.indexOf("‫");return x<p&&x!=-1&&k--,N.indexOf("‬")<p&&x!=-1&&k--,k<0?0:k}},{key:"isConstructor",value:function(p){try{Reflect.construct(String,[],p)}catch{return!1}return!0}}],d=[{key:"bindMethods",value:function(p,N){var k,x=function(F,A){var R=typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(!R){if(Array.isArray(F)||(R=b(F))||A){R&&(F=R);var I=0,V=function(){};return{s:V,n:function(){return I>=F.length?{done:!0}:{done:!1,value:F[I++]}},e:function(Z){throw Z},f:V}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Y,B=!0,ne=!1;return{s:function(){R=R.call(F)},n:function(){var Z=R.next();return B=Z.done,Z},e:function(Z){ne=!0,Y=Z},f:function(){try{B||R.return==null||R.return()}finally{if(ne)throw Y}}}}(Object.getOwnPropertyNames(p.prototype));try{for(x.s();!(k=x.n()).done;){var M=k.value;M==="constructor"||M==="bindMethods"||(N[M]=N[M].bind(N))}}catch(F){x.e(F)}finally{x.f()}}}],O&&g(S.prototype,O),d&&g(S,d),Object.defineProperty(S,"prototype",{writable:!1}),S;var S,O,d}();w(_,"noop",function(){});var j=_;function L(S){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},L(S)}function C(S,O){for(var d=0;d<O.length;d++){var p=O[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(S,P(p.key),p)}}function T(S,O,d){return(O=P(O))in S?Object.defineProperty(S,O,{value:d,enumerable:!0,configurable:!0,writable:!0}):S[O]=d,S}function P(S){var O=function(d,p){if(L(d)!="object"||!d)return d;var N=d[Symbol.toPrimitive];if(N!==void 0){var k=N.call(d,p);if(L(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(d)}(S,"string");return L(O)=="symbol"?O:O+""}var q=function(){return S=function p(N){var k=this,x=N.dispatch,M=N.getOptions;(function(F,A){if(!(F instanceof A))throw new TypeError("Cannot call a class as a function")})(this,p),T(this,"getOptions",void 0),T(this,"dispatch",void 0),T(this,"isModifierKey",function(F){return F.altKey||F.ctrlKey||F.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(F.code||F.key||k.keyCodeToKey(F==null?void 0:F.keyCode))}),this.dispatch=x,this.getOptions=M,j.bindMethods(p,this)},O=[{key:"handleHighlightKeyDown",value:function(p){var N=this.getOptions();N.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(p)&&(p.preventDefault(),p.stopImmediatePropagation());var k=this.getSimpleKeyboardLayoutKey(p);this.dispatch(function(x){var M,F,A=x.getButtonElement(k),R=x.getButtonElement("{".concat(k,"}"));if(A)M=A,F=k;else{if(!R)return;M=R,F="{".concat(k,"}")}var I,V,Y,B,ne=function(re){re.style.background=N.physicalKeyboardHighlightBgColor||"#dadce4",re.style.color=N.physicalKeyboardHighlightTextColor||"black"};if(M)if(Array.isArray(M)){if(M.forEach(function(re){return ne(re)}),N.physicalKeyboardHighlightPress)if(N.physicalKeyboardHighlightPressUsePointerEvents)(I=M[0])===null||I===void 0||(V=I.onpointerdown)===null||V===void 0||V.call(I,p);else if(N.physicalKeyboardHighlightPressUseClick){var Z;(Z=M[0])===null||Z===void 0||Z.click()}else x.handleButtonClicked(F,p)}else ne(M),N.physicalKeyboardHighlightPress&&(N.physicalKeyboardHighlightPressUsePointerEvents?(Y=M)===null||Y===void 0||(B=Y.onpointerdown)===null||B===void 0||B.call(Y,p):N.physicalKeyboardHighlightPressUseClick?M.click():x.handleButtonClicked(F,p))})}},{key:"handleHighlightKeyUp",value:function(p){var N=this.getOptions();N.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(p)&&(p.preventDefault(),p.stopImmediatePropagation());var k=this.getSimpleKeyboardLayoutKey(p);this.dispatch(function(x){var M,F,A,R=x.getButtonElement(k)||x.getButtonElement("{".concat(k,"}")),I=function(V){V.removeAttribute&&V.removeAttribute("style")};R&&(Array.isArray(R)?(R.forEach(function(V){return I(V)}),N.physicalKeyboardHighlightPressUsePointerEvents&&((M=R[0])===null||M===void 0||(F=M.onpointerup)===null||F===void 0||F.call(M,p))):(I(R),N.physicalKeyboardHighlightPressUsePointerEvents&&(R==null||(A=R.onpointerup)===null||A===void 0||A.call(R,p))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(p){var N,k="",x=p.code||p.key||this.keyCodeToKey(p==null?void 0:p.keyCode);return(k=x!=null&&x.includes("Numpad")||x!=null&&x.includes("Shift")||x!=null&&x.includes("Space")||x!=null&&x.includes("Backspace")||x!=null&&x.includes("Control")||x!=null&&x.includes("Alt")||x!=null&&x.includes("Meta")?p.code||"":p.key||this.keyCodeToKey(p==null?void 0:p.keyCode)||"").length>1?(N=k)===null||N===void 0?void 0:N.toLowerCase():k}},{key:"keyCodeToKey",value:function(p){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[p]||""}}],O&&C(S.prototype,O),d&&C(S,d),Object.defineProperty(S,"prototype",{writable:!1}),S;var S,O,d}();function X(S){return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},X(S)}function te(S,O){for(var d=0;d<O.length;d++){var p=O[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(S,fe(p.key),p)}}function oe(S,O,d){return(O=fe(O))in S?Object.defineProperty(S,O,{value:d,enumerable:!0,configurable:!0,writable:!0}):S[O]=d,S}function fe(S){var O=function(d,p){if(X(d)!="object"||!d)return d;var N=d[Symbol.toPrimitive];if(N!==void 0){var k=N.call(d,p);if(X(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(d)}(S,"string");return X(O)=="symbol"?O:O+""}var G=function(){return S=function p(N){var k=N.utilities,x=N.options;(function(M,F){if(!(M instanceof F))throw new TypeError("Cannot call a class as a function")})(this,p),oe(this,"utilities",void 0),oe(this,"options",void 0),oe(this,"candidateBoxElement",void 0),oe(this,"pageIndex",0),oe(this,"pageSize",void 0),this.utilities=k,this.options=x,j.bindMethods(p,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},O=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(p){var N=this,k=p.candidateValue,x=p.targetElement,M=p.onSelect;if(k&&k.length){var F=this.utilities.chunkArray(k.split(" "),this.pageSize);this.renderPage({candidateListPages:F,targetElement:x,pageIndex:this.pageIndex,nbPages:F.length,onItemSelected:function(A,R){M(A,R),N.destroy()}})}}},{key:"renderPage",value:function(p){var N,k=this,x=p.candidateListPages,M=p.targetElement,F=p.pageIndex,A=p.nbPages,R=p.onItemSelected;(N=this.candidateBoxElement)===null||N===void 0||N.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var I=document.createElement("ul");I.className="hg-candidate-box-list",x[F].forEach(function(ae){var ue,le=document.createElement("li"),me=function(){var Ne=new(k.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(Ne,"target",{value:le}),Ne};le.className="hg-candidate-box-list-item",le.innerHTML=((ue=k.options.display)===null||ue===void 0?void 0:ue[ae])||ae,k.options.useTouchEvents?le.ontouchstart=function(Ne){return R(ae,Ne||me())}:le.onclick=function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:me();return R(ae,Ne)},I.appendChild(le)});var V=F>0,Y=document.createElement("div");Y.classList.add("hg-candidate-box-prev"),V&&Y.classList.add("hg-candidate-box-btn-active");var B=function(){V&&k.renderPage({candidateListPages:x,targetElement:M,pageIndex:F-1,nbPages:A,onItemSelected:R})};this.options.useTouchEvents?Y.ontouchstart=B:Y.onclick=B,this.candidateBoxElement.appendChild(Y),this.candidateBoxElement.appendChild(I);var ne=F<A-1,Z=document.createElement("div");Z.classList.add("hg-candidate-box-next"),ne&&Z.classList.add("hg-candidate-box-btn-active");var re=function(){ne&&k.renderPage({candidateListPages:x,targetElement:M,pageIndex:F+1,nbPages:A,onItemSelected:R})};this.options.useTouchEvents?Z.ontouchstart=re:Z.onclick=re,this.candidateBoxElement.appendChild(Z),M.prepend(this.candidateBoxElement)}}],O&&te(S.prototype,O),d&&te(S,d),Object.defineProperty(S,"prototype",{writable:!1}),S;var S,O,d}(),se=G;function W(S){return function(O){if(Array.isArray(O))return $(O)}(S)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(S)||function(O,d){if(O){if(typeof O=="string")return $(O,d);var p={}.toString.call(O).slice(8,-1);return p==="Object"&&O.constructor&&(p=O.constructor.name),p==="Map"||p==="Set"?Array.from(O):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?$(O,d):void 0}}(S)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $(S,O){(O==null||O>S.length)&&(O=S.length);for(var d=0,p=Array(O);d<O;d++)p[d]=S[d];return p}function K(S){return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},K(S)}function ee(S,O){var d=Object.keys(S);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(S);O&&(p=p.filter(function(N){return Object.getOwnPropertyDescriptor(S,N).enumerable})),d.push.apply(d,p)}return d}function Q(S,O){for(var d=0;d<O.length;d++){var p=O[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(S,ve(p.key),p)}}function ce(S,O,d){return(O=ve(O))in S?Object.defineProperty(S,O,{value:d,enumerable:!0,configurable:!0,writable:!0}):S[O]=d,S}function ve(S){var O=function(d,p){if(K(d)!="object"||!d)return d;var N=d[Symbol.toPrimitive];if(N!==void 0){var k=N.call(d,p);if(K(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(d)}(S,"string");return K(O)=="symbol"?O:O+""}var U=function(){return S=function p(N,k){var x=this;if(function(B,ne){if(!(B instanceof ne))throw new TypeError("Cannot call a class as a function")}(this,p),ce(this,"input",void 0),ce(this,"options",void 0),ce(this,"utilities",void 0),ce(this,"caretPosition",void 0),ce(this,"caretPositionEnd",void 0),ce(this,"keyboardDOM",void 0),ce(this,"keyboardPluginClasses",void 0),ce(this,"keyboardDOMClass",void 0),ce(this,"buttonElements",void 0),ce(this,"currentInstanceName",void 0),ce(this,"allKeyboardInstances",void 0),ce(this,"keyboardInstanceNames",void 0),ce(this,"isFirstKeyboardInstance",void 0),ce(this,"physicalKeyboard",void 0),ce(this,"modules",void 0),ce(this,"activeButtonClass",void 0),ce(this,"holdInteractionTimeout",void 0),ce(this,"holdTimeout",void 0),ce(this,"isMouseHold",void 0),ce(this,"initialized",void 0),ce(this,"candidateBox",void 0),ce(this,"keyboardRowsDOM",void 0),ce(this,"defaultName","default"),ce(this,"activeInputElement",null),ce(this,"handleParams",function(B,ne){var Z,re,ae;if(typeof B=="string")Z=B.split(".").join(""),re=document.querySelector(".".concat(Z)),ae=ne;else if(B instanceof HTMLDivElement){if(!B.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");Z=B.className.split(" ")[0],re=B,ae=ne}else Z="simple-keyboard",re=document.querySelector(".".concat(Z)),ae=B;return{keyboardDOMClass:Z,keyboardDOM:re,options:ae}}),ce(this,"getOptions",function(){return x.options}),ce(this,"getCaretPosition",function(){return x.caretPosition}),ce(this,"getCaretPositionEnd",function(){return x.caretPositionEnd}),ce(this,"registerModule",function(B,ne){x.modules[B]||(x.modules[B]={}),ne(x.modules[B])}),ce(this,"getKeyboardClassString",function(){for(var B=arguments.length,ne=new Array(B),Z=0;Z<B;Z++)ne[Z]=arguments[Z];return[x.keyboardDOMClass].concat(ne).filter(function(re){return!!re}).join(" ")}),typeof window<"u"){var M=this.handleParams(N,k),F=M.keyboardDOMClass,A=M.keyboardDOM,R=M.options,I=R===void 0?{}:R;this.utilities=new j({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=A,this.options=function(B){for(var ne=1;ne<arguments.length;ne++){var Z=arguments[ne]!=null?arguments[ne]:{};ne%2?ee(Object(Z),!0).forEach(function(re){ce(B,re,Z[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(Z)):ee(Object(Z)).forEach(function(re){Object.defineProperty(B,re,Object.getOwnPropertyDescriptor(Z,re))})}return B}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},I),this.keyboardPluginClasses="",j.bindMethods(p,this);var V=this.options.inputName,Y=V===void 0?this.defaultName:V;if(this.input={},this.input[Y]="",this.keyboardDOMClass=F,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new q({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new se({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(F,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},O=[{key:"setCaretPosition",value:function(p){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p;this.caretPosition=p,this.caretPositionEnd=N}},{key:"getInputCandidates",value:function(p){var N=this,k=this.options,x=k.layoutCandidates,M=k.layoutCandidatesCaseSensitiveMatch;if(!x||K(x)!=="object")return{};var F=Object.keys(x).filter(function(I){var V=p.substring(0,N.getCaretPositionEnd()||0)||p,Y=new RegExp("".concat(N.utilities.escapeRegex(I),"$"),M?"g":"gi");return!!W(V.matchAll(Y)).length});if(F.length>1){var A=F.sort(function(I,V){return V.length-I.length})[0];return{candidateKey:A,candidateValue:x[A]}}if(F.length){var R=F[0];return{candidateKey:R,candidateValue:x[R]}}return{}}},{key:"showCandidatesBox",value:function(p,N,k){var x=this;this.candidateBox&&this.candidateBox.show({candidateValue:N,targetElement:k,onSelect:function(M,F){var A=x.options,R=A.layoutCandidatesCaseSensitiveMatch,I=A.disableCandidateNormalization,V=A.enableLayoutCandidatesKeyPress,Y=M;I||(Y=M.normalize("NFD")),typeof x.options.beforeInputUpdate=="function"&&x.options.beforeInputUpdate(x);var B=x.getInput(x.options.inputName,!0),ne=x.getCaretPositionEnd()||0,Z=B.substring(0,ne||0)||B,re=new RegExp("".concat(x.utilities.escapeRegex(p),"$"),R?"g":"gi"),ae=Z.replace(re,Y),ue=B.replace(Z,ae),le=ae.length-Z.length,me=(ne||B.length)+le;me<0&&(me=0),x.setInput(ue,x.options.inputName,!0),x.setCaretPosition(me),V&&typeof x.options.onKeyPress=="function"&&x.options.onKeyPress(M,F),typeof x.options.onChange=="function"&&x.options.onChange(x.getInput(x.options.inputName,!0),F),typeof x.options.onChangeAll=="function"&&x.options.onChangeAll(x.getAllInputs(),F)}})}},{key:"handleButtonClicked",value:function(p,N){var k=this.options,x=k.inputName,M=x===void 0?this.defaultName:x,F=k.debug;if(p!=="{//}"){this.input[M]||(this.input[M]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var A=this.utilities.getUpdatedInput(p,this.input[M],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(p)&&this.activeInputElement&&this.input[M]&&this.input[M]===A&&this.caretPosition===0&&this.caretPositionEnd===A.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(p,N);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(p,N),this.input[M]!==A&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(A))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,A))return;var R=this.utilities.getUpdatedInput(p,this.input[M],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(R,this.options.inputName,!0),F&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),N==null?void 0:N.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),N),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),N),N!=null&&N.target&&this.options.enableLayoutCandidates){var I,V=this.getInputCandidates(A),Y=V.candidateKey,B=V.candidateValue;Y&&B?this.showCandidatesBox(Y,B,this.keyboardDOM):(I=this.candidateBox)===null||I===void 0||I.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),F&&console.log("Key pressed:",p)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(p){this.options.syncInstanceInputs?this.dispatch(function(N){N.isMouseHold=p}):this.isMouseHold=p}},{key:"handleButtonMouseDown",value:function(p,N){var k=this;N&&(this.options.preventMouseDownDefault&&N.preventDefault(),this.options.stopMouseDownPropagation&&N.stopPropagation(),N.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(k.getMouseHold()&&(!p.includes("{")&&!p.includes("}")||p==="{delete}"||p==="{backspace}"||p==="{bksp}"||p==="{space}"||p==="{tab}")||p==="{arrowright}"||p==="{arrowleft}"||p==="{arrowup}"||p==="{arrowdown}")&&(k.options.debug&&console.log("Button held:",p),k.handleButtonHold(p)),clearTimeout(k.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(p,N){var k=this;N&&(this.options.preventMouseUpDefault&&N.preventDefault&&N.preventDefault(),this.options.stopMouseUpPropagation&&N.stopPropagation&&N.stopPropagation(),!(N.target===this.keyboardDOM||N.target&&this.keyboardDOM.contains(N.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(N.target===this.candidateBox.candidateBoxElement||N.target&&this.candidateBox.candidateBoxElement.contains(N.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(x){x.classList.remove(k.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),p&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(p,N)}},{key:"handleKeyboardContainerMouseDown",value:function(p){this.options.preventMouseDownDefault&&p.preventDefault()}},{key:"handleButtonHold",value:function(p){var N=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){N.getMouseHold()?(N.handleButtonClicked(p),N.handleButtonHold(p)):clearTimeout(N.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var p=this;this.dispatch(function(N){N.replaceInput(p.input),N.setCaretPosition(p.caretPosition,p.caretPositionEnd)})}},{key:"clearInput",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[p]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,N=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!N&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[p].replace("‫","").replace("‬","")+"‬":this.input[p]}},{key:"getAllInputs",value:function(){var p=this,N={};return Object.keys(this.input).forEach(function(k){N[k]=p.getInput(k,!0)}),N}},{key:"setInput",value:function(p){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,k=arguments.length>2?arguments[2]:void 0;this.input[N]=p,!k&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(p){this.input=p}},{key:"setOptions",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=this.changedOptions(p);this.options=Object.assign(this.options,p),N.length&&(this.options.debug&&console.log("changedOptions",N),this.onSetOptions(N),this.render())}},{key:"changedOptions",value:function(p){var N=this;return Object.keys(p).filter(function(k){return JSON.stringify(p[k])!==JSON.stringify(N.options[k])})}},{key:"onSetOptions",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];p.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(p.includes("layoutCandidatesPageSize")||p.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new se({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(p){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(N){p(window.SimpleKeyboardInstances[N],N)})}},{key:"addButtonTheme",value:function(p,N){var k=this;N&&p&&(p.split(" ").forEach(function(x){N.split(" ").forEach(function(M){k.options.buttonTheme||(k.options.buttonTheme=[]);var F=!1;k.options.buttonTheme.map(function(A){if(A!=null&&A.class.split(" ").includes(M)){F=!0;var R=A.buttons.split(" ");R.includes(x)||(F=!0,R.push(x),A.buttons=R.join(" "))}return A}),F||k.options.buttonTheme.push({class:M,buttons:p})})}),this.render())}},{key:"removeButtonTheme",value:function(p,N){var k=this;if(!p&&!N)return this.options.buttonTheme=[],void this.render();p&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(p.split(" ").forEach(function(x){var M;(M=k.options)===null||M===void 0||(M=M.buttonTheme)===null||M===void 0||M.map(function(F,A){if(F&&N&&N.includes(F.class)||!N){var R,I,V=(R=F)===null||R===void 0?void 0:R.buttons.split(" ").filter(function(Y){return Y!==x});F&&V!=null&&V.length?F.buttons=V.join(" "):((I=k.options.buttonTheme)===null||I===void 0||I.splice(A,1),F=null)}return F})}),this.render())}},{key:"getButtonElement",value:function(p){var N,k=this.buttonElements[p];return k&&(N=k.length>1?k:k[0]),N}},{key:"inputPatternIsValid",value:function(p){var N,k=this.options.inputPattern;if((N=k instanceof RegExp?k:k[this.options.inputName||this.defaultName])&&p){var x=N.test(p);return this.options.debug&&console.log('inputPattern ("'.concat(N,'"): ').concat(x?"passed":"did not pass!")),x}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var p=this.options.physicalKeyboardHighlightPreventDefault,N=p!==void 0&&p;document.addEventListener("keyup",this.handleKeyUp,N),document.addEventListener("keydown",this.handleKeyDown,N),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(p){this.caretEventHandler(p),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(p)}},{key:"handleKeyDown",value:function(p){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(p)}},{key:"handleMouseUp",value:function(p){this.caretEventHandler(p)}},{key:"handleTouchEnd",value:function(p){this.caretEventHandler(p)}},{key:"handleSelect",value:function(p){this.caretEventHandler(p)}},{key:"handleSelectionChange",value:function(p){navigator.userAgent.includes("Firefox")||this.caretEventHandler(p)}},{key:"caretEventHandler",value:function(p){var N,k=this;p.target.tagName&&(N=p.target.tagName.toLowerCase()),this.dispatch(function(x){var M=p.target===x.keyboardDOM||p.target&&x.keyboardDOM.contains(p.target);if(k.options.syncInstanceInputs&&Array.isArray(p.path)&&(M=p.path.some(function(R){var I;return R==null||(I=R.hasAttribute)===null||I===void 0?void 0:I.call(R,"data-skInstance")})),(N==="textarea"||N==="input"&&["text","search","url","tel","password"].includes(p.target.type))&&!x.options.disableCaretPositioning){var F=p.target.selectionStart,A=p.target.selectionEnd;x.options.rtl&&(F=x.utilities.getRtlOffset(F,x.getInput()),A=x.utilities.getRtlOffset(A,x.getInput())),x.setCaretPosition(F,A),x.activeInputElement=p.target,x.options.debug&&console.log("Caret at: ",x.getCaretPosition(),x.getCaretPositionEnd(),p&&p.target.tagName.toLowerCase(),"(".concat(x.keyboardDOMClass,")"),p==null?void 0:p.type)}else!x.options.disableCaretPositioning&&M||(p==null?void 0:p.type)==="selectionchange"||(x.setCaretPosition(null),x.activeInputElement=null,x.options.debug&&console.log('Caret position reset due to "'.concat(p==null?void 0:p.type,'" event'),p))})}},{key:"recurseButtons",value:function(p){var N=this;p&&Object.keys(this.buttonElements).forEach(function(k){return N.buttonElements[k].forEach(p)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var p=this.options.physicalKeyboardHighlightPreventDefault,N=p!==void 0&&p;document.removeEventListener("keyup",this.handleKeyUp,N),document.removeEventListener("keydown",this.handleKeyDown,N),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(k){k&&(k.onpointerdown=null,k.onpointerup=null,k.onpointercancel=null,k.ontouchstart=null,k.ontouchend=null,k.ontouchcancel=null,k.onclick=null,k.onmousedown=null,k.onmouseup=null,k.remove(),k=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(p){var N=this.options.buttonTheme,k=[];return Array.isArray(N)&&N.forEach(function(x){if(x&&x.class&&typeof x.class=="string"&&x.buttons&&typeof x.buttons=="string"){var M=x.class.split(" ");x.buttons.split(" ").includes(p)&&(k=[].concat(W(k),W(M)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',x)}),k}},{key:"setDOMButtonAttributes",value:function(p,N){var k=this.options.buttonAttributes;Array.isArray(k)&&k.forEach(function(x){x.attribute&&typeof x.attribute=="string"&&x.value&&typeof x.value=="string"?x.buttons&&typeof x.buttons=="string"?x.buttons.split(" ").includes(p)&&N(x.attribute,x.value):N(x.attribute,x.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',x)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(p){var N;if((N=p.target.classList)!==null&&N!==void 0&&N.contains("hg-button"))return p.preventDefault(),p.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var p=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(N){var k=p.utilities.isConstructor(N)?new N(p):N(p);k.init&&k.init(p)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(p,N){return!!this.modules[p]&&this.modules[p][N]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(p,N,k,x){var M=this,F=Array.from(p.children),A=0;return F.length&&k.forEach(function(R,I){var V=x[I];if(!(V&&V>R))return!1;var Y=R-A,B=V-A,ne=document.createElement("div");ne.className+="hg-button-container";var Z="".concat(M.options.layoutName,"-r").concat(N,"c").concat(I);ne.setAttribute("data-skUID",Z);var re=F.splice(Y,B-Y+1);A+=B-Y,re.forEach(function(ae){return ne.appendChild(ae)}),F.splice(Y,0,ne),p.innerHTML="",F.forEach(function(ae){return p.appendChild(ae)}),M.options.debug&&console.log("rowDOMContainer",re,Y,B,A+1)}),p}},{key:"render",value:function(){var p=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var N="hg-layout-".concat(this.options.layoutName),k=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},x=this.options.useTouchEvents||!1,M=x?"hg-touch-events":"",F=this.options.useMouseEvents||!1,A=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,N,this.keyboardPluginClasses,M),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",k[this.options.layoutName||this.defaultName].forEach(function(R,I){var V=R.split(" ");p.options.excludeFromLayout&&p.options.excludeFromLayout[p.options.layoutName||p.defaultName]&&(V=V.filter(function(Z){return p.options.excludeFromLayout&&!p.options.excludeFromLayout[p.options.layoutName||p.defaultName].includes(Z)}));var Y=document.createElement("div");Y.className+="hg-row";var B=[],ne=[];V.forEach(function(Z,re){var ae,ue=!A&&typeof Z=="string"&&Z.length>1&&Z.indexOf("[")===0,le=!A&&typeof Z=="string"&&Z.length>1&&Z.indexOf("]")===Z.length-1;ue&&(B.push(re),Z=Z.replace(/\[/g,"")),le&&(ne.push(re),Z=Z.replace(/\]/g,""));var me=p.utilities.getButtonClass(Z),Ne=p.utilities.getButtonDisplayName(Z,p.options.display,p.options.mergeDisplay),pe=p.options.useButtonTag?"button":"div",ge=document.createElement(pe);ge.className+="hg-button ".concat(me),(ae=ge.classList).add.apply(ae,W(p.getButtonThemeClasses(Z))),p.setDOMButtonAttributes(Z,function(ye,Le){ge.setAttribute(ye,Le)}),p.activeButtonClass="hg-activeButton",!p.utilities.pointerEventsSupported()||x||F?x?(ge.ontouchstart=function(ye){p.handleButtonClicked(Z,ye),p.handleButtonMouseDown(Z,ye)},ge.ontouchend=function(ye){p.handleButtonMouseUp(Z,ye)},ge.ontouchcancel=function(ye){p.handleButtonMouseUp(Z,ye)}):(ge.onclick=function(ye){p.setMouseHold(!1),typeof p.options.onKeyReleased=="function"||p.options.useMouseEvents&&p.options.clickOnMouseDown||p.handleButtonClicked(Z,ye)},ge.onmousedown=function(ye){(typeof p.options.onKeyReleased=="function"||p.options.useMouseEvents&&p.options.clickOnMouseDown)&&!p.isMouseHold&&p.handleButtonClicked(Z,ye),p.handleButtonMouseDown(Z,ye)},ge.onmouseup=function(ye){p.handleButtonMouseUp(Z,ye)}):(ge.onpointerdown=function(ye){p.handleButtonClicked(Z,ye),p.handleButtonMouseDown(Z,ye)},ge.onpointerup=function(ye){p.handleButtonMouseUp(Z,ye)},ge.onpointercancel=function(ye){p.handleButtonMouseUp(Z,ye)}),ge.setAttribute("data-skBtn",Z);var ke="".concat(p.options.layoutName,"-r").concat(I,"b").concat(re);ge.setAttribute("data-skBtnUID",ke);var Me=document.createElement("span");Me.innerHTML=Ne,ge.appendChild(Me),p.buttonElements[Z]||(p.buttonElements[Z]=[]),p.buttonElements[Z].push(ge),Y.appendChild(ge)}),Y=p.parseRowDOMContainers(Y,I,B,ne),p.keyboardRowsDOM.appendChild(Y)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||x||F?x?(document.ontouchend=function(R){return p.handleButtonMouseUp(void 0,R)},document.ontouchcancel=function(R){return p.handleButtonMouseUp(void 0,R)},this.keyboardDOM.ontouchstart=function(R){return p.handleKeyboardContainerMouseDown(R)}):x||(document.onmouseup=function(R){return p.handleButtonMouseUp(void 0,R)},this.keyboardDOM.onmousedown=function(R){return p.handleKeyboardContainerMouseDown(R)}):(document.onpointerup=function(R){return p.handleButtonMouseUp(void 0,R)},this.keyboardDOM.onpointerdown=function(R){return p.handleKeyboardContainerMouseDown(R)}),this.onInit())}}],O&&Q(S.prototype,O),d&&Q(S,d),Object.defineProperty(S,"prototype",{writable:!1}),S;var S,O,d}(),H=U,J=H;return h}()},981:function(){typeof Element>"u"||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof self<"u"&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(l){if("Element"in l){var c="classList",u="prototype",m=l.Element[u],h=Object,f=String[u].trim||function(){return this.replace(/^\s+|\s+$/g,"")},b=Array[u].indexOf||function(j){for(var L=0,C=this.length;L<C;L++)if(L in this&&this[L]===j)return L;return-1},v=function(j,L){this.name=j,this.code=DOMException[j],this.message=L},D=function(j,L){if(L==="")throw new v("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(L))throw new v("INVALID_CHARACTER_ERR","The token must not contain space characters.");return b.call(j,L)},g=function(j){for(var L=f.call(j.getAttribute("class")||""),C=L?L.split(/\s+/):[],T=0,P=C.length;T<P;T++)this.push(C[T]);this._updateClassName=function(){j.setAttribute("class",this.toString())}},w=g[u]=[],y=function(){return new g(this)};if(v[u]=Error[u],w.item=function(j){return this[j]||null},w.contains=function(j){return~D(this,j+"")},w.add=function(){var j,L=arguments,C=0,T=L.length,P=!1;do~D(this,j=L[C]+"")||(this.push(j),P=!0);while(++C<T);P&&this._updateClassName()},w.remove=function(){var j,L,C=arguments,T=0,P=C.length,q=!1;do for(L=D(this,j=C[T]+"");~L;)this.splice(L,1),q=!0,L=D(this,j);while(++T<P);q&&this._updateClassName()},w.toggle=function(j,L){var C=this.contains(j),T=C?L!==!0&&"remove":L!==!1&&"add";return T&&this[T](j),L===!0||L===!1?L:!C},w.replace=function(j,L){var C=D(j+"");~C&&(this.splice(C,1,L),this._updateClassName())},w.toString=function(){return this.join(" ")},h.defineProperty){var _={get:y,enumerable:!0,configurable:!0};try{h.defineProperty(m,c,_)}catch(j){j.number!==void 0&&j.number!==-2146823252||(_.enumerable=!1,h.defineProperty(m,c,_))}}else h[u].__defineGetter__&&m.__defineGetter__(c,y)}}(self),function(){var l=document.createElement("_");if(l.classList.add("c1","c2"),!l.classList.contains("c2")){var c=function(m){var h=DOMTokenList.prototype[m];DOMTokenList.prototype[m]=function(f){var b,v=arguments.length;for(b=0;b<v;b++)f=arguments[b],h.call(this,f)}};c("add"),c("remove")}if(l.classList.toggle("c3",!1),l.classList.contains("c3")){var u=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(m,h){return 1 in arguments&&!this.contains(m)==!h?h:u.call(this,m)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(m,h){var f=this.toString().split(" "),b=f.indexOf(m+"");~b&&(f=f.slice(b),this.remove.apply(this,f),this.add(h),this.add.apply(this,f.slice(1)))}),l=null}())}},s={};function i(l){var c=s[l];if(c!==void 0)return c.exports;var u=s[l]={exports:{}};return r[l].call(u.exports,u,u.exports,i),u.exports}i.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(c,{a:c}),c},i.d=function(l,c){for(var u in c)i.o(c,u)&&!i.o(l,u)&&Object.defineProperty(l,u,{enumerable:!0,get:c[u]})},i.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},i.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})};var o={};return function(){i.r(o),i.d(o,{KeyboardReact:function(){return D},default:function(){return g}}),i(981);var l=i(442),c=i(548),u=i.n(c);function m(w){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},m(w)}function h(w,y){var _=Object.keys(w);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(w);y&&(j=j.filter(function(L){return Object.getOwnPropertyDescriptor(w,L).enumerable})),_.push.apply(_,j)}return _}function f(w){for(var y=1;y<arguments.length;y++){var _=arguments[y]!=null?arguments[y]:{};y%2?h(Object(_),!0).forEach(function(j){b(w,j,_[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(_)):h(Object(_)).forEach(function(j){Object.defineProperty(w,j,Object.getOwnPropertyDescriptor(_,j))})}return w}function b(w,y,_){return(y=function(j){var L=function(C,T){if(m(C)!="object"||!C)return C;var P=C[Symbol.toPrimitive];if(P!==void 0){var q=P.call(C,T);if(m(q)!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(C)}(j,"string");return m(L)=="symbol"?L:L+""}(y))in w?Object.defineProperty(w,y,{value:_,enumerable:!0,configurable:!0,writable:!0}):w[y]=_,w}var v=function(w){return f(f({},w),{},{keyboardRef:null})},D=function(w){var y=w.baseClass||"react-simple-keyboard",_=l.useRef(null),j=l.useRef(null),L=l.useRef(null),C=l.useRef(w);return l.useEffect(function(){return function(){L.current&&L.current.destroy(),_.current=!1}},[]),l.useEffect(function(){var T=function(oe){return f(f({},oe),{},{theme:"simple-keyboard ".concat(oe.theme||"hg-theme-default")})}(w);if(!_.current){_.current=!0,T.debug&&console.log("ReactSimpleKeyboard: Init");var P=j.current,q=".".concat(y);L.current=new(u())(P||q,T),T.keyboardRef&&T.keyboardRef(L.current)}var X=function(oe,fe){var G=v(fe),se=v(oe);return Object.keys(G).filter(function(W){return G[W]!==se[W]})}(C.current,T);if(X.length){var te=L.current;C.current=T,te==null||te.setOptions(T),T.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",X)}},[_,y,C,w]),l.createElement("div",{className:y,ref:j})},g=D}(),o}()})})(tj);var QA=tj.exports;const GA=lh(QA),nj=({isOpen:e,onClose:t,onInput:n,initialValue:r})=>{const[s,i]=E.useState("default"),[o,l]=E.useState(r||"");E.useEffect(()=>{l(r||"")},[r,e]);const c=m=>{m==="{shift}"||m==="{lock}"?i(s==="default"?"shift":"default"):m==="{enter}"&&t()},u=m=>{l(m),n(m)};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg w-full max-w-3xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Clavier Arabe"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("input",{type:"text",value:o,onChange:m=>u(m.target.value),className:"w-full p-2 border rounded mb-4 text-right",dir:"rtl"}),a.jsx("div",{dir:"ltr",children:a.jsx(GA,{layoutName:s,onChange:u,onKeyPress:c,inputName:"arabicInput",layout:{default:["ذ 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} ض ص ث ق ف غ ع ه خ ح ج د \\","{lock} ش س ي ب ل ا ت ن م ك ط {enter}","{shift} ئ ء ؤ ر ى ة و ز ظ {shift}","{space} @ .com"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{space} @ .com"]},display:{"{bksp}":"⌫","{enter}":"Terminé","{shift}":"⇧","{lock}":"⇪","{tab}":"⇥","{space}":" "},input:o})})]})}):null};kn("fr",Dn);const Om=e=>{var n;switch((n=e.split(".").pop())==null?void 0:n.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"webp":return"image/webp";case"pdf":return"application/pdf";default:return"application/octet-stream"}},Ua=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},JA=()=>{const[e,t]=E.useState([]),[n,r]=E.useState(!1),[s,i]=E.useState(""),[o,l]=E.useState(null),[c,u]=E.useState(!0),[m,h]=E.useState(null),[f,b]=E.useState(!1),[v,D]=E.useState(null),[g,w]=E.useState([]),[y,_]=E.useState([]),[j,L]=E.useState(!1),[C,T]=E.useState(null),P="http://localhost:5000",q=`${P}/api/customers`,X=E.useCallback(async()=>{u(!0),h(null);try{const U=await we.get(q);t(U.data),ie.success("Customers loaded successfully!")}catch(U){console.error("Error fetching customers:",U),h("Failed to load customers."),ie.error("Failed to load customers.")}finally{u(!1)}},[]);E.useEffect(()=>{X()},[X]);const te=e.filter(U=>`${U.prenomFr} ${U.nomFr}`.toLowerCase().includes(s.toLowerCase())||U.email.toLowerCase().includes(s.toLowerCase())||U.telephone&&U.telephone.includes(s)),oe=async(U,H,J)=>{try{const S=new FormData;Object.keys(U).forEach(d=>{S.append(d,U[d])}),H.forEach(d=>{S.append("documents",d)});const O=await we.post(q,S,{headers:{"Content-Type":"multipart/form-data"}});t(d=>[...d,O.data]),r(!1),ie.success("Customer added successfully!")}catch(S){console.error("Error adding customer:",S),ie.error("Failed to add customer.")}},fe=async U=>{v&&(_(H=>[...H,U]),D(H=>({...H,documents:H.documents.filter(J=>J.url!==U.url)})),ie.success(`Document ${U.name} marked for deletion.`))},G=U=>{w(U)},se=async()=>{if(v)try{const U=new FormData;Object.keys(v).forEach(J=>{J!=="documents"&&U.append(J,v[J])}),g.forEach(J=>{U.append("documents",J)}),U.append("documentsToDelete",JSON.stringify(y.map(J=>J.url)));const H=await we.put(`${q}/${v._id}`,U,{headers:{"Content-Type":"multipart/form-data"}});t(e.map(J=>J._id===v._id?H.data:J)),l(H.data),b(!1),D(null),w([]),_([]),ie.success("Customer updated successfully!")}catch(U){console.error("Error saving edit:",U),ie.error("Failed to save changes.")}},W=()=>{b(!1),D(null),w([]),_([]),L(!1)},$=async U=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce client ?"))try{await we.delete(`${q}/${U}`),t(e.filter(H=>H._id!==U)),(o==null?void 0:o._id)===U&&(l(null),b(!1),D(null)),ie.success("Customer deleted successfully!")}catch(H){console.error("Error deleting customer:",H),ie.error("Failed to delete customer.")}},K=()=>{if(o){const U=(o.documents||[]).map(H=>({...H,type:Om(H.name),isNew:!1}));D({...o,documents:U}),w([]),_([]),b(!0)}},ee=U=>{if(f){if(confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")){const H=(U.documents||[]).map(J=>({...J,type:Om(J.name),isNew:!1}));l({...U,documents:H}),b(!1),D(null),w([]),_([])}}else{const H=(U.documents||[]).map(J=>({...J,type:Om(J.name),isNew:!1}));l({...U,documents:H})}},Q=(U,H)=>{v&&D(J=>J?{...J,[U]:H}:null)},ce=U=>{T(U),L(!0)},ve=U=>{C&&v&&Q(C,U)};return c?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading customers..."})}):m?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:m}),a.jsx("button",{onClick:X,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Gestion des Clients ",a.jsxs("span",{className:"text-blue-600",children:["(",e.length,")"]})]}),a.jsxs("button",{onClick:()=>{l(null),r(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Ajouter un client"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Yn,{size:18,className:"text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Rechercher un client...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:s,onChange:U=>{f?confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")&&(i(U.target.value),b(!1),D(null),w([]),_([])):i(U.target.value)}})]})}),a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut du client"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:te.map(U=>a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(o==null?void 0:o._id)===U._id?f?"bg-blue-100":"bg-blue-50":""}`,onClick:()=>ee(U),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx($c,{size:24,className:"text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:`${U.prenomFr} ${U.nomFr}`}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Client depuis ",Ua(U.createdAt)]})]})]})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[a.jsx(HD,{size:14,className:"mr-1 text-gray-500"})," ",U.email]}),a.jsxs("div",{className:"text-sm text-gray-500 mt-1 flex items-center",children:[a.jsx(GD,{size:14,className:"mr-1 text-gray-500"})," ",U.telephone]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${U.status==="Actif"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:U.status})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(gn,{onClick:H=>{H.stopPropagation(),l(U),K()},size:"md",className:"mr-3"}),a.jsx("button",{onClick:H=>{H.stopPropagation(),$(U._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Rn,{size:18})})]})]},U._id))})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:o?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails du client"}),f?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:W,className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:se,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:K,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"h-16 w-16 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx($c,{size:32,className:"text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-lg font-bold",children:`${o.prenomFr} ${o.nomFr}`}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Client depuis ",Ua(o.createdAt)]})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium mb-2",children:"Conducteur"}),f&&v?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Civilité"}),a.jsxs("select",{className:"w-full border rounded-lg p-2 mt-1",value:v.civilite||"",onChange:U=>Q("civilite",U.target.value),children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"M.",children:"M."}),a.jsx("option",{value:"Mme",children:"Mme"}),a.jsx("option",{value:"Mlle",children:"Mlle"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Type"}),a.jsxs("select",{className:"w-full border rounded-lg p-2 mt-1",value:v.type||"",onChange:U=>Q("type",U.target.value),children:[a.jsx("option",{value:"Particulier",children:"Particulier"}),a.jsx("option",{value:"Professionnel",children:"Professionnel"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nom (FR)"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.nomFr||"",onChange:U=>Q("nomFr",U.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Prénom (FR)"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.prenomFr||"",onChange:U=>Q("prenomFr",U.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nom (AR)"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.nomAr||"",onFocus:()=>ce("nomAr"),onChange:U=>Q("nomAr",U.target.value),dir:"rtl"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Prénom (AR)"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.prenomAr||"",onFocus:()=>ce("prenomAr"),onChange:U=>Q("prenomAr",U.target.value),dir:"rtl"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nationalité"}),a.jsxs("select",{className:"w-full border rounded-lg p-2 mt-1",value:v.nationalite||"",onChange:U=>Q("nationalite",U.target.value),children:[a.jsx("option",{value:"",children:"Sélectionner"}),ej.map(U=>a.jsx("option",{value:U.name,children:U.name},U.code))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Date de naissance"}),a.jsx(Pe,{selected:v.dateNaissance?new Date(v.dateNaissance):null,onChange:U=>Q("dateNaissance",U?U.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Lieu de naissance"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.lieuNaissance||"",onChange:U=>Q("lieuNaissance",U.target.value)})]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"ICE"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.ice||"",onChange:U=>Q("ice",U.target.value)})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"listeNoire",checked:v.listeNoire||!1,onChange:U=>Q("listeNoire",U.target.checked),className:"mr-2"}),a.jsx("label",{htmlFor:"listeNoire",className:"text-sm",children:"Liste noire"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Type"}),a.jsx("p",{className:"text-sm",children:o.type})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Civilité"}),a.jsx("p",{className:"text-sm",children:o.civilite})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nom (FR)"}),a.jsx("p",{className:"text-sm",children:o.nomFr})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Prénom (FR)"}),a.jsx("p",{className:"text-sm",children:o.prenomFr})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nom (AR)"}),a.jsx("p",{className:"text-sm",dir:"rtl",children:o.nomAr})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Prénom (AR)"}),a.jsx("p",{className:"text-sm",dir:"rtl",children:o.prenomAr})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nationalité"}),a.jsx("p",{className:"text-sm",children:o.nationalite})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Date de naissance"}),a.jsx("p",{className:"text-sm",children:Ua(o.dateNaissance)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Lieu de naissance"}),a.jsx("p",{className:"text-sm",children:o.lieuNaissance})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"ICE"}),a.jsx("p",{className:"text-sm",children:o.ice||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Liste noire"}),a.jsx("p",{className:"text-sm",children:o.listeNoire?"Oui":"Non"})]})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium mb-2",children:"Pièce d'identité"}),f&&v?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"C.I.N"}),a.jsxs("div",{className:"space-y-3 mt-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Numéro"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.cin||"",onChange:U=>Q("cin",U.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Délivré à"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.cinDelivreA||"",onChange:U=>Q("cinDelivreA",U.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Délivré le"}),a.jsx(Pe,{selected:v.cinDelivreLe?new Date(v.cinDelivreLe):null,onChange:U=>Q("cinDelivreLe",U?U.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Validité"}),a.jsx(Pe,{selected:v.cinValidite?new Date(v.cinValidite):null,onChange:U=>Q("cinValidite",U?U.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Permis de conduire"}),a.jsxs("div",{className:"space-y-3 mt-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Numéro"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.numeroPermis||"",onChange:U=>Q("numeroPermis",U.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Délivré à"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.permisDelivreA||"",onChange:U=>Q("permisDelivreA",U.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Délivré le"}),a.jsx(Pe,{selected:v.permisDelivreLe?new Date(v.permisDelivreLe):null,onChange:U=>Q("permisDelivreLe",U?U.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Validité"}),a.jsx(Pe,{selected:v.permisValidite?new Date(v.permisValidite):null,onChange:U=>Q("permisValidite",U?U.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Passeport"}),a.jsxs("div",{className:"space-y-3 mt-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Numéro"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.numeroPasseport||"",onChange:U=>Q("numeroPasseport",U.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Délivré à"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.passportDelivreA||"",onChange:U=>Q("passportDelivreA",U.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Délivré le"}),a.jsx(Pe,{selected:v.passportDelivreLe?new Date(v.passportDelivreLe):null,onChange:U=>Q("passportDelivreLe",U?U.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Validité"}),a.jsx(Pe,{selected:v.passportValidite?new Date(v.passportValidite):null,onChange:U=>Q("passportValidite",U?U.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]})]})]})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"C.I.N"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Numéro"}),a.jsx("p",{className:"text-sm",children:o.cin||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Validité"}),a.jsx("p",{className:"text-sm",children:Ua(o.cinValidite)||"-"})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Permis de conduire"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Numéro"}),a.jsx("p",{className:"text-sm",children:o.numeroPermis||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Validité"}),a.jsx("p",{className:"text-sm",children:Ua(o.permisValidite)||"-"})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Passeport"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Numéro"}),a.jsx("p",{className:"text-sm",children:o.numeroPasseport||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Validité"}),a.jsx("p",{className:"text-sm",children:Ua(o.passportValidite)||"-"})]})]})]})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium mb-2",children:"Contact"}),f&&v?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),a.jsx("input",{type:"email",className:"w-full border rounded-lg p-2 mt-1",value:v.email||"",onChange:U=>Q("email",U.target.value)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Téléphone"}),a.jsx("input",{type:"tel",className:"w-full border rounded-lg p-2 mt-1",value:v.telephone||"",onChange:U=>Q("telephone",U.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Téléphone 2"}),a.jsx("input",{type:"tel",className:"w-full border rounded-lg p-2 mt-1",value:v.telephone2||"",onChange:U=>Q("telephone2",U.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Fix"}),a.jsx("input",{type:"tel",className:"w-full border rounded-lg p-2 mt-1",value:v.fix||"",onChange:U=>Q("fix",U.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Fax"}),a.jsx("input",{type:"tel",className:"w-full border rounded-lg p-2 mt-1",value:v.fax||"",onChange:U=>Q("fax",U.target.value)})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Adresse (FR)"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.adresseFr||"",onChange:U=>Q("adresseFr",U.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Adresse (AR)"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.adresseAr||"",onFocus:()=>ce("adresseAr"),onChange:U=>Q("adresseAr",U.target.value),dir:"rtl"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Ville"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.ville||"",onChange:U=>Q("ville",U.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Code Postal"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.codePostal||"",onChange:U=>Q("codePostal",U.target.value)})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Remarque"}),a.jsx("textarea",{className:"w-full border rounded-lg p-2 mt-1",value:v.remarque||"",onChange:U=>Q("remarque",U.target.value)})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),a.jsx("p",{className:"text-sm",children:o.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Téléphone"}),a.jsx("p",{className:"text-sm",children:o.telephone})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Adresse"}),a.jsxs("p",{className:"text-sm",children:[o.adresseFr,", ",o.ville," ",o.codePostal]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Remarque"}),a.jsx("p",{className:"text-sm",children:o.remarque||"-"})]})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4",children:[a.jsx("div",{className:"flex justify-between items-center mb-2",children:a.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium",children:"Documents"})}),f&&v?a.jsx(mt,{api_url:P,existingDocuments:v.documents,newFiles:g,onNewFilesChange:G,onRemoveExistingDocument:fe,label:"Documents"}):o.documents&&o.documents.length>0?a.jsx(mt,{api_url:P,existingDocuments:o.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:fe,label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun document"})]}),a.jsxs("div",{className:"mt-6 border-t pt-4",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium mb-2",children:"Statut du client"}),f&&v?a.jsxs("select",{className:"w-full border rounded-lg p-2 mt-1",value:v.status||"Actif",onChange:U=>Q("status",U.target.value),children:[a.jsx("option",{value:"Actif",children:"Actif"}),a.jsx("option",{value:"Inactif",children:"Inactif"})]}):a.jsx("div",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${o.status==="Actif"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:o.status})]})]})]}):a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-center h-full py-10",children:[a.jsx($c,{size:64,className:"text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucun client sélectionné"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Sélectionnez un client pour voir ses détails"}),a.jsxs("button",{onClick:()=>{l(null),r(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Ajouter un client"]})]})})})]}),n&&a.jsx(KA,{onSubmit:oe,onClose:()=>r(!1),api_url:P}),a.jsx(nj,{isOpen:j,onClose:()=>L(!1),onInput:ve,initialValue:C&&v?String(v[C]):""})]})},XA=()=>{const{changePassword:e}=Ui(),[t,n]=E.useState(""),[r,s]=E.useState(""),[i,o]=E.useState(""),[l,c]=E.useState(!1),u=async m=>{if(m.preventDefault(),r!==i){ie.error("Les nouveaux mots de passe ne correspondent pas.");return}if(r.length<6){ie.error("Le nouveau mot de passe doit contenir au moins 6 caractères.");return}try{c(!0),await e(t,r),ie.success("Mot de passe mis à jour avec succès."),n(""),s(""),o("")}catch(h){console.error("Password change error:",h),ie.error(h.message||"Erreur lors de la mise à jour du mot de passe.")}finally{c(!1)}};return a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Paramètres"}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a.jsxs("section",{children:[a.jsx("h2",{className:"text-lg font-medium mb-4",children:"Changer le mot de passe"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ancien mot de passe"}),a.jsx("input",{type:"password",value:t,onChange:m=>n(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nouveau mot de passe"}),a.jsx("input",{type:"password",value:r,onChange:m=>s(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le nouveau mot de passe"}),a.jsx("input",{type:"password",value:i,onChange:m=>o(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{type:"submit",disabled:l,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${l?"opacity-70 cursor-not-allowed":""}`,children:l?"Mise à jour...":"Changer le mot de passe"})})]})})]})},ZA=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(""),[s,i]=E.useState(!1),o=hd(),{login:l,user:c}=Ui();E.useEffect(()=>{if(c){const m=localStorage.getItem("lastPath")||"/";o(m)}},[c,o]);const u=async m=>{m.preventDefault();try{i(!0),await l(e,n)}catch(h){console.error("Login error:",h),ie.error("Échec de la connexion. Veuillez vérifier vos identifiants.")}finally{i(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-900 flex items-center justify-center",children:a.jsx(bt,{className:"h-8 w-8 text-white"})})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"AdminCar"}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Système d'administration de location de voitures"})]}),a.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:a.jsxs("form",{className:"space-y-6",onSubmit:u,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Nom d'utilisateur"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:e,onChange:m=>t(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"admin"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:m=>r(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"••••••••"})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Se souvenir de moi"})]}),a.jsx("div",{className:"text-sm",children:a.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oublié?"})})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:s,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${s?"opacity-70 cursor-not-allowed":""}`,children:s?"Connexion...":"Se connecter"})})]})})})]})};kn("fr",Dn);const Fm=[{id:"pneuDeSecours",label:"PNEU DE SECOURS"},{id:"posteRadio",label:"POSTE RADIO"},{id:"cricManivelle",label:"CRIC MANIVELLE"},{id:"allumeCigare",label:"ALLUME CIGARE"},{id:"jeuDe4Tapis",label:"JEU DE 4 TAPIS"},{id:"vetDeSecurite",label:"VÊT.DE SÉCURITÉ"}],hr=e=>typeof e=="string"&&e.trim().length===0,e3=()=>{var ue,le,me,Ne,pe,ge,ke,Me,ye,Le,Te,Oe,Qe,ze,Fe,Ve,Be,Ye,qe,Je,He,Ie,We,et,it,pt,At,Ut,xn,qn,In,Qt,Kn,tn,Qn,Gn;const[e,t]=E.useState([]),[n,r]=E.useState(!1),[s,i]=E.useState([]),[o,l]=E.useState([]),[c,u]=E.useState(""),[m,h]=E.useState("all"),[f,b]=E.useState(null),[v,D]=E.useState(null),[g,w]=E.useState(null),[y,_]=E.useState(!1),[j,L]=E.useState(null),[C,T]=E.useState([]),[P,q]=E.useState([]),[X,te]=E.useState(!0),[oe,fe]=E.useState(null),[G,se]=E.useState({}),W="http://localhost:5000",$=`${W}/api/contracts`,K=`${W}/api/customers`,ee=`${W}/api/vehicles`,[Q,ce]=E.useState({client:{_id:""},contractNumber:"",contractDate:new Date().toISOString().split("T")[0],departureDate:new Date().toISOString().split("T")[0],departureTime:"09:00",returnDate:new Date().toISOString().split("T")[0],contractLocation:"",duration:1,pickupLocation:"",returnLocation:"",matricule:"",vehicle:{_id:"",chassisNumber:"",licensePlate:"",brand:"",model:"",circulationDate:"",fuelType:"essence",fuelLevel:"plein",mileage:0,color:"",rentalPrice:0,statut:"En parc",equipment:{pneuDeSecours:!1,posteRadio:!1,cricManivelle:!1,allumeCigare:!1,jeuDe4Tapis:!1,vetDeSecurite:!1},createdAt:"",updatedAt:""},pricePerDay:0,startingKm:0,discount:0,fuelLevel:"plein",total:0,guarantee:5e3,paymentType:"espece",advance:0,remaining:0,status:"en_cours",secondDriver:void 0,equipment:{pneuDeSecours:!1,posteRadio:!1,cricManivelle:!1,allumeCigare:!1,jeuDe4Tapis:!1,vetDeSecurite:!1},piecesJointes:[]}),[ve,U]=E.useState(""),[H,J]=E.useState(""),S=E.useCallback(async()=>{te(!0),fe(null);try{const de=(await we.get($)).data,je=`${W}/api/vehicleinsurances`,[De,be,Se]=await Promise.all([we.get(K),we.get(ee),we.get(je)]),Ee=De.data,Ke=be.data,Ht=Se.data;l(Ee),i(Ke);const Jn=de.map(Wt=>{var tt;const Ue=Ee.find(Ze=>{var nt;return Ze._id===((nt=Wt.client)==null?void 0:nt._id)}),Lt=Ke.find(Ze=>{var nt;return Ze._id===((nt=Wt.vehicle)==null?void 0:nt._id)||Ze._id===Wt.vehicle}),Al=(Lt==null?void 0:Lt._id)||(typeof Wt.vehicle=="string"?Wt.vehicle:(tt=Wt.vehicle)==null?void 0:tt._id),Ge=Ht.find(Ze=>{const nt=Ze.vehicle;return(typeof nt=="object"&&nt?nt._id:nt)===Al});return{...Wt,client:Ue?{_id:Ue._id,prenomFr:Ue.prenomFr,nomFr:Ue.nomFr,nationalite:Ue.nationalite,dateNaissance:Ue.dateNaissance,cin:Ue.cin,cinDelivreLe:Ue.cinDelivreLe,cinDelivreA:Ue.cinDelivreA,cinValidite:Ue.cinValidite,numeroPermis:Ue.numeroPermis,permisValidite:Ue.permisValidite,adresseFr:Ue.adresseFr,adresseAr:Ue.adresseAr,adresseEtranger:Ue.adresseAr,telephone:Ue.telephone,telephone2:Ue.telephone2,ville:Ue.ville,codePostal:Ue.codePostal}:void 0,vehicle:Lt?{...Lt,insurance:Ge}:Wt.vehicle,returnLocation:Wt.returnLocation}});t(Jn),ie.success("Contracts loaded successfully!")}catch(z){console.error("Error fetching contracts:",z),fe("Failed to load contracts."),ie.error("Failed to load contracts.")}finally{te(!1)}},[]);E.useEffect(()=>{S()},[S]);const O=e.filter(z=>{var Ee,Ke;const de=`${((Ee=z.client)==null?void 0:Ee.prenomFr)||""} ${((Ke=z.client)==null?void 0:Ke.nomFr)||""}`.toLowerCase().includes(c.toLowerCase())||z.contractNumber.toLowerCase().includes(c.toLowerCase())||z.vehicle.model.toLowerCase().includes(c.toLowerCase()),je=m==="all"||z.status===m,De=new Date(z.contractDate),be=f?De>=f:!0,Se=v?De<=v:!0;return de&&je&&be&&Se}),d=z=>({reserve:"text-red-500","1/4":"text-yellow-500","1/2":"text-blue-500","3/4":"text-green-300",plein:"text-green-500"})[z],p=z=>z==="en_cours"?"text-blue-500":"text-green-500",N=(z,de,je)=>z*de-je,k=(z,de)=>{de.stopPropagation(),w(z),L({...z}),_(!0),q([])},x=async()=>{var z;if(j){if(hr(j.contractLocation)){ie.error('Le champ "Lieu de Contrat" ne peut pas contenir uniquement des espaces.');return}if(hr(j.pickupLocation)){ie.error('Le champ "Lieu Livraison" ne peut pas contenir uniquement des espaces.');return}if(j.advance!==void 0&&j.advance<0){ie.error("L'avance ne peut pas être une valeur négative.");return}if(j.pricePerDay!==void 0&&j.pricePerDay<0){ie.error("Le prix par jour ne peut pas être une valeur négative.");return}if(j.guarantee!==void 0&&j.guarantee<0){ie.error("La garantie ne peut pas être une valeur négative.");return}if(j.total!==void 0&&j.total<0){ie.error("Le total ne peut pas être une valeur négative. Veuillez ajuster le prix par jour, la durée ou la remise.");return}if(j.remaining!==void 0&&j.remaining<0){ie.error("Le reste à payer ne peut pas être une valeur négative. Veuillez ajuster l'avance.");return}if(j.secondDriver){const de=j.secondDriver,je=["nom","nationalite","adresse","telephone","adresseEtranger","permisNumero","passeportCin"];let De=!1;if(je.forEach(be=>{const Se=de[be];Se!==void 0&&Se.length>0&&hr(Se)?(se(Ee=>({...Ee,[`secondDriver.${be}`]:`Le champ "${be}" ne peut pas contenir uniquement des espaces.`})),De=!0):se(Ee=>{const Ke={...Ee};return delete Ke[`secondDriver.${be}`],Ke})}),de.permisDelivreLe){const be=new Date(de.permisDelivreLe),Se=new Date;Se.setFullYear(Se.getFullYear()-2),be>Se?(se(Ee=>({...Ee,"secondDriver.permisDelivreLe":"La date de délivrance du permis doit être supérieure à 2 ans."})),De=!0):se(Ee=>{const Ke={...Ee};return delete Ke["secondDriver.permisDelivreLe"],Ke})}if(De){ie.error("Veuillez corriger les erreurs du deuxième conducteur.");return}}try{const de=new FormData;for(const Ee in j)if(Object.prototype.hasOwnProperty.call(j,Ee)){const Ke=j[Ee];if(Ee==="piecesJointes"||Ee==="client"||Ee==="vehicle"||Ee==="equipment")continue;Ee==="returnLocation"?de.append(Ee,String(Ke||"")):Ee!=="piecesJointes"&&Ee!=="client"&&Ee!=="vehicle"&&Ee!=="equipment"&&(typeof Ke=="object"&&Ke!==null?de.append(Ee,JSON.stringify(Ke)):Ke!==void 0&&de.append(Ee,String(Ke)))}(z=j.client)!=null&&z._id&&de.append("client",j.client._id),j.secondDriver&&de.append("secondDriver",JSON.stringify(j.secondDriver)),j.vehicle&&de.append("vehicle",JSON.stringify(j.vehicle)),j.equipment&&de.append("equipment",JSON.stringify(j.equipment)),j.piecesJointes&&j.piecesJointes.forEach(Ee=>{Ee.isNew||de.append("existingDocuments",JSON.stringify({name:Ee.name,url:Ee.url,type:Ee.type,size:Ee.size}))}),P.forEach(Ee=>{de.append("documents",Ee)});for(let[Ee,Ke]of de.entries())console.log(`${Ee}: ${Ke}`);console.log("Sending PUT request for contract ID:",j._id);const De=(await we.put(`${$}/${j._id}`,de,{headers:{"Content-Type":"multipart/form-data"}})).data,be=s.find(Ee=>{var Ke;return Ee._id===((Ke=De.vehicle)==null?void 0:Ke._id)||Ee._id===De.vehicle}),Se={...De,vehicle:be||De.vehicle};t(e.map(Ee=>Ee._id===j._id?Se:Ee)),w(Se),_(!1),L(null),q([]),ie.success("Contract updated successfully!")}catch(de){console.error("Error saving contract edit:",de),ie.error("Failed to save contract changes.")}}},M=()=>{_(!1),L(null),q([])},F=z=>{U(z);const de=o.find(je=>je._id===z);de&&ce(je=>({...je,client:{_id:de._id,prenomFr:de.prenomFr,nomFr:de.nomFr,numeroPermis:de.numeroPermis,permisValidite:de.permisValidite}}))},A=z=>{const de=o.find(je=>je._id===z);de&&j&&L(je=>{const De={...je};return De.client||(De.client={_id:""}),{...De,client:{...De.client,_id:de._id,prenomFr:de.prenomFr,nomFr:de.nomFr,numeroPermis:de.numeroPermis,permisValidite:de.permisValidite}}})},R=z=>{J(z);const de=s.find(je=>je._id===z);de&&ce(je=>({...je,matricule:de.licensePlate,vehicle:de,pricePerDay:de.rentalPrice,startingKm:de.mileage,total:N(de.rentalPrice,je.duration||1,je.discount||0)}))},I=z=>{const de=s.find(je=>je._id===z);if(de&&j){const je=de.rentalPrice,De=N(je,j.duration,j.discount);L({...j,matricule:de.licensePlate,vehicle:de,pricePerDay:je,startingKm:de.mileage,total:De,remaining:De-j.advance})}},V=(z,de)=>{ce(je=>{const De={...je};if(z==="contractLocation"&&(hr(de)?se(be=>({...be,contractLocation:'Le champ "Lieu de Contrat" ne peut pas contenir uniquement des espaces.'})):se(be=>{const Se={...be};return delete Se.contractLocation,Se})),z==="pickupLocation"&&(hr(de)?se(be=>({...be,pickupLocation:'Le champ "Lieu Livraison" ne peut pas contenir uniquement des espaces.'})):se(be=>{const Se={...be};return delete Se.pickupLocation,Se})),z==="returnLocation"&&(typeof de=="string"&&de.trim().length===0&&de.length>0?se(be=>({...be,returnLocation:'Le champ "Lieu Récupération" ne peut pas contenir uniquement des espaces.'})):se(be=>{const Se={...be};return delete Se.returnLocation,Se})),z.includes(".")){const[be,Se]=z.split(".");be==="secondDriver"?(hr(de)?se(Ee=>({...Ee,[z]:`Le champ "${Se}" ne peut pas contenir uniquement des espaces.`})):se(Ee=>{const Ke={...Ee};return delete Ke[z],Ke}),De[be]={...De[be],[Se]:de}):De[be]={...De[be],[Se]:de}}else De[z]=de;if(z==="departureDate"||z==="returnDate"){const be=z==="departureDate"?new Date(de):new Date(De.departureDate),Se=z==="returnDate"?new Date(de):new Date(De.returnDate);if(be&&Se&&be<=Se){const Ee=Math.abs(Se.getTime()-be.getTime()),Ke=Math.ceil(Ee/(1e3*60*60*24));De.duration=Ke}else be&&Se&&be>Se?(De.duration=0,se(Ee=>({...Ee,returnDate:"La date de retour ne peut pas être antérieure à la date de départ."}))):De.duration=1}if((z==="pricePerDay"||z==="duration"||z==="discount"||z==="departureDate"||z==="returnDate"||z==="departureTime")&&(De.total=N(De.pricePerDay||0,De.duration||1,De.discount||0),De.remaining=(De.total||0)-(De.advance||0)),z==="advance"){const be=Number(de);isNaN(be)||be<0?se(Se=>({...Se,advance:"L'avance ne peut pas être une valeur négative."})):se(Se=>{const Ee={...Se};return delete Ee.advance,Ee}),De.remaining=(De.total||0)-(be||0)}if(z==="pricePerDay"||z==="guarantee"){const be=Number(de);isNaN(be)||be<0?se(Se=>({...Se,[z]:"La valeur ne peut pas être négative."})):se(Se=>{const Ee={...Se};return delete Ee[z],Ee})}if(z==="extension.duration"||z==="extension.pricePerDay"){const be=Number(de);isNaN(be)||be<1?se(Se=>({...Se,[z]:"La valeur ne peut pas être inférieure à 1."})):se(Se=>{const Ee={...Se};return delete Ee[z],Ee})}return De})},Y=async z=>{var je,De,be;if(z.preventDefault(),hr(Q.contractLocation)){ie.error('Le champ "Lieu de Contrat" ne peut pas contenir uniquement des espaces.');return}if(hr(Q.pickupLocation)){ie.error('Le champ "Lieu Livraison" ne peut pas contenir uniquement des espaces.');return}if(Object.keys(G).length>0){ie.error("Veuillez corriger les erreurs de validation.");return}if(!ve||!H){ie.error("Please select a client and a vehicle.");return}const de=["_id","chassisNumber","model","licensePlate","brand"];for(const Se of de)if(!Q.vehicle||!Q.vehicle[Se]){ie.error(`Missing required vehicle field: ${Se}. Please ensure the selected vehicle has all necessary data.`),console.error(`Missing required vehicle field: ${Se}`,Q.vehicle);return}if(Q.advance!==void 0&&Q.advance<0){ie.error("L'avance ne peut pas être une valeur négative.");return}if(Q.pricePerDay!==void 0&&Q.pricePerDay<0){ie.error("Le prix par jour ne peut pas être une valeur négative.");return}if(Q.guarantee!==void 0&&Q.guarantee<0){ie.error("La garantie ne peut pas être une valeur négative.");return}if(Q.total!==void 0&&Q.total<0){ie.error("Le total ne peut pas être une valeur négative. Veuillez ajuster le prix par jour, la durée ou la remise.");return}if(Q.remaining!==void 0&&Q.remaining<0){ie.error("Le reste à payer ne peut pas être une valeur négative. Veuillez ajuster l'avance.");return}if(((je=Q.extension)==null?void 0:je.duration)!==void 0&&Q.extension.duration<1){ie.error("La durée de prolongation ne peut pas être inférieure à 1.");return}if(((De=Q.extension)==null?void 0:De.pricePerDay)!==void 0&&Q.extension.pricePerDay<1){ie.error("Le prix par jour de prolongation ne peut pas être inférieur à 1.");return}try{const Se=new FormData;for(const Ue in Q)if(Object.prototype.hasOwnProperty.call(Q,Ue)){const Lt=Q[Ue];if(Ue==="piecesJointes"||Ue==="client"||Ue==="vehicle"||Ue==="secondDriver")continue;Ue==="returnLocation"?Se.append(Ue,String(Lt||"")):Ue!=="piecesJointes"&&Ue!=="client"&&Ue!=="vehicle"&&Ue!=="secondDriver"&&(typeof Lt=="object"&&Lt!==null?Se.append(Ue,JSON.stringify(Lt)):Lt!==void 0&&Se.append(Ue,String(Lt)))}if((be=Q.client)!=null&&be._id&&Se.append("client",Q.client._id),Q.vehicle){const Ue={...Q.vehicle,id:Q.vehicle._id};Se.append("vehicle",JSON.stringify(Ue))}Q.secondDriver&&Se.append("secondDriver",JSON.stringify(Q.secondDriver)),C.forEach(Ue=>{Se.append("documents",Ue)});const Ke=(await we.post($,Se,{headers:{"Content-Type":"multipart/form-data"}})).data,Ht=o.find(Ue=>{var Lt;return Ue._id===((Lt=Ke.client)==null?void 0:Lt._id)}),Jn=s.find(Ue=>{var Lt;return Ue._id===((Lt=Ke.vehicle)==null?void 0:Lt._id)||Ue._id===Ke.vehicle}),Wt={...Ke,client:Ht?{_id:Ht._id,prenomFr:Ht.prenomFr,nomFr:Ht.nomFr,numeroPermis:Ht.numeroPermis,permisValidite:Ht.permisValidite}:void 0,vehicle:Jn||Ke.vehicle,returnLocation:Ke.returnLocation};t([...e,Wt]),w(Wt),ie.success("Contract created successfully!"),r(!1),T([]),ce({client:{_id:"",prenomFr:"",nomFr:"",numeroPermis:"",permisValidite:""},contractNumber:"",contractDate:new Date().toISOString().split("T")[0],departureDate:new Date().toISOString().split("T")[0],departureTime:"09:00",returnDate:new Date().toISOString().split("T")[0],contractLocation:"",duration:1,pickupLocation:"",matricule:"",vehicle:{_id:"",chassisNumber:"",licensePlate:"",brand:"",model:"",circulationDate:"",fuelType:"essence",fuelLevel:"plein",mileage:0,color:"",rentalPrice:0,statut:"En parc",equipment:{pneuDeSecours:!1,posteRadio:!1,cricManivelle:!1,allumeCigare:!1,jeuDe4Tapis:!1,vetDeSecurite:!1},createdAt:"",updatedAt:""},pricePerDay:0,startingKm:0,discount:0,fuelLevel:"plein",total:0,guarantee:5e3,paymentType:"espece",advance:0,remaining:0,status:"en_cours",secondDriver:void 0,equipment:{pneuDeSecours:!1,posteRadio:!1,cricManivelle:!1,allumeCigare:!1,jeuDe4Tapis:!1,vetDeSecurite:!1},piecesJointes:[]}),U(""),J("")}catch(Se){console.error("Error adding contract:",Se),we.isAxiosError(Se)&&Se.response?(console.error("Backend error response:",Se.response.data),ie.error(`Failed to create contract: ${Se.response.data.message||Se.message}`)):ie.error("Failed to create contract. Please check console for details.")}},B=(z,de)=>{if(j){const je={...j};if(z==="contractLocation"&&(hr(de)?se(De=>({...De,contractLocation:'Le champ "Lieu de Contrat" ne peut pas contenir uniquement des espaces.'})):se(De=>{const be={...De};return delete be.contractLocation,be})),z==="pickupLocation"&&(hr(de)?se(De=>({...De,pickupLocation:'Le champ "Lieu Livraison" ne peut pas contenir uniquement des espaces.'})):se(De=>{const be={...De};return delete be.pickupLocation,be})),z==="returnLocation"&&(typeof de=="string"&&de.trim().length===0&&de.length>0?se(De=>({...De,returnLocation:'Le champ "Lieu Récupération" ne peut pas contenir uniquement des espaces.'})):se(De=>{const be={...De};return delete be.returnLocation,be})),z==="departureDate"||z==="returnDate"){const De=z==="departureDate"?new Date(de):new Date(je.departureDate),be=z==="returnDate"?new Date(de):new Date(je.returnDate);if(De&&be&&De<=be){const Se=Math.abs(be.getTime()-De.getTime()),Ee=Math.ceil(Se/(1e3*60*60*24));je.duration=Ee,se(Ke=>{const Ht={...Ke};return delete Ht.returnDate,Ht})}else De&&be&&De>be?(je.duration=0,se(Se=>({...Se,returnDate:"La date de retour ne peut pas être antérieure à la date de départ."}))):je.duration=1}if(z==="pricePerDay"||z==="duration"||z==="discount"||z==="departureDate"||z==="returnDate"||z==="departureTime"){const De=je.pricePerDay,be=je.duration,Se=je.discount;je.total=N(De,be,Se),je.remaining=(je.total||0)-(je.advance||0)}if(z==="advance"){const De=Number(de);isNaN(De)||De<0?se(be=>({...be,advance:"L'avance ne peut pas être une valeur négative."})):se(be=>{const Se={...be};return delete Se.advance,Se}),je.advance=De,je.remaining=(je.total||0)-De}if(z==="pricePerDay"||z==="guarantee"){const De=Number(de);isNaN(De)||De<0?se(be=>({...be,[z]:"La valeur ne peut pas être négative."})):se(be=>{const Se={...be};return delete Se[z],Se})}if(z==="extension.duration"||z==="extension.pricePerDay"){const De=Number(de);isNaN(De)||De<1?se(be=>({...be,[z]:"La valeur ne peut pas être inférieure à 1."})):se(be=>{const Se={...be};return delete Se[z],Se})}if(z.includes(".")){const[De,be]=z.split(".");De==="client"?(je.client||(je.client={_id:""}),je.client={...je.client,[be]:de}):De==="secondDriver"&&je.secondDriver?(hr(de)?se(Se=>({...Se,[z]:`Le champ "${be}" ne peut pas contenir uniquement des espaces.`})):se(Se=>{const Ee={...Se};return delete Ee[z],Ee}),je.secondDriver={...je.secondDriver,[be]:de}):De==="vehicle"?je.vehicle={...je.vehicle,[be]:de}:De==="equipment"?je.equipment={...je.equipment,[be]:de}:De==="extension"&&(je.extension||(je.extension={duration:0,pricePerDay:0}),je.extension={...je.extension,[be]:Number(de)})}else je[z]=de;L(je)}},ne=async(z,de)=>{if(de&&de.stopPropagation(),confirm("Êtes-vous sûr de vouloir supprimer ce contrat ?"))try{await we.delete(`${$}/${z}`),t(e.filter(je=>je._id!==z)),(g==null?void 0:g._id)===z&&w(null),ie.success("Contract deleted successfully!")}catch(je){console.error("Error deleting contract:",je),ie.error("Failed to delete contract.")}},Z=async z=>{if(g)try{await we.delete(`${$}/${g._id}/documents`,{data:{documentUrl:z.url}}),w(de=>{var je;return de?{...de,piecesJointes:(je=de.piecesJointes)==null?void 0:je.filter(De=>De.url!==z.url)}:null}),ie.success("Document supprimé avec succès.")}catch(de){console.error("Erreur lors de la suppression du document:",de),ie.error("Échec de la suppression du document.")}},re=z=>{z.vehicle,z.client,z.secondDriver,z.equipment,z.extension;const de={espece:"Espèce",cheque:"Chèque",carte_bancaire:"Carte Bancaire",virement:"Virement"};return`<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contrat de location - NetCar</title>
  <style>
    :root{--accent:#f2c200;--black:#111;--muted:#666}
    body{font-family: 'Segoe UI', Arial, sans-serif;color:var(--black);margin:18px;background:#fff}
    /* make the contract span the available page width */
    .container{max-width:100%;width:100%;margin:0}
    header{display:flex;gap:14px;align-items:flex-start}
  /* logo wrapper stacks logo and title vertically */
  .logo-wrap{background:transparent;padding:0;border-radius:0;display:flex;flex-direction:column;align-items:flex-start;gap:6px}
  .logo{width:320px;height:214px;object-fit:contain;display:block}
  .title h1{margin:0;font-size:24px}
.title{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%}
    .subtitle{color:var(--muted);font-size:16px;margin-top:6px}
  .contact{border:3px solid var(--accent);border-radius:12px;padding:20px;font-size:16px;width:340px;margin-left:auto;text-align:left;direction:ltr}
  .contact small{display:block}
  /* highlight the contact labels in the accent (yellow) color */
  .contact strong{color:var(--accent)}
.logo img{max-width:200px;height:auto}

    .yellow-box{border:3px solid var(--accent);border-radius:12px;padding:32px;margin-top:12px}
    .row{display:flex;gap:12px}
    .col{flex:1}
    .fields{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .field{font-size:13px}
  /* unified boxed inputs: ensure consistent size and alignment across the form */
  input.box-field,
  input.line,
  textarea.box-field,
  textarea.line {
    display:block;
    box-sizing:border-box;
    width:100%;
    min-height:34px;
    height:auto;
    border:2px solid #444;
    border-radius:6px;
    background:#fff;
    padding:6px 10px;
    font-size:13px;
    margin:8px 0;
    resize:vertical; /* allow users to expand if content is larger */
  }

  .access-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px;align-items:start;margin-top:10px}
  .access-item{display:flex;justify-content:space-between;align-items:center;padding:6px 4px;font-size:13px}
  .access-label{color:var(--black);}
  input.checkbox{width:18px;height:18px;-webkit-appearance:none;appearance:none;border:2px solid var(--black);border-radius:4px;background:#fff}
  input.checkbox:checked{background:var(--black)}

  /* arrange conducteurs: two conductor columns on the left and center, diagram on the right */
  .conducteurs{display:grid;grid-template-columns:1fr 1fr 260px;gap:16px;align-items:stretch;margin-top:12px}
  /* make each conducteur fill its grid cell and align content vertically so both boxes match height */
  .conducteur{border:2px solid #eee;padding:12px;border-radius:8px;display:flex;flex-direction:column;flex:1}
    .conducteur h3{margin:0 0 6px;font-size:13px}
  /* line fields replaced by boxed input-like blocks */
    .small{font-size:12px;color:var(--muted);margin-bottom:4px;}

  .diagram{width:260px;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:flex-start}
  .car-svg{width:90px;height:120px}
  .car-img{width:180px;height:auto;display:block;margin:8px 0}
  /* make inputs inside conducteur occupy full width and consistent spacing */
  .conducteur input.box-field,
  .conducteur input.line,
  .conducteur textarea.box-field,
  .conducteur textarea.line{
    width:100%;
    margin:6px 0;
    min-height:34px;
    padding:6px 10px;
    height:auto;
  }
  .diagram-label{font-size:13px;color:var(--muted);text-align:center;margin-top:4px}
  .vertical-label{writing-mode:vertical-rl;transform:rotate(180deg);font-size:12px;color:var(--muted)}

    .footer-note{
      font-size:18px;
      color:var(--black);
      margin-top:16px;
      font-weight:600;
      text-align:center;
      padding:10px 12px;
      border:2px solid rgba(0,0,0,0.06);
      border-radius:8px;
      background:rgba(242,194,0,0.08); /* subtle highlight using --accent */
    }

  /* spacing specific to the pricing/payment section so boxes don't look linked */
  .yellow-box .row{gap:28px}
  .yellow-box .col{padding-right:6px}
  .yellow-box input.line{margin:12px 0;background:#fff}


  /* center signature blocks and make them wider with extra spacing */
  /* center two narrower signature boxes with large empty sides (matches sketch) */
  .signatures{display:flex;gap:220px;padding:18px;margin:24px auto 0;justify-content:center;align-items:stretch;max-width:700px}
  /* narrower signature boxes so large whitespace appears left/right */
  .sig{flex:0 0 auto;border:2px solid #000;height:180px;max-width:260px;min-width:220px;display:flex;align-items:center;justify-content:center;padding:8px}
    .sig small{display:block;text-align:center;color:var(--muted);opacity:0.45}

  /* responsive: stack signatures on narrow screens */
  @media (max-width:900px){
    .signatures{max-width:680px}
  }
  @media (max-width:700px){
    .sig{flex:1 1 100%;height:110px;max-width:none}
    .signatures{flex-direction:column}
  }

    @media print{body{margin:8mm}.container{max-width:100%}}
  </style>
</head>
<body>
  <!-- SECTION: Container -->
  <div class="container">
    <header>
    <!-- SECTION: Header (Logo & Contact) -->
    <div class="logo-wrap">
        <img src="media/netcar.png" alt="NetCar" class="logo">
        <div class="title">
          <h1>LOCATION DE VOITURE</h1>
          <div class="subtitle">Courte et Longue Durée</div>
        </div>
      </div>
      <div class="contact">
        <strong>Adresse:</strong> N° 24, 1er étage Angle Rue Oussama Ibnou Zaid (ex. Jura) &amp; Rue Ahmed Joumari (ex Rue D’auvergne) Casablanca.<br>
        <small><strong>FIX:</strong> 05 22 23 58 66</small>
        <small><strong>GSM:</strong> 06 61 09 57 41 - 06 63 72 10 40</small>
        <small><strong>E-mail:</strong> support@mednetcar.ma</small>
      </div>
    </header>

    <div class="yellow-box">
    <!-- SECTION: Car Details & Accessories -->
    <div class="row">
        <div class="col">
          <div class="fields">
            <div class="field"><strong>Marque:</strong> <textarea class="box-field" name="marque"></textarea></div>
            <div class="field"><strong>Date et lieu de livraison:</strong> <textarea class="box-field" name="date_lieu_livraison"></textarea></div>
            <div class="field"><strong>Immat:</strong> <textarea class="box-field" name="immatriculation"></textarea></div>
            <div class="field"><strong>Date et lieu de reprise:</strong> <textarea class="box-field" name="date_lieu_reprise"></textarea></div>
            <div class="field"><strong>Kilométrage Dép:</strong> <textarea class="box-field" name="kilometrage_dep"></textarea></div>
            <div class="field"><strong>Prolonger jusqu'au:</strong> <textarea class="box-field" name="prolonger_jusqua"></textarea></div>
            <div class="field"><strong>Nombre de jours:</strong> <textarea class="box-field" name="nombre_de_jours"></textarea></div>
            <div class="field"><strong>Heure de départ:</strong> <textarea class="box-field" name="heure_de_depart"></textarea></div>
            <div class="field"><strong>Carburant:</strong> <textarea class="box-field" name="carburant"></textarea></div>
            <div class="field"><strong>Transmission:</strong> <textarea class="box-field" name="transmission"></textarea></div>
            <div class="field"><strong>Franchise d’assurance:</strong> <textarea class="box-field" name="franchise_assurance"></textarea></div>
          </div>
        </div>

        <div class="col">
          <div class="access-grid">
            <div class="access-item"><span class="access-label">PNEU DE SECOURS:</span><input type="checkbox" class="checkbox" name="pneu_de_secours"/></div>
            <div class="access-item"><span class="access-label">ALLUME CIGARE:</span><input type="checkbox" class="checkbox" name="allume_cigare"/></div>

            <div class="access-item"><span class="access-label">POSTE RADIO:</span><input type="checkbox" class="checkbox" name="poste_radio"/></div>
            <div class="access-item"><span class="access-label">JEU DE 4 TAPIS:</span><input type="checkbox" class="checkbox" name="jeu_de_4_tapis"/></div>

            <div class="access-item"><span class="access-label">CRIC MANIVELLE:</span><input type="checkbox" class="checkbox" name="cric_manivelle"/></div>
            <div class="access-item"><span class="access-label">VÊT.DE SÉCURITÉ:</span><input type="checkbox" class="checkbox" name="vet_de_securite"/></div>
          </div>
        </div>
      </div>
    </div>

    <div class="conducteurs">
    <!-- SECTION: Conducteurs (Drivers) & Car Condition -->
    <div class="conducteur">
        <h3>CONDUCTEUR (1)</h3>
  <div class="small">Nom:</div><textarea class="line" name="conducteur1_nom"></textarea>
  <div class="small">Nationalité:</div><textarea class="line" name="conducteur1_nationalite"></textarea>
  <div class="small">Né (e) le:</div><textarea class="line" name="conducteur1_ne_le"></textarea>
  <div class="small">Adresse:</div><textarea class="line" name="conducteur1_adresse"></textarea>
  <div class="small">Téléphone:</div><textarea class="line" name="conducteur1_telephone"></textarea>
  <div class="small">Adresse à l'étranger:</div><textarea class="line" name="conducteur1_adresse_etranger"></textarea>
  <div class="small">Permis de conduite N°:</div><textarea class="line" name="conducteur1_permis_num"></textarea>
  <div class="small">Délivré le:</div><textarea class="line" name="conducteur1_delivre_le"></textarea>
  <div class="small">Passeport N° ou CIN:</div><textarea class="line" name="conducteur1_passeport_num"></textarea>
  <div class="small">Délivré le:</div><textarea class="line" name="conducteur1_passeport_delivre_le"></textarea>
      </div>

      <div class="conducteur">
        <h3>CONDUCTEUR (2)</h3>
  <div class="small">Nom:</div><textarea class="line" name="conducteur2_nom"></textarea>
  <div class="small">Nationalité:</div><textarea class="line" name="conducteur2_nationalite"></textarea>
  <div class="small">Né (e) le:</div><textarea class="line" name="conducteur2_ne_le"></textarea>
  <div class="small">Adresse:</div><textarea class="line" name="conducteur2_adresse"></textarea>
  <div class="small">Téléphone:</div><textarea class="line" name="conducteur2_telephone"></textarea>
  <div class="small">Adresse à l'étranger:</div><textarea class="line" name="conducteur2_adresse_etranger"></textarea>
  <div class="small">Permis de conduite N°:</div><textarea class="line" name="conducteur2_permis_num"></textarea>
  <div class="small">Délivré le:</div><textarea class="line" name="conducteur2_delivre_le"></textarea>
  <div class="small">Passeport N° ou CIN:</div><textarea class="line" name="conducteur2_passeport_num"></textarea>
  <div class="small">Délivré le:</div><textarea class="line" name="conducteur2_passeport_delivre_le"></textarea>
      </div>

      <div class="diagram">
        <!-- replaced SVG with two car images for Départ et Retour -->
        <img src="media/caretat.jpg" alt="Départ" class="car-img">
        <div class="diagram-label">Départ</div>
        <img src="media/caretat.jpg" alt="Retour" class="car-img">
        <div class="diagram-label">Retour</div>
      </div>
    </div>

    <div class="yellow-box" style="margin-top:12px">
    <!-- SECTION: Pricing & Payment -->
    <div class="row">
        <div class="col">
          <div class="small">Prix unitaire:</div><textarea class="line" name="prix_unitaire"></textarea>
          <div class="small">Total T.T.C:</div><textarea class="line" name="total_ttc"></textarea>
        </div>
        <div class="col">
          <div class="small">Avance:</div><textarea class="line" name="avance"></textarea>
          <div class="small">Reste:</div><textarea class="line" name="reste"></textarea>
          <div class="small">Mode de paiement:</div><textarea class="line" name="mode_de_paiement"></textarea>
        </div>
      </div>
    </div>

    <div class="footer-note">Je reconnais avoir pris connaissance des conditions générales de location.</div>
    <!-- SECTION: Footer Note -->

    <div class="signatures">
    <!-- SECTION: Signatures -->
    <div class="signatures">
      <div class="sig"><small>Signature conducteur</small></div>
      <div class="sig"><small>Signature conducteur</small></div>
    </div>
  </div>

  <script>
    // auto-resize textareas to fit their content
    (function(){
      function resize(el){
        el.style.height = 'auto';
        el.style.height = (el.scrollHeight) + 'px';
      }
      var areas = document.querySelectorAll('textarea.box-field, textarea.line');
      areas.forEach(function(a){
        a.style.overflow = 'hidden';
        // initialize height based on current content
        resize(a);
        a.addEventListener('input', function(){ resize(a); });
      });
      window.addEventListener('load', function(){ areas.forEach(function(a){ resize(a); }); });
    })();
  <\/script>
  <script>
    (function(){
      const c = JSON.parse('${JSON.stringify(z).replace(/</g,"\\u003c")}');
      const v = c.vehicle || {};
      const client = c.client || {};
      const second = c.secondDriver || null;
      const eq = c.equipment || {};
      const extension = c.extension || null;

      const setVal = (name, value) => {
        const el = document.querySelector('[name="'+name+'"]');
        if(!el) return;
        if(el.type === 'checkbox') {
          el.checked = !!value;
          return;
        }
        el.value = value === null || value === undefined ? '' : value;
        try {
          if (el.tagName === 'TEXTAREA') {
            el.style.height = 'auto';
            el.style.overflow = 'hidden';
            const h = el.scrollHeight || 22;
            el.style.height = Math.max(h, 22) + 'px';
          }
        } catch (e) {}
      };

      const expandAllTextareas = () => {
        document.querySelectorAll('textarea').forEach(t => {
          try {
            t.style.height = 'auto';
            t.style.overflow = 'hidden';
            const h = t.scrollHeight || 22;
            t.style.height = Math.max(h, 22) + 'px';
          } catch (e) {}
        });
      };

      setVal('marque', v.brand || v.model || '');
      setVal('date_lieu_livraison', (c.pickupLocation ? c.pickupLocation + ' - ' : '') + (c.departureDate ? new Date(c.departureDate).toLocaleDateString('fr-FR') : ''));
      setVal('immatriculation', v.licensePlate || c.matricule || '');
      setVal('date_lieu_reprise', (c.returnLocation ? c.returnLocation + ' - ' : '') + (c.returnDate ? new Date(c.returnDate).toLocaleDateString('fr-FR') : ''));
      setVal('kilometrage_dep', c.startingKm || '');
      setVal('prolonger_jusqua', extension ? (extension.duration + ' jours') : '');
      setVal('nombre_de_jours', c.duration || '');
      setVal('heure_de_depart', c.departureTime || '');
      setVal('carburant', v.fuelType || '');
      setVal('transmission', v.transmission || v.gearbox || '');
      setVal('franchise_assurance', (v.insurance && v.insurance.company) || v.insuranceCompany || v.compagnie || c.insuranceCompany || '');

      setVal('pneu_de_secours', eq.pneuDeSecours);
      setVal('allume_cigare', eq.allumeCigare);
      setVal('poste_radio', eq.posteRadio);
      setVal('jeu_de_4_tapis', eq.jeuDe4Tapis);
      setVal('cric_manivelle', eq.cricManivelle);
      setVal('vet_de_securite', eq.vetDeSecurite);

      setVal('conducteur1_nom', ((client.prenomFr || '') + ' ' + (client.nomFr || '')).trim());
      setVal('conducteur1_nationalite', client.nationalite || client.nationality || '');
      setVal('conducteur1_ne_le', client.dateNaissance || client.birthDate || '');
      const adresse1 = client.adresseFr ? (client.adresseFr + (client.ville ? (', ' + client.ville) : '') + (client.codePostal ? (' ' + client.codePostal) : '')) : (client.adresseAr || client.adresse || client.address || '');
      setVal('conducteur1_adresse', adresse1);
      setVal('conducteur1_telephone', client.telephone || client.telephone2 || client.phone || client.gsm || '');
      setVal('conducteur1_adresse_etranger', client.adresseAr || client.adresseEtranger || client.addressAbroad || '');
      setVal('conducteur1_permis_num', client.numeroPermis || client.numero_permis || '');
      setVal('conducteur1_delivre_le', client.permisValidite || client.permis_delivre_le || client.permisValidite || '');
      setVal('conducteur1_passeport_num', client.cin || client.cinNumber || client.passport || '');
      setVal('conducteur1_passeport_delivre_le', client.cinDelivreLe || client.passportIssuedDate || client.cinDelivreLe || '');

      if (c.secondDriver) {
        const fullName2 = (((second.prenomFr || second.prenom || '') + ' ' + (second.nomFr || second.nom || '')).trim());
        setVal('conducteur2_nom', fullName2);
        setVal('conducteur2_nationalite', second.nationalite || second.nationality || '');
        setVal('conducteur2_ne_le', second.dateNaissance || second.dateOfBirth || second.birthDate || '');
        const adresse2 = second.adresseFr ? (second.adresseFr + (second.ville ? (', ' + second.ville) : '') + (second.codePostal ? (' ' + second.codePostal) : '')) : (second.adresse || second.adresseAr || second.address || '');
        setVal('conducteur2_adresse', adresse2);
        setVal('conducteur2_telephone', second.telephone || second.telephone2 || second.phone || second.gsm || '');
        setVal('conducteur2_adresse_etranger', second.adresseEtranger || second.adresseAr || second.addressAbroad || '');
        setVal('conducteur2_permis_num', second.permisNumero || second.numeroPermis || second.numero_permis || second.permisNum || '');
        setVal('conducteur2_delivre_le', second.permisDelivreLe || second.permisValidite || second.permis_delivre_le || '');
        setVal('conducteur2_passeport_num', second.passeportCin || second.cin || second.cinNumber || second.passport || '');
        setVal('conducteur2_passeport_delivre_le', second.passeportDelivreLe || second.cinDelivreLe || second.passportIssuedDate || '');
      } else {
        setVal('conducteur2_nom', '');
        setVal('conducteur2_nationalite', '');
        setVal('conducteur2_ne_le', '');
        setVal('conducteur2_adresse', '');
        setVal('conducteur2_telephone', '');
        setVal('conducteur2_adresse_etranger', '');
        setVal('conducteur2_permis_num', '');
        setVal('conducteur2_delivre_le', '');
        setVal('conducteur2_passeport_num', '');
        setVal('conducteur2_passeport_delivre_le', '');
      }

      setVal('prix_unitaire', c.pricePerDay != null ? c.pricePerDay + ' DH' : '');
      setVal('total_ttc', c.total != null ? c.total + ' DH' : '');
      setVal('avance', c.advance != null ? c.advance + ' DH' : '');
      setVal('reste', c.remaining != null ? c.remaining + ' DH' : '');
      setVal('mode_de_paiement', ${JSON.stringify(de)}[c.paymentType] || c.paymentType || '');

      expandAllTextareas();

    })();
  <\/script>
</body>
</html>`},ae=z=>{try{const de=re(z),je=window.open("","_blank","width=900,height=700");if(!je){ie.error("Impossible d'ouvrir la fenêtre d'impression. Vérifiez le bloqueur de fenêtres popup.");return}je.document.open(),je.document.write(de),je.document.close(),je.focus(),setTimeout(()=>{je.print()},500)}catch(de){console.error("Erreur lors de la génération du contrat pour impression:",de),ie.error("Erreur lors de la génération du contrat pour impression.")}};return X?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading contracts..."})}):oe?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:oe}),a.jsx("button",{onClick:S,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Contrats"}),a.jsxs("button",{onClick:()=>{r(!0),se({})},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Nouveau Contrat"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-[200px]",children:[a.jsx("label",{htmlFor:"search-contract",className:"sr-only",children:"Rechercher un contrat"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Yn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-contract",type:"text",placeholder:"Rechercher un contrat...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:c,onChange:z=>u(z.target.value)})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"status-filter",className:"sr-only",children:"Filtrer par statut"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Cw,{size:18,className:"text-gray-400"})}),a.jsxs("select",{id:"status-filter",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:m,onChange:z=>h(z.target.value),children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"en_cours",children:"En cours"}),a.jsx("option",{value:"retournee",children:"Retournée"})]})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"start-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de début"}),a.jsx(Pe,{id:"start-date-filter",selected:f,onChange:z=>b(z),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"end-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de fin"}),a.jsx(Pe,{id:"end-date-filter",selected:v,onChange:z=>D(z),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contrat"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[O.map(z=>{var je,De;const de=typeof z.vehicle=="object"?z.vehicle:s.find(be=>be._id===z.vehicle);return a.jsxs("tr",{onClick:()=>{const be=e.find(Se=>Se._id===z._id);if(be)w(be);else{const Se=s.find(Ee=>{var Ke;return Ee._id===((Ke=z.vehicle)==null?void 0:Ke._id)||Ee._id===z.vehicle});w({...z,vehicle:Se||z.vehicle})}},className:`hover:bg-gray-50 cursor-pointer ${(g==null?void 0:g._id)===z._id?"bg-blue-50":""}`,children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:de!=null&&de.imageUrl?a.jsx("img",{src:de.imageUrl.startsWith("data:")?de.imageUrl:`${W}/${de.imageUrl.replace(/\\/g,"/").replace(/^\//,"")}`,alt:`${de.brand||"N/A"} ${de.model||"N/A"}`,className:"w-10 h-10 object-cover rounded-full"}):a.jsx(bt,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:z.contractNumber||"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:`${((je=z.client)==null?void 0:je.prenomFr)||""} ${((De=z.client)==null?void 0:De.nomFr)||""}`.trim()||"N/A"})]})]})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium",children:(de==null?void 0:de.model)||"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:(de==null?void 0:de.licensePlate)||"N/A"})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:new Date(z.departureDate).toLocaleDateString("fr-FR")}),a.jsx("div",{className:"text-sm text-gray-500",children:z.contractLocation})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[z.total.toLocaleString("fr-FR")," DH"]}),a.jsx("div",{className:`text-xs ${z.remaining>0?"text-amber-600":"text-green-600"}`,children:z.remaining>0?`Reste: ${z.remaining.toLocaleString("fr-FR")} DH`:"Payé"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${z.status==="en_cours"?"bg-blue-100":"bg-green-100"} ${p(z.status)}`,children:z.status==="en_cours"?"En cours":"Retournée"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(gn,{onClick:be=>k(z,be),size:"md",className:"mr-3"}),a.jsx("button",{onClick:be=>{be.stopPropagation(),ne(z._id,be)},className:"text-red-600 hover:text-red-900",children:a.jsx(Rn,{size:18})})]})]},z._id)}),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Aucun contrat trouvé."})})]})]})})}),a.jsx("div",{className:"lg:col-span-1",children:g?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails du contrat"}),y?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:M,className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:x,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:z=>k(g,z),className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsxs("div",{className:"p-4 space-y-4",children:[g.vehicle&&typeof g.vehicle=="object"?a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[g.vehicle.imageUrl?a.jsx("img",{src:g.vehicle.imageUrl.startsWith("data:")?g.vehicle.imageUrl:`${W}/${g.vehicle.imageUrl.replace(/\\/g,"/").replace(/^\//,"")}`,alt:`${g.vehicle.brand||"N/A"} ${g.vehicle.model||"N/A"}`,className:"w-24 h-24 object-cover rounded-lg shadow"}):a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(bt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-lg",children:[g.vehicle.brand||"N/A"," ",g.vehicle.model||"N/A"]}),a.jsx("p",{className:"text-sm text-gray-600",children:g.vehicle.licensePlate||"N/A"})]})]})]}):a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(bt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg",children:"N/A"}),a.jsx("p",{className:"text-sm text-gray-600",children:"N/A"})]})]})]}),g.client&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Client"}),y&&j?a.jsxs(a.Fragment,{children:[a.jsxs("select",{name:"client",onChange:z=>A(z.target.value),value:((ue=j.client)==null?void 0:ue._id)||"",className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),o.map(z=>a.jsxs("option",{value:z._id,children:[z.prenomFr," ",z.nomFr]},z._id))]}),j.client&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prénom"}),a.jsx("input",{type:"text",name:"client.prenomFr",value:j.client.prenomFr||"",onChange:z=>B("client.prenomFr",z.target.value),className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),a.jsx("input",{type:"text",name:"client.nomFr",value:j.client.nomFr||"",onChange:z=>B("client.nomFr",z.target.value),className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N° Permis"}),a.jsx("input",{type:"text",name:"client.numeroPermis",value:j.client.numeroPermis||"",onChange:z=>B("client.numeroPermis",z.target.value),className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Validité Permis"}),a.jsx(Pe,{selected:j.client.permisValidite?new Date(j.client.permisValidite):null,onChange:z=>B("client.permisValidite",z?z.toISOString():""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]})]})]}):a.jsxs("p",{className:"font-medium",children:[`${g.client.prenomFr||""} ${g.client.nomFr||""}`.trim()||"N/A"," ",a.jsx("br",{}),a.jsxs("span",{className:"text-sm text-gray-500",children:["N° Permis: ",g.client.numeroPermis||"N/A"]})," ",a.jsx("br",{}),a.jsxs("span",{className:"text-sm text-gray-500",children:["Validité Permis: ",g.client.permisValidite?new Date(g.client.permisValidite).toLocaleDateString("fr-FR"):"N/A"]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Véhicule"}),y&&j?a.jsxs(a.Fragment,{children:[a.jsxs("select",{className:"w-full border rounded-lg p-2 mt-1",onChange:z=>I(z.target.value),value:((le=j==null?void 0:j.vehicle)==null?void 0:le._id)||"",children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),s.filter(z=>z.statut==="En parc").map(z=>a.jsxs("option",{value:z._id,children:[z.licensePlate," - ",z.brand," ",z.model]},z._id))]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modèle"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:((me=j==null?void 0:j.vehicle)==null?void 0:me.model)||"",readOnly:!0})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Immatriculation"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:((Ne=j==null?void 0:j.vehicle)==null?void 0:Ne.licensePlate)||"",readOnly:!0})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Km départ"}),a.jsx("input",{type:"number",className:"w-full border rounded-lg p-2 mt-1",value:(j==null?void 0:j.startingKm)||"",onChange:z=>B("startingKm",Number(z.target.value))})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau carburant"}),a.jsxs("select",{className:"w-full border rounded-lg p-2 mt-1",value:j==null?void 0:j.fuelLevel,onChange:z=>B("fuelLevel",z.target.value),children:[a.jsx("option",{value:"reserve",className:"text-red-500",children:"Réserve"}),a.jsx("option",{value:"1/4",className:"text-yellow-500",children:"1/4"}),a.jsx("option",{value:"1/2",className:"text-blue-500",children:"1/2"}),a.jsx("option",{value:"3/4",className:"text-green-300",children:"3/4"}),a.jsx("option",{value:"plein",className:"text-green-500",children:"Plein"})]})]})]}):a.jsxs("p",{className:"font-medium",children:[((pe=g.vehicle)==null?void 0:pe.model)||"N/A"," ",(ge=g.vehicle)!=null&&ge.licensePlate?`(${g.vehicle.licensePlate})`:""," ",a.jsx("br",{}),a.jsxs("span",{className:"text-sm text-gray-500",children:["Km départ: ",g.startingKm||"N/A"]})," ",a.jsx("br",{}),a.jsxs("span",{className:"text-sm text-gray-500",children:["Niveau carburant: ",a.jsx("span",{className:d(g.fuelLevel),children:g.fuelLevel==="reserve"?"Réserve":g.fuelLevel==="plein"?"Plein":g.fuelLevel||"N/A"})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de contrat"}),y&&j?a.jsx(Pe,{selected:j.contractDate?new Date(j.contractDate):null,onChange:z=>B("contractDate",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:new Date(g.contractDate).toLocaleDateString("fr-FR")||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de départ"}),y&&j?a.jsx(Pe,{selected:j.departureDate?new Date(j.departureDate):null,onChange:z=>B("departureDate",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:new Date(g.departureDate).toLocaleDateString("fr-FR")||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Heure de départ"}),y&&j?a.jsx("input",{type:"time",name:"departureTime",value:j.departureTime||"",onChange:z=>B("departureTime",z.target.value),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:g.departureTime||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de retour"}),y&&j?a.jsx(Pe,{selected:j.returnDate?new Date(j.returnDate):null,onChange:z=>B("returnDate",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:new Date(g.returnDate).toLocaleDateString("fr-FR")||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Durée"}),y&&j?a.jsx("input",{type:"number",name:"duration",value:j.duration||"",readOnly:!0,className:"w-full border rounded-lg p-2 mt-1 bg-gray-100"}):a.jsx("p",{className:"font-medium",children:g.duration?`${g.duration} jours`:"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Lieu de contrat"}),y&&j?a.jsx("input",{type:"text",name:"contractLocation",value:j.contractLocation||"",onChange:z=>B("contractLocation",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G.contractLocation?"border-red-500":""}`}):a.jsx("p",{className:"font-medium",children:g.contractLocation||"-"}),y&&G.contractLocation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.contractLocation})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Lieu de livraison"}),y&&j?a.jsx("input",{type:"text",name:"pickupLocation",value:j.pickupLocation||"",onChange:z=>B("pickupLocation",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G.pickupLocation?"border-red-500":""}`}):a.jsx("p",{className:"font-medium",children:g.pickupLocation||"-"}),y&&G.pickupLocation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.pickupLocation})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Lieu Récupération"}),y&&j?a.jsx("input",{type:"text",name:"returnLocation",value:j.returnLocation||"",onChange:z=>B("returnLocation",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G.returnLocation?"border-red-500":""}`}):a.jsx("p",{className:"font-medium",children:g.returnLocation||"N/A"}),y&&G.returnLocation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.returnLocation})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Prolongation"}),y&&j?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("input",{type:"checkbox",className:"mr-2",checked:!!j.extension,onChange:z=>L(de=>({...de,extension:z.target.checked?{duration:0,pricePerDay:0}:void 0}))}),a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ajouter une prolongation"})]}),j.extension&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durée (jours)"}),a.jsx("input",{type:"number",className:`w-full border rounded-lg p-2 mt-1 ${G["extension.duration"]?"border-red-500":""}`,value:j.extension.duration||"",onChange:z=>B("extension.duration",Number(z.target.value)),min:"1"}),G["extension.duration"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["extension.duration"]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix prolongation/jour"}),a.jsx("input",{type:"number",className:`w-full border rounded-lg p-2 mt-1 ${G["extension.pricePerDay"]?"border-red-500":""}`,value:j.extension.pricePerDay||"",onChange:z=>B("extension.pricePerDay",Number(z.target.value)),min:"1"}),G["extension.pricePerDay"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["extension.pricePerDay"]})]})]})]}):g.extension?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"font-medium",children:[g.extension.duration||"-"," jours"]}),a.jsxs("p",{className:"font-medium",children:[g.extension.pricePerDay||"-"," DH/jour"]})]}):a.jsx("p",{className:"font-medium text-gray-500",children:"Aucune prolongation"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Prix par jour"}),y&&j?a.jsx("input",{type:"number",name:"pricePerDay",value:j.pricePerDay||0,onChange:z=>B("pricePerDay",Number(z.target.value)),className:`w-full border rounded-lg p-2 mt-1 ${G.pricePerDay?"border-red-500":""}`,min:"0"}):a.jsxs("p",{className:"font-medium",children:[((ke=g.pricePerDay)==null?void 0:ke.toLocaleString("fr-FR"))||"N/A"," DH"]}),y&&G.pricePerDay&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.pricePerDay})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Remise"}),y&&j?a.jsx("input",{type:"number",name:"discount",value:j.discount||0,onChange:z=>B("discount",Number(z.target.value)),className:"w-full border rounded-lg p-2 mt-1",min:"0"}):a.jsxs("p",{className:"font-medium",children:[((Me=g.discount)==null?void 0:Me.toLocaleString("fr-FR"))||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),y&&j?a.jsx("input",{type:"number",name:"total",value:j.total||0,readOnly:!0,className:`w-full border rounded-lg p-2 mt-1 bg-gray-100 ${j.total<0?"border-red-500":""}`,min:"0"}):a.jsxs("p",{className:"font-medium",children:[((ye=g.total)==null?void 0:ye.toLocaleString("fr-FR"))||"N/A"," DH"]}),y&&j&&j.total<0&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Le total ne peut pas être négatif."})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Garantie"}),y&&j?a.jsx("input",{type:"number",name:"guarantee",value:j.guarantee||0,onChange:z=>B("guarantee",Number(z.target.value)),className:"w-full border rounded-lg p-2 mt-1",min:"0"}):a.jsxs("p",{className:"font-medium",children:[((Le=g.guarantee)==null?void 0:Le.toLocaleString("fr-FR"))||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Type de paiement"}),y&&j?a.jsxs("select",{name:"paymentType",value:j.paymentType||"",onChange:z=>B("paymentType",z.target.value),className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"espece",children:"Espèce"}),a.jsx("option",{value:"cheque",children:"Chèque"}),a.jsx("option",{value:"carte_bancaire",children:"Carte Bancaire"}),a.jsx("option",{value:"virement",children:"Virement"})]}):a.jsx("p",{className:"font-medium",children:g.paymentType||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Avance"}),y&&j?a.jsx("input",{type:"number",name:"advance",value:j.advance||0,onChange:z=>B("advance",Number(z.target.value)),className:"w-full border rounded-lg p-2 mt-1",min:"0"}):a.jsxs("p",{className:"font-medium",children:[((Te=g.advance)==null?void 0:Te.toLocaleString("fr-FR"))||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Reste à payer"}),y&&j?a.jsx("input",{type:"number",name:"remaining",value:j.remaining||0,readOnly:!0,className:`w-full border rounded-lg p-2 mt-1 bg-gray-100 ${j.remaining<0?"border-red-500":""}`,min:"0"}):a.jsxs("p",{className:"font-medium",children:[((Oe=g.remaining)==null?void 0:Oe.toLocaleString("fr-FR"))||"N/A"," DH"]}),y&&j&&j.remaining<0&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Le reste à payer ne peut pas être négatif."})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Statut"}),y&&j?a.jsxs("select",{name:"status",value:j.status||"",onChange:z=>B("status",z.target.value),className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"en_cours",children:"En cours"}),a.jsx("option",{value:"retournee",children:"Retournée"})]}):a.jsx("p",{className:"font-medium",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${g.status==="en_cours"?"bg-blue-100":"bg-green-100"} ${p(g.status)}`,children:g.status==="en_cours"?"En cours":"Retournée"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Deuxième Conducteur"}),y&&j?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("input",{type:"checkbox",className:"mr-2",checked:!!j.secondDriver,onChange:z=>L(de=>({...de,secondDriver:z.target.checked?{nom:"",nationalite:"",dateNaissance:"",adresse:"",telephone:"",adresseEtranger:"",permisNumero:"",permisDelivreLe:"",passeportCin:"",passeportDelivreLe:""}:void 0}))}),a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ajouter un deuxième conducteur"})]}),j.secondDriver&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverNom",className:"block text-sm font-medium text-gray-700",children:"Nom"}),a.jsx("input",{type:"text",id:"editSecondDriverNom",value:((Qe=j.secondDriver)==null?void 0:Qe.nom)||"",onChange:z=>B("secondDriver.nom",z.target.value),className:`w-full rounded-lg p-2 mt-1 ${G["secondDriver.nom"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.nom"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.nom"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverNationalite",className:"block text-sm font-medium text-gray-700",children:"Nationalité"}),a.jsx("input",{type:"text",id:"editSecondDriverNationalite",value:((ze=j.secondDriver)==null?void 0:ze.nationalite)||"",onChange:z=>B("secondDriver.nationalite",z.target.value),className:`w-full rounded-lg p-2 mt-1 ${G["secondDriver.nationalite"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.nationalite"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.nationalite"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverDateNaissance",className:"block text-sm font-medium text-gray-700",children:"Né (e) le"}),a.jsx(Pe,{selected:(Fe=j.secondDriver)!=null&&Fe.dateNaissance?new Date(j.secondDriver.dateNaissance):null,onChange:z=>B("secondDriver.dateNaissance",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:`w-full rounded-lg p-2 mt-1 ${G["secondDriver.dateNaissance"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.dateNaissance"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.dateNaissance"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverAdresse",className:"block text-sm font-medium text-gray-700",children:"Adresse"}),a.jsx("input",{type:"text",id:"editSecondDriverAdresse",value:((Ve=j.secondDriver)==null?void 0:Ve.adresse)||"",onChange:z=>B("secondDriver.adresse",z.target.value),className:`w-full rounded-lg p-2 mt-1 ${G["secondDriver.adresse"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.adresse"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.adresse"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverTelephone",className:"block text-sm font-medium text-gray-700",children:"Téléphone"}),a.jsx("input",{type:"text",id:"editSecondDriverTelephone",value:((Be=j.secondDriver)==null?void 0:Be.telephone)||"",onChange:z=>B("secondDriver.telephone",z.target.value),className:`w-full rounded-lg p-2 mt-1 ${G["secondDriver.telephone"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.telephone"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.telephone"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverAdresseEtranger",className:"block text-sm font-medium text-gray-700",children:"Adresse à l'étranger"}),a.jsx("input",{type:"text",id:"editSecondDriverAdresseEtranger",value:((Ye=j.secondDriver)==null?void 0:Ye.adresseEtranger)||"",onChange:z=>B("secondDriver.adresseEtranger",z.target.value),className:`w-full rounded-lg p-2 mt-1 ${G["secondDriver.adresseEtranger"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.adresseEtranger"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.adresseEtranger"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverPermisNumero",className:"block text-sm font-medium text-gray-700",children:"Permis de conduite N°"}),a.jsx("input",{type:"text",id:"editSecondDriverPermisNumero",value:((qe=j.secondDriver)==null?void 0:qe.permisNumero)||"",onChange:z=>B("secondDriver.permisNumero",z.target.value),className:`w-full rounded-lg p-2 mt-1 ${G["secondDriver.permisNumero"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.permisNumero"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.permisNumero"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverPermisDelivreLe",className:"block text-sm font-medium text-gray-700",children:"Délivré le"}),a.jsx(Pe,{selected:(Je=j.secondDriver)!=null&&Je.permisDelivreLe?new Date(j.secondDriver.permisDelivreLe):null,onChange:z=>B("secondDriver.permisDelivreLe",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:`w-full rounded-lg p-2 mt-1 ${G["secondDriver.permisDelivreLe"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.permisDelivreLe"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.permisDelivreLe"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverPasseportCin",className:"block text-sm font-medium text-gray-700",children:"Passeport N° ou CIN"}),a.jsx("input",{type:"text",id:"editSecondDriverPasseportCin",value:((He=j.secondDriver)==null?void 0:He.passeportCin)||"",onChange:z=>B("secondDriver.passeportCin",z.target.value),className:`w-full rounded-lg p-2 mt-1 ${G["secondDriver.passeportCin"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.passeportCin"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.passeportCin"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverPasseportDelivreLe",className:"block text-sm font-medium text-gray-700",children:"Délivré le"}),a.jsx(Pe,{selected:(Ie=j.secondDriver)!=null&&Ie.passeportDelivreLe?new Date(j.secondDriver.passeportDelivreLe):null,onChange:z=>B("secondDriver.passeportDelivreLe",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:`w-full rounded-lg p-2 mt-1 ${G["secondDriver.passeportDelivreLe"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.passeportDelivreLe"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.passeportDelivreLe"]})]})]})]}):g.secondDriver?a.jsxs("div",{className:"font-medium",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Nom:"})," ",g.secondDriver.nom||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Nationalité:"})," ",g.secondDriver.nationalite||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Né (e) le:"})," ",g.secondDriver.dateNaissance?new Date(g.secondDriver.dateNaissance).toLocaleDateString("fr-FR"):"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Adresse:"})," ",g.secondDriver.adresse||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Téléphone:"})," ",g.secondDriver.telephone||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Adresse à l'étranger:"})," ",g.secondDriver.adresseEtranger||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Permis de conduire N°:"})," ",g.secondDriver.permisNumero||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Délivré le:"})," ",g.secondDriver.permisDelivreLe?new Date(g.secondDriver.permisDelivreLe).toLocaleDateString("fr-FR"):"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Passeport N° ou CIN:"})," ",g.secondDriver.passeportCin||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Délivré le:"})," ",g.secondDriver.passeportDelivreLe?new Date(g.secondDriver.passeportDelivreLe).toLocaleDateString("fr-FR"):"N/A"]})]}):a.jsx("p",{className:"font-medium text-gray-500",children:"Aucun deuxième conducteur"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Équipements"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 mt-1",children:y&&j?Fm.map(z=>{var de;return a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:((de=j.equipment)==null?void 0:de[z.id])||!1,onChange:je=>B(`equipment.${z.id}`,je.target.checked),className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-600",children:z.label})]},z.id)}):Fm.map(z=>{var de;return a.jsxs("div",{className:"flex items-center",children:[a.jsx(kD,{size:16,className:(de=g.equipment)!=null&&de[z.id]?"text-green-500":"text-gray-300"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:z.label})]},z.id)})})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Pièces Jointes:"}),y&&j?a.jsx(mt,{api_url:W,existingDocuments:j.piecesJointes||[],newFiles:P,onNewFilesChange:q,onRemoveExistingDocument:Z}):g.piecesJointes&&g.piecesJointes.length>0?a.jsx(mt,{api_url:W,existingDocuments:g.piecesJointes,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:Z,label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]}),!y&&a.jsx("div",{className:"pt-4 border-t",children:a.jsx("div",{className:"flex space-x-3",children:a.jsx("button",{onClick:()=>g&&ae(g),disabled:!g,className:"flex-1 border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Imprimer"})})})]})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(Ra,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucun contrat sélectionné"})]})})]}),n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sn,{onClick:()=>r(!1)}),a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Nouveau Contrat"}),a.jsxs("form",{className:"space-y-6",onSubmit:Y,children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Information Client"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex flex-col col-span-3 mb-4",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Sélectionner un client"}),a.jsxs("select",{className:"border rounded-lg p-2",value:ve,onChange:z=>F(z.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),o.map(z=>a.jsxs("option",{value:z._id,children:[z.prenomFr||""," ",z.nomFr||""," - ",z.numeroPermis]},z._id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Prénom"}),a.jsx("input",{type:"text",placeholder:"Prénom",className:"border rounded-lg p-2",value:((We=Q.client)==null?void 0:We.prenomFr)||"",onChange:z=>V("client.prenomFr",z.target.value),required:!0,readOnly:!!ve})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Nom"}),a.jsx("input",{type:"text",placeholder:"Nom",className:"border rounded-lg p-2",value:((et=Q.client)==null?void 0:et.nomFr)||"",onChange:z=>V("client.nomFr",z.target.value),required:!0,readOnly:!!ve})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"N° Permis"}),a.jsx("input",{type:"text",placeholder:"N° Permis",className:"border rounded-lg p-2",value:((it=Q.client)==null?void 0:it.numeroPermis)||"",onChange:z=>V("client.numeroPermis",z.target.value),required:!0,readOnly:!!ve})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Validité Permis"}),a.jsx(Pe,{selected:(pt=Q.client)!=null&&pt.permisValidite?new Date(Q.client.permisValidite):null,onChange:z=>V("client.permisValidite",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2",required:!0,readOnly:!!ve})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Information Contrat"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Date de Contrat"}),a.jsx(Pe,{selected:Q.contractDate?new Date(Q.contractDate):null,onChange:z=>V("contractDate",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Date de Sortie"}),a.jsx(Pe,{selected:Q.departureDate?new Date(Q.departureDate):null,onChange:z=>V("departureDate",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Heure de départ"}),a.jsx("input",{type:"time",name:"departureTime",placeholder:"HH:MM",className:"border rounded-lg p-2",value:Q.departureTime||"",onChange:z=>V("departureTime",z.target.value),required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Date de Retour"}),a.jsx(Pe,{selected:Q.returnDate?new Date(Q.returnDate):null,onChange:z=>V("returnDate",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Lieu de Contrat"}),a.jsx("input",{type:"text",name:"contractLocation",placeholder:"Lieu de Contrat",className:`border rounded-lg p-2 ${G.contractLocation?"border-red-500":""}`,value:Q.contractLocation||"",onChange:z=>V("contractLocation",z.target.value),required:!0}),G.contractLocation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.contractLocation})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Durée (jours)"}),a.jsx("input",{type:"number",name:"duration",placeholder:"Durée (jours)",className:"border rounded-lg p-2 bg-gray-100",value:Q.duration,readOnly:!0,required:!0,min:"1"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Lieu Livraison"}),a.jsx("input",{type:"text",name:"pickupLocation",placeholder:"Lieu Livraison",className:`border rounded-lg p-2 ${G.pickupLocation?"border-red-500":""}`,value:Q.pickupLocation||"",onChange:z=>V("pickupLocation",z.target.value),required:!0}),G.pickupLocation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.pickupLocation})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Lieu Récupération"}),a.jsx("input",{type:"text",name:"returnLocation",placeholder:"Lieu Récupération",className:`border rounded-lg p-2 ${G.returnLocation?"border-red-500":""}`,value:Q.returnLocation||"",onChange:z=>V("returnLocation",z.target.value)}),G.returnLocation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.returnLocation})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{className:"border rounded-lg p-2",value:H,onChange:z=>R(z.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner Véhicule"}),s.filter(z=>z.statut==="En parc").map(z=>a.jsxs("option",{value:z._id,children:[z.licensePlate," - ",z.brand," ",z.model]},z._id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Prix par Jour"}),a.jsx("input",{type:"number",name:"pricePerDay",placeholder:"Prix par Jour",className:"border rounded-lg p-2",value:Q.pricePerDay||"",onChange:z=>V("pricePerDay",Number(z.target.value)),required:!0,readOnly:!!H,min:"0"}),G.pricePerDay&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.pricePerDay})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Km Départ"}),a.jsx("input",{type:"number",name:"startingKm",placeholder:"Km Départ",value:Q.startingKm||"",onChange:z=>V("startingKm",Number(z.target.value)),required:!0,readOnly:!!H,className:"border rounded-lg p-2",min:"0"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Remise (DH)"}),a.jsx("input",{type:"number",name:"discount",placeholder:"Remise (DH)",className:"border rounded-lg p-2",value:Q.discount||"",onChange:z=>V("discount",Number(z.target.value)),min:"0"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Carburant Départ"}),a.jsxs("select",{name:"fuelLevel",className:"border rounded-lg p-2",value:Q.fuelLevel,onChange:z=>V("fuelLevel",z.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"reserve",className:"text-red-500",children:"Réserve"}),a.jsx("option",{value:"1/4",className:"text-yellow-500",children:"1/4"}),a.jsx("option",{value:"1/2",className:"text-blue-500",children:"1/2"}),a.jsx("option",{value:"3/4",className:"text-green-300",children:"3/4"}),a.jsx("option",{value:"plein",className:"text-green-500",children:"Plein"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Total"}),a.jsx("input",{type:"number",name:"total",placeholder:"Total",className:"border rounded-lg p-2",value:Q.total||"",readOnly:!0,min:"0"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Garantie"}),a.jsx("input",{type:"number",name:"guarantee",placeholder:"Garantie",className:"border rounded-lg p-2",value:Q.guarantee||"",onChange:z=>V("guarantee",Number(z.target.value)),min:"0"}),G.guarantee&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.guarantee})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Type Paiement"}),a.jsxs("select",{name:"paymentType",className:"border rounded-lg p-2",value:Q.paymentType,onChange:z=>V("paymentType",z.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"espece",children:"Espèce"}),a.jsx("option",{value:"cheque",children:"Chèque"}),a.jsx("option",{value:"carte_bancaire",children:"Carte Bancaire"}),a.jsx("option",{value:"virement",children:"Virement"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Avance"}),a.jsx("input",{type:"number",name:"advance",placeholder:"Avance",className:"border rounded-lg p-2",value:Q.advance||"",onChange:z=>V("advance",Number(z.target.value)),min:"0"}),G.advance&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.advance})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Reste"}),a.jsx("input",{type:"number",name:"remaining",placeholder:"Reste",className:"border rounded-lg p-2",value:Q.remaining||"",readOnly:!0,min:"0"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Statut"}),a.jsxs("select",{name:"status",value:Q.status||"",onChange:z=>V("status",z.target.value),className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"en_cours",children:"En cours"}),a.jsx("option",{value:"retournee",children:"Retournée"})]})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("h3",{className:"font-semibold",children:"Deuxième Conducteur"}),a.jsx("input",{type:"checkbox",className:"ml-2",checked:!!Q.secondDriver,onChange:z=>ce(de=>({...de,secondDriver:z.target.checked?{nom:"",nationalite:"",dateNaissance:"",adresse:"",telephone:"",adresseEtranger:"",permisNumero:"",permisDelivreLe:"",passeportCin:"",passeportDelivreLe:""}:void 0}))})]}),Q.secondDriver&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverNom",className:"block text-sm font-medium text-gray-700",children:"Nom"}),a.jsx("input",{type:"text",id:"secondDriverNom",value:((At=Q.secondDriver)==null?void 0:At.nom)||"",onChange:z=>V("secondDriver.nom",z.target.value),className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverNationalite",className:"block text-sm font-medium text-gray-700",children:"Nationalité"}),a.jsx("input",{type:"text",id:"secondDriverNationalite",value:((Ut=Q.secondDriver)==null?void 0:Ut.nationalite)||"",onChange:z=>V("secondDriver.nationalite",z.target.value),className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverDateNaissance",className:"block text-sm font-medium text-gray-700",children:"Né (e) le"}),a.jsx(Pe,{selected:(xn=Q.secondDriver)!=null&&xn.dateNaissance?new Date(Q.secondDriver.dateNaissance):null,onChange:z=>V("secondDriver.dateNaissance",z?z.toISOString().split("T")[0]:""),dateFormat:"yyyy-MM-dd",className:"border rounded-lg p-2 w-full",locale:"fr"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverAdresse",className:"block text-sm font-medium text-gray-700",children:"Adresse"}),a.jsx("input",{type:"text",id:"secondDriverAdresse",value:((qn=Q.secondDriver)==null?void 0:qn.adresse)||"",onChange:z=>V("secondDriver.adresse",z.target.value),className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverTelephone",className:"block text-sm font-medium text-gray-700",children:"Téléphone"}),a.jsx("input",{type:"text",id:"secondDriverTelephone",value:((In=Q.secondDriver)==null?void 0:In.telephone)||"",onChange:z=>V("secondDriver.telephone",z.target.value),className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverAdresseEtranger",className:"block text-sm font-medium text-gray-700",children:"Adresse à l'étranger"}),a.jsx("input",{type:"text",id:"secondDriverAdresseEtranger",value:((Qt=Q.secondDriver)==null?void 0:Qt.adresseEtranger)||"",onChange:z=>V("secondDriver.adresseEtranger",z.target.value),className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverPermisNumero",className:"block text-sm font-medium text-gray-700",children:"Permis de conduite N°"}),a.jsx("input",{type:"text",id:"secondDriverPermisNumero",value:((Kn=Q.secondDriver)==null?void 0:Kn.permisNumero)||"",onChange:z=>V("secondDriver.permisNumero",z.target.value),className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverPermisDelivreLe",className:"block text-sm font-medium text-gray-700",children:"Délivré le"}),a.jsx(Pe,{selected:(tn=Q.secondDriver)!=null&&tn.permisDelivreLe?new Date(Q.secondDriver.permisDelivreLe):null,onChange:z=>V("secondDriver.permisDelivreLe",z?z.toISOString().split("T")[0]:""),dateFormat:"yyyy-MM-dd",className:"border rounded-lg p-2 w-full",locale:"fr"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverPasseportCin",className:"block text-sm font-medium text-gray-700",children:"Passeport N° ou CIN"}),a.jsx("input",{type:"text",id:"secondDriverPasseportCin",value:((Qn=Q.secondDriver)==null?void 0:Qn.passeportCin)||"",onChange:z=>V("secondDriver.passeportCin",z.target.value),className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverPasseportDelivreLe",className:"block text-sm font-medium text-gray-700",children:"Délivré le"}),a.jsx(Pe,{selected:(Gn=Q.secondDriver)!=null&&Gn.passeportDelivreLe?new Date(Q.secondDriver.passeportDelivreLe):null,onChange:z=>V("secondDriver.passeportDelivreLe",z?z.toISOString().split("T")[0]:""),dateFormat:"yyyy-MM-dd",className:"border rounded-lg p-2 w-full",locale:"fr"})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Équipements/Accessoires"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Fm.map(z=>{var de;return a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",name:z.id,className:"mr-2",checked:((de=Q.equipment)==null?void 0:de[z.id])||!1,onChange:je=>V(`equipment.${z.id}`,je.target.checked)}),z.label]},z.id)})})]}),a.jsxs("section",{children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("h3",{className:"font-semibold",children:"Prolongation"}),a.jsx("input",{type:"checkbox",className:"ml-2",checked:!!Q.extension,onChange:z=>ce(de=>({...de,extension:z.target.checked?{duration:0,pricePerDay:0}:void 0}))})]}),Q.extension&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durée (jours)"}),a.jsx("input",{type:"number",placeholder:"Durée (jours)",className:`border rounded-lg p-2 ${G["extension.duration"]?"border-red-500":""}`,value:Q.extension.duration||"",onChange:z=>V("extension.duration",Number(z.target.value)),min:"1"}),G["extension.duration"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["extension.duration"]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix par Jour"}),a.jsx("input",{type:"number",placeholder:"Prix par Jour",className:`border rounded-lg p-2 ${G["extension.pricePerDay"]?"border-red-500":""}`,value:Q.extension.pricePerDay||"",onChange:z=>V("extension.pricePerDay",Number(z.target.value)),min:"1"}),G["extension.pricePerDay"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["extension.pricePerDay"]})]})]})]}),a.jsxs("section",{className:"border-b pb-4 mb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Pièces Jointes"}),a.jsx(mt,{api_url:W,existingDocuments:[],newFiles:C,onNewFilesChange:T,onRemoveExistingDocument:()=>Promise.resolve()})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg",disabled:!ve||!H,children:"Créer Contrat"})]})]})]})})]})};kn("fr",Dn);const Yu=e=>typeof e=="string"&&e.trim().length===0,t3=()=>{var p,N,k;const[e,t]=E.useState([]),[n,r]=E.useState(!0),[s,i]=E.useState(null),[o,l]=E.useState(""),[c,u]=E.useState("all"),[m,h]=E.useState(null),[f,b]=E.useState(null),[v,D]=E.useState(!1),[g,w]=E.useState(null),[y,_]=E.useState(!1),[j,L]=E.useState(null),[C,T]=E.useState({}),P="http://localhost:5000",q=`${P}/api/factures`,X=`${P}/api/customers`,te=`${P}/api/contracts`,[oe,fe]=E.useState([]),[G,se]=E.useState([]),W=E.useCallback(async()=>{r(!0),i(null);try{const[x,M,F]=await Promise.all([we.get(`${q}?populate=client`),we.get(X),we.get(te)]);return t(x.data),fe(M.data),se(F.data),{invoices:x.data,customers:M.data,contracts:F.data}}catch(x){return console.error("Error fetching data:",x),i("Failed to load data."),ie.error("Failed to load data."),{invoices:[],customers:[],contracts:[]}}finally{r(!1)}},[]);E.useEffect(()=>{W()},[W]);const $=e.filter(x=>{var V,Y;const M=`${((V=x.client)==null?void 0:V.prenomFr)||""} ${((Y=x.client)==null?void 0:Y.nomFr)||""}`.toLowerCase().includes(o.toLowerCase())||x.invoiceNumber.toLowerCase().includes(o.toLowerCase()),F=c==="all"||c==="paid"&&x.amountPaid>=x.totalTTC||c==="unpaid"&&x.amountPaid<x.totalTTC,A=new Date(x.invoiceDate),R=m?A>=m:!0,I=f?A<=f:!0;return M&&F&&R&&I}),K=x=>x.amountPaid>=x.totalTTC?"text-green-500":"text-red-500",ee=async x=>{var M,F;try{const A={client:(M=x.client)==null?void 0:M._id,contract:(F=x.contract)==null?void 0:F._id,invoiceDate:x.invoiceDate,dueDate:x.dueDate,totalTTC:x.totalTTC,invoiceNumber:x.invoiceNumber,location:x.location,type:x.type,montantHT:x.montantHT,tvaAmount:x.tvaAmount,tvaPercentage:x.tvaPercentage,paymentType:x.paymentType,amountPaid:x.amountPaid},R=await we.post(q,A);await W(),D(!1),ie.success("Invoice added successfully.")}catch(A){console.error("Error adding invoice:",A),ie.error("Failed to add invoice.")}},Q=async()=>{var x,M;if(!(!j||!g)){if(Yu(j.location)){ie.error('Le champ "Lieu" ne peut pas être vide ou contenir uniquement des espaces.');return}try{const F={client:(x=j.client)==null?void 0:x._id,contract:(M=j.contract)==null?void 0:M._id,invoiceDate:j.invoiceDate,dueDate:j.dueDate,totalTTC:j.totalTTC,invoiceNumber:j.invoiceNumber,location:j.location,type:j.type,montantHT:j.montantHT,tvaAmount:j.tvaAmount,tvaPercentage:j.tvaPercentage,paymentType:j.paymentType,amountPaid:j.amountPaid},A=await we.put(`${q}/${g._id}`,F);await W();const R=e.find(I=>I._id===A.data._id);w(R||A.data),_(!1),L(null),ie.success("Invoice updated successfully.")}catch(F){console.error("Error updating invoice:",F),ie.error("Failed to update invoice.")}}},ce=async x=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette facture ?"))try{await we.delete(`${q}/${x}`),t(e.filter(M=>M._id!==x)),w(null),_(!1),L(null),ie.success("Invoice deleted successfully.")}catch(M){console.error("Error deleting invoice:",M),ie.error("Failed to delete invoice.")}},ve=()=>{g&&(L({...g}),_(!0))},U=()=>{_(!1),L(null),T({})},H=(x,M)=>{j&&L(F=>{if(!F)return null;let A={...F,[x]:M};if(x==="location"&&(Yu(M)?T(R=>({...R,[x]:'Le champ "Lieu" ne peut pas contenir uniquement des espaces.'})):T(R=>{const I={...R};return delete I[x],I})),x==="montantHT"||x==="tvaPercentage"||x==="tvaAmount"){const R=A.montantHT||0,I=A.tvaPercentage||0;if(A.tvaAmount,x==="montantHT"||x==="tvaPercentage"){const V=x==="montantHT"?M:R,B=V*((x==="tvaPercentage"?M:I)/100),ne=V+B;A={...A,tvaAmount:B,totalTTC:ne}}else if(x==="tvaAmount"){const V=M,Y=R+V,B=R!==0?V/R*100:0;A={...A,totalTTC:Y,tvaPercentage:B}}}else if(x==="contract"){const R=G.find(I=>I._id===M);if(A={...A,contract:R},R&&R.total!==void 0){const I=R.total,V=A.tvaPercentage||0;let Y=0,B=0;V!==0?(Y=I/(1+V/100),B=I-Y):(Y=I,B=0),A={...A,totalTTC:I,montantHT:Y,tvaAmount:B}}else A={...A,totalTTC:0,montantHT:0,tvaAmount:0,tvaPercentage:0}}else if(x==="client"){const R=oe.find(I=>I._id===M);A={...A,client:R}}return A})},J=(x,M)=>{j&&L(F=>({...F,[M]:x?x.toISOString().split("T")[0]:""}))},S=x=>(x??0).toLocaleString("fr-FR")+" DH",O=x=>{var Ne;const M=x.contract&&typeof x.contract=="object"?x.contract:G.find(pe=>pe._id===x.contract),F=M==null?void 0:M.vehicle,A=F?`${F.brand||""} ${F.model||""} ${F.licensePlate?`(${F.licensePlate})`:""}`.trim():"N/A",R=(M==null?void 0:M.duration)??(typeof x.contract=="object"?x.contract.duration:void 0)??"N/A",I=x.client?`${x.client.prenomFr||""} ${x.client.nomFr||""}`.trim():"N/A",V=((Ne=x.client)==null?void 0:Ne.ice)||"",Y=x.invoiceDate?new Date(x.invoiceDate).toLocaleDateString("fr-FR"):"",B=typeof window<"u"?window.location.origin:"",ne=`${B}/media/netcar.png`,Z=`${B}/media/net.png`,re=pe=>{if(pe===0)return"zéro";const ge=["zéro","un","deux","trois","quatre","cinq","six","sept","huit","neuf","dix","onze","douze","treize","quatorze","quinze","seize"],ke=["","dix","vingt","trente","quarante","cinquante","soixante","soixante-dix","quatre-vingt","quatre-vingt-dix"],Me=ze=>{if(ze<17)return ge[ze];if(ze<20)return"dix-"+ge[ze-10];if(ze<70){const Fe=Math.floor(ze/10),Ve=ze%10;return Ve===0?ke[Fe]:ke[Fe]+(Ve===1&&(Fe===1||Fe===7||Fe===9)?"-et-un":"-"+ge[Ve]).replace("-un","-un")}return ze<80?"soixante-"+Me(ze-60):ze<100?ze===80?"quatre-vingts":"quatre-vingt-"+Me(ze-80):""},ye=ze=>{const Fe=Math.floor(ze/100),Ve=ze%100;let Be="";return Fe>0&&(Fe===1?Be="cent":Be=ge[Fe]+" cent",Ve===0&&Fe>1&&(Be+="s")),Ve>0&&(Be&&(Be+=" "),Be+=Me(Ve)),Be},Le=[],Te=Math.floor(pe/1e9);Te&&(Le.push(Te===1?"milliard":re(Te)+" milliards"),pe-=Te*1e9);const Oe=Math.floor(pe/1e6);Oe&&(Le.push(Oe===1?"un million":re(Oe)+" millions"),pe-=Oe*1e6);const Qe=Math.floor(pe/1e3);return Qe&&(Le.push(Qe===1?"mille":re(Qe)+" mille"),pe-=Qe*1e3),pe>0&&Le.push(ye(pe)),Le.join(" ").replace(/\s+/g," ").trim()},ae=Math.round(((x.totalTTC??0)+Number.EPSILON)*100)/100,ue=Math.floor(ae),le=Math.round((ae-ue)*100),me=`${re(ue)} dirhams${le>0?" et "+re(le)+" centimes":""}`;return`<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Facture ${x.invoiceNumber||""}</title>
  <style>
    :root{ --bg:#f6f7fb; --card:#ffffff; --muted:#6b7280; --accent:#0f62fe; --border:#e6e9ef; --table-head:#f3f5f9; --success:#e6fff4; }
    body{ margin:0; padding:28px; background:var(--bg); font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; color:#111827; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
    .invoice-container{ max-width:920px; margin:0 auto; background:var(--card); padding:36px; border-radius:12px; box-shadow:0 8px 30px rgba(15,23,42,0.08); border:1px solid var(--border); }
    .header{ display:flex; justify-content:space-between; align-items:center; gap:20px; margin-bottom:28px; padding-bottom:8px; border-bottom:1px solid var(--border); }
    .logo-left, .logo-right{ height:110px; object-fit:contain; display:block; }
    .logo-left{ max-width:420px; } .logo-right{ max-width:420px; }
    .invoice-info{ display:grid; grid-template-columns: 1fr 240px; gap:18px; align-items:start; margin-top:18px; margin-bottom:18px; }
    .left-info{ padding:14px 18px; border-radius:8px; background:#fbfdff; border:1px dashed var(--border); }
    .left-info p{ margin:6px 0; color:var(--muted); } .left-info p strong{ color:#111827; font-weight:600; }
    .right-info{ text-align:right; color:var(--muted); } .right-info p{ margin:6px 0; }
    table{ width:100%; border-collapse:separate; border-spacing:0; margin-top:8px; overflow:hidden; border-radius:8px; }
    thead th{ background:var(--table-head); color:#111827; font-weight:700; text-transform:uppercase; font-size:13px; padding:14px 18px; border-bottom:1px solid var(--border); text-align:left; letter-spacing:0.6px; }
    tbody td{ background:#fff; padding:14px 18px; border-bottom:1px solid var(--border); vertical-align:middle; }
    tbody td:nth-child(2){ text-align:right; color:#0b1226; font-variant-numeric:proportional-nums; }
    tbody tr:nth-child(even) td{ background:#fbfbfc; }
    tbody > tr:first-child td{ padding:28px 20px; font-size:1.04rem; min-height:110px; background:linear-gradient(180deg,#fff,#fbfdff); }
    tbody > tr:last-child td{ font-weight:800; background:var(--success); font-size:1.02rem; }
  .amount-row{ display:flex; gap:12px; align-items:center; margin-top:18px; }
  /* Make amount in words larger and allow wrapping/multi-line */
  .Amount.in.words{ flex:1; padding:14px 16px; border-bottom:2px dashed var(--border); min-height:80px; color:#111827; font-style:italic; font-size:1.05rem; line-height:1.35; white-space:normal; word-break:break-word; }
    @media print{ body{ background:#fff; padding:0; } .invoice-container{ box-shadow:none; border:none; } .header, .invoice-info{ border-color:#ddd; } }
    @media (max-width:720px){ .invoice-container{ padding:20px; } .invoice-info{ grid-template-columns: 1fr; } .right-info{ text-align:left; } .logo-left, .logo-right{ height:90px; max-width:320px; } tbody > tr:first-child td{ min-height:80px; padding:18px; } }
    .invoice-footer{ margin-top:26px; padding-top:12px; border-top:1px solid var(--border); text-align:center; color:var(--muted); font-size:13px; line-height:1.4; }
    .signatures{ display:flex; gap:24px; margin-top:22px; align-items:flex-end; justify-content:space-between; }
    .sign-box{ flex:1; min-height:120px; border:1px dashed var(--border); border-radius:8px; background:#fff; padding:14px; display:flex; flex-direction:column; justify-content:flex-end; }
    .sign-box.small{ max-width:55%; min-height:160px; } .sign-label{ font-size:13px; color:var(--muted); margin-bottom:6px; } .sign-line{ height:2px; background:transparent; border-bottom:1px solid #111827; width:70%; }
  </style>
</head>
<body>
  <div class="invoice-container">
    <div class="header">
    <img src="${ne}" alt="Logo Left" class="logo-left">
    <img src="${Z}" alt="Logo Right" class="logo-right">
  </div>

  <div class="invoice-info">
    <div class="left-info">
      <p><strong>Facture:</strong> ${x.invoiceNumber||""}</p>
      <p><strong>Client:</strong> ${I}</p>
      <p><strong>ICE:</strong> ${V}</p>
    </div>
    <div class="right-info">
      <p><strong>Date:</strong> ${Y}</p>
      <p><strong>Lieu:</strong> ${x.location||""}</p>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>DÉSIGNATION</th>
        <th>MONTANT</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="the car rented">${A}</td>
        <td class="day rented">${R}</td>
      </tr>
      <tr>
        <td>HT</td>
        <td class="HT price">${S(x.montantHT)}</td>
      </tr>
      <tr>
        <td>TVA</td>
        <td class="TVA price">${S(x.tvaAmount)}</td>
      </tr>
      <tr>
        <td>TTC</td>
        <td class="TTC price">${S(x.totalTTC)}</td>
      </tr>
    </tbody>
  </table>

  <div class="amount-row" style="margin-top:18px;">
    <div style="font-weight:600;">Arreté la facture à la somme de :</div>
    <div class="Amount in words" style="flex:1; margin-left:12px; min-height:34px; border-bottom:1px solid #000;">${me}</div>
</div>

  <div class="signatures">
    <div class="sign-box small">
      <div class="sign-label">Cachet</div>
      <div class="sign-line"></div>
    </div>
    <div class="sign-box">
      <div class="sign-label">Signature</div>
      <div class="sign-line"></div>
    </div>
  </div>

  <div class="invoice-footer">N° 24, 1* Étage Angle Rue Oussama Ibnou Zaid (ex. Jura) &amp; Rue Ahmed Joumari (ex rue d'auvergne) - Casablanca<br>
  Tél: 05 20 72 67 32 - GSM: 0661 09 57 41 - 06 63 72 10 40<br>
  E-mail: <a href="mailto:Mednetcar23@gmail.com">contact@mednetcar.ma</a></div>

</div>

</body>
</html>`},d=x=>{if(!x)return;const M=O(x),F=window.open("","_blank","width=900,height=800");if(!F){ie.error("Impossible d'ouvrir la fenêtre d'impression.");return}F.document.open(),F.document.write(M),F.document.close(),setTimeout(()=>{F.focus(),F.print(),F.close()},500)};return n?a.jsx("p",{children:"Loading..."}):s?a.jsx("p",{children:s}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Factures"}),a.jsxs("button",{onClick:()=>{w(null),D(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Nouvelle Facture"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-[200px]",children:[a.jsx("label",{htmlFor:"search-invoice",className:"sr-only",children:"Rechercher une facture"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Yn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-invoice",type:"text",placeholder:"Rechercher une facture...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:o,onChange:x=>l(x.target.value)})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"status-filter",className:"sr-only",children:"Filtrer par statut"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ki,{size:18,className:"text-gray-400"})}),a.jsxs("select",{id:"status-filter",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:c,onChange:x=>u(x.target.value),children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"paid",children:"Payée"}),a.jsx("option",{value:"unpaid",children:"Non payée"})]})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"start-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de début"}),a.jsx(Pe,{id:"start-date-filter",selected:m,onChange:x=>h(x),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"end-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de fin"}),a.jsx(Pe,{id:"end-date-filter",selected:f,onChange:x=>b(x),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N° Facture"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant TTC"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[$.map(x=>{var M,F;return a.jsxs("tr",{onClick:()=>{w(x)},className:`hover:bg-gray-50 cursor-pointer ${(g==null?void 0:g._id)===x._id?"bg-blue-50":""}`,children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.invoiceNumber})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:`${((M=x.client)==null?void 0:M.prenomFr)||""} ${((F=x.client)==null?void 0:F.nomFr)||""}`.trim()||"N/A"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:new Date(x.invoiceDate).toLocaleDateString("fr-FR")}),a.jsx("div",{className:"text-sm text-gray-500",children:x.location})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[x.totalTTC.toLocaleString("fr-FR")," DH"]}),a.jsx("div",{className:`text-xs ${K(x)}`,children:x.amountPaid>=x.totalTTC?"Payée":`Reste: ${(x.totalTTC-x.amountPaid).toLocaleString("fr-FR")} DH`})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(gn,{onClick:A=>{A.stopPropagation(),w(x),ve()},size:"md",className:"mr-3"}),a.jsx("button",{onClick:A=>{A.stopPropagation(),ce(x._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Rn,{size:18})})]})]},x._id)}),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Aucune facture trouvée."})})]})]})})}),a.jsx("div",{className:"lg:col-span-1",children:g?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de la facture"}),y?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:U,className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:Q,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:ve,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsx("div",{className:"p-4 space-y-4",children:y&&j?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"invoiceNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"N° Facture (*)"}),a.jsx("input",{type:"text",name:"invoiceNumber",id:"invoiceNumber",value:j.invoiceNumber||"",onChange:x=>H("invoiceNumber",x.target.value),className:"w-full border rounded-lg p-2 mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"invoiceDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Facture (*)"}),a.jsx(Pe,{selected:j.invoiceDate?new Date(j.invoiceDate):null,onChange:x=>J(x,"invoiceDate"),locale:"fr",dateFormat:"dd/MM/yyyy",className:"w-full border rounded-lg p-2 mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d'échéance (*)"}),a.jsx(Pe,{selected:j.dueDate?new Date(j.dueDate):null,onChange:x=>J(x,"dueDate"),locale:"fr",dateFormat:"dd/MM/yyyy",className:"w-full border rounded-lg p-2 mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"client",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client (*)"}),a.jsxs("select",{name:"client",id:"client",value:((p=j.client)==null?void 0:p._id)||"",onChange:x=>H("client",x.target.value),className:"w-full border rounded-lg p-2 mt-1",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),oe.map(x=>a.jsxs("option",{value:x._id,children:[x.prenomFr," ",x.nomFr]},x._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"contract",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrat (*)"}),a.jsxs("select",{name:"contract",id:"contract",value:((N=j.contract)==null?void 0:N._id)||"",onChange:x=>H("contract",x.target.value),className:"w-full border rounded-lg p-2 mt-1",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un contrat"}),G.map(x=>a.jsx("option",{value:x._id,children:x.contractNumber},x._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Lieu (*)"}),a.jsx("input",{type:"text",name:"location",id:"location",value:j.location||"",onChange:x=>H("location",x.target.value),className:`w-full border rounded-lg p-2 mt-1 ${C.location?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),C.location&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:C.location})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type (*)"}),a.jsxs("select",{name:"type",id:"type",value:j.type||"Particulier",onChange:x=>H("type",x.target.value),className:"w-full border rounded-lg p-2 mt-1",required:!0,children:[a.jsx("option",{value:"Professionel",children:"Professionel"}),a.jsx("option",{value:"Particulier",children:"Particulier"})]})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4 space-y-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Montants"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"montantHT",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant HT (*)"}),a.jsx("input",{type:"number",name:"montantHT",id:"montantHT",value:j.montantHT||0,onChange:x=>H("montantHT",parseFloat(x.target.value)||0),className:"w-full border rounded-lg p-2 mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"tvaPercentage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pourcentage TVA (%) (*)"}),a.jsx("input",{type:"number",name:"tvaPercentage",id:"tvaPercentage",value:j.tvaPercentage||0,onChange:x=>H("tvaPercentage",parseFloat(x.target.value)||0),className:"w-full border rounded-lg p-2 mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"tvaAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant TVA (*)"}),a.jsx("input",{type:"number",name:"tvaAmount",id:"tvaAmount",value:j.tvaAmount||0,onChange:x=>H("tvaAmount",parseFloat(x.target.value)||0),className:"w-full border rounded-lg p-2 mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"totalTTC",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant TTC (*)"}),a.jsx("input",{type:"number",name:"totalTTC",id:"totalTTC",value:j.totalTTC||0,onChange:x=>H("totalTTC",parseFloat(x.target.value)||0),className:"w-full border rounded-lg p-2 mt-1 bg-gray-100",required:!0,readOnly:!0})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4 space-y-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Paiement"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Paiement (*)"}),a.jsxs("select",{name:"paymentType",id:"paymentType",value:j.paymentType||"espèce",onChange:x=>H("paymentType",x.target.value),className:"w-full border rounded-lg p-2 mt-1",required:!0,children:[a.jsx("option",{value:"espèce",children:"Espèce"}),a.jsx("option",{value:"chèque",children:"Chèque"}),a.jsx("option",{value:"carte bancaire",children:"Carte Bancaire"}),a.jsx("option",{value:"virement",children:"Virement"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"amountPaid",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant Payé (*)"}),a.jsx("input",{type:"number",name:"amountPaid",id:"amountPaid",value:j.amountPaid||0,onChange:x=>H("amountPaid",parseFloat(x.target.value)||0),className:"w-full border rounded-lg p-2 mt-1",required:!0})]})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"N° Facture"}),a.jsx("p",{className:"font-medium",children:g.invoiceNumber})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date Facture"}),a.jsx("p",{className:"font-medium",children:new Date(g.invoiceDate).toLocaleDateString("fr-FR")})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date d'échéance"}),a.jsx("p",{className:"font-medium",children:new Date(g.dueDate).toLocaleDateString("fr-FR")})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Client"}),a.jsx("p",{className:"font-medium",children:g.client?`${g.client.prenomFr} ${g.client.nomFr}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Contrat"}),a.jsx("p",{className:"font-medium",children:((k=g.contract)==null?void 0:k.contractNumber)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Lieu"}),a.jsx("p",{className:"font-medium",children:g.location})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Type"}),a.jsx("p",{className:"font-medium",children:g.type})]}),a.jsxs("div",{className:"mt-6 border-t pt-4 space-y-2",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Montants"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant HT"}),a.jsxs("p",{className:"font-medium",children:[g.montantHT.toLocaleString("fr-FR")," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Pourcentage TVA"}),a.jsxs("p",{className:"font-medium",children:[g.tvaPercentage,"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant TVA"}),a.jsxs("p",{className:"font-medium",children:[g.tvaAmount.toLocaleString("fr-FR")," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant TTC"}),a.jsxs("p",{className:"font-bold",children:[g.totalTTC.toLocaleString("fr-FR")," DH"]})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4 space-y-2",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Paiement"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Type de Paiement"}),a.jsx("p",{className:"font-medium",children:g.paymentType})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant Payé"}),a.jsxs("p",{className:"font-medium",children:[g.amountPaid.toLocaleString("fr-FR")," DH"]})]})]}),a.jsx("div",{className:"pt-4 border-t",children:a.jsx("div",{className:"flex space-x-3",children:a.jsx("button",{onClick:()=>d(g),className:"flex-1 border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Imprimer"})})})]})})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(Ra,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune facture sélectionnée"})]})})]}),v&&a.jsx(n3,{onSubmit:ee,onClose:()=>D(!1),initialData:null,API_URL:P})]})},n3=({onSubmit:e,onClose:t,initialData:n,API_URL:r})=>{var q,X;const[s,i]=E.useState(n||{invoiceNumber:"",invoiceDate:new Date().toISOString().split("T")[0],dueDate:new Date().toISOString().split("T")[0],client:void 0,contract:void 0,location:"",type:"Particulier",montantHT:0,tvaAmount:0,tvaPercentage:20,totalTTC:0,paymentType:"espèce",amountPaid:0}),[o,l]=E.useState([]),[c,u]=E.useState([]),m=`${r}/api/customers`,h=`${r}/api/contracts`,[f,b]=E.useState(!1),[v,D]=E.useState(null),[g,w]=E.useState({});E.useEffect(()=>{(async()=>{try{const[oe,fe]=await Promise.all([we.get(m),we.get(h)]);l(oe.data),u(fe.data)}catch(oe){console.error("Error fetching data:",oe),ie.error("Failed to load customers or contracts for the form.")}})()},[m,h]),E.useEffect(()=>{i(n?{...n,invoiceDate:n.invoiceDate.split("T")[0],dueDate:n.dueDate.split("T")[0]}:{invoiceNumber:"",invoiceDate:new Date().toISOString().split("T")[0],dueDate:new Date().toISOString().split("T")[0],client:void 0,contract:void 0,location:"",type:"Particulier",montantHT:0,tvaAmount:0,tvaPercentage:20,totalTTC:0,paymentType:"espèce",amountPaid:0})},[n]);const y=te=>{const{name:oe,value:fe}=te.target;oe==="location"&&(Yu(fe)?w(G=>({...G,[oe]:'Le champ "Lieu" ne peut pas contenir uniquement des espaces.'})):w(G=>{const se={...G};return delete se[oe],se})),i(G=>({...G,[oe]:fe}))},_=te=>{const{name:oe,value:fe}=te.target,G=parseFloat(fe)||0;i(se=>{let W={...se,[oe]:G};const $=W.montantHT||0,K=W.tvaPercentage||0;if(W.tvaAmount,oe==="montantHT"||oe==="tvaPercentage"){const ee=oe==="montantHT"?G:$,ce=ee*((oe==="tvaPercentage"?G:K)/100),ve=ee+ce;W={...W,tvaAmount:ce,totalTTC:ve}}else if(oe==="tvaAmount"){const ee=G,Q=$+ee,ce=$!==0?ee/$*100:0;W={...W,totalTTC:Q,tvaPercentage:ce}}return W})},j=(te,oe)=>{i(fe=>({...fe,[oe]:te?te.toISOString().split("T")[0]:""}))},L=te=>{const oe=te.target.value,fe=o.find(G=>G._id===oe);i(G=>({...G,client:fe}))},C=te=>{const oe=te.target.value,fe=c.find(G=>G._id===oe);i(G=>{let se={...G,contract:fe};if(fe&&fe.total!==void 0){const W=fe.total,$=se.tvaPercentage||0;let K=0,ee=0;$!==0?(K=W/(1+$/100),ee=W-K):(K=W,ee=0),se={...se,totalTTC:W,montantHT:K,tvaAmount:ee}}else se={...se,totalTTC:0,montantHT:0,tvaAmount:0,tvaPercentage:0};return se})},T=te=>{te.preventDefault();const oe=n?["invoiceNumber","invoiceDate","dueDate","client","contract","location","type","montantHT","tvaAmount","tvaPercentage","totalTTC","paymentType","amountPaid"]:["invoiceDate","dueDate","client","contract","location","type","montantHT","tvaAmount","tvaPercentage","totalTTC","paymentType","amountPaid"],fe={};if(oe.forEach(G=>{s[G]||(fe[G]="Ce champ est obligatoire.")}),Yu(s.location)&&(fe.location='Le champ "Lieu" ne peut pas être vide ou contenir uniquement des espaces.'),w(fe),Object.keys(fe).length>0){ie.error("Veuillez corriger les erreurs de validation.");return}e(s)},P=te=>{v&&i(oe=>({...oe,[v]:te}))};return a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sn,{onClick:t}),a.jsx("h2",{className:"text-xl font-bold mb-4",children:n?"Modifier la Facture":"Nouvelle Facture"}),a.jsxs("form",{onSubmit:T,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Détails de la Facture"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"invoiceNumber",className:"text-sm font-medium text-gray-700 mb-1",children:"N° Facture (*)"}),a.jsx("input",{type:"text",name:"invoiceNumber",id:"invoiceNumber",value:s.invoiceNumber||"",onChange:y,className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"invoiceDate",className:"text-sm font-medium text-gray-700 mb-1",children:"Date Facture (*)"}),a.jsx(Pe,{selected:s.invoiceDate?new Date(s.invoiceDate):null,onChange:te=>j(te,"invoiceDate"),locale:"fr",dateFormat:"dd/MM/yyyy",className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"dueDate",className:"text-sm font-medium text-gray-700 mb-1",children:"Date d'échéance (*)"}),a.jsx(Pe,{selected:s.dueDate?new Date(s.dueDate):null,onChange:te=>j(te,"dueDate"),locale:"fr",dateFormat:"dd/MM/yyyy",className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"client",className:"text-sm font-medium text-gray-700 mb-1",children:"Client (*)"}),a.jsxs("select",{name:"client",id:"client",value:((q=s.client)==null?void 0:q._id)||"",onChange:L,className:"border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),o.map(te=>a.jsxs("option",{value:te._id,children:[te.prenomFr," ",te.nomFr]},te._id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"contract",className:"text-sm font-medium text-gray-700 mb-1",children:"Contrat (*)"}),a.jsxs("select",{name:"contract",id:"contract",value:((X=s.contract)==null?void 0:X._id)||"",onChange:C,className:"border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un contrat"}),c.map(te=>a.jsx("option",{value:te._id,children:te.contractNumber},te._id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"location",className:"text-sm font-medium text-gray-700 mb-1",children:"Lieu (*)"}),a.jsx("input",{type:"text",name:"location",id:"location",value:s.location||"",onChange:y,className:`border rounded-lg p-2 ${g.location?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),g.location&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.location})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"type",className:"text-sm font-medium text-gray-700 mb-1",children:"Type (*)"}),a.jsxs("select",{name:"type",id:"type",value:s.type||"Particulier",onChange:y,className:"border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"Professionel",children:"Professionel"}),a.jsx("option",{value:"Particulier",children:"Particulier"})]})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Montants"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"montantHT",className:"text-sm font-medium text-gray-700 mb-1",children:"Montant HT (*)"}),a.jsx("input",{type:"number",name:"montantHT",id:"montantHT",value:s.montantHT||0,onChange:_,className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"tvaPercentage",className:"text-sm font-medium text-gray-700 mb-1",children:"Pourcentage TVA (%) (*)"}),a.jsx("input",{type:"number",name:"tvaPercentage",id:"tvaPercentage",value:s.tvaPercentage||0,onChange:_,className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"tvaAmount",className:"text-sm font-medium text-gray-700 mb-1",children:"Montant TVA (*)"}),a.jsx("input",{type:"number",name:"tvaAmount",id:"tvaAmount",value:s.tvaAmount||0,onChange:_,className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"totalTTC",className:"text-sm font-medium text-gray-700 mb-1",children:"Montant TTC (*)"}),a.jsx("input",{type:"number",name:"totalTTC",id:"totalTTC",value:s.totalTTC||0,onChange:_,className:"border rounded-lg p-2 bg-gray-100",required:!0,readOnly:!0})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Paiement"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"paymentType",className:"text-sm font-medium text-gray-700 mb-1",children:"Type de Paiement (*)"}),a.jsxs("select",{name:"paymentType",id:"paymentType",value:s.paymentType||"espèce",onChange:y,className:"border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"espèce",children:"Espèce"}),a.jsx("option",{value:"chèque",children:"Chèque"}),a.jsx("option",{value:"carte bancaire",children:"Carte Bancaire"}),a.jsx("option",{value:"virement",children:"Virement"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"amountPaid",className:"text-sm font-medium text-gray-700 mb-1",children:"Montant Payé (*)"}),a.jsx("input",{type:"number",name:"amountPaid",id:"amountPaid",value:s.amountPaid||0,onChange:_,className:"border rounded-lg p-2",required:!0})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[n?"Modifier":"Ajouter"," Facture"]})]})]})]}),a.jsx(nj,{isOpen:f,onClose:()=>b(!1),onInput:P,initialValue:v?String(s[v]):""})]})};kn("fr",Dn);const r3=e=>{var n;switch((n=e.split(".").pop())==null?void 0:n.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"webp":return"image/webp";case"pdf":return"application/pdf";default:return"application/octet-stream"}},vv=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},Vo=e=>typeof e=="string"&&e.trim().length===0,wc="http://localhost:5000",s3=()=>{var W;const[e,t]=E.useState([]),[n,r]=E.useState(!0),[s,i]=E.useState(null),[o,l]=E.useState(""),[c,u]=E.useState(null),[m,h]=E.useState(null),[f,b]=E.useState(!1),[v,D]=E.useState(null),[g,w]=E.useState(!1),[y,_]=E.useState(null),[j,L]=E.useState([]),C=`${wc}/api/charges`,T=E.useCallback(async()=>{r(!0),i(null);try{const $=await we.get(C);t($.data)}catch($){console.error("Error fetching data:",$),i("Failed to load data."),ie.error("Failed to load data.")}finally{r(!1)}},[]);E.useEffect(()=>{T()},[T]),E.useEffect(()=>{if(v&&!g){const $=[];v.attachments&&Array.isArray(v.attachments)&&v.attachments.forEach(K=>{const ee=K.split(/-(.+)/)[1];$.push({name:ee,url:K,type:r3(ee),size:0})}),JSON.stringify(v.documents)!==JSON.stringify($)&&D(K=>({...K,documents:$}))}},[v,g]);const P=e.filter($=>{const K=$.motif.toLowerCase().includes(o.toLowerCase())||$.observation.toLowerCase().includes(o.toLowerCase()),ee=new Date($.date),Q=c?ee>=c:!0,ce=m?ee<=m:!0;return K&&Q&&ce}),q=async $=>{const K=new FormData;for(const ee in $)if(Object.prototype.hasOwnProperty.call($,ee)){const Q=$[ee];ee!=="_id"&&ee!=="documents"&&ee!=="attachments"&&Q!==null&&Q!==void 0&&K.append(ee,Q)}j.length>0&&j.forEach(ee=>{K.append("attachments",ee)});try{const Q=(await we.post(C,K,{headers:{"Content-Type":"multipart/form-data"}})).data;t([...e,Q]),b(!1),ie.success("Charge added successfully."),L([]),window.dispatchEvent(new Event("chargeUpdated"))}catch(ee){console.error("Error adding charge:",ee),ie.error("Failed to add charge.")}},X=async $=>{var Q;if(!v||!y)return;if(Vo(y.motif)){ie.error("Le motif ne peut pas contenir uniquement des espaces.");return}if(y.observation&&Vo(y.observation)){ie.error("L'observation ne peut pas contenir uniquement des espaces.");return}if(y.montant!==void 0&&y.montant<0){ie.error("Le montant ne peut pas être inférieur à 0.");return}const K=new FormData;for(const ce in $)if(Object.prototype.hasOwnProperty.call($,ce)){const ve=$[ce];ce!=="_id"&&ce!=="documents"&&ce!=="attachments"&&ve!==null&&ve!==void 0&&K.append(ce,ve)}const ee=((Q=y==null?void 0:y.documents)==null?void 0:Q.filter(ce=>!ce.isNew))||[];K.append("existingDocuments",JSON.stringify(ee)),j.length>0&&j.forEach(ce=>{K.append("attachments",ce)});try{const ve=(await we.put(`${C}/${v._id}`,K,{headers:{"Content-Type":"multipart/form-data"}})).data;t(e.map(U=>U._id===ve._id?ve:U)),D(ve),w(!1),ie.success("Charge updated successfully."),L([]),window.dispatchEvent(new Event("chargeUpdated"))}catch(ce){console.error("Error updating charge:",ce),ie.error("Failed to update charge.")}},[te,oe]=E.useState(!1),fe=$=>{D(e.find(K=>K._id===$)||null),oe(!0)},G=async()=>{if(v)try{await we.delete(`${C}/${v._id}`),t(e.filter($=>$._id!==v._id)),D(null),oe(!1),ie.success("Charge deleted successfully.")}catch($){console.error("Error deleting charge:",$),ie.error("Failed to delete charge.")}},se=async $=>{if(v)try{await we.delete(`${C}/${v._id}/documents`,{data:{documentName:$.name}}),D(K=>{var ee,Q;return K?{...K,documents:(ee=K.documents)==null?void 0:ee.filter(ce=>ce.url!==$.url),attachments:(Q=K.attachments)==null?void 0:Q.filter(ce=>ce!==$.name)}:null}),ie.success("Document supprimé avec succès.")}catch(K){console.error("Erreur lors de la suppression du document:",K),ie.error("Échec de la suppression du document.")}};return n?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading charges..."})}):s?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:s}),a.jsx("button",{onClick:T,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Charges"}),a.jsxs("button",{onClick:()=>{D(null),b(!0),L([])},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Nouvelle Charge"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-[200px]",children:[a.jsx("label",{htmlFor:"search-charge",className:"sr-only",children:"Rechercher une charge"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Yn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-charge",type:"text",placeholder:"Rechercher une charge...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:o,onChange:$=>l($.target.value)})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"start-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de début"}),a.jsx(Pe,{id:"start-date-filter",selected:c,onChange:$=>u($),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"end-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de fin"}),a.jsx(Pe,{id:"end-date-filter",selected:m,onChange:$=>h($),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Charge"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[P.map($=>a.jsxs("tr",{onClick:()=>D($),className:`hover:bg-gray-50 cursor-pointer ${(v==null?void 0:v._id)===$._id?"bg-blue-50":""}`,children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx(bt,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:$.motif}),a.jsx("div",{className:"text-xs text-gray-500",children:$.observation||"Aucune observation"})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm font-medium",children:vv($.date)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[$.montant.toLocaleString("fr-FR")," DH"]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(gn,{onClick:K=>{K.stopPropagation(),D($),w(!0);const ee=($.attachments||[]).map(Q=>({name:Q.split(/-(.+)/)[1],url:Q,type:"",size:0,isNew:!1}));_({...$,documents:ee}),L([])},size:"md",className:"mr-3"}),a.jsx("button",{onClick:K=>{K.stopPropagation(),fe($._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Rn,{size:18})})]})]},$._id)),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Aucune charge trouvée."})})]})]})})}),a.jsx("div",{className:"lg:col-span-1",children:v?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de la charge"}),g?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:()=>{y&&X(y)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:()=>{w(!0);const $=(v.attachments||[]).map(K=>({name:K.split(/-(.+)/)[1],url:K,type:"",size:0,isNew:!1}));_({...v,documents:$}),L([])},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Motif"}),g&&y?a.jsx("input",{type:"text",name:"motif",value:y.motif||"",onChange:$=>_({...y,motif:$.target.value}),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:v.motif||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date"}),g&&y?a.jsx(Pe,{selected:y.date?new Date(y.date):null,onChange:$=>_({...y,date:$?$.toISOString().split("T")[0]:""}),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:vv(v.date)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant"}),g&&y?a.jsx("input",{type:"number",name:"montant",value:y.montant||0,onChange:$=>_({...y,montant:Number($.target.value)}),className:"w-full border rounded-lg p-2 mt-1"}):a.jsxs("p",{className:"font-medium",children:[((W=v.montant)==null?void 0:W.toLocaleString("fr-FR"))||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Observation"}),g&&y?a.jsx("textarea",{name:"observation",value:y.observation||"",onChange:$=>_({...y,observation:$.target.value}),rows:3,className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:v.observation||"Aucune observation"})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Pièces Jointes:"}),g&&y?a.jsx(mt,{api_url:wc,existingDocuments:y.documents||[],newFiles:j,onNewFilesChange:L,onRemoveExistingDocument:se}):v.documents&&v.documents.length>0?a.jsx(mt,{api_url:wc,existingDocuments:v.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:se,label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]}),!g&&a.jsx("div",{className:"pt-4 border-t",children:a.jsx("div",{className:"flex space-x-3",children:a.jsx("button",{className:"flex-1 border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Imprimer"})})})]})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(Ra,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune charge sélectionnée"})]})})]}),f&&a.jsx(a3,{onSubmit:q,onClose:()=>b(!1),initialData:null,newAttachmentFiles:j,setNewAttachmentFiles:L,API_URL:wc,handleRemoveExistingDocument:se}),te&&v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirmer la suppression"}),a.jsxs("p",{children:['Êtes-vous sûr de vouloir supprimer la charge "',v.motif,'" ?']}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>oe(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annuler"}),a.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Supprimer"})]})]})})]})},a3=({onSubmit:e,onClose:t,initialData:n,newAttachmentFiles:r,setNewAttachmentFiles:s,API_URL:i,handleRemoveExistingDocument:o})=>{const[l,c]=E.useState(()=>n?{...n,date:n.date?new Date(n.date).toISOString().split("T")[0]:"",documents:n.documents||[]}:{motif:"",date:new Date().toISOString().split("T")[0],montant:0,observation:"",attachments:[],documents:[]}),[u,m]=E.useState({}),h=v=>{const{name:D,value:g}=v.target;if(["motif","observation"].includes(D))Vo(g)?m(w=>({...w,[D]:"Ce champ ne peut pas contenir uniquement des espaces."})):m(w=>{const y={...w};return delete y[D],y});else if(D==="montant"){const w=parseFloat(g);isNaN(w)||w<0?m(y=>({...y,[D]:"La valeur ne peut pas être inférieure à 0."})):m(y=>{const _={...y};return delete _[D],_})}c(w=>({...w,[D]:D==="montant"?parseFloat(g):g}))},f=(v,D)=>{c(g=>({...g,[D]:v?v.toISOString().split("T")[0]:""}))},b=v=>{v.preventDefault();const D={};if(Vo(l.motif)&&(D.motif="Le motif ne peut pas contenir uniquement des espaces."),l.observation&&Vo(l.observation)&&(D.observation="L'observation ne peut pas contenir uniquement des espaces."),l.montant!==void 0&&l.montant<0&&(D.montant="Le montant ne peut pas être inférieur à 0."),m(D),Object.keys(D).length>0){ie.error("Veuillez corriger les erreurs de validation.");return}e(l)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sn,{onClick:t}),a.jsxs("h2",{className:"text-xl font-bold mb-4",children:[n?"Modifier":"Nouvelle"," Charge"]}),a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations sur la Charge"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"motif",className:"block text-sm font-medium text-gray-700 mb-1",children:"Motif"}),a.jsx("input",{type:"text",id:"motif",name:"motif",value:l.motif||"",onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Motif de la charge",required:!0}),u.motif&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.motif})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),a.jsx(Pe,{id:"date",selected:l.date?new Date(l.date):null,onChange:v=>f(v,"date"),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholderText:"Sélectionner une date",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"montant",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant (DH)"}),a.jsx("input",{type:"number",id:"montant",name:"montant",value:l.montant||"",onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0}),u.montant&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.montant})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"observation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Observation"}),a.jsx("textarea",{id:"observation",name:"observation",value:l.observation||"",onChange:h,rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Notes ou observations supplémentaires"}),u.observation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.observation})]})]})]}),a.jsx(mt,{api_url:i,existingDocuments:l.documents||[],newFiles:r,onNewFilesChange:s,onRemoveExistingDocument:o}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:n?"Mettre à jour":"Ajouter"})]})]})]})})};kn("fr",Dn);const i3=({initialData:e,customers:t,contracts:n,factures:r,accidents:s,onSubmit:i,onClose:o,isEditMode:l,newAttachmentFiles:c,setNewAttachmentFiles:u,handleRemoveAttachment:m})=>{var _,j,L,C;const[h,f]=E.useState(()=>{var T,P,q;return e?{...e,paymentDate:e.paymentDate?new Date(e.paymentDate).toISOString().split("T")[0]:"",documents:e.documents||[],contractId:((T=e.contract)==null?void 0:T._id)||"",factureId:((P=e.facture)==null?void 0:P._id)||"",accidentId:((q=e.accident)==null?void 0:q._id)||""}:{paymentNumber:"",paymentDate:new Date().toISOString().split("T")[0],paymentFor:"",clientId:"",clientName:"",contractId:"",factureId:"",accidentId:"",remainingAmount:0,paymentType:"",amountPaid:0,documents:[]}}),[b,v]=E.useState({});E.useEffect(()=>{var T,P,q;e?(f({...e,paymentDate:e.paymentDate?new Date(e.paymentDate).toISOString().split("T")[0]:"",documents:e.documents||[],contractId:((T=e.contract)==null?void 0:T._id)||"",factureId:((P=e.facture)==null?void 0:P._id)||"",accidentId:((q=e.accident)==null?void 0:q._id)||""}),u([])):(f({paymentNumber:"",paymentDate:new Date().toISOString().split("T")[0],paymentFor:"",clientId:"",clientName:"",contractId:"",factureId:"",accidentId:"",remainingAmount:0,paymentType:"",amountPaid:0,documents:[]}),u([]))},[e]);const D=(T,P)=>{let q={...b};if(T==="amountPaid"){const X=parseFloat(P);isNaN(X)||X<0?q.amountPaid="Le montant payé ne peut pas être inférieur à 0.":delete q.amountPaid}v(q),f(X=>{if(T==="clientId"){const te=t.find(oe=>oe._id===P);return{...X,client:te,clientId:(te==null?void 0:te._id)||"",clientName:te?`${te.prenomFr} ${te.nomFr}`:""}}if(T==="contractId"){const te=n.find(oe=>oe._id===P);return{...X,contract:te,contractId:(te==null?void 0:te._id)||""}}if(T==="factureId"){const te=r.find(oe=>oe._id===P);return{...X,facture:te,factureId:(te==null?void 0:te._id)||""}}if(T==="accidentId"){const te=s.find(oe=>oe._id===P);return{...X,accident:te,accidentId:(te==null?void 0:te._id)||""}}return{...X,[T]:P}})},g=T=>{u(T),f(P=>{var q;return{...P,documents:[...((q=P==null?void 0:P.documents)==null?void 0:q.filter(X=>!X.isNew))||[],...T.map(X=>({name:X.name,type:X.type,size:X.size,url:URL.createObjectURL(X),isNew:!0}))]}})},w=async T=>{T.isNew?(u(P=>P.filter(q=>URL.createObjectURL(q)!==T.url)),f(P=>{var q;return{...P,documents:((q=P==null?void 0:P.documents)==null?void 0:q.filter(X=>X.url!==T.url))||[]}})):(await m(T),f(P=>{var q;return{...P,documents:((q=P==null?void 0:P.documents)==null?void 0:q.filter(X=>X.url!==T.url))||[]}}))},y=async T=>{T.preventDefault();const P={};if(h.amountPaid!==void 0&&h.amountPaid<0&&(P.amountPaid="Le montant payé ne peut pas être inférieur à 0."),v(P),Object.keys(P).length>0){ie.error("Veuillez corriger les erreurs de validation.");return}await i(h,c)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sn,{onClick:o}),a.jsx("h2",{className:"text-xl font-bold mb-4",children:e?"Modifier Réglement":"Nouveau Réglement"}),a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations du Réglement"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l?a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"N° Réglement"}),a.jsx("input",{type:"text",id:"paymentNumber",name:"paymentNumber",value:h.paymentNumber||"",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",readOnly:!0})]}):null,a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Réglement"}),a.jsx(Pe,{id:"paymentDate",selected:h.paymentDate?new Date(h.paymentDate):null,onChange:T=>D("paymentDate",T?T.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholderText:"Sélectionner une date",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentFor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Régler pour"}),a.jsxs("select",{id:"paymentFor",name:"paymentFor",value:h.paymentFor||"",onChange:T=>D("paymentFor",T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner le type"}),a.jsx("option",{value:"contract",children:"Contrat"}),a.jsx("option",{value:"facture",children:"Facture"}),a.jsx("option",{value:"accident",children:"Accident"})]})]}),h.paymentFor==="contract"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"contractId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrat"}),a.jsxs("select",{id:"contractId",name:"contractId",value:((_=h.contract)==null?void 0:_._id)||h.contractId||"",onChange:T=>D("contractId",T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un contrat"}),n.map(T=>a.jsxs("option",{value:T._id,children:[T.contractNumber," - ",T.client?`${T.client.prenomFr} ${T.client.nomFr}`:"N/A"]},T._id))]})]}),h.paymentFor==="facture"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"factureId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Facture"}),a.jsxs("select",{id:"factureId",name:"factureId",value:((j=h.facture)==null?void 0:j._id)||h.factureId||"",onChange:T=>D("factureId",T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner une facture"}),r.map(T=>a.jsxs("option",{value:T._id,children:[T.invoiceNumber," - ",T.totalTTC.toLocaleString("fr-FR")," DH"]},T._id))]})]}),h.paymentFor==="accident"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"accidentId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Accident"}),a.jsxs("select",{id:"accidentId",name:"accidentId",value:((L=h.accident)==null?void 0:L._id)||h.accidentId||"",onChange:T=>D("accidentId",T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un accident"}),s.map(T=>a.jsxs("option",{value:T._id,children:[T.numeroContrat," - ",T.clientNom," - ",new Date(T.dateAccident).toLocaleDateString("fr-FR")]},T._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),a.jsxs("select",{id:"clientId",name:"clientId",value:((C=h.client)==null?void 0:C._id)||h.clientId||"",onChange:T=>D("clientId",T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),t.filter(T=>T.status==="Actif").map(T=>a.jsx("option",{value:T._id,children:`${T.prenomFr} ${T.nomFr}`},T._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"amountPaid",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant Payé"}),a.jsx("input",{type:"number",id:"amountPaid",name:"amountPaid",value:h.amountPaid||0,onChange:T=>D("amountPaid",parseFloat(T.target.value)),className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none ${b.amountPaid?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"} sm:text-sm`,required:!0}),b.amountPaid&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:b.amountPaid})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"remainingAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant Restant"}),a.jsx("input",{type:"number",id:"remainingAmount",name:"remainingAmount",value:h.remainingAmount||0,onChange:T=>D("remainingAmount",parseFloat(T.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Paiement"}),a.jsxs("select",{id:"paymentType",name:"paymentType",value:h.paymentType||"",onChange:T=>D("paymentType",T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner le type"}),a.jsx("option",{value:"espèce",children:"Espèce"}),a.jsx("option",{value:"chèque",children:"Chèque"}),a.jsx("option",{value:"carte bancaire",children:"Carte Bancaire"}),a.jsx("option",{value:"virement",children:"Virement"})]})]})]})]}),a.jsx(mt,{api_url:"http://localhost:5000",existingDocuments:h.documents||[],newFiles:c,onNewFilesChange:g,onRemoveExistingDocument:w,label:"Documents Associés",multiple:!0}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:e?"Mettre à jour":"Ajouter"})]})]})]})})};kn("fr",Dn);const yv=()=>{var d,p,N,k;const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState([]),[o,l]=E.useState([]),[c,u]=E.useState([]),[m,h]=E.useState(!0),[f,b]=E.useState(null),[v,D]=E.useState(""),[g,w]=E.useState(null),[y,_]=E.useState(!1),[j,L]=E.useState(!1),[C,T]=E.useState(null),[P,q]=E.useState([]),X="http://localhost:5000",te=`${X}/api/clientpayments`,oe="http://localhost:5000/api/customers",fe="http://localhost:5000/api/contracts",G="http://localhost:5000/api/factures",se="http://localhost:5000/api/accidents",W=E.useCallback(async()=>{h(!0),b(null);try{const x=await we.get(te);t(x.data)}catch(x){console.error("Error fetching payments:",x),b("Failed to load payments. Please ensure the backend is running and the endpoint is correct."),ie.error("Failed to load payments."),t([])}finally{h(!1)}},[]),$=E.useCallback(async()=>{try{const x=await we.get(oe);r(x.data)}catch(x){console.error("Error fetching customers:",x),ie.error("Failed to load customers.")}},[]),K=E.useCallback(async()=>{try{const x=await we.get(fe);i(x.data)}catch(x){console.error("Error fetching contracts:",x),ie.error("Failed to load contracts.")}},[]),ee=E.useCallback(async()=>{try{const x=await we.get(G);l(x.data)}catch(x){console.error("Error fetching factures:",x),ie.error("Failed to load factures.")}},[]),Q=E.useCallback(async()=>{try{const x=await we.get(se);u(x.data)}catch(x){console.error("Error fetching accidents:",x),ie.error("Failed to load accidents.")}},[]);E.useEffect(()=>{W(),$(),K(),ee(),Q()},[W,$,K,ee,Q]);const ce=e.filter(x=>{const M=v.toLowerCase(),F=x.client?`${x.client.prenomFr} ${x.client.nomFr}`.toLowerCase():"";return x.paymentNumber.toLowerCase().includes(M)||F.includes(M)}),ve=async x=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce réglement ?"))try{await we.delete(`${te}/${x}`),t(e.filter(M=>M._id!==x)),w(null),ie.success("Payment deleted successfully.")}catch(M){console.error("Error deleting payment:",M),ie.error("Failed to delete payment.")}},U=x=>{w(x);const M=(x.documents||[]).map(F=>({name:F.name,url:F.url,type:F.type,size:F.size,isNew:!1}));T({...x,documents:M}),L(!0),_(!1),q([])},H=()=>{w(null),T(null),L(!1),_(!0),q([])},J=async(x,M)=>{var R;const F=new FormData;for(const I in x)if(Object.prototype.hasOwnProperty.call(x,I)){const V=x[I];I==="client"&&typeof V=="object"&&V!==null&&"_id"in V&&typeof V._id=="string"?F.append("client",V._id):I==="contract"&&typeof V=="object"&&V!==null&&"_id"in V&&typeof V._id=="string"?F.append("contract",V._id):I==="facture"&&typeof V=="object"&&V!==null&&"_id"in V&&typeof V._id=="string"?F.append("facture",V._id):I==="accident"&&typeof V=="object"&&V!==null&&"_id"in V&&typeof V._id=="string"?F.append("accident",V._id):I!=="_id"&&I!=="createdAt"&&I!=="updatedAt"&&I!=="documents"&&V!==null&&V!==void 0&&F.append(I,V)}const A=((R=x.documents)==null?void 0:R.filter(I=>!I.isNew))||[];F.append("existingDocuments",JSON.stringify(A)),M.length>0&&M.forEach(I=>{F.append("documents",I)});try{let I;if(g&&g._id){I=(await we.put(`${te}/${g._id}`,F,{headers:{"Content-Type":"multipart/form-data"}})).data;const Y={...I,client:n.find(B=>B._id===I.client)||I.client,contract:I.contract,facture:I.facture,accident:I.accident};t(e.map(B=>B._id===Y._id?Y:B)),w(Y),ie.success("Payment updated successfully.")}else{I=(await we.post(te,F,{headers:{"Content-Type":"multipart/form-data"}})).data;const Y={...I,client:n.find(B=>B._id===I.client)||I.client,contract:I.contract,facture:I.facture,accident:I.accident};t([...e,Y]),w(Y),ie.success("Payment created successfully.")}_(!1),L(!1),T(null),q([])}catch(I){console.error(`Error ${g?"updating":"creating"} payment:`,I),ie.error(`Failed to ${g?"update":"create"} payment.`)}},S=(x,M)=>{T(F=>{if(!F)return null;if(x==="clientId"){const A=n.find(R=>R._id===M);return{...F,client:A,clientId:(A==null?void 0:A._id)||"",clientName:A?`${A.prenomFr} ${A.nomFr}`:""}}if(x==="contractId"){const A=s.find(R=>R._id===M);return{...F,contract:A,contractId:(A==null?void 0:A._id)||""}}if(x==="factureId"){const A=o.find(R=>R._id===M);return{...F,facture:A,factureId:(A==null?void 0:A._id)||""}}if(x==="accidentId"){const A=c.find(R=>R._id===M);return{...F,accident:A,accidentId:(A==null?void 0:A._id)||""}}return{...F,[x]:M}})},O=async x=>{if(g){if(x.isNew){q(M=>M.filter(F=>URL.createObjectURL(F)!==x.url)),T(M=>{var F;return{...M,documents:((F=M==null?void 0:M.documents)==null?void 0:F.filter(A=>A.url!==x.url))||[]}}),ie.success("Document supprimé (localement). Enregistrez pour confirmer.");return}try{await we.delete(`${te}/${g._id}/documents`,{data:{documentUrl:x.url}}),w(M=>{var F;return M?{...M,documents:(F=M.documents)==null?void 0:F.filter(A=>A.url!==x.url)}:null}),T(M=>{var F;return{...M,documents:((F=M==null?void 0:M.documents)==null?void 0:F.filter(A=>A.url!==x.url))||[]}}),ie.success("Document supprimé avec succès.")}catch(M){console.error("Erreur lors de la suppression du document:",M),ie.error("Échec de la suppression du document.")}}};return m?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{children:"Loading..."})}):f?a.jsx("div",{className:"flex justify-center items-center h-screen text-red-500",children:a.jsx("p",{children:f})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Liste des Réglements"}),a.jsxs("button",{onClick:H,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Nouveau Réglement"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Yn,{size:18,className:"text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Rechercher un réglement...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:v,onChange:x=>{j?confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")&&(D(x.target.value),L(!1),T(null),q([])):D(x.target.value)}})]})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N° Réglement"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Réglé pour"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ce.map(x=>a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(g==null?void 0:g._id)===x._id?"bg-blue-50":""}`,onClick:()=>w(x),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx(Bf,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsx("div",{className:"ml-4",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.paymentNumber})})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${x.paymentFor==="contract"?"bg-blue-100 text-blue-800":x.paymentFor==="facture"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.paymentFor==="contract"?"Contrat":x.paymentFor==="facture"?"Facture":"Accident"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:x.client?`${x.client.prenomFr} ${x.client.nomFr}`:"N/A"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm text-gray-900",children:[x.amountPaid.toLocaleString("fr-FR")," DH"]}),x.remainingAmount>0&&a.jsxs("div",{className:"text-xs text-amber-600",children:["Reste: ",x.remainingAmount.toLocaleString("fr-FR")," DH"]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:new Date(x.paymentDate).toLocaleDateString("fr-FR")})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(gn,{onClick:M=>{M.stopPropagation(),U(x)},size:"md",className:"mr-3"}),a.jsx("button",{onClick:M=>{M.stopPropagation(),ve(x._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Rn,{size:18})})]})]},x._id))})]})})}),a.jsx("div",{className:"lg:col-span-1",children:g?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails du réglement"}),j?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{confirm("Êtes-vous sûr de vouloir annuler les modifications ?")&&(L(!1),T(null),w(null),q([]))},className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:()=>{C&&J(C,P)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:()=>U(g),className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsx(Sn,{onClick:()=>w(null),className:"absolute top-4 right-4"}),a.jsx("div",{className:"p-4",children:j&&C?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"N° Réglement"}),a.jsx("input",{type:"text",id:"paymentNumber",name:"paymentNumber",value:C.paymentNumber||"",onChange:x=>S("paymentNumber",x.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Réglement"}),a.jsx(Pe,{id:"paymentDate",selected:C.paymentDate?new Date(C.paymentDate):null,onChange:x=>S("paymentDate",x?x.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholderText:"Sélectionner une date",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentFor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Régler pour"}),a.jsxs("select",{id:"paymentFor",name:"paymentFor",value:C.paymentFor||"",onChange:x=>S("paymentFor",x.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner le type"}),a.jsx("option",{value:"contract",children:"Contrat"}),a.jsx("option",{value:"facture",children:"Facture"}),a.jsx("option",{value:"accident",children:"Accident"})]})]}),C.paymentFor==="contract"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"contractId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrat"}),a.jsxs("select",{id:"contractId",name:"contractId",value:((d=C.contract)==null?void 0:d._id)||"",onChange:x=>S("contractId",x.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un contrat"}),s.map(x=>a.jsxs("option",{value:x._id,children:[x.contractNumber," - ",x.client?`${x.client.prenomFr} ${x.client.nomFr}`:"N/A"]},x._id))]})]}),C.paymentFor==="facture"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"factureId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Facture"}),a.jsxs("select",{id:"factureId",name:"factureId",value:((p=C.facture)==null?void 0:p._id)||"",onChange:x=>S("factureId",x.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner une facture"}),o.map(x=>a.jsxs("option",{value:x._id,children:[x.totalTTC," DH - ",x.client?`${x.client.prenomFr} ${x.client.nomFr}`:"N/A"]},x._id))]})]}),C.paymentFor==="accident"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"accidentId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Accident"}),a.jsxs("select",{id:"accidentId",name:"accidentId",value:((N=C.accident)==null?void 0:N._id)||"",onChange:x=>S("accidentId",x.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un accident"}),c.map(x=>a.jsxs("option",{value:x._id,children:[x.numeroContrat," - ",x.clientNom," - ",new Date(x.dateAccident).toLocaleDateString("fr-FR")]},x._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),a.jsxs("select",{id:"clientId",name:"clientId",value:((k=C.client)==null?void 0:k._id)||"",onChange:x=>S("clientId",x.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),n.filter(x=>x.status==="Actif").map(x=>a.jsx("option",{value:x._id,children:`${x.prenomFr} ${x.nomFr}`},x._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"amountPaid",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant Payé"}),a.jsx("input",{type:"number",id:"amountPaid",name:"amountPaid",value:C.amountPaid||0,onChange:x=>S("amountPaid",parseFloat(x.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"remainingAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant Restant"}),a.jsx("input",{type:"number",id:"remainingAmount",name:"remainingAmount",value:C.remainingAmount||0,onChange:x=>S("remainingAmount",parseFloat(x.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Paiement"}),a.jsxs("select",{id:"paymentType",name:"paymentType",value:C.paymentType||"",onChange:x=>S("paymentType",x.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner le type"}),a.jsx("option",{value:"espèce",children:"Espèce"}),a.jsx("option",{value:"chèque",children:"Chèque"}),a.jsx("option",{value:"carte bancaire",children:"Carte Bancaire"}),a.jsx("option",{value:"virement",children:"Virement"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Documents Associés:"}),a.jsx(mt,{api_url:X,existingDocuments:C.documents||[],newFiles:P,onNewFilesChange:q,onRemoveExistingDocument:O,label:"",multiple:!0})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"N° Réglement"}),a.jsx("p",{children:g.paymentNumber})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Date de Réglement"}),a.jsx("p",{children:new Date(g.paymentDate).toLocaleDateString("fr-FR")})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Régler pour"}),a.jsx("p",{children:g.paymentFor})]}),g.paymentFor==="contract"&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Contrat"}),a.jsx("p",{children:g.contract?`${g.contract.contractNumber} - ${g.contract.client?`${g.contract.client.prenomFr} ${g.contract.client.nomFr}`:"N/A"}`:"N/A"})]}),g.paymentFor==="facture"&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Facture"}),a.jsx("p",{children:g.facture?`${g.facture.totalTTC} DH - ${g.facture.client?`${g.facture.client.prenomFr} ${g.facture.client.nomFr}`:"N/A"}`:"N/A"})]}),g.paymentFor==="accident"&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Accident"}),a.jsx("p",{children:g.accident?`${g.accident.numeroContrat} - ${g.accident.clientNom} - ${new Date(g.accident.dateAccident).toLocaleDateString("fr-FR")}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Client"}),a.jsx("p",{children:g.client?`${g.client.prenomFr} ${g.client.nomFr}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Montant Payé"}),a.jsxs("p",{children:[g.amountPaid.toLocaleString("fr-FR")," DH"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Montant Restant"}),a.jsxs("p",{children:[g.remainingAmount.toLocaleString("fr-FR")," DH"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Type de Paiement"}),a.jsx("p",{children:g.paymentType})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Documents Associés:"}),g!=null&&g.documents&&g.documents.length>0?a.jsx(mt,{api_url:X,existingDocuments:g.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:O,label:"",readOnly:!0,multiple:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]})]})})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(Bf,{size:64,className:"mx-auto mb-4 text-gray-300"}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucun réglement sélectionné"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Sélectionnez un réglement pour voir ses détails ou créez-en un nouveau."})]})})]}),y&&a.jsx(i3,{initialData:j?g:null,customers:n,contracts:s,factures:o,accidents:c,onSubmit:J,onClose:()=>_(!1),isEditMode:j,newAttachmentFiles:P,setNewAttachmentFiles:q,handleRemoveAttachment:O})]})};kn("fr",Dn);const fo=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},bv=e=>typeof e=="string"&&e.trim().length===0,Wa="http://localhost:5000",o3=()=>{var fe,G,se;const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,l]=E.useState(null),[c,u]=E.useState(""),[m,h]=E.useState(!1),[f,b]=E.useState(null),[v,D]=E.useState(!1),[g,w]=E.useState(null),[y,_]=E.useState([]),j=`${Wa}/api/vehicleinspections`,L=`${Wa}/api/vehicles`,C=E.useCallback(async()=>{i(!0),l(null);try{const[W,$]=await Promise.all([we.get(j),we.get(L)]),K=W.data.map(ee=>{const Q=$.data.find(ce=>ce._id===ee.vehicle);return{...ee,vehicle:Q||ee.vehicle}});t(K),r($.data)}catch(W){console.error("Error fetching data:",W),l("Failed to load data."),ie.error("Failed to load data.")}finally{i(!1)}},[]);E.useEffect(()=>{C()},[C]);const T=e.filter(W=>{const $=c.toLowerCase(),K=typeof W.vehicle=="object"&&W.vehicle&&W.vehicle.licensePlate?W.vehicle.licensePlate:"";return W.center&&W.center.toLowerCase().includes($)||W.controlId&&W.controlId.toLowerCase().includes($)||K.toLowerCase().includes($)}),P=W=>{if(v&&(f==null?void 0:f._id)!==W._id){if(confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")){const $=typeof W.vehicle=="object"&&W.vehicle?W.vehicle._id:W.vehicle,K=n.find(Q=>Q._id===$),ee=(W.documents||[]).map(Q=>({name:Q.name,url:Q.url,type:Q.type,size:Q.size,isNew:!1}));b({...W,vehicle:K||W.vehicle,documents:ee}),D(!1),w(null),_([])}}else if(!v){const $=typeof W.vehicle=="object"&&W.vehicle?W.vehicle._id:W.vehicle,K=n.find(Q=>Q._id===$),ee=(W.documents||[]).map(Q=>({name:Q.name,url:Q.url,type:Q.type,size:Q.size,isNew:!1}));b({...W,vehicle:K||W.vehicle,documents:ee})}},q=async W=>{const $=new FormData;for(const K in W)if(Object.prototype.hasOwnProperty.call(W,K)){const ee=W[K];K==="vehicle"&&ee?$.append("vehicle",typeof ee=="string"?ee:ee._id):K!=="_id"&&K!=="documents"&&K!=="attachments"&&K!=="vehicle"&&ee!==null&&ee!==void 0&&$.append(K,ee)}y.length>0&&y.forEach(K=>{$.append("documents",K)});try{const ee=(await we.post(j,$,{headers:{"Content-Type":"multipart/form-data"}})).data,Q=n.find(ve=>ve._id===ee.vehicle),ce={...ee,vehicle:Q||ee.vehicle};t([...e,ce]),b(ce),h(!1),ie.success("Inspection added successfully."),_([])}catch(K){console.error("Error adding inspection:",K),ie.error("Failed to add inspection.")}},X=async W=>{var ce;const $=W._id||(f?f._id:null);if(!$||!g){ie.error("No inspection ID or edited inspection data found for update.");return}const K=[{name:"Centre",value:g.center,required:!0},{name:"ID de contrôle",value:g.controlId,required:!1},{name:"Numéro d'autorisation",value:g.authorizationNumber,required:!1},{name:"Contact du centre",value:g.centerContact,required:!1},{name:"Nom de l'inspecteur",value:g.inspectorName,required:!0},{name:"Résultats",value:g.results,required:!0},{name:"Observation",value:g.observation,required:!1}];for(const ve of K){if(ve.required&&bv(ve.value)){ie.error(`${ve.name} ne peut pas être vide ou contenir uniquement des espaces.`);return}if(!ve.required&&ve.value&&bv(ve.value)){ie.error(`${ve.name} ne peut pas contenir uniquement des espaces.`);return}}if(g.duration!==void 0&&g.duration<1){ie.error("Durée (mois) ne peut pas être inférieure à 1.");return}if(g.price!==void 0&&g.price<1){ie.error("Prix (DH) ne peut pas être inférieur à 1.");return}const ee=new FormData;for(const ve in W)if(Object.prototype.hasOwnProperty.call(W,ve)){const U=W[ve];ve==="vehicle"&&U?ee.append("vehicle",typeof U=="string"?U:U._id):ve!=="_id"&&ve!=="documents"&&ve!=="attachments"&&ve!=="vehicle"&&U!==null&&U!==void 0&&ee.append(ve,U)}const Q=((ce=g.documents)==null?void 0:ce.filter(ve=>!ve.isNew))||[];ee.append("existingDocuments",JSON.stringify(Q)),y.length>0&&y.forEach(ve=>{ee.append("documents",ve)});try{const U=(await we.put(`${j}/${$}`,ee,{headers:{"Content-Type":"multipart/form-data"}})).data,H=n.find(S=>S._id===U.vehicle),J={...U,vehicle:H||U.vehicle};t(e.map(S=>S._id===J._id?J:S)),b(J),h(!1),D(!1),w(null),ie.success("Inspection updated successfully."),_([])}catch(ve){console.error("Error updating inspection:",ve),ie.error("Failed to update inspection.")}},te=async W=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette visite technique ?"))try{await we.delete(`${j}/${W}`),t(e.filter($=>$._id!==W)),b(null),ie.success("Inspection deleted successfully.")}catch($){console.error("Error deleting inspection:",$),ie.error("Failed to delete inspection.")}},oe=async W=>{if(f)try{await we.delete(`${j}/${f._id}/documents`,{data:{documentUrl:W.url}}),b($=>{var K;return $?{...$,documents:(K=$.documents)==null?void 0:K.filter(ee=>ee.url!==W.url)}:null}),ie.success("Document supprimé avec succès.")}catch($){console.error("Erreur lors de la suppression du document:",$),ie.error("Échec de la suppression du document.")}};return s?a.jsx("p",{children:"Loading..."}):o?a.jsx("p",{children:o}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Visites Techniques"}),a.jsxs("button",{onClick:()=>{b(null),h(!0),_([])},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Nouvelle Visite"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"relative",children:[a.jsx(Yn,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Rechercher une visite technique...",className:"pl-10 w-full border-gray-300 rounded-md",value:c,onChange:W=>{v?confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")&&(u(W.target.value),D(!1),w(null),_([])):u(W.target.value)}})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Véhicule"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Centre"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Dates"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Prix"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(W=>{var $;return a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(f==null?void 0:f._id)===W._id?v?"bg-blue-100":"bg-blue-50":""}`,onClick:()=>P(W),children:[a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium",children:typeof W.vehicle=="object"&&W.vehicle?W.vehicle.model:"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:typeof W.vehicle=="object"&&W.vehicle?W.vehicle.licensePlate:"N/A"})]}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm",children:W.center}),a.jsx("div",{className:"text-xs text-gray-500",children:W.controlId})]}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm",children:fo(W.inspectionDate)}),a.jsx("div",{className:"text-xs text-gray-500",children:fo(W.endDate)})]}),a.jsxs("td",{className:"px-6 py-4",children:[(($=W.price)==null?void 0:$.toLocaleString("fr-FR"))||"N/A"," DH"]}),a.jsxs("td",{className:"px-6 py-4 text-right",children:[a.jsx(gn,{onClick:K=>{K.stopPropagation(),b(W);const ee=(W.documents||[]).map(Q=>({name:Q.name,url:Q.url,type:Q.type,size:Q.size,isNew:!1}));w({...W,documents:ee}),_([]),D(!0)},size:"md",className:"mr-3"}),a.jsx("button",{onClick:K=>{K.stopPropagation(),te(W._id)},children:a.jsx(Rn,{size:18})})]})]},W._id)})})]})})}),a.jsx("div",{className:"lg:col-span-1",children:f?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de la visite"}),v?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{confirm("Êtes-vous sûr de vouloir annuler les modifications ?")&&(D(!1),w(null),_([]))},className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:()=>{g&&X(g)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:()=>{const W=(f.documents||[]).map($=>({name:$.name,url:$.url,type:$.type,size:$.size,isNew:!1}));w({...f,documents:W}),_([]),D(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"space-y-4",children:[typeof f.vehicle=="object"&&f.vehicle&&a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[f.vehicle.imageUrl&&a.jsx("img",{src:(fe=f.vehicle.imageUrl)!=null&&fe.startsWith("data:")?f.vehicle.imageUrl:`${Wa}/${(G=f.vehicle.imageUrl)==null?void 0:G.replace(/\\/g,"/")}`,alt:`${f.vehicle.brand} ${f.vehicle.model}`,className:"w-24 h-24 object-cover rounded-lg shadow"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-lg",children:[f.vehicle.brand," ",f.vehicle.model]}),a.jsx("p",{className:"text-sm text-gray-600",children:f.vehicle.licensePlate})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Véhicule"}),v&&g?a.jsxs("select",{name:"vehicle",onChange:W=>{const $=W.target.value;w(K=>K?{...K,vehicle:$}:null)},value:g!=null&&g.vehicle?typeof g.vehicle=="object"?g.vehicle._id:g.vehicle:"",className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),n.map(W=>a.jsxs("option",{value:W._id,children:[W.licensePlate," - ",W.model]},W._id))]}):a.jsx("p",{className:"font-medium",children:typeof f.vehicle=="object"&&f.vehicle?`${f.vehicle.model} (${f.vehicle.licensePlate})`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Centre"}),v&&g?a.jsx("input",{type:"text",name:"center",value:g.center||"",onChange:W=>w($=>$?{...$,center:W.target.value}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:f.center||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"ID de contrôle"}),v&&g?a.jsx("input",{type:"text",name:"controlId",value:g.controlId||"",onChange:W=>w($=>$?{...$,controlId:W.target.value}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:f.controlId||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Numéro d'autorisation"}),v&&g?a.jsx("input",{type:"text",name:"authorizationNumber",value:g.authorizationNumber||"",onChange:W=>w($=>$?{...$,authorizationNumber:W.target.value}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:f.authorizationNumber||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date d'inspection"}),v&&g?a.jsx(Pe,{selected:g.inspectionDate?new Date(g.inspectionDate):null,onChange:W=>w($=>$?{...$,inspectionDate:W?W.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:fo(f.inspectionDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Durée"}),v&&g?a.jsx("input",{type:"number",name:"duration",value:g.duration||0,onChange:W=>w($=>$?{...$,duration:Number(W.target.value)}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:f.duration?`${f.duration} mois`:"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de fin"}),v&&g?a.jsx(Pe,{selected:g.endDate?new Date(g.endDate):null,onChange:W=>w($=>$?{...$,endDate:W?W.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:fo(f.endDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Prix"}),v&&g?a.jsx("input",{type:"number",name:"price",value:g.price||0,onChange:W=>w($=>$?{...$,price:Number(W.target.value)}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsxs("p",{className:"font-medium",children:[((se=f.price)==null?void 0:se.toLocaleString("fr-FR"))||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Contact du centre"}),v&&g?a.jsx("input",{type:"text",name:"centerContact",value:g.centerContact||"",onChange:W=>w($=>$?{...$,centerContact:W.target.value}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:f.centerContact||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Nom de l'inspecteur"}),v&&g?a.jsx("input",{type:"text",name:"inspectorName",value:g.inspectorName||"",onChange:W=>w($=>$?{...$,inspectorName:W.target.value}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:f.inspectorName||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Résultats"}),v&&g?a.jsx("textarea",{name:"results",value:g.results||"",onChange:W=>w($=>$?{...$,results:W.target.value}:null),rows:3,className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:f.results||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Prochaine date d'inspection"}),v&&g?a.jsx(Pe,{selected:g.nextInspectionDate?new Date(g.nextInspectionDate):null,onChange:W=>w($=>$?{...$,nextInspectionDate:W?W.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:fo(f.nextInspectionDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Observation"}),v&&g?a.jsx("textarea",{name:"observation",value:g.observation||"",onChange:W=>w($=>$?{...$,observation:W.target.value}:null),rows:3,className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:f.observation||"-"})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Documents Associés:"}),v&&g?a.jsx(mt,{api_url:Wa,existingDocuments:g.documents||[],newFiles:y,onNewFilesChange:_,onRemoveExistingDocument:oe}):f!=null&&f.documents&&f.documents.length>0?a.jsx(mt,{api_url:Wa,existingDocuments:f.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:oe,label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]})]}),a.jsx("div",{className:"flex justify-end space-x-3 mt-4"})]})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(bt,{size:64,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune visite sélectionnée"})]})})]}),m&&a.jsx(l3,{onSubmit:q,onClose:()=>h(!1),initialData:null,vehicles:n,selectedInspection:f,setSelectedInspection:b,setEditedInspection:w,newAttachmentFiles:y,setNewAttachmentFiles:_,API_URL_INSPECTIONS:j,API_URL:Wa,handleRemoveExistingDocument:oe})]})},l3=({onSubmit:e,onClose:t,initialData:n,vehicles:r,selectedInspection:s,setSelectedInspection:i,setEditedInspection:o,newAttachmentFiles:l,setNewAttachmentFiles:c,API_URL_INSPECTIONS:u,API_URL:m,handleRemoveExistingDocument:h})=>{const[f,b]=E.useState(()=>{if(n){const _=typeof n.vehicle=="object"&&n.vehicle!==null?n.vehicle._id:n.vehicle;return{...n,inspectionDate:n.inspectionDate?new Date(n.inspectionDate).toISOString().split("T")[0]:"",endDate:n.endDate?new Date(n.endDate).toISOString().split("T")[0]:"",nextInspectionDate:n.nextInspectionDate?new Date(n.nextInspectionDate).toISOString().split("T")[0]:"",vehicle:_,documents:n.documents||[],duration:n.duration&&n.duration>=1?n.duration:1,price:n.price&&n.price>=1?n.price:1}}return{center:"",controlId:"",authorizationNumber:"",inspectionDate:new Date().toISOString().split("T")[0],duration:1,endDate:"",price:1,centerContact:"",observation:"",vehicle:void 0,inspectorName:"",results:"",nextInspectionDate:"",documents:[]}}),[v,D]=E.useState({});E.useEffect(()=>{if(f.inspectionDate&&f.duration&&f.duration>=1){const _=new Date(f.inspectionDate);_.setMonth(_.getMonth()+f.duration),b(j=>({...j,endDate:_.toISOString().split("T")[0]}))}else f.duration&&f.duration<1&&b(_=>({..._,endDate:""}))},[f.inspectionDate,f.duration]);const g=_=>{const{name:j,value:L}=_.target;if(["center","controlId","authorizationNumber","centerContact","inspectorName","results","observation"].includes(j))L.trim()===""&&(_.target.required||["center","inspectorName","results"].includes(j))?D(C=>({...C,[j]:"Ce champ ne peut pas contenir uniquement des espaces."})):L.trim()===""&&!_.target.required&&L.length>0?D(C=>({...C,[j]:"Ce champ ne peut pas contenir uniquement des espaces."})):D(C=>{const T={...C};return delete T[j],T});else if(j==="duration"||j==="price"){const C=parseFloat(L);isNaN(C)||C<1?D(T=>({...T,[j]:"La valeur ne peut pas être inférieure à 1."})):D(T=>{const P={...T};return delete P[j],P})}b(C=>j==="duration"||j==="price"?{...C,[j]:parseFloat(L)||0}:{...C,[j]:L})},w=(_,j)=>{b(L=>({...L,[j]:_?_.toISOString().split("T")[0]:""}))},y=_=>{var L,C,T;_.preventDefault();const j={};if(((L=f.center)==null?void 0:L.trim())===""&&(j.center="Le centre ne peut pas être vide."),f.controlId&&f.controlId.trim()===""&&(j.controlId="L'ID de contrôle ne peut pas être vide."),f.authorizationNumber&&f.authorizationNumber.trim()===""&&(j.authorizationNumber="Le numéro d'autorisation ne peut pas être vide."),f.centerContact&&f.centerContact.trim()===""&&(j.centerContact="Le contact du centre ne peut pas être vide."),((C=f.inspectorName)==null?void 0:C.trim())===""&&(j.inspectorName="Le nom de l'inspecteur ne peut pas être vide."),((T=f.results)==null?void 0:T.trim())===""&&(j.results="Les résultats ne peuvent pas être vides."),f.observation&&f.observation.trim()===""&&(j.observation="L'observation ne peut pas être vide."),f.duration!==void 0&&f.duration<1&&(j.duration="La durée ne peut pas être inférieure à 1."),f.price!==void 0&&f.price<1&&(j.price="Le prix ne peut pas être inférieur à 1."),D(j),Object.keys(j).length>0){ie.error("Veuillez corriger les erreurs de validation.");return}e({...f,vehicle:f.vehicle})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sn,{onClick:t}),a.jsxs("h2",{className:"text-xl font-bold mb-4",children:[n?"Modifier":"Nouvelle"," Visite"]}),a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations Générales"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",onChange:g,value:f.vehicle||"",className:"w-full border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),r.map(_=>a.jsxs("option",{value:_._id,children:[_.licensePlate," - ",_.model]},_._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"center",className:"block text-sm font-medium text-gray-700 mb-1",children:"Centre"}),a.jsx("input",{type:"text",id:"center",name:"center",value:f.center||"",onChange:g,placeholder:"Nom du centre",className:`w-full border rounded-lg p-2 ${v.center?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),v.center&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.center})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"controlId",className:"block text-sm font-medium text-gray-700 mb-1",children:"ID de contrôle"}),a.jsx("input",{type:"text",id:"controlId",name:"controlId",value:f.controlId||"",onChange:g,placeholder:"ID de contrôle",className:`w-full border rounded-lg p-2 ${v.controlId?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.controlId&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.controlId})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"authorizationNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro d'autorisation"}),a.jsx("input",{type:"text",id:"authorizationNumber",name:"authorizationNumber",value:f.authorizationNumber||"",onChange:g,placeholder:"Numéro d'autorisation",className:`w-full border rounded-lg p-2 ${v.authorizationNumber?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.authorizationNumber&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.authorizationNumber})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"inspectionDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d'inspection"}),a.jsx(Pe,{id:"inspectionDate",selected:f.inspectionDate?new Date(f.inspectionDate):null,onChange:_=>w(_,"inspectionDate"),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Durée (mois)"}),a.jsx("input",{type:"number",id:"duration",name:"duration",value:f.duration||0,onChange:g,placeholder:"Durée en mois",className:`w-full border rounded-lg p-2 ${v.duration?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.duration&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.duration})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de fin"}),a.jsx("input",{type:"date",id:"endDate",name:"endDate",value:f.endDate||"",onChange:g,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-gray-100",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (DH)"}),a.jsx("input",{type:"number",id:"price",name:"price",value:f.price||0,onChange:g,placeholder:"Prix",className:`w-full border rounded-lg p-2 ${v.price?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.price&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.price})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"centerContact",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact du centre"}),a.jsx("input",{type:"text",id:"centerContact",name:"centerContact",value:f.centerContact||"",onChange:g,placeholder:"Contact du centre",className:`w-full border rounded-lg p-2 ${v.centerContact?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.centerContact&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.centerContact})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Détails de l'inspection"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"inspectorName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'inspecteur"}),a.jsx("input",{type:"text",id:"inspectorName",name:"inspectorName",value:f.inspectorName||"",onChange:g,placeholder:"Nom de l'inspecteur",className:`w-full border rounded-lg p-2 ${v.inspectorName?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),v.inspectorName&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.inspectorName})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"results",className:"block text-sm font-medium text-gray-700 mb-1",children:"Résultats"}),a.jsx("textarea",{id:"results",name:"results",value:f.results||"",onChange:g,placeholder:"Résultats de l'inspection",rows:3,className:`w-full border rounded-lg p-2 ${v.results?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),v.results&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.results})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"nextInspectionDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prochaine date d'inspection"}),a.jsx(Pe,{id:"nextInspectionDate",selected:f.nextInspectionDate?new Date(f.nextInspectionDate):null,onChange:_=>w(_,"nextInspectionDate"),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"observation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Observation"}),a.jsx("textarea",{id:"observation",name:"observation",value:f.observation||"",onChange:g,placeholder:"Observations supplémentaires",rows:3,className:`w-full border rounded-lg p-2 ${v.observation?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.observation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.observation})]})]})]}),a.jsx(mt,{api_url:m,existingDocuments:f.documents||[],newFiles:l,onNewFilesChange:c,onRemoveExistingDocument:h}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),a.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n?"Mettre à jour":"Ajouter"," Visite"]})]})]})]})})};kn("fr",Dn);const c3=e=>{var n;switch((n=e.split(".").pop())==null?void 0:n.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"webp":return"image/webp";case"pdf":return"application/pdf";default:return"application/octet-stream"}},ho=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},Ya="http://localhost:5000",u3=()=>{var se,W;const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,l]=E.useState(null),[c,u]=E.useState(""),[m,h]=E.useState(!1),[f,b]=E.useState(null),[v,D]=E.useState(!1),[g,w]=E.useState(null),[y,_]=E.useState([]),j=`${Ya}/api/vehicleinsurances`,L=`${Ya}/api/vehicles`,C=E.useCallback(async()=>{i(!0),l(null);try{const[$,K]=await Promise.all([we.get(j),we.get(L)]),ee=$.data.map(Q=>{const ce=K.data.find(ve=>ve._id===Q.vehicle);return{...Q,vehicle:ce||Q.vehicle}});t(ee),r(K.data)}catch($){console.error("Error fetching data:",$),l("Failed to load data."),ie.error("Failed to load data.")}finally{i(!1)}},[]);E.useEffect(()=>{C()},[C]),E.useEffect(()=>{if(f&&!v){const $=[];f.attachments&&Array.isArray(f.attachments)&&f.attachments.forEach(K=>{const ee=K.split(/-(.+)/)[1];$.push({name:ee,url:K,type:c3(ee),size:0})}),JSON.stringify(f.documents)!==JSON.stringify($)&&b(K=>({...K,documents:$}))}},[f,v]);const T=e.filter($=>{const K=c.toLowerCase(),ee=typeof $.vehicle=="object"&&$.vehicle&&$.vehicle.licensePlate?$.vehicle.licensePlate:"";return $.company.toLowerCase().includes(K)||$.policyNumber.toLowerCase().includes(K)||ee.toLowerCase().includes(K)}),P=async $=>{const K=new FormData;for(const ee in $)if(Object.prototype.hasOwnProperty.call($,ee)){const Q=$[ee];ee==="vehicle"&&Q?K.append("vehicle",typeof Q=="string"?Q:Q._id):ee!=="_id"&&ee!=="documents"&&ee!=="attachments"&&ee!=="vehicle"&&Q!==null&&Q!==void 0&&K.append(ee,Q)}y.length>0&&y.forEach(ee=>{K.append("attachments",ee)});try{const Q=(await we.post(j,K,{headers:{"Content-Type":"multipart/form-data"}})).data,ce=n.find(U=>U._id===Q.vehicle),ve={...Q,vehicle:ce||Q.vehicle};t([...e,ve]),h(!1),ie.success("Insurance added successfully."),_([])}catch(ee){console.error("Error adding insurance:",ee),ie.error("Failed to add insurance.")}},q=async $=>{var Q;if(!f)return;const K=new FormData;for(const ce in $)if(Object.prototype.hasOwnProperty.call($,ce)){const ve=$[ce];ce==="vehicle"&&ve?K.append("vehicle",typeof ve=="string"?ve:ve._id):ce!=="_id"&&ce!=="documents"&&ce!=="attachments"&&ce!=="vehicle"&&ve!==null&&ve!==void 0&&K.append(ce,ve)}const ee=((Q=g==null?void 0:g.documents)==null?void 0:Q.filter(ce=>!ce.isNew))||[];K.append("existingDocuments",JSON.stringify(ee)),y.length>0&&y.forEach(ce=>{K.append("attachments",ce)});try{const ve=(await we.put(`${j}/${f._id}`,K,{headers:{"Content-Type":"multipart/form-data"}})).data,U=n.find(J=>J._id===ve.vehicle),H={...ve,vehicle:U||ve.vehicle};t(e.map(J=>J._id===H._id?H:J)),b(H),D(!1),ie.success("Insurance updated successfully."),_([])}catch(ce){console.error("Error updating insurance:",ce),ie.error("Failed to update insurance.")}},[X,te]=E.useState(!1),oe=$=>{b(e.find(K=>K._id===$)||null),te(!0)},fe=async()=>{if(f)try{await we.delete(`${j}/${f._id}`),t(e.filter($=>$._id!==f._id)),b(null),te(!1),ie.success("Insurance deleted successfully.")}catch($){console.error("Error deleting insurance:",$),ie.error("Failed to delete insurance.")}},G=async $=>{if(f)try{await we.delete(`${j}/${f._id}/documents`,{data:{documentName:$.name}}),b(K=>{var ee,Q;return K?{...K,documents:(ee=K.documents)==null?void 0:ee.filter(ce=>ce.url!==$.url),attachments:(Q=K.attachments)==null?void 0:Q.filter(ce=>ce!==$.name)}:null}),ie.success("Document supprimé avec succès.")}catch(K){console.error("Erreur lors de la suppression du document:",K),ie.error("Échec de la suppression du document.")}};return s?a.jsx("p",{children:"Loading..."}):o?a.jsx("p",{children:o}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Liste des Assurances"}),a.jsxs("button",{onClick:()=>{b(null),h(!0),_([])},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Nouvelle Assurance"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"relative",children:[a.jsx(Yn,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Rechercher une assurance...",className:"pl-10 w-full border-gray-300 rounded-md",value:c,onChange:$=>u($.target.value)})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Véhicule"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Assurance"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Dates"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Prix"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map($=>a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(f==null?void 0:f._id)===$._id?"bg-blue-50":""}`,onClick:()=>{const K=typeof $.vehicle=="object"&&$.vehicle?$.vehicle._id:$.vehicle,ee=n.find(Q=>Q._id===K);b({...$,vehicle:ee||$.vehicle})},children:[a.jsx("td",{className:"px-6 py-4",children:typeof $.vehicle=="object"&&$.vehicle?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-sm font-medium",children:[$.vehicle.brand," ",$.vehicle.model]}),a.jsx("div",{className:"text-xs text-gray-500",children:$.vehicle.licensePlate})]}):a.jsx("div",{className:"text-sm text-gray-500",children:"N/A"})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm",children:$.company}),a.jsx("div",{className:"text-xs text-gray-500",children:$.policyNumber})]}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm",children:ho($.startDate)}),a.jsx("div",{className:"text-xs text-gray-500",children:ho($.endDate)})]}),a.jsxs("td",{className:"px-6 py-4",children:[$.price.toLocaleString("fr-FR")," DH"]}),a.jsxs("td",{className:"px-6 py-4 text-right",children:[a.jsx(gn,{onClick:K=>{K.stopPropagation(),b($),D(!0);const ee=($.attachments||[]).map(Q=>({name:Q.split(/-(.+)/)[1],url:Q,type:"",size:0,isNew:!1}));w({...$,documents:ee}),_([])},size:"md",className:"mr-3"}),a.jsx("button",{onClick:K=>{K.stopPropagation(),oe($._id)},children:a.jsx(Rn,{size:18})})]})]},$._id))})]})})}),a.jsx("div",{className:"lg:col-span-1",children:f?a.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de l'assurance"}),v?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{type:"submit",form:"insurance-edit-form",className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Sauvegarder"}),a.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 border rounded-lg",children:"Annuler"})]}):a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(gn,{onClick:()=>{D(!0);const $=(f.attachments||[]).map(K=>({name:K.split(/-(.+)/)[1],url:K,type:"",size:0,isNew:!1}));w({...f,documents:$}),_([])}}),a.jsx(Sn,{onClick:()=>b(null)})]})]}),v&&g?a.jsx("form",{id:"insurance-edit-form",onSubmit:$=>{$.preventDefault(),g&&q(g)},children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",className:"w-full border rounded-lg p-2",value:g!=null&&g.vehicle?typeof g.vehicle=="object"?g.vehicle._id:g.vehicle:"",onChange:$=>w({...g,vehicle:$.target.value}),children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),n.map($=>a.jsxs("option",{value:$._id,children:[$.licensePlate," - ",$.model]},$._id))]})]}),Object.keys(g).filter($=>$!=="_id"&&$!=="__v"&&$!=="createdAt"&&$!=="updatedAt"&&$!=="vehicle"&&$!=="attachments"&&$!=="documents"&&$!=="insuranceDocument").map($=>{const K={company:"Compagnie",policyNumber:"Numéro de Police",operationDate:"Date d'Opération",startDate:"Date de Début",duration:"Durée (mois)",endDate:"Date de Fin",price:"Prix (DH)",contactInfo:"Contact",observation:"Observation"};return a.jsxs("div",{children:[a.jsx("label",{htmlFor:$,className:"block text-sm font-medium text-gray-700 mb-1 capitalize",children:K[$]||$}),$.includes("Date")?a.jsx(Pe,{selected:g[$]?new Date(g[$]):null,onChange:ee=>w({...g,[$]:ee==null?void 0:ee.toISOString().split("T")[0]}),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2"}):a.jsx("input",{type:$==="price"||$==="duration"?"number":"text",name:$,id:$,className:"w-full border rounded-lg p-2",value:g[$]||"",onChange:ee=>w({...g,[$]:ee.target.value})})]},$)}),a.jsx(mt,{api_url:Ya,existingDocuments:g.documents||[],newFiles:y,onNewFilesChange:_,onRemoveExistingDocument:G})]})}):a.jsxs("div",{className:"space-y-4",children:[typeof f.vehicle=="object"&&f.vehicle&&a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[f.vehicle.imageUrl&&a.jsx("img",{src:(se=f.vehicle.imageUrl)!=null&&se.startsWith("data:")?f.vehicle.imageUrl:`${Ya}/${(W=f.vehicle.imageUrl)==null?void 0:W.replace(/\\/g,"/")}`,alt:`${f.vehicle.brand} ${f.vehicle.model}`,className:"w-24 h-24 object-cover rounded-lg shadow"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-lg",children:[f.vehicle.brand," ",f.vehicle.model]}),a.jsx("p",{className:"text-sm text-gray-600",children:f.vehicle.licensePlate})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Compagnie"}),a.jsx("p",{children:f.company})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Numéro de Police"}),a.jsx("p",{children:f.policyNumber})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Date d'Opération"}),a.jsx("p",{children:ho(f.operationDate)})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Date de Début"}),a.jsx("p",{children:ho(f.startDate)})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Durée"}),a.jsxs("p",{children:[f.duration," mois"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Date de Fin"}),a.jsx("p",{children:ho(f.endDate)})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Prix"}),a.jsxs("p",{children:[f.price.toLocaleString("fr-FR")," DH"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Contact"}),a.jsx("p",{children:f.contactInfo||"N/A"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium",children:"Observation"}),a.jsx("p",{children:f.observation||"Aucune observation"})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Documents Associés:"}),f.documents&&f.documents.length>0?a.jsx(mt,{api_url:Ya,existingDocuments:f.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:G,label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]})]})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(bt,{size:64,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune assurance sélectionnée"})]})})]}),m&&a.jsx(d3,{onSubmit:P,onClose:()=>h(!1),initialData:null,vehicles:n,selectedInsurance:f,setSelectedInsurance:b,setEditedInsurance:w,newAttachmentFiles:y,setNewAttachmentFiles:_,API_URL_INSURANCES:j,API_URL:Ya,handleRemoveExistingDocument:G}),X&&f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirmer la suppression"}),a.jsxs("p",{children:[`Êtes-vous sûr de vouloir supprimer l'assurance pour le véhicule "`,f.vehicle&&typeof f.vehicle=="object"?f.vehicle.licensePlate:"N/A",'" ?']}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>te(!1),className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"button",onClick:fe,className:"px-4 py-2 bg-red-600 text-white rounded-lg",children:"Supprimer"})]})]})})]})},d3=({onSubmit:e,onClose:t,initialData:n,vehicles:r,selectedInsurance:s,setSelectedInsurance:i,setEditedInsurance:o,newAttachmentFiles:l,setNewAttachmentFiles:c,API_URL_INSURANCES:u,API_URL:m,handleRemoveExistingDocument:h})=>{const[f,b]=E.useState(()=>{if(n){const _=typeof n.vehicle=="object"&&n.vehicle!==null?n.vehicle._id:n.vehicle;return{...n,operationDate:n.operationDate?new Date(n.operationDate).toISOString().split("T")[0]:"",startDate:n.startDate?new Date(n.startDate).toISOString().split("T")[0]:"",endDate:n.endDate?new Date(n.endDate).toISOString().split("T")[0]:"",vehicle:_,documents:n.documents||[]}}return{company:"",policyNumber:"",operationDate:new Date().toISOString().split("T")[0],startDate:new Date().toISOString().split("T")[0],duration:12,endDate:"",price:0,contactInfo:"",observation:"",vehicle:void 0,attachments:[],documents:[]}}),[v,D]=E.useState({});E.useEffect(()=>{if(f.startDate&&f.duration!==void 0&&f.duration!==null){const _=new Date(f.startDate);if(isNaN(_.getTime()))b(j=>({...j,endDate:""}));else{const j=new Date(_);j.setMonth(j.getMonth()+f.duration),b(L=>({...L,endDate:j.toISOString().split("T")[0]}))}}else b(_=>({..._,endDate:""}))},[f.startDate,f.duration]);const g=_=>{const{name:j,value:L}=_.target;if(["company","policyNumber","contactInfo","observation"].includes(j))L.trim()===""?D(C=>({...C,[j]:"Ce champ ne peut pas contenir uniquement des espaces."})):D(C=>{const T={...C};return delete T[j],T});else if(j==="duration"||j==="price"){const C=parseFloat(L);isNaN(C)||C<1?D(T=>({...T,[j]:"La valeur ne peut pas être inférieure à 1."})):D(T=>{const P={...T};return delete P[j],P})}b(C=>j==="duration"||j==="price"?{...C,[j]:parseFloat(L)||0}:{...C,[j]:L})},w=(_,j)=>{b(L=>({...L,[j]:_?_.toISOString().split("T")[0]:""}))},y=_=>{var L,C,T,P;_.preventDefault();const j={};if(((L=f.company)==null?void 0:L.trim())===""&&(j.company="La compagnie ne peut pas être vide."),((C=f.policyNumber)==null?void 0:C.trim())===""&&(j.policyNumber="Le numéro de police ne peut pas être vide."),((T=f.contactInfo)==null?void 0:T.trim())===""&&(j.contactInfo="Les informations de contact ne peuvent pas être vides."),((P=f.observation)==null?void 0:P.trim())===""&&(j.observation="L'observation ne peut pas être vide."),f.duration!==void 0&&f.duration<1&&(j.duration="La durée ne peut pas être inférieure à 1."),f.price!==void 0&&f.price<1&&(j.price="Le prix ne peut pas être inférieur à 1."),D(j),Object.keys(j).length>0){ie.error("Veuillez corriger les erreurs de validation.");return}e({...f,vehicle:f.vehicle})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sn,{onClick:t}),a.jsxs("h2",{className:"text-xl font-bold mb-4",children:[n?"Modifier":"Nouvelle"," Assurance"]}),a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations sur l'Assurance"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",value:f.vehicle||"",onChange:g,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),r.map(_=>a.jsxs("option",{value:_._id,children:[_.licensePlate," - ",_.model]},_._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 mb-1",children:"Compagnie"}),a.jsx("input",{type:"text",id:"company",name:"company",value:f.company||"",onChange:g,className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm ${v.company?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Nom de la compagnie",required:!0}),v.company&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.company})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"policyNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro de Police"}),a.jsx("input",{type:"text",id:"policyNumber",name:"policyNumber",value:f.policyNumber||"",onChange:g,className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm ${v.policyNumber?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Numéro de police",required:!0}),v.policyNumber&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.policyNumber})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"operationDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d'Opération"}),a.jsx(Pe,{id:"operationDate",selected:f.operationDate?new Date(f.operationDate):null,onChange:_=>w(_,"operationDate"),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholderText:"Sélectionner une date",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Début"}),a.jsx(Pe,{id:"startDate",selected:f.startDate?new Date(f.startDate):null,onChange:_=>w(_,"startDate"),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholderText:"Sélectionner une date",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Durée (mois)"}),a.jsx("input",{type:"number",id:"duration",name:"duration",value:f.duration||"",onChange:g,className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm ${v.duration?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),v.duration&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.duration})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Fin"}),a.jsx("input",{type:"date",id:"endDate",name:"endDate",value:f.endDate||"",onChange:g,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-gray-100",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (DH)"}),a.jsx("input",{type:"number",id:"price",name:"price",value:f.price||"",onChange:g,className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm ${v.price?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),v.price&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.price})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"contactInfo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Informations de Contact"}),a.jsx("input",{type:"text",id:"contactInfo",name:"contactInfo",value:f.contactInfo||"",onChange:g,className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm ${v.contactInfo?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Téléphone, Email, etc."}),v.contactInfo&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.contactInfo})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"observation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Observation"}),a.jsx("textarea",{id:"observation",name:"observation",value:f.observation||"",onChange:g,rows:3,className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none sm:text-sm ${v.observation?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Notes ou observations supplémentaires"}),v.observation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.observation})]})]})]}),a.jsx(mt,{api_url:m,existingDocuments:f.documents||[],newFiles:l,onNewFilesChange:c,onRemoveExistingDocument:h}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:n?"Mettre à jour":"Ajouter"})]})]})]})})};kn("fr",Dn);const Am=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},rj=["Casablanca","Rabat","Marrakech","Fès","Tanger","Agadir","Meknès","Oujda","Kénitra","Tétouan","Safi","El Jadida","Nador","Mohammedia","Béni Mellal","Témara","Khémisset"],m3=({onSubmit:e,onClose:t,initialData:n=null,vehicles:r,customers:s,onRemoveExistingDocument:i})=>{var j,L;const[o,l]=E.useState([]),[c,u]=E.useState((n==null?void 0:n.documents)||[]),m=C=>{if(!C)return null;const[T,P]=C.split(":").map(Number);return fi(hi(new Date,P),T)},h=C=>{if(!C)return"";const T=C.getHours().toString().padStart(2,"0"),P=C.getMinutes().toString().padStart(2,"0");return`${T}:${P}`},[f,b]=E.useState(()=>{const C={vehicle:null,infractionDate:new Date().toISOString().split("T")[0],timeInfraction:"",location:"",date:new Date().toISOString().split("T")[0],customer:null,permis:"",cin:"",passeport:"",type:"particular",societe:"",telephone:"",telephone2:"",attachments:[],documents:[]};if(n){const T=r.find(q=>{var X;return q._id===((X=n.vehicle)==null?void 0:X._id)})||null,P=s.find(q=>{var X;return q._id===((X=n.customer)==null?void 0:X._id)});return{...n,vehicle:T,date:n.date?new Date(n.date).toISOString().split("T")[0]:C.date,permis:(P==null?void 0:P.numeroPermis)||"",cin:n.cin||(P==null?void 0:P.cin)||"",passeport:n.passeport||(P==null?void 0:P.numeroPasseport)||"",type:n.type||((P==null?void 0:P.type)==="Professionnel"?"professional":"particular"),societe:n.societe||((P==null?void 0:P.type)==="Professionnel"?`${P.prenomFr} ${P.nomFr}`:""),telephone:n.telephone||(P==null?void 0:P.telephone)||"",telephone2:n.telephone2||(P==null?void 0:P.telephone2)||""}}return C});E.useEffect(()=>{if(n){const C=r.find(P=>{var q;return P._id===((q=n.vehicle)==null?void 0:q._id)})||null,T=s.find(P=>{var q;return P._id===((q=n.customer)==null?void 0:q._id)});b({...n,infractionDate:n.infractionDate?new Date(n.infractionDate).toISOString().split("T")[0]:"",date:n.date?new Date(n.date).toISOString().split("T")[0]:"",vehicle:C,permis:(T==null?void 0:T.numeroPermis)||"",cin:n.cin||(T==null?void 0:T.cin)||"",passeport:n.passeport||(T==null?void 0:T.numeroPasseport)||"",type:n.type||((T==null?void 0:T.type)==="Professionnel"?"professional":"particular"),societe:n.societe||((T==null?void 0:T.type)==="Professionnel"?`${T.prenomFr} ${T.nomFr}`:""),telephone:n.telephone||(T==null?void 0:T.telephone)||"",telephone2:n.telephone2||(T==null?void 0:T.telephone2)||""}),u(n.documents||[])}else b({vehicle:null,infractionDate:new Date().toISOString().split("T")[0],timeInfraction:"",location:"",date:new Date().toISOString().split("T")[0],customer:null,permis:"",cin:"",passeport:"",type:"particular",societe:"",telephone:"",telephone2:"",attachments:[],documents:[]}),u([]);l([])},[n,r,s]),E.useEffect(()=>()=>{o.forEach(C=>URL.revokeObjectURL(URL.createObjectURL(C))),c.forEach(C=>{C.url.startsWith("blob:")&&URL.revokeObjectURL(C.url)})},[o,c]);const v=C=>{const{name:T,value:P}=C.target;b(q=>({...q,[T]:P}))},D=(C,T)=>{b(P=>({...P,[T]:C?C.toISOString().split("T")[0]:""}))},g=C=>{const T=C.target.value,P=s.find(q=>q._id===T);b(q=>({...q,customer:P,permis:(P==null?void 0:P.numeroPermis)||"",cin:(P==null?void 0:P.cin)||"",passeport:(P==null?void 0:P.numeroPasseport)||"",type:(P==null?void 0:P.type)==="Professionnel"?"professional":"particular",societe:(P==null?void 0:P.type)==="Professionnel"?`${P.prenomFr} ${P.nomFr}`:"",telephone:(P==null?void 0:P.telephone)||"",telephone2:(P==null?void 0:P.telephone2)||""}))},w=async C=>{if(!(n!=null&&n._id)){l(T=>T.filter(P=>URL.createObjectURL(P)!==C.url)),u(T=>T.filter(P=>P.url!==C.url));return}await i(n._id,C),u(T=>T.filter(P=>P.url!==C.url))},y=C=>{C.preventDefault();const T={...f,documents:c};e(T,o)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sn,{onClick:t}),a.jsx("h2",{className:"text-xl font-bold mb-6",children:n?"Modifier l'infraction":"Ajouter une infraction"}),a.jsxs("form",{className:"space-y-6",onSubmit:y,children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Détails de l'infraction"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"infractionDate",className:"block mb-1",children:"Date Infraction (*)"}),a.jsx(Pe,{selected:f.infractionDate?new Date(f.infractionDate):null,onChange:C=>D(C,"infractionDate"),locale:"fr",dateFormat:"dd/MM/yyyy",className:"w-full border rounded p-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"timeInfraction",className:"block mb-1",children:"Heure Infraction"}),a.jsx(Pe,{selected:m(f.timeInfraction||""),onChange:C=>b(T=>({...T,timeInfraction:h(C)})),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Heure",dateFormat:"HH:mm",locale:"fr",className:"w-full border rounded p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"location",className:"block mb-1",children:"Fait à (*)"}),a.jsxs("select",{name:"location",id:"location",value:f.location||"",onChange:v,className:"w-full border rounded p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner une ville"}),rj.map(C=>a.jsx("option",{value:C,children:C},C))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date",className:"block mb-1",children:"Fait le (*)"}),a.jsx(Pe,{selected:f.date?new Date(f.date):null,onChange:C=>D(C,"date"),locale:"fr",dateFormat:"dd/MM/yyyy",className:"w-full border rounded p-2",required:!0})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Véhicule"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicle",className:"block mb-1",children:"Véhicule"}),a.jsxs("select",{name:"vehicle",id:"vehicle",className:"w-full border rounded p-2",value:((j=f.vehicle)==null?void 0:j._id)||"",onChange:C=>{const T=r.find(P=>P._id===C.target.value);b(P=>({...P,vehicle:T||null}))},children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),r.map(C=>a.jsx("option",{value:C._id,children:`${C.licensePlate} - ${C.brand} ${C.model}`},C._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicleDisplay",className:"block mb-1",children:"Modèle et Matricule"}),a.jsx("input",{type:"text",name:"vehicleDisplay",id:"vehicleDisplay",className:"w-full border rounded p-2 bg-gray-100",value:f.vehicle?`${f.vehicle.brand} ${f.vehicle.model} (${f.vehicle.licensePlate})`:"",readOnly:!0})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Client"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"customer",className:"block mb-1",children:"Client (*)"}),a.jsxs("select",{name:"customer",id:"customer",required:!0,className:"w-full border rounded p-2",value:((L=f.customer)==null?void 0:L._id)||"",onChange:g,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),s.map(C=>a.jsx("option",{value:C._id,children:`${C.prenomFr} ${C.nomFr}`},C._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"permis",className:"block mb-1",children:"Permis"}),a.jsx("input",{type:"text",name:"permis",id:"permis",className:"w-full border rounded p-2 bg-gray-100",value:f.permis||"",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"cin",className:"block mb-1",children:"CIN"}),a.jsx("input",{type:"text",name:"cin",id:"cin",value:f.cin||"",onChange:v,className:"w-full border rounded p-2",readOnly:!!f.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"passeport",className:"block mb-1",children:"Passeport"}),a.jsx("input",{type:"text",name:"passeport",id:"passeport",value:f.passeport||"",onChange:v,className:"w-full border rounded p-2",readOnly:!!f.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"type",className:"block mb-1",children:"Type de Client (*)"}),a.jsxs("select",{name:"type",id:"type",value:f.type||"particular",onChange:v,className:"w-full border rounded p-2",required:!0,disabled:!!f.customer,children:[a.jsx("option",{value:"particular",children:"Particulier"}),a.jsx("option",{value:"professional",children:"Professionnel"})]})]}),f.type==="professional"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"societe",className:"block mb-1",children:"Société"}),a.jsx("input",{type:"text",name:"societe",id:"societe",value:f.societe||"",onChange:v,className:"w-full border rounded p-2",readOnly:!!f.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"telephone",className:"block mb-1",children:"Téléphone"}),a.jsx("input",{type:"text",name:"telephone",id:"telephone",value:f.telephone||"",onChange:v,className:"w-full border rounded p-2",readOnly:!!f.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"telephone2",className:"block mb-1",children:"Téléphone 2"}),a.jsx("input",{type:"text",name:"telephone2",id:"telephone2",value:f.telephone2||"",onChange:v,className:"w-full border rounded p-2",readOnly:!!f.customer})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Pièces Jointes"}),a.jsx(mt,{api_url:"http://localhost:5000/api/infractions",newFiles:o,onNewFilesChange:l,existingDocuments:c,onRemoveExistingDocument:w,readOnly:!1,label:""})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded hover:bg-gray-100",children:"Annuler"}),a.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:[n?"Modifier":"Ajouter"," Infraction"]})]})]})]})})},f3=()=>{var ve,U;const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState([]),[o,l]=E.useState(!0),[c,u]=E.useState(null),[m,h]=E.useState(!1),[f,b]=E.useState(""),[v,D]=E.useState(null),[g,w]=E.useState(null),[y,_]=E.useState(null),[j,L]=E.useState(!1),[C,T]=E.useState(null),[P,q]=E.useState([]),X="http://localhost:5000",te=`${X}/api/infractions`,oe=`${X}/api/vehicles`,fe=`${X}/api/customers`,G=H=>{if(!H)return null;const[J,S]=H.split(":").map(Number);return fi(hi(new Date,S),J)},se=H=>{if(!H)return"";const J=H.getHours().toString().padStart(2,"0"),S=H.getMinutes().toString().padStart(2,"0");return`${J}:${S}`},W=E.useCallback(async()=>{l(!0),u(null);try{const[H,J,S]=await Promise.all([we.get(te),we.get(oe),we.get(fe)]);t(H.data),r(J.data),i(S.data)}catch(H){console.error("Error fetching data:",H),u("Failed to load data."),ie.error("Failed to load data.")}finally{l(!1)}},[]);E.useEffect(()=>{W()},[W]);const $=e.filter(H=>{var M,F,A,R,I;const J=H.customer?`${H.customer.prenomFr} ${H.customer.nomFr}`.toLowerCase():"",S=((F=(M=H.vehicle)==null?void 0:M.licensePlate)==null?void 0:F.toLowerCase())||"",O=((R=(A=H.vehicle)==null?void 0:A.model)==null?void 0:R.toLowerCase())||"",d=((I=H.infractionNumber)==null?void 0:I.toLowerCase())||"",p=S.includes(f.toLowerCase())||O.includes(f.toLowerCase())||J.includes(f.toLowerCase())||d.includes(f.toLowerCase()),N=new Date(H.infractionDate),k=v?N>=v:!0,x=g?N<=g:!0;return p&&k&&x}),K=async(H,J)=>{try{const S=new FormData;H.customer&&S.append("customer",H.customer._id),H.vehicle&&S.append("vehicle",H.vehicle._id),Object.keys(H).forEach(p=>{const N=p;N!=="customer"&&N!=="vehicle"&&N!=="documents"&&H[N]!==void 0&&S.append(p,String(H[N]))}),H.documents&&H.documents.forEach(p=>S.append("existingDocuments",p.url)),J.forEach(p=>{S.append("attachments",p)});const d=(await we.post(te,S,{headers:{"Content-Type":"multipart/form-data"}})).data;t([...e,d]),h(!1),ie.success("Infraction added successfully."),q([])}catch(S){console.error("Error adding infraction:",S),ie.error("Failed to add infraction.")}},ee=async(H,J)=>{if(y)try{const S=new FormData;H.customer&&S.append("customer",H.customer._id),H.vehicle&&S.append("vehicle",H.vehicle._id),Object.keys(H).forEach(p=>{const N=p;N!=="customer"&&N!=="vehicle"&&N!=="documents"&&H[N]!==void 0&&S.append(p,String(H[N]))}),H.documents&&H.documents.forEach(p=>{p.isNew||S.append("existingDocuments",p.url)}),J.forEach(p=>{S.append("attachments",p)});const d=(await we.put(`${te}/${y._id}`,S,{headers:{"Content-Type":"multipart/form-data"}})).data;t(e.map(p=>p._id===d._id?d:p)),_(d),h(!1),L(!1),T(null),q([]),ie.success("Infraction updated successfully.")}catch(S){console.error("Error updating infraction:",S),ie.error("Failed to update infraction.")}},Q=async H=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette infraction ?"))try{await we.delete(`${te}/${H}`),t(e.filter(J=>J._id!==H)),_(null),ie.success("Infraction deleted successfully.")}catch(J){console.error("Error deleting infraction:",J),ie.error("Failed to delete infraction.")}},ce=async(H,J)=>{try{await we.delete(`${te}/${H}/documents`,{data:{documentName:J.name}}),t(S=>S.map(O=>{var d;return O._id===H?{...O,documents:(d=O.documents)==null?void 0:d.filter(p=>p.url!==J.url)}:O})),_(S=>{var O;return!S||S._id!==H?S:{...S,documents:(O=S.documents)==null?void 0:O.filter(d=>d.url!==J.url)}}),ie.success("Document supprimé avec succès.")}catch(S){console.error("Erreur lors de la suppression du document:",S),ie.error("Échec de la suppression du document.")}};return o?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading infractions..."})}):c?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:c}),a.jsx("button",{onClick:W,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Infractions"}),a.jsxs("button",{onClick:()=>{_(null),h(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Nouvelle Infraction"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-[200px]",children:[a.jsx("label",{htmlFor:"search-infraction",className:"sr-only",children:"Rechercher une infraction"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Yn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-infraction",type:"text",placeholder:"Rechercher une infraction...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:f,onChange:H=>b(H.target.value)})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"start-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de début"}),a.jsx(Pe,{id:"start-date-filter",selected:v,onChange:H=>D(H),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"end-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de fin"}),a.jsx(Pe,{id:"end-date-filter",selected:g,onChange:H=>w(H),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Infraction"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[$.map(H=>{var J,S;return a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(y==null?void 0:y._id)===H._id?"bg-blue-50":""}`,onClick:()=>{j&&(y==null?void 0:y._id)!==H._id?confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")&&(_(H),L(!1),T(null),q([])):j||_(H)},children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:(J=H.vehicle)!=null&&J.imageUrl?a.jsx("img",{src:H.vehicle.imageUrl.startsWith("data:")?H.vehicle.imageUrl:`${X}/${H.vehicle.imageUrl.replace(/\\/g,"/")}`,alt:`${H.vehicle.brand||"N/A"} ${H.vehicle.model||"N/A"}`,className:"w-10 h-10 object-cover rounded-full"}):a.jsx(bt,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:((S=H.vehicle)==null?void 0:S.licensePlate)||"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:H.vehicle?`${H.vehicle.brand} ${H.vehicle.model}`:"N/A"})]})]})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.infractionNumber}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center",children:[a.jsx(jd,{size:14,className:"mr-1 text-gray-500"}),Am(H.infractionDate)]})]}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.customer?`${H.customer.prenomFr} ${H.customer.nomFr}`:"N/A"}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center",children:[a.jsx(VD,{size:14,className:"mr-1 text-gray-500"}),H.location||"N/A"]})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(gn,{onClick:O=>{O.stopPropagation(),_(H);const d=(H.documents||[]).map(p=>({name:p.name,url:p.url,type:p.type,size:p.size,isNew:!1}));T({...H,documents:d}),q([]),L(!0)},size:"md",className:"mr-3"}),a.jsx("button",{onClick:O=>{O.stopPropagation(),Q(H._id)},children:a.jsx(Rn,{size:18})})]})]},H._id)}),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Aucune infraction trouvée."})})]})]})})}),a.jsx("div",{className:"lg:col-span-1",children:y?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de l'infraction"}),j?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{confirm("Êtes-vous sûr de vouloir annuler les modifications ?")&&(L(!1),T(null),q([]))},className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:()=>{C&&ee(C,P)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:()=>{const H=(y.documents||[]).map(J=>({name:J.name,url:J.url,type:J.type,size:J.size,isNew:!1}));T({...y,documents:H}),q([]),L(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),j&&C?a.jsx("form",{id:"infraction-edit-form",onSubmit:H=>{H.preventDefault(),C&&ee(C,P)},children:a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",className:"w-full border rounded-lg p-2",value:((ve=C.vehicle)==null?void 0:ve._id)||"",onChange:H=>{const J=n.find(S=>S._id===H.target.value);T({...C,vehicle:J||null})},children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),n.map(H=>a.jsxs("option",{value:H._id,children:[H.licensePlate," - ",H.model]},H._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"infractionDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Infraction"}),a.jsx(Pe,{selected:C.infractionDate?new Date(C.infractionDate):null,onChange:H=>T({...C,infractionDate:H?H.toISOString().split("T")[0]:""}),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"timeInfraction",className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure Infraction"}),a.jsx(Pe,{selected:G(C.timeInfraction||""),onChange:H=>T({...C,timeInfraction:se(H)}),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Heure",dateFormat:"HH:mm",locale:"fr",className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fait à"}),a.jsxs("select",{name:"location",id:"location",className:"w-full border rounded-lg p-2",value:C.location||"",onChange:H=>T({...C,location:H.target.value}),children:[a.jsx("option",{value:"",children:"Sélectionner une ville"}),rj.map(H=>a.jsx("option",{value:H,children:H},H))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fait le"}),a.jsx(Pe,{selected:C.date?new Date(C.date):null,onChange:H=>T({...C,date:H?H.toISOString().split("T")[0]:""}),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{className:"p-4 border-t mt-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Informations Client"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"customer",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),a.jsxs("select",{name:"customer",id:"customer",className:"w-full border rounded-lg p-2",value:((U=C.customer)==null?void 0:U._id)||"",onChange:H=>{const J=s.find(S=>S._id===H.target.value);T({...C,customer:J||null})},children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),s.map(H=>a.jsx("option",{value:H._id,children:`${H.prenomFr} ${H.nomFr}`},H._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"cin",className:"block text-sm font-medium text-gray-700 mb-1",children:"CIN"}),a.jsx("input",{type:"text",name:"cin",id:"cin",className:"w-full border rounded-lg p-2",value:C.cin||"",onChange:H=>T({...C,cin:H.target.value}),readOnly:!!C.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"permis",className:"block text-sm font-medium text-gray-700 mb-1",children:"Permis"}),a.jsx("input",{type:"text",name:"permis",id:"permis",className:"w-full border rounded-lg p-2",value:C.permis||"",onChange:H=>T({...C,permis:H.target.value}),readOnly:!!C.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"passeport",className:"block text-sm font-medium text-gray-700 mb-1",children:"Passeport"}),a.jsx("input",{type:"text",name:"passeport",id:"passeport",className:"w-full border rounded-lg p-2",value:C.passeport||"",onChange:H=>T({...C,passeport:H.target.value}),readOnly:!!C.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"telephone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone"}),a.jsx("input",{type:"text",name:"telephone",id:"telephone",className:"w-full border rounded-lg p-2",value:C.telephone||"",onChange:H=>T({...C,telephone:H.target.value}),readOnly:!!C.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"telephone2",className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone 2"}),a.jsx("input",{type:"text",name:"telephone2",id:"telephone2",className:"w-full border rounded-lg p-2",value:C.telephone2||"",onChange:H=>T({...C,telephone2:H.target.value}),readOnly:!!C.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Client"}),a.jsxs("select",{name:"type",id:"type",className:"w-full border rounded-lg p-2",value:C.type||"particular",onChange:H=>T({...C,type:H.target.value}),disabled:!!C.customer,children:[a.jsx("option",{value:"particular",children:"Particulier"}),a.jsx("option",{value:"professional",children:"Professionnel"})]})]}),C.type==="professional"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"societe",className:"block text-sm font-medium text-gray-700 mb-1",children:"Société"}),a.jsx("input",{type:"text",name:"societe",id:"societe",className:"w-full border rounded-lg p-2",value:C.societe||"",onChange:H=>T({...C,societe:H.target.value}),readOnly:!!C.customer})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Pièces Jointes:"}),a.jsx(mt,{api_url:te,existingDocuments:C.documents||[],newFiles:P,onNewFilesChange:q,onRemoveExistingDocument:H=>ce(y._id,H)})]})]})}):a.jsxs("div",{className:"p-4 space-y-4",children:[y.vehicle&&typeof y.vehicle=="object"?a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[y.vehicle.imageUrl?a.jsx("img",{src:y.vehicle.imageUrl.startsWith("data:")?y.vehicle.imageUrl:`${X}/${y.vehicle.imageUrl.replace(/\\/g,"/").replace(/^\//,"")}`,alt:`${y.vehicle.brand||"N/A"} ${y.vehicle.model||"N/A"}`,className:"w-24 h-24 object-cover rounded-lg shadow"}):a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(bt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-lg",children:[y.vehicle.brand||"N/A"," ",y.vehicle.model||"N/A"]}),a.jsx("p",{className:"text-sm text-gray-600",children:y.vehicle.licensePlate||"N/A"})]})]})]}):a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(bt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg",children:"N/A"}),a.jsx("p",{className:"text-sm text-gray-600",children:"N/A"})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"N° Infraction"}),a.jsx("p",{className:"font-medium",children:y.infractionNumber||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date Infraction"}),a.jsx("p",{className:"font-medium",children:Am(y.infractionDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Heure Infraction"}),a.jsx("p",{className:"font-medium",children:y.timeInfraction||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Fait à"}),a.jsx("p",{className:"font-medium",children:y.location||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Fait le"}),a.jsx("p",{className:"font-medium",children:Am(y.date)||"-"})]}),a.jsxs("div",{className:"p-4 border-t mt-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Informations Client"}),y.customer?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-medium",children:`${y.customer.prenomFr||""} ${y.customer.nomFr||""}`.trim()||"N/A"}),a.jsxs("p",{className:"text-sm text-gray-500",children:["CIN: ",y.cin||"N/A"]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Permis: ",y.permis||"N/A"]}),y.passeport&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Passeport: ",y.passeport]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Téléphone: ",y.telephone||"N/A"]}),y.telephone2&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Téléphone 2: ",y.telephone2]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Type: ",y.type==="professional"?"Professionnel":"Particulier"]}),y.type==="professional"&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Société: ",y.societe]})]}):a.jsx("p",{className:"font-medium",children:"N/A"})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Pièces Jointes:"}),y.documents&&y.documents.length>0?a.jsx(mt,{api_url:te,existingDocuments:y.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:()=>Promise.resolve(),label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]})]})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(Ra,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune infraction sélectionnée"})]})})]}),m&&a.jsx(m3,{onSubmit:y?ee:K,onClose:()=>h(!1),initialData:y,vehicles:n,customers:s,onRemoveExistingDocument:ce})]})};kn("fr",Dn);const Uo=e=>typeof e=="string"&&e.trim().length===0,ga=e=>{switch(e){case"Pending":return"En attente";case"Completed":return"Terminée";case"Cancelled":return"Annulée";default:return e}},h3=({intervention:e,onClose:t,onEdit:n,onSave:r,onCancel:s,onDelete:i,onInputChange:o,onRemoveExistingDocument:l,editMode:c,editedIntervention:u,vehicles:m,API_URL:h,newAttachmentFiles:f,setNewAttachmentFiles:b})=>{var g;const v=w=>{var y;return((y=qu.find(_=>_.value===w))==null?void 0:y.label)||w},D=w=>w.toLocaleString("fr-FR",{style:"currency",currency:"MAD"}).replace("MAD","DH");return a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de l'intervention"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[c?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>r(f),className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"}),a.jsx("button",{onClick:s,className:"px-4 py-2 border rounded-lg text-sm",children:"Annuler"})]}):a.jsx(gn,{onClick:n,withText:!0,className:"mr-2"}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full",children:a.jsx(Pl,{size:24})})]})]}),a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Véhicule"}),c?a.jsxs("select",{className:"w-full border rounded-lg p-2",value:((g=u==null?void 0:u.vehicle)==null?void 0:g._id)||"",onChange:w=>o("vehicle",w.target.value),children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),m.map(w=>a.jsxs("option",{value:w._id,children:[w.licensePlate," - ",w.brand," ",w.model]},w._id))]}):e.vehicle?a.jsx("div",{className:"p-4 border-b",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[e.vehicle.imageUrl?a.jsx("img",{src:e.vehicle.imageUrl.startsWith("data:")?e.vehicle.imageUrl:`${h}/${e.vehicle.imageUrl.replace(/\\/g,"/").replace(/^\//,"")}`,alt:`${e.vehicle.brand||"N/A"} ${e.vehicle.model||"N/A"}`,className:"w-24 h-24 object-cover rounded-lg shadow"}):a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(bt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-lg",children:[e.vehicle.brand||"N/A"," ",e.vehicle.model||"N/A"]}),a.jsx("p",{className:"text-sm text-gray-600",children:e.vehicle.licensePlate||"N/A"})]})]})}):a.jsx("div",{className:"p-4 border-b",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(bt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg",children:"N/A"}),a.jsx("p",{className:"text-sm text-gray-600",children:"N/A"})]})]})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Intervention"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Type"}),c?a.jsx("select",{className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.type)||"",onChange:w=>o("type",w.target.value),children:qu.map(w=>a.jsx("option",{value:w.value,children:w.label},w.value))}):a.jsx("p",{className:"mt-1",children:v(e.type)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date"}),c?a.jsx(Pe,{selected:u!=null&&u.date?new Date(u.date):null,onChange:w=>o("date",w?w.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1",children:new Date(e.date).toLocaleDateString("fr-FR")})]})]}),e.type==="chaine"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Kilométrage actuel"}),c?a.jsx("input",{type:"number",className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.currentMileage)||"",onChange:w=>o("currentMileage",parseFloat(w.target.value))}):a.jsx("p",{className:"mt-1",children:e.currentMileage?`${e.currentMileage} km`:"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Prochaine Kilométrage"}),c?a.jsx("input",{type:"number",className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.nextMileage)||"",onChange:w=>o("nextMileage",parseFloat(w.target.value))}):a.jsx("p",{className:"mt-1",children:e.nextMileage?`${e.nextMileage} km`:"-"})]})]}),(e.type==="chaine"||e.type==="vidange")&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Kilométrage actuel"}),c?a.jsx("input",{type:"number",className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.currentMileage)||"",onChange:w=>o("currentMileage",parseFloat(w.target.value))}):a.jsx("p",{className:"mt-1",children:e.currentMileage?`${e.currentMileage} km`:"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Prochaine Kilométrage"}),c?a.jsx("input",{type:"number",className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.nextMileage)||"",onChange:w=>o("nextMileage",parseFloat(w.target.value))}):a.jsx("p",{className:"mt-1",children:e.nextMileage?`${e.nextMileage} km`:"-"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Détails Financiers"}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Coût"}),c?a.jsx("input",{type:"number",className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.cost)||0,onChange:w=>o("cost",parseFloat(w.target.value))}):a.jsx("p",{className:"mt-1",children:D(e.cost)})]})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Statut et Description"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Statut"}),c?a.jsxs("select",{className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.status)||"",onChange:w=>o("status",w.target.value),children:[a.jsx("option",{value:"Pending",children:ga("Pending")}),a.jsx("option",{value:"Completed",children:ga("Completed")}),a.jsx("option",{value:"Cancelled",children:ga("Cancelled")})]}):a.jsx("p",{className:"mt-1",children:ga(e.status)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Description"}),c?a.jsx("textarea",{className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.description)||"",onChange:w=>o("description",w.target.value),rows:3}):a.jsx("p",{className:"mt-1",children:e.description})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Observation"}),c?a.jsx("textarea",{className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.observation)||"",onChange:w=>o("observation",w.target.value),rows:2}):a.jsx("p",{className:"mt-1",children:e.observation||"-"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Documents"}),a.jsx(mt,{api_url:h,newFiles:f,onNewFilesChange:b,existingDocuments:c?(u==null?void 0:u.documents)||[]:e.documents||[],onRemoveExistingDocument:l,readOnly:!c,label:""})]})]})]})},qu=[{value:"lavage",label:"Lavage"},{value:"vidange",label:"Vidange"},{value:"chaine",label:"Chaîne"}],p3=({onSubmit:e,onClose:t,initialData:n=null,vehicles:r,API_URL:s,newAttachmentFiles:i,setNewAttachmentFiles:o})=>{const[l,c]=E.useState((n==null?void 0:n.vehicle)||null),[u,m]=E.useState((n==null?void 0:n.documents)||[]),[h,f]=E.useState(n!=null&&n.date?new Date(n.date):null),[b,v]=E.useState((n==null?void 0:n.type)||""),[D,g]=E.useState((n==null?void 0:n.currentMileage)||""),[w,y]=E.useState((n==null?void 0:n.nextMileage)||""),[_,j]=E.useState({});E.useEffect(()=>{n&&(g(n.currentMileage||""),y(n.nextMileage||""))},[n]);const L=P=>{const q=r.find(X=>X._id===P.target.value);c(q||null)},C=P=>{const{name:q,value:X}=P.target;if(["description","observation"].includes(q))Uo(X)?j(te=>({...te,[q]:"Ce champ ne peut pas contenir uniquement des espaces."})):j(te=>{const oe={...te};return delete oe[q],oe});else if(q==="cost"){const te=parseFloat(X);isNaN(te)||te<0?j(oe=>({...oe,[q]:"Le coût ne peut pas être négatif."})):j(oe=>{const fe={...oe};return delete fe[q],fe})}},T=P=>{P.preventDefault();const q=P.target,X=new FormData,te=q.description.value,oe=q.observation.value,fe=parseFloat(q.cost.value),G={};if(Uo(te)&&(G.description="La description ne peut pas contenir uniquement des espaces."),oe&&Uo(oe)&&(G.observation="L'observation ne peut pas contenir uniquement des espaces."),(isNaN(fe)||fe<0)&&(G.cost="Le coût ne peut pas être négatif."),j(G),Object.keys(G).length>0){ie.error("Veuillez corriger les erreurs de validation.");return}X.append("type",q.type.value),h&&X.append("date",h.toISOString().split("T")[0]),l&&X.append("vehicle",l._id),X.append("description",te),X.append("cost",String(fe)),X.append("status",q.status.value),X.append("observation",oe),D!==""&&X.append("currentMileage",String(D)),w!==""&&X.append("nextMileage",String(w)),i.forEach(se=>{X.append("documents",se)}),e(X)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sn,{onClick:t}),a.jsx("h2",{className:"text-xl font-bold mb-4",children:n?"Modifier l'intervention":"Ajouter une intervention"}),a.jsxs("form",{className:"space-y-6",onSubmit:T,children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations générales"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Type d'intervention*"}),a.jsxs("select",{name:"type",required:!0,className:"border rounded-lg p-2",value:b,onChange:P=>{v(P.target.value),g(""),y("")},children:[a.jsx("option",{value:"",children:"Sélectionner un type"}),qu.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Date d'intervention*"}),a.jsx(Pe,{selected:h,onChange:P=>f(P),name:"date",dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",required:!0,className:"border rounded-lg p-2"})]})]})]}),(b==="chaine"||b==="vidange")&&a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations Kilométrage"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(b==="chaine"||b==="vidange")&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kilométrage actuel (km)*"}),a.jsx("input",{name:"currentMileage",type:"number",required:!0,className:"w-full border rounded-lg p-2",value:D,onChange:P=>g(parseFloat(P.target.value))})]}),(b==="chaine"||b==="vidange")&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prochaine Kilométrage (km)*"}),a.jsx("input",{name:"nextMileage",type:"number",required:!0,className:"w-full border rounded-lg p-2",value:w,onChange:P=>y(parseFloat(P.target.value))})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Véhicule"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Sélectionner un véhicule*"}),a.jsxs("select",{name:"vehicle",required:!0,className:"border rounded-lg p-2 focus:border-blue-500 focus:ring focus:ring-blue-200",value:(l==null?void 0:l._id)||"",onChange:L,children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),r.filter(P=>P.statut==="En parc").map(P=>a.jsxs("option",{value:P._id,children:[P.licensePlate," - ",P.brand," ",P.model]},P._id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Détails du véhicule"}),a.jsxs("div",{className:`w-full border rounded-lg p-3 ${l?"bg-blue-50 border-blue-200":"bg-gray-100"} flex items-center`,children:[a.jsx(bt,{size:18,className:`${l?"text-blue-500":"text-gray-500"} mr-2`}),l?a.jsxs("div",{children:[a.jsxs("span",{className:"font-medium",children:[l.brand," ",l.model]}),a.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",l.licensePlate,")"]}),a.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Kilométrage actuel: ",l.mileage," km"]})]}):a.jsx("span",{className:"text-gray-500",children:"Veuillez sélectionner un véhicule"})]})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Détails de l'intervention"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description de l'intervention*"}),a.jsx("textarea",{name:"description",required:!0,rows:3,className:`w-full border rounded-lg p-2 ${_.description?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.description,onChange:C}),_.description&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.description})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coût de l'intervention (DH)*"}),a.jsx("input",{name:"cost",type:"number",step:"0.01",required:!0,className:`w-full border rounded-lg p-2 ${_.cost?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.cost,onChange:C}),_.cost&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.cost})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut*"}),a.jsxs("select",{name:"status",required:!0,className:"w-full border rounded-lg p-2",defaultValue:(n==null?void 0:n.status)||"Pending",children:[a.jsx("option",{value:"Pending",children:ga("Pending")}),a.jsx("option",{value:"Completed",children:ga("Completed")}),a.jsx("option",{value:"Cancelled",children:ga("Cancelled")})]})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observation"}),a.jsx("textarea",{name:"observation",rows:2,className:`w-full border rounded-lg p-2 ${_.observation?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.observation,onChange:C}),_.observation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:_.observation})]})]})]}),a.jsxs("section",{className:"border-b pb-4 mb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ki,{size:18,className:"mr-2 text-gray-500"}),"Documents"]})}),a.jsx(mt,{api_url:s,newFiles:i,onNewFilesChange:o,existingDocuments:u,onRemoveExistingDocument:async()=>{},readOnly:!1,label:""})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:n?"Mettre à jour":"Enregistrer"})]})]})]})})},g3=()=>{const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState(!1),[o,l]=E.useState(""),[c,u]=E.useState("all"),[m,h]=E.useState(null),[f,b]=E.useState(null),[v,D]=E.useState(null),[g,w]=E.useState(!1),[y,_]=E.useState(null),[j,L]=E.useState([]),[C,T]=E.useState(!0),[P,q]=E.useState(null),X="http://localhost:5000",te=`${X}/api/interventions`,oe=`${X}/api/vehicles`,fe=E.useCallback(async()=>{T(!0),q(null);try{const H=await we.get(oe);r(H.data);const J=await we.get(te);t(J.data),ie.success("Data loaded successfully!")}catch(H){console.error("Error fetching data:",H),q("Failed to load data."),ie.error("Failed to load data.")}finally{T(!1)}},[]);E.useEffect(()=>{fe()},[fe]);const G=H=>{var J;return((J=qu.find(S=>S.value===H))==null?void 0:J.label)||H},se=H=>{switch(H){case"Pending":return"En attente";case"Completed":return"Terminée";case"Cancelled":return"Annulée";default:return H}},W=H=>H.toLocaleString("fr-FR",{style:"currency",currency:"MAD"}).replace("MAD","DH"),$=async H=>{try{const J=await we.post(te,H);i(!1),ie.success("Intervention added successfully!"),fe(),L([])}catch(J){console.error("Error adding intervention:",J),ie.error("Failed to add intervention.")}},K=()=>{v&&(_({...v}),w(!0))},ee=async H=>{if(!y)return;const J={};if(Uo(y.description)&&(J.description="La description ne peut pas contenir uniquement des espaces."),y.observation&&Uo(y.observation)&&(J.observation="L'observation ne peut pas contenir uniquement des espaces."),y.cost<0&&(J.cost="Le coût ne peut pas être négatif."),Object.keys(J).length>0){Object.values(J).forEach(S=>ie.error(S));return}try{const S=new FormData,O={...y};delete O.documents,Object.keys(O).forEach(k=>{const x=O[k];k==="vehicle"&&typeof x=="object"&&x!==null?S.append("vehicle",x._id):k==="date"&&x?S.append("date",new Date(x).toISOString().split("T")[0]):x!=null&&S.append(k,String(x))}),y.documents&&y.documents.forEach(k=>{k.url&&!k.url.startsWith("blob:")&&S.append("existingDocuments",k.url)}),H.forEach(k=>{S.append("documents",k)});const p=(await we.put(`${te}/${y._id}`,S,{headers:{"Content-Type":"multipart/form-data"}})).data,N={...p,vehicle:p.vehicle};t(e.map(k=>k._id===N._id?N:k)),D(N),w(!1),_(null),L([]),ie.success("Intervention updated successfully!")}catch(S){console.error("Error saving intervention edit:",S),ie.error("Failed to save changes.")}},Q=()=>{w(!1),_(null)},ce=(H,J)=>{if(y){const S={...y};if(H==="vehicle"){const O=n.find(d=>d._id===J)||null;S.vehicle=O}else S[H]=J;_(S)}},ve=async H=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette intervention ?"))try{await we.delete(`${te}/${H}`),t(e.filter(J=>J._id!==H)),(v==null?void 0:v._id)===H&&D(null),ie.success("Intervention deleted successfully!")}catch(J){console.error("Error deleting intervention:",J),ie.error("Failed to delete intervention.")}},U=e.filter(H=>{const S=(H.vehicle?`${H.vehicle.brand} ${H.vehicle.model} (${H.vehicle.licensePlate})`:"").toLowerCase().includes(o.toLowerCase())||G(H.type).toLowerCase().includes(o.toLowerCase())||H.description.toLowerCase().includes(o.toLowerCase()),O=c==="all"||H.status===c,d=new Date(H.date),p=m?d>=m:!0,N=f?d<=f:!0;return S&&O&&p&&N});return C?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading interventions..."})}):P?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:P}),a.jsx("button",{onClick:fe,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Interventions"}),a.jsxs("button",{onClick:()=>{D(null),i(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Nouvelle Intervention"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-[200px]",children:[a.jsx("label",{htmlFor:"search-intervention",className:"sr-only",children:"Rechercher une intervention"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Yn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-intervention",type:"text",placeholder:"Rechercher une intervention...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:o,onChange:H=>l(H.target.value)})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"status-filter",className:"sr-only",children:"Filtrer par statut"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Cw,{size:18,className:"text-gray-400"})}),a.jsxs("select",{id:"status-filter",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:c,onChange:H=>u(H.target.value),children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"Pending",children:se("Pending")}),a.jsx("option",{value:"Completed",children:se("Completed")}),a.jsx("option",{value:"Cancelled",children:se("Cancelled")})]})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"start-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de début"}),a.jsx(Pe,{id:"start-date-filter",selected:m,onChange:H=>h(H),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"end-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de fin"}),a.jsx(Pe,{id:"end-date-filter",selected:f,onChange:H=>b(H),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coût"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[U.map(H=>{var J,S;return a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(v==null?void 0:v._id)===H._id?"bg-blue-50":""}`,onClick:()=>D(H),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:(J=H.vehicle)!=null&&J.imageUrl?a.jsx("img",{src:H.vehicle.imageUrl.startsWith("data:")?H.vehicle.imageUrl:`${X}/${H.vehicle.imageUrl.replace(/\\/g,"/")}`,alt:`${H.vehicle.brand||"N/A"} ${H.vehicle.model||"N/A"}`,className:"w-10 h-10 object-cover rounded-full"}):a.jsx(bt,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:((S=H.vehicle)==null?void 0:S.licensePlate)||"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:H.vehicle?`${H.vehicle.brand} ${H.vehicle.model}`:"N/A"})]})]})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:G(H.type)}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center",children:[a.jsx(jd,{size:14,className:"mr-1 text-gray-500"}),new Date(H.date).toLocaleDateString("fr-FR")]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:W(H.cost)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${H.status==="Completed"?"bg-green-100 text-green-800":H.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:se(H.status)})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(gn,{onClick:O=>{O.stopPropagation(),D(H),_({...H}),w(!0)},size:"md",className:"mr-3"}),a.jsx("button",{onClick:O=>{O.stopPropagation(),ve(H._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Rn,{size:18})})]})]},H._id)}),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Aucune intervention trouvée."})})]})]})})}),a.jsx("div",{className:"lg:col-span-1",children:v?a.jsx(h3,{intervention:v,onClose:()=>D(null),onEdit:K,onSave:ee,onCancel:Q,onDelete:ve,onInputChange:ce,onRemoveExistingDocument:async H=>{var J;if(y){const S=((J=y.documents)==null?void 0:J.filter(O=>O.url!==H.url))||[];_({...y,documents:S})}},editMode:g,editedIntervention:y,vehicles:n,API_URL:X,newAttachmentFiles:j,setNewAttachmentFiles:L}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(Ra,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune intervention sélectionnée"})]})})]}),s&&a.jsx(p3,{onSubmit:$,onClose:()=>i(!1),initialData:v,vehicles:n,API_URL:X,newAttachmentFiles:j,setNewAttachmentFiles:L})]})};kn("fr",Dn);const wv=e=>typeof e=="string"&&e.trim().length===0,sj=["Casablanca","Rabat","Marrakech","Fès","Tanger","Agadir","Meknès","Oujda","Kénitra","Tétouan","Safi","El Jadida","Mohammedia","Béni Mellal","Nador","Taza","Khémisset","Settat","Berrechid","Khénifra","Larache","Guelmim","Khouribga","Ouarzazate","Essaouira","Dakhla","Laâyoune"],zp=[{value:"expertise",label:"Expertise"},{value:"en_cours",label:"En cours de réparation"},{value:"repare",label:"Réparé"}],Nv=e=>{var t;return((t=zp.find(n=>n.value===e))==null?void 0:t.label)||e},Ku=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR")},ko="http://localhost:5000",x3=({onSubmit:e,onClose:t,initialData:n=null,contracts:r,newAttachmentFiles:s,setNewAttachmentFiles:i,handleRemoveExistingDocument:o})=>{var w,y,_,j,L;const[l,c]=E.useState(()=>n?{...n,dateAccident:n.dateAccident?new Date(n.dateAccident).toISOString().split("T")[0]:"",dateEntreeGarage:n.dateEntreeGarage?new Date(n.dateEntreeGarage).toISOString().split("T")[0]:void 0,dateReparation:n.dateReparation?new Date(n.dateReparation).toISOString().split("T")[0]:void 0,documents:n.documents||[]}:{contrat:"",numeroContrat:"",dateSortie:"",client:"",clientNom:"",dateRetour:"",matricule:"",vehicule:"",dateAccident:new Date().toISOString().split("T")[0],heureAccident:"",lieuAccident:"",description:"",etat:"expertise",piecesJointes:[],documents:[]}),[u,m]=E.useState(n&&r.find(C=>C._id===n.contrat)||null),[h,f]=E.useState({});E.useEffect(()=>{if(u){const C=u.client,T=u.vehicle;c(P=>({...P,contrat:u._id,numeroContrat:u.contractNumber,dateSortie:u.departureDate,dateRetour:u.returnDate,client:(C==null?void 0:C._id)||"",clientNom:C?`${C.prenomFr} ${C.nomFr}`:"",matricule:(T==null?void 0:T.licensePlate)||"",vehicule:T?T._id:""}))}},[u]);const b=C=>{const T=C.target.value,P=r.find(q=>q._id===T);m(P||null)},v=C=>{const{name:T,value:P}=C.target;T==="description"&&(P&&wv(P)?f(q=>({...q,[T]:"La description ne peut pas contenir uniquement des espaces."})):f(q=>{const X={...q};return delete X[T],X})),c(q=>({...q,[T]:P}))},D=(C,T)=>{c(P=>({...P,[T]:C?C.toISOString().split("T")[0]:""}))},g=C=>{var q;C.preventDefault();const T={};if(l.description&&wv(l.description)&&(T.description="La description ne peut pas contenir uniquement des espaces."),f(T),Object.keys(T).length>0){ie.error("Veuillez corriger les erreurs de validation.");return}const P=new FormData;P.append("contrat",((q=l.contrat)==null?void 0:q._id)||l.contrat||""),P.append("dateAccident",l.dateAccident||""),P.append("heureAccident",l.heureAccident||""),P.append("lieuAccident",l.lieuAccident||""),P.append("description",l.description||""),P.append("etat",l.etat||"expertise"),l.dateEntreeGarage&&P.append("dateEntreeGarage",l.dateEntreeGarage),l.dateReparation&&P.append("dateReparation",l.dateReparation),l.montantReparation&&P.append("montantReparation",l.montantReparation.toString()),l.fraisClient&&P.append("fraisClient",l.fraisClient.toString()),l.indemniteAssurance&&P.append("indemniteAssurance",l.indemniteAssurance.toString()),l.avance&&P.append("avance",l.avance.toString()),s.length>0&&s.forEach(X=>{P.append("attachments",X)}),e(P)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sn,{onClick:t}),a.jsxs("h2",{className:"text-xl font-bold mb-4",children:[n?"Modifier":"Nouvel"," Accident"]}),a.jsxs("form",{onSubmit:g,className:"space-y-6",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations sur le Contrat"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"contratId",className:"block text-sm font-medium text-gray-700 mb-1",children:"N° Contrat"}),a.jsxs("select",{id:"contratId",name:"contrat",value:(u==null?void 0:u._id)||"",onChange:b,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un contrat"}),r.map(C=>a.jsx("option",{value:C._id,children:C.contractNumber},C._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),a.jsx("input",{type:"text",value:u?`${(w=u.client)==null?void 0:w.prenomFr} ${(y=u.client)==null?void 0:y.nomFr}`:"",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100 sm:text-sm",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsx("input",{type:"text",value:u?`${(_=u.vehicle)==null?void 0:_.brand} ${(j=u.vehicle)==null?void 0:j.model} (${(L=u.vehicle)==null?void 0:L.licensePlate})`:"",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100 sm:text-sm",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de sortie"}),a.jsx("input",{type:"text",value:u?Ku(u.departureDate):"",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100 sm:text-sm",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de retour"}),a.jsx("input",{type:"text",value:u?Ku(u.returnDate):"",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100 sm:text-sm",readOnly:!0})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Détails de l'Accident"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"dateAccident",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),a.jsx(Pe,{id:"dateAccident",selected:l.dateAccident?new Date(l.dateAccident):null,onChange:C=>D(C,"dateAccident"),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"heureAccident",className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure"}),a.jsx("input",{type:"time",id:"heureAccident",name:"heureAccident",value:l.heureAccident||"",onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"lieuAccident",className:"block text-sm font-medium text-gray-700 mb-1",children:"Lieu"}),a.jsxs("select",{id:"lieuAccident",name:"lieuAccident",value:l.lieuAccident||"",onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner une ville"}),sj.map(C=>a.jsx("option",{value:C,children:C},C))]})]}),a.jsxs("div",{className:"md:col-span-3",children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",value:l.description||"",onChange:v,rows:3,className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 ${h.description?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),h.description&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.description})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"etat",className:"block text-sm font-medium text-gray-700 mb-1",children:"État"}),a.jsx("select",{id:"etat",name:"etat",value:l.etat||"expertise",onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3",children:zp.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]})]})]}),a.jsx(mt,{api_url:ko,existingDocuments:l.documents||[],newFiles:s,onNewFilesChange:i,onRemoveExistingDocument:o}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:n?"Mettre à jour":"Ajouter"})]})]})]})})},v3=()=>{const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,l]=E.useState(null),[c,u]=E.useState(""),[m,h]=E.useState(!1),[f,b]=E.useState(null),[v,D]=E.useState(!1),[g,w]=E.useState(null),[y,_]=E.useState([]),j=`${ko}/api/accidents`,L=`${ko}/api/contracts`,C=E.useCallback(async()=>{i(!0),l(null);try{const[G,se]=await Promise.all([we.get(j),we.get(L)]);t(G.data),r(se.data)}catch(G){console.error("Error fetching data:",G),l("Failed to load data."),ie.error("Failed to load data.")}finally{i(!1)}},[]);E.useEffect(()=>{C()},[C]);const T=e.filter(G=>(G.numeroContrat||"").toLowerCase().includes(c.toLowerCase())||(G.clientNom||"").toLowerCase().includes(c.toLowerCase())||(G.matricule||"").toLowerCase().includes(c.toLowerCase())||(G.lieuAccident||"").toLowerCase().includes(c.toLowerCase())),P=async G=>{try{const se=await we.post(j,G,{headers:{"Content-Type":"multipart/form-data"}});t([...e,se.data]),h(!1),ie.success("Accident ajouté avec succès."),_([])}catch(se){console.error("Error adding accident:",se),ie.error("Échec de l'ajout de l'accident.")}},q=async()=>{var W;if(!g)return;const G=new FormData;G.append("contrat",typeof g.contrat=="object"?g.contrat._id:g.contrat||""),G.append("dateAccident",g.dateAccident||""),G.append("heureAccident",g.heureAccident||""),G.append("lieuAccident",g.lieuAccident||""),G.append("description",g.description||""),G.append("etat",g.etat||"expertise"),g.dateEntreeGarage&&G.append("dateEntreeGarage",g.dateEntreeGarage),g.dateReparation&&G.append("dateReparation",g.dateReparation),g.montantReparation&&G.append("montantReparation",g.montantReparation.toString()),g.fraisClient&&G.append("fraisClient",g.fraisClient.toString()),g.indemniteAssurance&&G.append("indemniteAssurance",g.indemniteAssurance.toString()),g.avance&&G.append("avance",g.avance.toString());const se=((W=g.documents)==null?void 0:W.filter($=>!$.isNew))||[];G.append("existingDocuments",JSON.stringify(se)),y.length>0&&y.forEach($=>{G.append("attachments",$)});try{const K=(await we.put(`${j}/${g._id}`,G,{headers:{"Content-Type":"multipart/form-data"}})).data;t(e.map(ee=>ee._id===K._id?K:ee)),b(K),D(!1),ie.success("Accident mis à jour avec succès."),_([])}catch($){console.error("Error updating accident:",$),ie.error("Échec de la mise à jour de l'accident.")}},X=async G=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cet accident ?"))try{await we.delete(`${j}/${G}`),t(e.filter(se=>se._id!==G)),(f==null?void 0:f._id)===G&&b(null),ie.success("Accident supprimé avec succès.")}catch(se){console.error("Error deleting accident:",se),ie.error("Échec de la suppression de l'accident.")}},te=async G=>{if(f)try{await we.delete(`${j}/${f._id}/documents`,{data:{documentUrl:G.url}});const se=W=>{var $,K;return W?{...W,documents:($=W.documents)==null?void 0:$.filter(ee=>ee.url!==G.url),piecesJointes:(K=W.piecesJointes)==null?void 0:K.filter(ee=>ee!==G.url)}:null};b(se),v&&w(se),ie.success("Document supprimé avec succès.")}catch(se){console.error("Erreur lors de la suppression du document:",se),ie.error("Échec de la suppression du document.")}},oe=()=>{if(f){const G=(f.documents||[]).map(se=>({...se,isNew:!1}));w({...f,documents:G}),_([]),D(!0)}},fe=G=>{v&&(f==null?void 0:f._id)!==G._id?confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")&&(b(G),D(!1),w(null),_([])):v||b(G)};return s?a.jsx("p",{children:"Loading..."}):o?a.jsx("p",{children:o}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des Accidents"}),a.jsxs("button",{onClick:()=>{b(null),w(null),h(!0),_([])},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Nouvel Accident"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"relative",children:[a.jsx(Yn,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Rechercher un accident...",className:"pl-10 w-full border-gray-300 rounded-md",value:c,onChange:G=>u(G.target.value)})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contrat"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Véhicule"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date Accident"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"État"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(G=>a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(f==null?void 0:f._id)===G._id?v?"bg-blue-100":"bg-blue-50":""}`,onClick:()=>fe(G),children:[a.jsx("td",{className:"px-6 py-4",children:G.numeroContrat}),a.jsx("td",{className:"px-6 py-4",children:G.clientNom}),a.jsx("td",{className:"px-6 py-4",children:G.matricule}),a.jsx("td",{className:"px-6 py-4",children:Ku(G.dateAccident)}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${G.etat==="expertise"?"bg-yellow-100 text-yellow-800":G.etat==="en_cours"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:Nv(G.etat)})}),a.jsxs("td",{className:"px-6 py-4 text-right",children:[a.jsx(gn,{onClick:se=>{se.stopPropagation(),b(G),oe()},size:"md",className:"mr-3"}),a.jsx("button",{onClick:se=>{se.stopPropagation(),X(G._id)},children:a.jsx(Rn,{size:18})})]})]},G._id))})]})})}),a.jsx("div",{className:"lg:col-span-1",children:f?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de l'accident"}),v?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{confirm("Êtes-vous sûr de vouloir annuler les modifications ?")&&(D(!1),w(null),_([]))},className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:q,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:oe,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Contrat"}),v&&g?a.jsxs("select",{value:typeof g.contrat=="object"?g.contrat._id:g.contrat,onChange:G=>{const se=n.find(W=>W._id===G.target.value);if(se){const W=se.client,$=se.vehicle;w(K=>K?{...K,contrat:se,numeroContrat:se.contractNumber,client:(W==null?void 0:W._id)||"",clientNom:W?`${W.prenomFr} ${W.nomFr}`:"",vehicule:($==null?void 0:$._id)||"",matricule:($==null?void 0:$.licensePlate)||""}:null)}},className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"",children:"Sélectionner un contrat"}),n.map(G=>a.jsx("option",{value:G._id,children:G.contractNumber},G._id))]}):a.jsx("p",{className:"font-medium",children:f.numeroContrat})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Client"}),a.jsx("p",{className:"font-medium",children:f.clientNom})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Véhicule"}),a.jsx("p",{className:"font-medium",children:f.matricule})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de l'accident"}),v&&g?a.jsx(Pe,{selected:g.dateAccident?new Date(g.dateAccident):null,onChange:G=>w(se=>se?{...se,dateAccident:G?G.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:Ku(f.dateAccident)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Heure de l'accident"}),v&&g?a.jsx("input",{type:"time",value:g.heureAccident||"",onChange:G=>w(se=>se?{...se,heureAccident:G.target.value}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:f.heureAccident})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Lieu de l'accident"}),v&&g?a.jsxs("select",{value:g.lieuAccident||"",onChange:G=>w(se=>se?{...se,lieuAccident:G.target.value}:null),className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"",children:"Sélectionner une ville"}),sj.map(G=>a.jsx("option",{value:G,children:G},G))]}):a.jsx("p",{className:"font-medium",children:f.lieuAccident})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Description"}),v&&g?a.jsx("textarea",{value:g.description||"",onChange:G=>w(se=>se?{...se,description:G.target.value}:null),rows:3,className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:f.description||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"État"}),v&&g?a.jsx("select",{value:g.etat||"expertise",onChange:G=>w(se=>se?{...se,etat:G.target.value}:null),className:"w-full border rounded-lg p-2 mt-1",children:zp.map(G=>a.jsx("option",{value:G.value,children:G.label},G.value))}):a.jsx("p",{className:"font-medium",children:Nv(f.etat)})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Documents Associés:"}),v&&g?a.jsx(mt,{api_url:ko,existingDocuments:g.documents||[],newFiles:y,onNewFilesChange:_,onRemoveExistingDocument:te}):f!=null&&f.documents&&f.documents.length>0?a.jsx(mt,{api_url:ko,existingDocuments:f.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:te,label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]})]})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(bt,{size:64,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucun accident sélectionné"})]})})]}),m&&a.jsx(x3,{onSubmit:P,onClose:()=>{h(!1),w(null)},initialData:g,contracts:n.filter(G=>G.client&&G.vehicle),newAttachmentFiles:y,setNewAttachmentFiles:_,handleRemoveExistingDocument:te})]})};kn("fr",Dn);const jv=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},Kc=e=>typeof e=="string"&&e.trim().length===0,Qu=[{value:1,label:"Janvier"},{value:2,label:"Février"},{value:3,label:"Mars"},{value:4,label:"Avril"},{value:5,label:"Mai"},{value:6,label:"Juin"},{value:7,label:"Juillet"},{value:8,label:"Août"},{value:9,label:"Septembre"},{value:10,label:"Octobre"},{value:11,label:"Novembre"},{value:12,label:"Décembre"}],Lm=e=>{var t;return((t=Qu.find(n=>n.value===e))==null?void 0:t.label)||""},ia="http://localhost:5000",y3=()=>{var ce,ve,U,H;const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,l]=E.useState(null),[c,u]=E.useState(""),[m,h]=E.useState(""),[f,b]=E.useState(""),[v,D]=E.useState(!1),[g,w]=E.useState(null),[y,_]=E.useState(!1),[j,L]=E.useState(null),[C,T]=E.useState([]),[P,q]=E.useState({}),X=`${ia}/api/traites`,te=`${ia}/api/vehicles`,oe=E.useCallback(async()=>{i(!0),l(null);try{const[J,S]=await Promise.all([we.get(X),we.get(te)]),O=J.data.map(d=>{const p=S.data.find(N=>N._id===d.vehicle);return{...d,vehicle:p||d.vehicle}});t(O),r(S.data)}catch(J){console.error("Error fetching data:",J),l("Failed to load data."),ie.error("Failed to load data.")}finally{i(!1)}},[]);E.useEffect(()=>{oe()},[oe]);const fe=e.filter(J=>{var p,N;const S=typeof J.vehicle=="object"&&((p=J.vehicle)==null?void 0:p.model)&&J.vehicle.model.toLowerCase().includes(c.toLowerCase())||typeof J.vehicle=="object"&&((N=J.vehicle)==null?void 0:N.licensePlate)&&J.vehicle.licensePlate.toLowerCase().includes(c.toLowerCase())||Lm(J.mois).toLowerCase().includes(c.toLowerCase())||J.annee.toString().includes(c.toLowerCase())||J.montant.toString().includes(c.toLowerCase()),O=m===""||J.mois===m,d=f===""||J.annee===f;return S&&O&&d}),G=async J=>{const S=new FormData;for(const O in J)if(Object.prototype.hasOwnProperty.call(J,O)){const d=J[O];O==="vehicle"&&d?S.append("vehicle",typeof d=="string"?d:d._id):O!=="_id"&&O!=="documents"&&d!==null&&d!==void 0&&S.append(O,d)}C.length>0&&C.forEach(O=>{S.append("documents",O)});try{const d=(await we.post(X,S,{headers:{"Content-Type":"multipart/form-data"}})).data,p=n.find(k=>k._id===d.vehicle),N={...d,vehicle:p||d.vehicle};t([...e,N]),D(!1),ie.success("Traite added successfully."),T([])}catch(O){console.error("Error adding traite:",O),ie.error("Failed to add traite.")}},se=async J=>{var N;if(!g||!j)return;const S=[{name:"Référence",value:j.reference,required:!1},{name:"Notes",value:j.notes,required:!1}],O={};for(const k of S)k.value&&Kc(k.value)&&(O[k.name.toLowerCase()]=`${k.name} ne peut pas contenir uniquement des espaces.`);if(j.montant!==void 0&&j.montant<1&&(O.montant="Montant (DH) ne peut pas être inférieur à 1."),q(O),Object.keys(O).length>0){ie.error("Veuillez corriger les erreurs de validation.");return}const d=new FormData;for(const k in J)if(Object.prototype.hasOwnProperty.call(J,k)){const x=J[k];k==="vehicle"&&x?d.append("vehicle",typeof x=="string"?x:x._id):k!=="_id"&&k!=="documents"&&x!==null&&x!==void 0&&d.append(k,x)}const p=((N=j==null?void 0:j.documents)==null?void 0:N.filter(k=>!k.isNew))||[];d.append("existingDocuments",JSON.stringify(p)),C.length>0&&C.forEach(k=>{d.append("documents",k)});try{const x=(await we.put(`${X}/${g._id}`,d,{headers:{"Content-Type":"multipart/form-data"}})).data,M=n.find(A=>A._id===x.vehicle),F={...x,vehicle:M||x.vehicle};t(e.map(A=>A._id===F._id?F:A)),w(F),_(!1),ie.success("Traite updated successfully."),T([])}catch(k){console.error("Error updating traite:",k),ie.error("Failed to update traite.")}},[W,$]=E.useState(!1),K=J=>{w(e.find(S=>S._id===J)||null),$(!0)},ee=async()=>{if(g)try{await we.delete(`${X}/${g._id}`),t(e.filter(J=>J._id!==g._id)),w(null),$(!1),ie.success("Traite deleted successfully.")}catch(J){console.error("Error deleting traite:",J),ie.error("Failed to delete traite.")}},Q=async J=>{if(g)try{await we.delete(`${X}/${g._id}/documents`,{data:{documentName:J.name}}),w(S=>{var O;return S?{...S,documents:(O=S.documents)==null?void 0:O.filter(d=>d.url!==J.url)}:null}),ie.success("Document supprimé avec succès.")}catch(S){console.error("Erreur lors de la suppression du document:",S),ie.error("Échec de la suppression du document.")}};return s?a.jsx("p",{children:"Loading..."}):o?a.jsx("p",{children:o}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Traites"}),a.jsxs("button",{onClick:()=>{w(null),D(!0),T([])},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(pn,{size:16,className:"mr-2"}),"Nouvelle Traite"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-[200px]",children:[a.jsx("label",{htmlFor:"search-traite",className:"sr-only",children:"Rechercher une traite"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Yn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-traite",type:"text",placeholder:"Rechercher une traite...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:c,onChange:J=>u(J.target.value)})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"month-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Mois"}),a.jsxs("select",{id:"month-filter",className:"px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:m,onChange:J=>h(J.target.value===""?"":Number(J.target.value)),children:[a.jsx("option",{value:"",children:"Tous les mois"}),Qu.map(J=>a.jsx("option",{value:J.value,children:J.label},J.value))]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"year-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Année"}),a.jsxs("select",{id:"year-filter",className:"px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:f,onChange:J=>b(J.target.value===""?"":Number(J.target.value)),children:[a.jsx("option",{value:"",children:"Toutes les années"}),Array.from({length:10},(J,S)=>new Date().getFullYear()-5+S).map(J=>a.jsx("option",{value:J,children:J},J))]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Véhicule"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mois/Année"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date Paiement"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:fe.map(J=>{var S,O,d,p;return a.jsxs("tr",{onClick:()=>{var x;const N=typeof J.vehicle=="string"?J.vehicle:(x=J.vehicle)==null?void 0:x._id,k=n.find(M=>M._id===N);w({...J,vehicle:k||J.vehicle})},className:`hover:bg-gray-50 cursor-pointer ${(g==null?void 0:g._id)===J._id?"bg-blue-50":""}`,children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:typeof J.vehicle=="object"&&((S=J.vehicle)!=null&&S.imageUrl)?a.jsx("img",{src:J.vehicle.imageUrl.startsWith("data:")?J.vehicle.imageUrl:`${ia}/${J.vehicle.imageUrl.replace(/\\/g,"/")}`,alt:`${J.vehicle.brand||"N/A"} ${J.vehicle.model||"N/A"}`,className:"w-10 h-10 object-cover rounded-full"}):a.jsx(bt,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[typeof J.vehicle=="object"&&((O=J.vehicle)!=null&&O.brand)?J.vehicle.brand:"N/A"," ",typeof J.vehicle=="object"&&((d=J.vehicle)!=null&&d.model)?J.vehicle.model:"N/A"]}),a.jsx("div",{className:"text-xs text-gray-500",children:typeof J.vehicle=="object"&&((p=J.vehicle)!=null&&p.licensePlate)?J.vehicle.licensePlate:"N/A"})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"text-sm",children:[Lm(J.mois)," ",J.annee]})}),a.jsxs("td",{className:"px-6 py-4",children:[J.montant.toLocaleString("fr-FR")," DH"]}),a.jsx("td",{className:"px-6 py-4",children:jv(J.datePaiement)}),a.jsxs("td",{className:"px-6 py-4 text-right",children:[a.jsx(gn,{onClick:N=>{N.stopPropagation(),w(J),_(!0);const k=(J.documents||[]).map(M=>({name:M.name,url:M.url,type:"",size:0,isNew:!1})),x=typeof J.vehicle=="object"&&J.vehicle!==null?J.vehicle._id:J.vehicle;L({...J,vehicle:x,documents:k}),T([])},size:"md",className:"mr-3"}),a.jsx("button",{onClick:N=>{N.stopPropagation(),K(J._id)},children:a.jsx(Rn,{size:18})})]})]},J._id)})})]})})}),a.jsx("div",{className:"lg:col-span-1",children:g?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de la traite"}),y?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{_(!1),q({})},className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"submit",form:"traite-edit-form",className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:()=>{_(!0);const J=(g.documents||[]).map(O=>({name:O.name,url:O.url,type:"",size:0,isNew:!1})),S=typeof g.vehicle=="object"&&g.vehicle!==null?g.vehicle._id:g.vehicle;L({...g,vehicle:S,documents:J}),T([]),q({})},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsxs("form",{id:"traite-edit-form",onSubmit:J=>{J.preventDefault(),se(j)},className:"p-4 space-y-4",children:[y&&j?a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",value:typeof j.vehicle=="string"?j.vehicle:((ce=j.vehicle)==null?void 0:ce._id)||"",onChange:J=>L({...j,vehicle:J.target.value}),className:"w-full border rounded-lg p-2 mt-1",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),n.map(J=>a.jsxs("option",{value:J._id,children:[J.licensePlate," - ",J.model]},J._id))]})]}):g.vehicle&&typeof g.vehicle=="object"?a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[g.vehicle.imageUrl?a.jsx("img",{src:g.vehicle.imageUrl.startsWith("data:")?g.vehicle.imageUrl:`${ia}/${g.vehicle.imageUrl.replace(/\\/g,"/").replace(/^\//,"")}`,alt:`${g.vehicle.brand||"N/A"} ${g.vehicle.model||"N/A"}`,className:"w-24 h-24 object-cover rounded-lg shadow"}):a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(bt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-lg",children:[typeof g.vehicle=="object"&&((ve=g.vehicle)==null?void 0:ve.brand)||"N/A"," ",typeof g.vehicle=="object"&&((U=g.vehicle)==null?void 0:U.model)||"N/A"]}),a.jsx("p",{className:"text-sm text-gray-600",children:typeof g.vehicle=="object"&&((H=g.vehicle)==null?void 0:H.licensePlate)||"N/A"})]})]})]}):a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(bt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg",children:"N/A"}),a.jsx("p",{className:"text-sm text-gray-600",children:"N/A"})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Mois/Année"}),y&&j?a.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[a.jsx("select",{id:"mois",name:"mois",className:"w-full border rounded-lg p-2",value:j.mois,onChange:J=>L({...j,mois:Number(J.target.value)}),children:Qu.map(J=>a.jsx("option",{value:J.value,children:J.label},J.value))}),a.jsx("input",{type:"number",id:"annee",name:"annee",className:"w-full border rounded-lg p-2",value:j.annee,onChange:J=>L({...j,annee:Number(J.target.value)})})]}):a.jsxs("p",{className:"font-medium",children:[Lm(g.mois)," ",g.annee]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant"}),y&&j?a.jsx("input",{type:"number",id:"montant",name:"montant",className:`w-full border rounded-lg p-2 mt-1 ${P.montant?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:j.montant,onChange:J=>L({...j,montant:Number(J.target.value)})}):a.jsxs("p",{className:"font-medium",children:[g.montant.toLocaleString("fr-FR")," DH"]}),P.montant&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.montant})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de Paiement"}),y&&j?a.jsx(Pe,{selected:j.datePaiement?new Date(j.datePaiement):null,onChange:J=>L({...j,datePaiement:J==null?void 0:J.toISOString().split("T")[0]}),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:jv(g.datePaiement)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Référence"}),y&&j?a.jsx("input",{type:"text",id:"reference",name:"reference",className:`w-full border rounded-lg p-2 mt-1 ${P.reference?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:j.reference||"",onChange:J=>L({...j,reference:J.target.value})}):a.jsx("p",{className:"font-medium",children:g.reference||"N/A"}),P.reference&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.reference})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Notes"}),y&&j?a.jsx("textarea",{id:"notes",name:"notes",className:`w-full border rounded-lg p-2 mt-1 ${P.notes?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:j.notes||"",onChange:J=>L({...j,notes:J.target.value})}):a.jsx("p",{className:"font-medium",children:g.notes||"Aucune note"}),P.notes&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.notes})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Documents Associés:"}),y&&j?a.jsx(mt,{api_url:ia,existingDocuments:j.documents||[],newFiles:C,onNewFilesChange:T,onRemoveExistingDocument:Q}):g.documents&&g.documents.length>0?a.jsx(mt,{api_url:ia,existingDocuments:g.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:Q,label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]})]})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(bt,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune traite sélectionnée"})]})})]}),v&&a.jsx(b3,{onSubmit:G,onClose:()=>D(!1),initialData:null,vehicles:n,newAttachmentFiles:C,setNewAttachmentFiles:T}),W&&g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirmer la suppression"}),a.jsxs("p",{children:['Êtes-vous sûr de vouloir supprimer la traite pour le véhicule "',typeof g.vehicle=="object"&&g.vehicle!==null?g.vehicle.licensePlate:"N/A",'" ?']}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>$(!1),className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"button",onClick:ee,className:"px-4 py-2 bg-red-600 text-white rounded-lg",children:"Supprimer"})]})]})})]})},b3=({onSubmit:e,onClose:t,initialData:n,vehicles:r,newAttachmentFiles:s,setNewAttachmentFiles:i})=>{const[o,l]=E.useState(()=>{if(n){const b=typeof n.vehicle=="object"&&n.vehicle!==null?n.vehicle._id:n.vehicle;return{...n,datePaiement:n.datePaiement?new Date(n.datePaiement).toISOString().split("T")[0]:"",vehicle:b,documents:n.documents||[]}}return{mois:new Date().getMonth()+1,annee:new Date().getFullYear(),montant:0,datePaiement:"",reference:"",notes:"",vehicle:void 0,documents:[]}}),[c,u]=E.useState({}),m=b=>{const{name:v,value:D}=b.target;if(["reference","notes"].includes(v))D&&Kc(D)?u(g=>({...g,[v]:"Ce champ ne peut pas contenir uniquement des espaces."})):u(g=>{const w={...g};return delete w[v],w});else if(v==="montant"){const g=parseFloat(D);isNaN(g)||g<1?u(w=>({...w,[v]:"Le montant ne peut pas être inférieur à 1."})):u(w=>{const y={...w};return delete y[v],y})}l(g=>({...g,[v]:D}))},h=(b,v)=>{l(D=>({...D,[v]:b?b.toISOString().split("T")[0]:""}))},f=b=>{b.preventDefault();const v={};if(o.reference&&Kc(o.reference)&&(v.reference="La référence ne peut pas contenir uniquement des espaces."),o.notes&&Kc(o.notes)&&(v.notes="Les notes ne peuvent pas contenir uniquement des espaces."),o.montant!==void 0&&o.montant<1&&(v.montant="Le montant ne peut pas être inférieur à 1."),u(v),Object.keys(v).length>0){ie.error("Veuillez corriger les erreurs de validation.");return}e({...o,vehicle:o.vehicle})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sn,{onClick:t}),a.jsxs("h2",{className:"text-xl font-bold mb-4",children:[n?"Modifier":"Nouvelle"," Traite"]}),a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations sur la Traite"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"vehicle",className:"text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",value:o.vehicle||"",onChange:m,className:"border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),r.map(b=>a.jsxs("option",{value:b._id,children:[b.licensePlate," - ",b.model]},b._id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"mois",className:"text-sm font-medium text-gray-700 mb-1",children:"Mois"}),a.jsx("select",{id:"mois",name:"mois",value:o.mois||"",onChange:m,className:"border rounded-lg p-2",required:!0,children:Qu.map(b=>a.jsx("option",{value:b.value,children:b.label},b.value))})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"annee",className:"text-sm font-medium text-gray-700 mb-1",children:"Année"}),a.jsx("input",{type:"number",id:"annee",name:"annee",value:o.annee||"",onChange:m,className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"montant",className:"text-sm font-medium text-gray-700 mb-1",children:"Montant (DH)"}),a.jsx("input",{type:"number",id:"montant",name:"montant",value:o.montant||"",onChange:m,className:`border rounded-lg p-2 ${c.montant?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),c.montant&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.montant})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"datePaiement",className:"text-sm font-medium text-gray-700 mb-1",children:"Date de Paiement"}),a.jsx(Pe,{id:"datePaiement",selected:o.datePaiement?new Date(o.datePaiement):null,onChange:b=>h(b,"datePaiement"),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"Sélectionner une date",className:"border rounded-lg p-2"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"reference",className:"text-sm font-medium text-gray-700 mb-1",children:"Référence"}),a.jsx("input",{type:"text",id:"reference",name:"reference",value:o.reference||"",onChange:m,className:`border rounded-lg p-2 ${c.reference?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Référence de paiement"}),c.reference&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.reference})]}),a.jsxs("div",{className:"flex flex-col md:col-span-2",children:[a.jsx("label",{htmlFor:"notes",className:"text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("textarea",{id:"notes",name:"notes",value:o.notes||"",onChange:m,rows:3,className:`border rounded-lg p-2 ${c.notes?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Notes ou observations supplémentaires"}),c.notes&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.notes})]})]})]}),a.jsxs("section",{className:"border-b pb-4 mb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Pièces Jointes"}),a.jsx(mt,{api_url:ia,existingDocuments:o.documents||[],newFiles:s,onNewFilesChange:i,onRemoveExistingDocument:async()=>{}})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:n?"Mettre à jour":"Ajouter"})]})]})]})})};function w3(){return a.jsx(kw,{children:a.jsxs(OS,{children:[a.jsx(Pk,{position:"top-right"}),a.jsxs(SS,{children:[a.jsx(Bt,{path:"/login",element:a.jsx(ZA,{})}),a.jsx(Bt,{element:a.jsx(iD,{}),children:a.jsxs(Bt,{path:"/",element:a.jsx(wC,{}),children:[a.jsx(Bt,{index:!0,element:a.jsx(VA,{})}),a.jsx(Bt,{path:"vehicules",element:a.jsx(qA,{})}),a.jsx(Bt,{path:"vehicules/visites-techniques",element:a.jsx(o3,{})}),a.jsx(Bt,{path:"vehicules/assurances",element:a.jsx(u3,{})}),a.jsx(Bt,{path:"clients",element:a.jsx(JA,{})}),a.jsx(Bt,{path:"clients/reglements",element:a.jsx(yv,{})}),a.jsx(Bt,{path:"clients/reglements/new",element:a.jsx(yv,{})}),a.jsx(Bt,{path:"infractions",element:a.jsx(f3,{})}),a.jsx(Bt,{path:"interventions",element:a.jsx(g3,{})}),a.jsx(Bt,{path:"accidents",element:a.jsx(v3,{})}),a.jsx(Bt,{path:"contrats",element:a.jsx(e3,{})}),a.jsx(Bt,{path:"factures",element:a.jsx(t3,{})}),a.jsx(Bt,{path:"charges",element:a.jsx(s3,{})}),a.jsx(Bt,{path:"traites",element:a.jsx(y3,{})}),a.jsx(Bt,{path:"reservations",element:a.jsx(AT,{})}),a.jsx(Bt,{path:"parametres",element:a.jsx(XA,{})})]})})]})]})})}Lb(document.getElementById("root")).render(a.jsx(E.StrictMode,{children:a.jsx(kw,{children:a.jsx(w3,{})})}));
