var rj=Object.defineProperty;var sj=(e,t,n)=>t in e?rj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ke=(e,t,n)=>sj(e,typeof t!="symbol"?t+"":t,n);function aj(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ij=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jv={exports:{}},Gu={},_v={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bl=Symbol.for("react.element"),oj=Symbol.for("react.portal"),lj=Symbol.for("react.fragment"),cj=Symbol.for("react.strict_mode"),uj=Symbol.for("react.profiler"),dj=Symbol.for("react.provider"),mj=Symbol.for("react.context"),fj=Symbol.for("react.forward_ref"),hj=Symbol.for("react.suspense"),pj=Symbol.for("react.memo"),gj=Symbol.for("react.lazy"),Vp=Symbol.iterator;function xj(e){return e===null||typeof e!="object"?null:(e=Vp&&e[Vp]||e["@@iterator"],typeof e=="function"?e:null)}var kv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sv=Object.assign,Dv={};function Ri(e,t,n){this.props=e,this.context=t,this.refs=Dv,this.updater=n||kv}Ri.prototype.isReactComponent={};Ri.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ri.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cv(){}Cv.prototype=Ri.prototype;function ch(e,t,n){this.props=e,this.context=t,this.refs=Dv,this.updater=n||kv}var uh=ch.prototype=new Cv;uh.constructor=ch;Sv(uh,Ri.prototype);uh.isPureReactComponent=!0;var Up=Array.isArray,Pv=Object.prototype.hasOwnProperty,dh={current:null},Ev={key:!0,ref:!0,__self:!0,__source:!0};function Mv(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Pv.call(t,r)&&!Ev.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:bl,type:e,key:i,ref:o,props:s,_owner:dh.current}}function vj(e,t){return{$$typeof:bl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function mh(e){return typeof e=="object"&&e!==null&&e.$$typeof===bl}function yj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Wp=/\/+/g;function Ld(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yj(""+e.key):t.toString(36)}function jc(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case bl:case oj:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Ld(o,0):r,Up(s)?(n="",e!=null&&(n=e.replace(Wp,"$&/")+"/"),jc(s,t,n,"",function(u){return u})):s!=null&&(mh(s)&&(s=vj(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Wp,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Up(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Ld(i,l);o+=jc(i,t,n,c,s)}else if(c=xj(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Ld(i,l++),o+=jc(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ll(e,t,n){if(e==null)return e;var r=[],s=0;return jc(e,r,"","",function(i){return t.call(n,i,s++)}),r}function bj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var jn={current:null},_c={transition:null},wj={ReactCurrentDispatcher:jn,ReactCurrentBatchConfig:_c,ReactCurrentOwner:dh};function Tv(){throw Error("act(...) is not supported in production builds of React.")}st.Children={map:Ll,forEach:function(e,t,n){Ll(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ll(e,function(){t++}),t},toArray:function(e){return Ll(e,function(t){return t})||[]},only:function(e){if(!mh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};st.Component=Ri;st.Fragment=lj;st.Profiler=uj;st.PureComponent=ch;st.StrictMode=cj;st.Suspense=hj;st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wj;st.act=Tv;st.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Sv({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=dh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Pv.call(t,c)&&!Ev.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:bl,type:e.type,key:s,ref:i,props:r,_owner:o}};st.createContext=function(e){return e={$$typeof:mj,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dj,_context:e},e.Consumer=e};st.createElement=Mv;st.createFactory=function(e){var t=Mv.bind(null,e);return t.type=e,t};st.createRef=function(){return{current:null}};st.forwardRef=function(e){return{$$typeof:fj,render:e}};st.isValidElement=mh;st.lazy=function(e){return{$$typeof:gj,_payload:{_status:-1,_result:e},_init:bj}};st.memo=function(e,t){return{$$typeof:pj,type:e,compare:t===void 0?null:t}};st.startTransition=function(e){var t=_c.transition;_c.transition={};try{e()}finally{_c.transition=t}};st.unstable_act=Tv;st.useCallback=function(e,t){return jn.current.useCallback(e,t)};st.useContext=function(e){return jn.current.useContext(e)};st.useDebugValue=function(){};st.useDeferredValue=function(e){return jn.current.useDeferredValue(e)};st.useEffect=function(e,t){return jn.current.useEffect(e,t)};st.useId=function(){return jn.current.useId()};st.useImperativeHandle=function(e,t,n){return jn.current.useImperativeHandle(e,t,n)};st.useInsertionEffect=function(e,t){return jn.current.useInsertionEffect(e,t)};st.useLayoutEffect=function(e,t){return jn.current.useLayoutEffect(e,t)};st.useMemo=function(e,t){return jn.current.useMemo(e,t)};st.useReducer=function(e,t,n){return jn.current.useReducer(e,t,n)};st.useRef=function(e){return jn.current.useRef(e)};st.useState=function(e){return jn.current.useState(e)};st.useSyncExternalStore=function(e,t,n){return jn.current.useSyncExternalStore(e,t,n)};st.useTransition=function(){return jn.current.useTransition()};st.version="18.3.1";_v.exports=st;var E=_v.exports;const ve=lh(E),fh=aj({__proto__:null,default:ve},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nj=E,jj=Symbol.for("react.element"),_j=Symbol.for("react.fragment"),kj=Object.prototype.hasOwnProperty,Sj=Nj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dj={key:!0,ref:!0,__self:!0,__source:!0};function Ov(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)kj.call(t,r)&&!Dj.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:jj,type:e,key:i,ref:o,props:s,_owner:Sj.current}}Gu.Fragment=_j;Gu.jsx=Ov;Gu.jsxs=Ov;jv.exports=Gu;var a=jv.exports,Fv={exports:{}},Vn={},Av={exports:{}},Lv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,X){var J=Y.length;Y.push(X);e:for(;0<J;){var he=J-1>>>1,Se=Y[he];if(0<s(Se,X))Y[he]=X,Y[J]=Se,J=he;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var X=Y[0],J=Y.pop();if(J!==X){Y[0]=J;e:for(var he=0,Se=Y.length,se=Se>>>1;he<se;){var I=2*(he+1)-1,q=Y[I],_=I+1,O=Y[_];if(0>s(q,J))_<Se&&0>s(O,q)?(Y[he]=O,Y[_]=J,he=_):(Y[he]=q,Y[I]=J,he=I);else if(_<Se&&0>s(O,J))Y[he]=O,Y[_]=J,he=_;else break e}}return X}function s(Y,X){var J=Y.sortIndex-X.sortIndex;return J!==0?J:Y.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],m=1,h=null,f=3,b=!1,v=!1,D=!1,p=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Y){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=Y)r(u),X.sortIndex=X.expirationTime,t(c,X);else break;X=n(u)}}function j(Y){if(D=!1,S(Y),!v)if(n(c)!==null)v=!0,$(F);else{var X=n(u);X!==null&&H(j,X.startTime-Y)}}function F(Y,X){v=!1,D&&(D=!1,y(P),P=-1),b=!0;var J=f;try{for(S(X),h=n(c);h!==null&&(!(h.expirationTime>X)||Y&&!ee());){var he=h.callback;if(typeof he=="function"){h.callback=null,f=h.priorityLevel;var Se=he(h.expirationTime<=X);X=e.unstable_now(),typeof Se=="function"?h.callback=Se:h===n(c)&&r(c),S(X)}else r(c);h=n(c)}if(h!==null)var se=!0;else{var I=n(u);I!==null&&H(j,I.startTime-X),se=!1}return se}finally{h=null,f=J,b=!1}}var C=!1,T=null,P=-1,V=5,Q=-1;function ee(){return!(e.unstable_now()-Q<V)}function ce(){if(T!==null){var Y=e.unstable_now();Q=Y;var X=!0;try{X=T(!0,Y)}finally{X?fe():(C=!1,T=null)}}else C=!1}var fe;if(typeof w=="function")fe=function(){w(ce)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,re=G.port2;G.port1.onmessage=ce,fe=function(){re.postMessage(null)}}else fe=function(){p(ce,0)};function $(Y){T=Y,C||(C=!0,fe())}function H(Y,X){P=p(function(){Y(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){v||b||(v=!0,$(F))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(Y){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var J=f;f=X;try{return Y()}finally{f=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,X){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var J=f;f=Y;try{return X()}finally{f=J}},e.unstable_scheduleCallback=function(Y,X,J){var he=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?he+J:he):J=he,Y){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=J+Se,Y={id:m++,callback:X,priorityLevel:Y,startTime:J,expirationTime:Se,sortIndex:-1},J>he?(Y.sortIndex=J,t(u,Y),n(c)===null&&Y===n(u)&&(D?(y(P),P=-1):D=!0,H(j,J-he))):(Y.sortIndex=Se,t(c,Y),v||b||(v=!0,$(F))),Y},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(Y){var X=f;return function(){var J=f;f=X;try{return Y.apply(this,arguments)}finally{f=J}}}})(Lv);Av.exports=Lv;var Cj=Av.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pj=E,Bn=Cj;function Ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rv=new Set,Wo={};function La(e,t){yi(e,t),yi(e+"Capture",t)}function yi(e,t){for(Wo[e]=t,e=0;e<t.length;e++)Rv.add(t[e])}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rm=Object.prototype.hasOwnProperty,Ej=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yp={},qp={};function Mj(e){return Rm.call(qp,e)?!0:Rm.call(Yp,e)?!1:Ej.test(e)?qp[e]=!0:(Yp[e]=!0,!1)}function Tj(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Oj(e,t,n,r){if(t===null||typeof t>"u"||Tj(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _n(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ln[e]=new _n(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ln[t]=new _n(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ln[e]=new _n(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ln[e]=new _n(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ln[e]=new _n(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ln[e]=new _n(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ln[e]=new _n(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ln[e]=new _n(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ln[e]=new _n(e,5,!1,e.toLowerCase(),null,!1,!1)});var hh=/[\-:]([a-z])/g;function ph(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hh,ph);ln[t]=new _n(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hh,ph);ln[t]=new _n(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hh,ph);ln[t]=new _n(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ln[e]=new _n(e,1,!1,e.toLowerCase(),null,!1,!1)});ln.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ln[e]=new _n(e,1,!1,e.toLowerCase(),null,!0,!0)});function gh(e,t,n,r){var s=ln.hasOwnProperty(t)?ln[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Oj(t,n,s,r)&&(n=null),r||s===null?Mj(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var hs=Pj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rl=Symbol.for("react.element"),Ga=Symbol.for("react.portal"),Qa=Symbol.for("react.fragment"),xh=Symbol.for("react.strict_mode"),Im=Symbol.for("react.profiler"),Iv=Symbol.for("react.provider"),$v=Symbol.for("react.context"),vh=Symbol.for("react.forward_ref"),$m=Symbol.for("react.suspense"),zm=Symbol.for("react.suspense_list"),yh=Symbol.for("react.memo"),Ns=Symbol.for("react.lazy"),zv=Symbol.for("react.offscreen"),Kp=Symbol.iterator;function qi(e){return e===null||typeof e!="object"?null:(e=Kp&&e[Kp]||e["@@iterator"],typeof e=="function"?e:null)}var Tt=Object.assign,Rd;function po(e){if(Rd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Rd=t&&t[1]||""}return`
`+Rd+e}var Id=!1;function $d(e,t){if(!e||Id)return"";Id=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Id=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?po(e):""}function Fj(e){switch(e.tag){case 5:return po(e.type);case 16:return po("Lazy");case 13:return po("Suspense");case 19:return po("SuspenseList");case 0:case 2:case 15:return e=$d(e.type,!1),e;case 11:return e=$d(e.type.render,!1),e;case 1:return e=$d(e.type,!0),e;default:return""}}function Hm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qa:return"Fragment";case Ga:return"Portal";case Im:return"Profiler";case xh:return"StrictMode";case $m:return"Suspense";case zm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $v:return(e.displayName||"Context")+".Consumer";case Iv:return(e._context.displayName||"Context")+".Provider";case vh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yh:return t=e.displayName||null,t!==null?t:Hm(e.type)||"Memo";case Ns:t=e._payload,e=e._init;try{return Hm(e(t))}catch{}}return null}function Aj(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hm(t);case 8:return t===xh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Lj(e){var t=Hv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Il(e){e._valueTracker||(e._valueTracker=Lj(e))}function Bv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Hv(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Kc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bm(e,t){var n=t.checked;return Tt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gp(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Us(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Vv(e,t){t=t.checked,t!=null&&gh(e,"checked",t,!1)}function Vm(e,t){Vv(e,t);var n=Us(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Um(e,t.type,n):t.hasOwnProperty("defaultValue")&&Um(e,t.type,Us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Um(e,t,n){(t!=="number"||Kc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var go=Array.isArray;function oi(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Us(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Wm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return Tt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jp(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ee(92));if(go(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Us(n)}}function Uv(e,t){var n=Us(t.value),r=Us(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Wv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ym(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Wv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $l,Yv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($l=$l||document.createElement("div"),$l.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$l.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Do={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rj=["Webkit","ms","Moz","O"];Object.keys(Do).forEach(function(e){Rj.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Do[t]=Do[e]})});function qv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Do.hasOwnProperty(e)&&Do[e]?(""+t).trim():t+"px"}function Kv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=qv(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Ij=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qm(e,t){if(t){if(Ij[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ee(62))}}function Km(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gm=null;function bh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qm=null,li=null,ci=null;function Zp(e){if(e=jl(e)){if(typeof Qm!="function")throw Error(Ee(280));var t=e.stateNode;t&&(t=ed(t),Qm(e.stateNode,e.type,t))}}function Gv(e){li?ci?ci.push(e):ci=[e]:li=e}function Qv(){if(li){var e=li,t=ci;if(ci=li=null,Zp(e),t)for(e=0;e<t.length;e++)Zp(t[e])}}function Jv(e,t){return e(t)}function Xv(){}var zd=!1;function Zv(e,t,n){if(zd)return e(t,n);zd=!0;try{return Jv(e,t,n)}finally{zd=!1,(li!==null||ci!==null)&&(Xv(),Qv())}}function qo(e,t){var n=e.stateNode;if(n===null)return null;var r=ed(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ee(231,t,typeof n));return n}var Jm=!1;if(ls)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){Jm=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{Jm=!1}function $j(e,t,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(m){this.onError(m)}}var Co=!1,Gc=null,Qc=!1,Xm=null,zj={onError:function(e){Co=!0,Gc=e}};function Hj(e,t,n,r,s,i,o,l,c){Co=!1,Gc=null,$j.apply(zj,arguments)}function Bj(e,t,n,r,s,i,o,l,c){if(Hj.apply(this,arguments),Co){if(Co){var u=Gc;Co=!1,Gc=null}else throw Error(Ee(198));Qc||(Qc=!0,Xm=u)}}function Ra(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ey(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eg(e){if(Ra(e)!==e)throw Error(Ee(188))}function Vj(e){var t=e.alternate;if(!t){if(t=Ra(e),t===null)throw Error(Ee(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return eg(s),e;if(i===r)return eg(s),t;i=i.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?e:t}function ty(e){return e=Vj(e),e!==null?ny(e):null}function ny(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ny(e);if(t!==null)return t;e=e.sibling}return null}var ry=Bn.unstable_scheduleCallback,tg=Bn.unstable_cancelCallback,Uj=Bn.unstable_shouldYield,Wj=Bn.unstable_requestPaint,Rt=Bn.unstable_now,Yj=Bn.unstable_getCurrentPriorityLevel,wh=Bn.unstable_ImmediatePriority,sy=Bn.unstable_UserBlockingPriority,Jc=Bn.unstable_NormalPriority,qj=Bn.unstable_LowPriority,ay=Bn.unstable_IdlePriority,Qu=null,Hr=null;function Kj(e){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(Qu,e,void 0,(e.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:Jj,Gj=Math.log,Qj=Math.LN2;function Jj(e){return e>>>=0,e===0?32:31-(Gj(e)/Qj|0)|0}var zl=64,Hl=4194304;function xo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=xo(l):(i&=o,i!==0&&(r=xo(i)))}else o=n&~s,o!==0?r=xo(o):i!==0&&(r=xo(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vr(t),s=1<<n,r|=e[n],t&=~s;return r}function Xj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zj(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-vr(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=Xj(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Zm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function iy(){var e=zl;return zl<<=1,!(zl&4194240)&&(zl=64),e}function Hd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vr(t),e[t]=n}function e1(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-vr(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Nh(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var yt=0;function oy(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ly,jh,cy,uy,dy,ef=!1,Bl=[],Ts=null,Os=null,Fs=null,Ko=new Map,Go=new Map,_s=[],t1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ng(e,t){switch(e){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":Ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(t.pointerId)}}function Gi(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=jl(t),t!==null&&jh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function n1(e,t,n,r,s){switch(t){case"focusin":return Ts=Gi(Ts,e,t,n,r,s),!0;case"dragenter":return Os=Gi(Os,e,t,n,r,s),!0;case"mouseover":return Fs=Gi(Fs,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ko.set(i,Gi(Ko.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Go.set(i,Gi(Go.get(i)||null,e,t,n,r,s)),!0}return!1}function my(e){var t=ca(e.target);if(t!==null){var n=Ra(t);if(n!==null){if(t=n.tag,t===13){if(t=ey(n),t!==null){e.blockedOn=t,dy(e.priority,function(){cy(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=tf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Gm=r,n.target.dispatchEvent(r),Gm=null}else return t=jl(n),t!==null&&jh(t),e.blockedOn=n,!1;t.shift()}return!0}function rg(e,t,n){kc(e)&&n.delete(t)}function r1(){ef=!1,Ts!==null&&kc(Ts)&&(Ts=null),Os!==null&&kc(Os)&&(Os=null),Fs!==null&&kc(Fs)&&(Fs=null),Ko.forEach(rg),Go.forEach(rg)}function Qi(e,t){e.blockedOn===t&&(e.blockedOn=null,ef||(ef=!0,Bn.unstable_scheduleCallback(Bn.unstable_NormalPriority,r1)))}function Qo(e){function t(s){return Qi(s,e)}if(0<Bl.length){Qi(Bl[0],e);for(var n=1;n<Bl.length;n++){var r=Bl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ts!==null&&Qi(Ts,e),Os!==null&&Qi(Os,e),Fs!==null&&Qi(Fs,e),Ko.forEach(t),Go.forEach(t),n=0;n<_s.length;n++)r=_s[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<_s.length&&(n=_s[0],n.blockedOn===null);)my(n),n.blockedOn===null&&_s.shift()}var ui=hs.ReactCurrentBatchConfig,Zc=!0;function s1(e,t,n,r){var s=yt,i=ui.transition;ui.transition=null;try{yt=1,_h(e,t,n,r)}finally{yt=s,ui.transition=i}}function a1(e,t,n,r){var s=yt,i=ui.transition;ui.transition=null;try{yt=4,_h(e,t,n,r)}finally{yt=s,ui.transition=i}}function _h(e,t,n,r){if(Zc){var s=tf(e,t,n,r);if(s===null)Jd(e,t,r,eu,n),ng(e,r);else if(n1(s,e,t,n,r))r.stopPropagation();else if(ng(e,r),t&4&&-1<t1.indexOf(e)){for(;s!==null;){var i=jl(s);if(i!==null&&ly(i),i=tf(e,t,n,r),i===null&&Jd(e,t,r,eu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Jd(e,t,r,null,n)}}var eu=null;function tf(e,t,n,r){if(eu=null,e=bh(r),e=ca(e),e!==null)if(t=Ra(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ey(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return eu=e,null}function fy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yj()){case wh:return 1;case sy:return 4;case Jc:case qj:return 16;case ay:return 536870912;default:return 16}default:return 16}}var Ds=null,kh=null,Sc=null;function hy(){if(Sc)return Sc;var e,t=kh,n=t.length,r,s="value"in Ds?Ds.value:Ds.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Sc=s.slice(e,1<r?1-r:void 0)}function Dc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vl(){return!0}function sg(){return!1}function Un(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vl:sg,this.isPropagationStopped=sg,this}return Tt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vl)},persist:function(){},isPersistent:Vl}),t}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sh=Un(Ii),Nl=Tt({},Ii,{view:0,detail:0}),i1=Un(Nl),Bd,Vd,Ji,Ju=Tt({},Nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ji&&(Ji&&e.type==="mousemove"?(Bd=e.screenX-Ji.screenX,Vd=e.screenY-Ji.screenY):Vd=Bd=0,Ji=e),Bd)},movementY:function(e){return"movementY"in e?e.movementY:Vd}}),ag=Un(Ju),o1=Tt({},Ju,{dataTransfer:0}),l1=Un(o1),c1=Tt({},Nl,{relatedTarget:0}),Ud=Un(c1),u1=Tt({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),d1=Un(u1),m1=Tt({},Ii,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),f1=Un(m1),h1=Tt({},Ii,{data:0}),ig=Un(h1),p1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=x1[e])?!!t[e]:!1}function Dh(){return v1}var y1=Tt({},Nl,{key:function(e){if(e.key){var t=p1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Dc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?g1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dh,charCode:function(e){return e.type==="keypress"?Dc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Dc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),b1=Un(y1),w1=Tt({},Ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),og=Un(w1),N1=Tt({},Nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dh}),j1=Un(N1),_1=Tt({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),k1=Un(_1),S1=Tt({},Ju,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),D1=Un(S1),C1=[9,13,27,32],Ch=ls&&"CompositionEvent"in window,Po=null;ls&&"documentMode"in document&&(Po=document.documentMode);var P1=ls&&"TextEvent"in window&&!Po,py=ls&&(!Ch||Po&&8<Po&&11>=Po),lg=" ",cg=!1;function gy(e,t){switch(e){case"keyup":return C1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ja=!1;function E1(e,t){switch(e){case"compositionend":return xy(t);case"keypress":return t.which!==32?null:(cg=!0,lg);case"textInput":return e=t.data,e===lg&&cg?null:e;default:return null}}function M1(e,t){if(Ja)return e==="compositionend"||!Ch&&gy(e,t)?(e=hy(),Sc=kh=Ds=null,Ja=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return py&&t.locale!=="ko"?null:t.data;default:return null}}var T1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ug(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!T1[e.type]:t==="textarea"}function vy(e,t,n,r){Gv(r),t=tu(t,"onChange"),0<t.length&&(n=new Sh("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Eo=null,Jo=null;function O1(e){Py(e,0)}function Xu(e){var t=ei(e);if(Bv(t))return e}function F1(e,t){if(e==="change")return t}var yy=!1;if(ls){var Wd;if(ls){var Yd="oninput"in document;if(!Yd){var dg=document.createElement("div");dg.setAttribute("oninput","return;"),Yd=typeof dg.oninput=="function"}Wd=Yd}else Wd=!1;yy=Wd&&(!document.documentMode||9<document.documentMode)}function mg(){Eo&&(Eo.detachEvent("onpropertychange",by),Jo=Eo=null)}function by(e){if(e.propertyName==="value"&&Xu(Jo)){var t=[];vy(t,Jo,e,bh(e)),Zv(O1,t)}}function A1(e,t,n){e==="focusin"?(mg(),Eo=t,Jo=n,Eo.attachEvent("onpropertychange",by)):e==="focusout"&&mg()}function L1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xu(Jo)}function R1(e,t){if(e==="click")return Xu(t)}function I1(e,t){if(e==="input"||e==="change")return Xu(t)}function $1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wr=typeof Object.is=="function"?Object.is:$1;function Xo(e,t){if(wr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rm.call(t,s)||!wr(e[s],t[s]))return!1}return!0}function fg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hg(e,t){var n=fg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fg(n)}}function wy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ny(){for(var e=window,t=Kc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Kc(e.document)}return t}function Ph(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function z1(e){var t=Ny(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wy(n.ownerDocument.documentElement,n)){if(r!==null&&Ph(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=hg(n,i);var o=hg(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var H1=ls&&"documentMode"in document&&11>=document.documentMode,Xa=null,nf=null,Mo=null,rf=!1;function pg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rf||Xa==null||Xa!==Kc(r)||(r=Xa,"selectionStart"in r&&Ph(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mo&&Xo(Mo,r)||(Mo=r,r=tu(nf,"onSelect"),0<r.length&&(t=new Sh("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Xa)))}function Ul(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Za={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},qd={},jy={};ls&&(jy=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function Zu(e){if(qd[e])return qd[e];if(!Za[e])return e;var t=Za[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in jy)return qd[e]=t[n];return e}var _y=Zu("animationend"),ky=Zu("animationiteration"),Sy=Zu("animationstart"),Dy=Zu("transitionend"),Cy=new Map,gg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gs(e,t){Cy.set(e,t),La(t,[e])}for(var Kd=0;Kd<gg.length;Kd++){var Gd=gg[Kd],B1=Gd.toLowerCase(),V1=Gd[0].toUpperCase()+Gd.slice(1);Gs(B1,"on"+V1)}Gs(_y,"onAnimationEnd");Gs(ky,"onAnimationIteration");Gs(Sy,"onAnimationStart");Gs("dblclick","onDoubleClick");Gs("focusin","onFocus");Gs("focusout","onBlur");Gs(Dy,"onTransitionEnd");yi("onMouseEnter",["mouseout","mouseover"]);yi("onMouseLeave",["mouseout","mouseover"]);yi("onPointerEnter",["pointerout","pointerover"]);yi("onPointerLeave",["pointerout","pointerover"]);La("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));La("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));La("onBeforeInput",["compositionend","keypress","textInput","paste"]);La("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));La("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));La("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U1=new Set("cancel close invalid load scroll toggle".split(" ").concat(vo));function xg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Bj(r,t,void 0,e),e.currentTarget=null}function Py(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;xg(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;xg(s,l,u),i=c}}}if(Qc)throw e=Xm,Qc=!1,Xm=null,e}function jt(e,t){var n=t[cf];n===void 0&&(n=t[cf]=new Set);var r=e+"__bubble";n.has(r)||(Ey(t,e,2,!1),n.add(r))}function Qd(e,t,n){var r=0;t&&(r|=4),Ey(n,e,r,t)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function Zo(e){if(!e[Wl]){e[Wl]=!0,Rv.forEach(function(n){n!=="selectionchange"&&(U1.has(n)||Qd(n,!1,e),Qd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wl]||(t[Wl]=!0,Qd("selectionchange",!1,t))}}function Ey(e,t,n,r){switch(fy(t)){case 1:var s=s1;break;case 4:s=a1;break;default:s=_h}n=s.bind(null,t,n,e),s=void 0,!Jm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Jd(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ca(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Zv(function(){var u=i,m=bh(n),h=[];e:{var f=Cy.get(e);if(f!==void 0){var b=Sh,v=e;switch(e){case"keypress":if(Dc(n)===0)break e;case"keydown":case"keyup":b=b1;break;case"focusin":v="focus",b=Ud;break;case"focusout":v="blur",b=Ud;break;case"beforeblur":case"afterblur":b=Ud;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=l1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=j1;break;case _y:case ky:case Sy:b=d1;break;case Dy:b=k1;break;case"scroll":b=i1;break;case"wheel":b=D1;break;case"copy":case"cut":case"paste":b=f1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=og}var D=(t&4)!==0,p=!D&&e==="scroll",y=D?f!==null?f+"Capture":null:f;D=[];for(var w=u,S;w!==null;){S=w;var j=S.stateNode;if(S.tag===5&&j!==null&&(S=j,y!==null&&(j=qo(w,y),j!=null&&D.push(el(w,j,S)))),p)break;w=w.return}0<D.length&&(f=new b(f,v,null,n,m),h.push({event:f,listeners:D}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",f&&n!==Gm&&(v=n.relatedTarget||n.fromElement)&&(ca(v)||v[cs]))break e;if((b||f)&&(f=m.window===m?m:(f=m.ownerDocument)?f.defaultView||f.parentWindow:window,b?(v=n.relatedTarget||n.toElement,b=u,v=v?ca(v):null,v!==null&&(p=Ra(v),v!==p||v.tag!==5&&v.tag!==6)&&(v=null)):(b=null,v=u),b!==v)){if(D=ag,j="onMouseLeave",y="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(D=og,j="onPointerLeave",y="onPointerEnter",w="pointer"),p=b==null?f:ei(b),S=v==null?f:ei(v),f=new D(j,w+"leave",b,n,m),f.target=p,f.relatedTarget=S,j=null,ca(m)===u&&(D=new D(y,w+"enter",v,n,m),D.target=S,D.relatedTarget=p,j=D),p=j,b&&v)t:{for(D=b,y=v,w=0,S=D;S;S=Ba(S))w++;for(S=0,j=y;j;j=Ba(j))S++;for(;0<w-S;)D=Ba(D),w--;for(;0<S-w;)y=Ba(y),S--;for(;w--;){if(D===y||y!==null&&D===y.alternate)break t;D=Ba(D),y=Ba(y)}D=null}else D=null;b!==null&&vg(h,f,b,D,!1),v!==null&&p!==null&&vg(h,p,v,D,!0)}}e:{if(f=u?ei(u):window,b=f.nodeName&&f.nodeName.toLowerCase(),b==="select"||b==="input"&&f.type==="file")var F=F1;else if(ug(f))if(yy)F=I1;else{F=L1;var C=A1}else(b=f.nodeName)&&b.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(F=R1);if(F&&(F=F(e,u))){vy(h,F,n,m);break e}C&&C(e,f,u),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Um(f,"number",f.value)}switch(C=u?ei(u):window,e){case"focusin":(ug(C)||C.contentEditable==="true")&&(Xa=C,nf=u,Mo=null);break;case"focusout":Mo=nf=Xa=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,pg(h,n,m);break;case"selectionchange":if(H1)break;case"keydown":case"keyup":pg(h,n,m)}var T;if(Ch)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ja?gy(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(py&&n.locale!=="ko"&&(Ja||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ja&&(T=hy()):(Ds=m,kh="value"in Ds?Ds.value:Ds.textContent,Ja=!0)),C=tu(u,P),0<C.length&&(P=new ig(P,e,null,n,m),h.push({event:P,listeners:C}),T?P.data=T:(T=xy(n),T!==null&&(P.data=T)))),(T=P1?E1(e,n):M1(e,n))&&(u=tu(u,"onBeforeInput"),0<u.length&&(m=new ig("onBeforeInput","beforeinput",null,n,m),h.push({event:m,listeners:u}),m.data=T))}Py(h,t)})}function el(e,t,n){return{instance:e,listener:t,currentTarget:n}}function tu(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=qo(e,n),i!=null&&r.unshift(el(e,i,s)),i=qo(e,t),i!=null&&r.push(el(e,i,s))),e=e.return}return r}function Ba(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vg(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=qo(n,i),c!=null&&o.unshift(el(n,c,l))):s||(c=qo(n,i),c!=null&&o.push(el(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var W1=/\r\n?/g,Y1=/\u0000|\uFFFD/g;function yg(e){return(typeof e=="string"?e:""+e).replace(W1,`
`).replace(Y1,"")}function Yl(e,t,n){if(t=yg(t),yg(e)!==t&&n)throw Error(Ee(425))}function nu(){}var sf=null,af=null;function of(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lf=typeof setTimeout=="function"?setTimeout:void 0,q1=typeof clearTimeout=="function"?clearTimeout:void 0,bg=typeof Promise=="function"?Promise:void 0,K1=typeof queueMicrotask=="function"?queueMicrotask:typeof bg<"u"?function(e){return bg.resolve(null).then(e).catch(G1)}:lf;function G1(e){setTimeout(function(){throw e})}function Xd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Qo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Qo(t)}function As(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $i=Math.random().toString(36).slice(2),Ar="__reactFiber$"+$i,tl="__reactProps$"+$i,cs="__reactContainer$"+$i,cf="__reactEvents$"+$i,Q1="__reactListeners$"+$i,J1="__reactHandles$"+$i;function ca(e){var t=e[Ar];if(t)return t;for(var n=e.parentNode;n;){if(t=n[cs]||n[Ar]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wg(e);e!==null;){if(n=e[Ar])return n;e=wg(e)}return t}e=n,n=e.parentNode}return null}function jl(e){return e=e[Ar]||e[cs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ei(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ee(33))}function ed(e){return e[tl]||null}var uf=[],ti=-1;function Qs(e){return{current:e}}function kt(e){0>ti||(e.current=uf[ti],uf[ti]=null,ti--)}function wt(e,t){ti++,uf[ti]=e.current,e.current=t}var Ws={},gn=Qs(Ws),Mn=Qs(!1),Sa=Ws;function bi(e,t){var n=e.type.contextTypes;if(!n)return Ws;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Tn(e){return e=e.childContextTypes,e!=null}function ru(){kt(Mn),kt(gn)}function Ng(e,t,n){if(gn.current!==Ws)throw Error(Ee(168));wt(gn,t),wt(Mn,n)}function My(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Ee(108,Aj(e)||"Unknown",s));return Tt({},n,r)}function su(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ws,Sa=gn.current,wt(gn,e),wt(Mn,Mn.current),!0}function jg(e,t,n){var r=e.stateNode;if(!r)throw Error(Ee(169));n?(e=My(e,t,Sa),r.__reactInternalMemoizedMergedChildContext=e,kt(Mn),kt(gn),wt(gn,e)):kt(Mn),wt(Mn,n)}var Xr=null,td=!1,Zd=!1;function Ty(e){Xr===null?Xr=[e]:Xr.push(e)}function X1(e){td=!0,Ty(e)}function Js(){if(!Zd&&Xr!==null){Zd=!0;var e=0,t=yt;try{var n=Xr;for(yt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Xr=null,td=!1}catch(s){throw Xr!==null&&(Xr=Xr.slice(e+1)),ry(wh,Js),s}finally{yt=t,Zd=!1}}return null}var ni=[],ri=0,au=null,iu=0,er=[],tr=0,Da=null,es=1,ts="";function ra(e,t){ni[ri++]=iu,ni[ri++]=au,au=e,iu=t}function Oy(e,t,n){er[tr++]=es,er[tr++]=ts,er[tr++]=Da,Da=e;var r=es;e=ts;var s=32-vr(r)-1;r&=~(1<<s),n+=1;var i=32-vr(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,es=1<<32-vr(t)+s|n<<s|r,ts=i+e}else es=1<<i|n<<s|r,ts=e}function Eh(e){e.return!==null&&(ra(e,1),Oy(e,1,0))}function Mh(e){for(;e===au;)au=ni[--ri],ni[ri]=null,iu=ni[--ri],ni[ri]=null;for(;e===Da;)Da=er[--tr],er[tr]=null,ts=er[--tr],er[tr]=null,es=er[--tr],er[tr]=null}var zn=null,$n=null,St=!1,gr=null;function Fy(e,t){var n=rr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function _g(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zn=e,$n=As(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zn=e,$n=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Da!==null?{id:es,overflow:ts}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=rr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,zn=e,$n=null,!0):!1;default:return!1}}function df(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mf(e){if(St){var t=$n;if(t){var n=t;if(!_g(e,t)){if(df(e))throw Error(Ee(418));t=As(n.nextSibling);var r=zn;t&&_g(e,t)?Fy(r,n):(e.flags=e.flags&-4097|2,St=!1,zn=e)}}else{if(df(e))throw Error(Ee(418));e.flags=e.flags&-4097|2,St=!1,zn=e}}}function kg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zn=e}function ql(e){if(e!==zn)return!1;if(!St)return kg(e),St=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!of(e.type,e.memoizedProps)),t&&(t=$n)){if(df(e))throw Ay(),Error(Ee(418));for(;t;)Fy(e,t),t=As(t.nextSibling)}if(kg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){$n=As(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}$n=null}}else $n=zn?As(e.stateNode.nextSibling):null;return!0}function Ay(){for(var e=$n;e;)e=As(e.nextSibling)}function wi(){$n=zn=null,St=!1}function Th(e){gr===null?gr=[e]:gr.push(e)}var Z1=hs.ReactCurrentBatchConfig;function Xi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,e))}return e}function Kl(e,t){throw e=Object.prototype.toString.call(t),Error(Ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sg(e){var t=e._init;return t(e._payload)}function Ly(e){function t(y,w){if(e){var S=y.deletions;S===null?(y.deletions=[w],y.flags|=16):S.push(w)}}function n(y,w){if(!e)return null;for(;w!==null;)t(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=$s(y,w),y.index=0,y.sibling=null,y}function i(y,w,S){return y.index=S,e?(S=y.alternate,S!==null?(S=S.index,S<w?(y.flags|=2,w):S):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,w,S,j){return w===null||w.tag!==6?(w=im(S,y.mode,j),w.return=y,w):(w=s(w,S),w.return=y,w)}function c(y,w,S,j){var F=S.type;return F===Qa?m(y,w,S.props.children,j,S.key):w!==null&&(w.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ns&&Sg(F)===w.type)?(j=s(w,S.props),j.ref=Xi(y,w,S),j.return=y,j):(j=Fc(S.type,S.key,S.props,null,y.mode,j),j.ref=Xi(y,w,S),j.return=y,j)}function u(y,w,S,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=om(S,y.mode,j),w.return=y,w):(w=s(w,S.children||[]),w.return=y,w)}function m(y,w,S,j,F){return w===null||w.tag!==7?(w=ba(S,y.mode,j,F),w.return=y,w):(w=s(w,S),w.return=y,w)}function h(y,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=im(""+w,y.mode,S),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rl:return S=Fc(w.type,w.key,w.props,null,y.mode,S),S.ref=Xi(y,null,w),S.return=y,S;case Ga:return w=om(w,y.mode,S),w.return=y,w;case Ns:var j=w._init;return h(y,j(w._payload),S)}if(go(w)||qi(w))return w=ba(w,y.mode,S,null),w.return=y,w;Kl(y,w)}return null}function f(y,w,S,j){var F=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return F!==null?null:l(y,w,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Rl:return S.key===F?c(y,w,S,j):null;case Ga:return S.key===F?u(y,w,S,j):null;case Ns:return F=S._init,f(y,w,F(S._payload),j)}if(go(S)||qi(S))return F!==null?null:m(y,w,S,j,null);Kl(y,S)}return null}function b(y,w,S,j,F){if(typeof j=="string"&&j!==""||typeof j=="number")return y=y.get(S)||null,l(w,y,""+j,F);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Rl:return y=y.get(j.key===null?S:j.key)||null,c(w,y,j,F);case Ga:return y=y.get(j.key===null?S:j.key)||null,u(w,y,j,F);case Ns:var C=j._init;return b(y,w,S,C(j._payload),F)}if(go(j)||qi(j))return y=y.get(S)||null,m(w,y,j,F,null);Kl(w,j)}return null}function v(y,w,S,j){for(var F=null,C=null,T=w,P=w=0,V=null;T!==null&&P<S.length;P++){T.index>P?(V=T,T=null):V=T.sibling;var Q=f(y,T,S[P],j);if(Q===null){T===null&&(T=V);break}e&&T&&Q.alternate===null&&t(y,T),w=i(Q,w,P),C===null?F=Q:C.sibling=Q,C=Q,T=V}if(P===S.length)return n(y,T),St&&ra(y,P),F;if(T===null){for(;P<S.length;P++)T=h(y,S[P],j),T!==null&&(w=i(T,w,P),C===null?F=T:C.sibling=T,C=T);return St&&ra(y,P),F}for(T=r(y,T);P<S.length;P++)V=b(T,y,P,S[P],j),V!==null&&(e&&V.alternate!==null&&T.delete(V.key===null?P:V.key),w=i(V,w,P),C===null?F=V:C.sibling=V,C=V);return e&&T.forEach(function(ee){return t(y,ee)}),St&&ra(y,P),F}function D(y,w,S,j){var F=qi(S);if(typeof F!="function")throw Error(Ee(150));if(S=F.call(S),S==null)throw Error(Ee(151));for(var C=F=null,T=w,P=w=0,V=null,Q=S.next();T!==null&&!Q.done;P++,Q=S.next()){T.index>P?(V=T,T=null):V=T.sibling;var ee=f(y,T,Q.value,j);if(ee===null){T===null&&(T=V);break}e&&T&&ee.alternate===null&&t(y,T),w=i(ee,w,P),C===null?F=ee:C.sibling=ee,C=ee,T=V}if(Q.done)return n(y,T),St&&ra(y,P),F;if(T===null){for(;!Q.done;P++,Q=S.next())Q=h(y,Q.value,j),Q!==null&&(w=i(Q,w,P),C===null?F=Q:C.sibling=Q,C=Q);return St&&ra(y,P),F}for(T=r(y,T);!Q.done;P++,Q=S.next())Q=b(T,y,P,Q.value,j),Q!==null&&(e&&Q.alternate!==null&&T.delete(Q.key===null?P:Q.key),w=i(Q,w,P),C===null?F=Q:C.sibling=Q,C=Q);return e&&T.forEach(function(ce){return t(y,ce)}),St&&ra(y,P),F}function p(y,w,S,j){if(typeof S=="object"&&S!==null&&S.type===Qa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Rl:e:{for(var F=S.key,C=w;C!==null;){if(C.key===F){if(F=S.type,F===Qa){if(C.tag===7){n(y,C.sibling),w=s(C,S.props.children),w.return=y,y=w;break e}}else if(C.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ns&&Sg(F)===C.type){n(y,C.sibling),w=s(C,S.props),w.ref=Xi(y,C,S),w.return=y,y=w;break e}n(y,C);break}else t(y,C);C=C.sibling}S.type===Qa?(w=ba(S.props.children,y.mode,j,S.key),w.return=y,y=w):(j=Fc(S.type,S.key,S.props,null,y.mode,j),j.ref=Xi(y,w,S),j.return=y,y=j)}return o(y);case Ga:e:{for(C=S.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(y,w.sibling),w=s(w,S.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else t(y,w);w=w.sibling}w=om(S,y.mode,j),w.return=y,y=w}return o(y);case Ns:return C=S._init,p(y,w,C(S._payload),j)}if(go(S))return v(y,w,S,j);if(qi(S))return D(y,w,S,j);Kl(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(y,w.sibling),w=s(w,S),w.return=y,y=w):(n(y,w),w=im(S,y.mode,j),w.return=y,y=w),o(y)):n(y,w)}return p}var Ni=Ly(!0),Ry=Ly(!1),ou=Qs(null),lu=null,si=null,Oh=null;function Fh(){Oh=si=lu=null}function Ah(e){var t=ou.current;kt(ou),e._currentValue=t}function ff(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function di(e,t){lu=e,Oh=si=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(En=!0),e.firstContext=null)}function or(e){var t=e._currentValue;if(Oh!==e)if(e={context:e,memoizedValue:t,next:null},si===null){if(lu===null)throw Error(Ee(308));si=e,lu.dependencies={lanes:0,firstContext:e}}else si=si.next=e;return t}var ua=null;function Lh(e){ua===null?ua=[e]:ua.push(e)}function Iy(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Lh(t)):(n.next=s.next,s.next=n),t.interleaved=n,us(e,r)}function us(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var js=!1;function Rh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $y(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ns(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ls(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,us(e,n)}return s=r.interleaved,s===null?(t.next=t,Lh(r)):(t.next=s.next,s.next=t),r.interleaved=t,us(e,n)}function Cc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Nh(e,n)}}function Dg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function cu(e,t,n,r){var s=e.updateQueue;js=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=u:l.next=u,m.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,m=u=c=null,l=i;do{var f=l.lane,b=l.eventTime;if((r&f)===f){m!==null&&(m=m.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,D=l;switch(f=t,b=n,D.tag){case 1:if(v=D.payload,typeof v=="function"){h=v.call(b,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=D.payload,f=typeof v=="function"?v.call(b,h,f):v,f==null)break e;h=Tt({},h,f);break e;case 2:js=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else b={eventTime:b,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(u=m=b,c=h):m=m.next=b,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(m===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Pa|=o,e.lanes=o,e.memoizedState=h}}function Cg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ee(191,s));s.call(r)}}}var _l={},Br=Qs(_l),nl=Qs(_l),rl=Qs(_l);function da(e){if(e===_l)throw Error(Ee(174));return e}function Ih(e,t){switch(wt(rl,t),wt(nl,e),wt(Br,_l),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ym(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ym(t,e)}kt(Br),wt(Br,t)}function ji(){kt(Br),kt(nl),kt(rl)}function zy(e){da(rl.current);var t=da(Br.current),n=Ym(t,e.type);t!==n&&(wt(nl,e),wt(Br,n))}function $h(e){nl.current===e&&(kt(Br),kt(nl))}var Ct=Qs(0);function uu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var em=[];function zh(){for(var e=0;e<em.length;e++)em[e]._workInProgressVersionPrimary=null;em.length=0}var Pc=hs.ReactCurrentDispatcher,tm=hs.ReactCurrentBatchConfig,Ca=0,Et=null,Kt=null,Jt=null,du=!1,To=!1,sl=0,e_=0;function cn(){throw Error(Ee(321))}function Hh(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wr(e[n],t[n]))return!1;return!0}function Bh(e,t,n,r,s,i){if(Ca=i,Et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pc.current=e===null||e.memoizedState===null?s_:a_,e=n(r,s),To){i=0;do{if(To=!1,sl=0,25<=i)throw Error(Ee(301));i+=1,Jt=Kt=null,t.updateQueue=null,Pc.current=i_,e=n(r,s)}while(To)}if(Pc.current=mu,t=Kt!==null&&Kt.next!==null,Ca=0,Jt=Kt=Et=null,du=!1,t)throw Error(Ee(300));return e}function Vh(){var e=sl!==0;return sl=0,e}function Mr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?Et.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function lr(){if(Kt===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=Kt.next;var t=Jt===null?Et.memoizedState:Jt.next;if(t!==null)Jt=t,Kt=e;else{if(e===null)throw Error(Ee(310));Kt=e,e={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},Jt===null?Et.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function al(e,t){return typeof t=="function"?t(e):t}function nm(e){var t=lr(),n=t.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=e;var r=Kt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var m=u.lane;if((Ca&m)===m)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:m,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Et.lanes|=m,Pa|=m}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,wr(r,t.memoizedState)||(En=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Et.lanes|=i,Pa|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function rm(e){var t=lr(),n=t.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);wr(i,t.memoizedState)||(En=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Hy(){}function By(e,t){var n=Et,r=lr(),s=t(),i=!wr(r.memoizedState,s);if(i&&(r.memoizedState=s,En=!0),r=r.queue,Uh(Wy.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Jt!==null&&Jt.memoizedState.tag&1){if(n.flags|=2048,il(9,Uy.bind(null,n,r,s,t),void 0,null),Zt===null)throw Error(Ee(349));Ca&30||Vy(n,t,s)}return s}function Vy(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Uy(e,t,n,r){t.value=n,t.getSnapshot=r,Yy(t)&&qy(e)}function Wy(e,t,n){return n(function(){Yy(t)&&qy(e)})}function Yy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wr(e,n)}catch{return!0}}function qy(e){var t=us(e,1);t!==null&&yr(t,e,1,-1)}function Pg(e){var t=Mr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:e},t.queue=e,e=e.dispatch=r_.bind(null,Et,e),[t.memoizedState,e]}function il(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ky(){return lr().memoizedState}function Ec(e,t,n,r){var s=Mr();Et.flags|=e,s.memoizedState=il(1|t,n,void 0,r===void 0?null:r)}function nd(e,t,n,r){var s=lr();r=r===void 0?null:r;var i=void 0;if(Kt!==null){var o=Kt.memoizedState;if(i=o.destroy,r!==null&&Hh(r,o.deps)){s.memoizedState=il(t,n,i,r);return}}Et.flags|=e,s.memoizedState=il(1|t,n,i,r)}function Eg(e,t){return Ec(8390656,8,e,t)}function Uh(e,t){return nd(2048,8,e,t)}function Gy(e,t){return nd(4,2,e,t)}function Qy(e,t){return nd(4,4,e,t)}function Jy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xy(e,t,n){return n=n!=null?n.concat([e]):null,nd(4,4,Jy.bind(null,t,e),n)}function Wh(){}function Zy(e,t){var n=lr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hh(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function eb(e,t){var n=lr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hh(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function tb(e,t,n){return Ca&21?(wr(n,t)||(n=iy(),Et.lanes|=n,Pa|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,En=!0),e.memoizedState=n)}function t_(e,t){var n=yt;yt=n!==0&&4>n?n:4,e(!0);var r=tm.transition;tm.transition={};try{e(!1),t()}finally{yt=n,tm.transition=r}}function nb(){return lr().memoizedState}function n_(e,t,n){var r=Is(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rb(e))sb(t,n);else if(n=Iy(e,t,n,r),n!==null){var s=Nn();yr(n,e,r,s),ab(n,t,r)}}function r_(e,t,n){var r=Is(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rb(e))sb(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,wr(l,o)){var c=t.interleaved;c===null?(s.next=s,Lh(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Iy(e,t,s,r),n!==null&&(s=Nn(),yr(n,e,r,s),ab(n,t,r))}}function rb(e){var t=e.alternate;return e===Et||t!==null&&t===Et}function sb(e,t){To=du=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ab(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Nh(e,n)}}var mu={readContext:or,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},s_={readContext:or,useCallback:function(e,t){return Mr().memoizedState=[e,t===void 0?null:t],e},useContext:or,useEffect:Eg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ec(4194308,4,Jy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ec(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ec(4,2,e,t)},useMemo:function(e,t){var n=Mr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=n_.bind(null,Et,e),[r.memoizedState,e]},useRef:function(e){var t=Mr();return e={current:e},t.memoizedState=e},useState:Pg,useDebugValue:Wh,useDeferredValue:function(e){return Mr().memoizedState=e},useTransition:function(){var e=Pg(!1),t=e[0];return e=t_.bind(null,e[1]),Mr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Et,s=Mr();if(St){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=t(),Zt===null)throw Error(Ee(349));Ca&30||Vy(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Eg(Wy.bind(null,r,i,e),[e]),r.flags|=2048,il(9,Uy.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Mr(),t=Zt.identifierPrefix;if(St){var n=ts,r=es;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=sl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=e_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a_={readContext:or,useCallback:Zy,useContext:or,useEffect:Uh,useImperativeHandle:Xy,useInsertionEffect:Gy,useLayoutEffect:Qy,useMemo:eb,useReducer:nm,useRef:Ky,useState:function(){return nm(al)},useDebugValue:Wh,useDeferredValue:function(e){var t=lr();return tb(t,Kt.memoizedState,e)},useTransition:function(){var e=nm(al)[0],t=lr().memoizedState;return[e,t]},useMutableSource:Hy,useSyncExternalStore:By,useId:nb,unstable_isNewReconciler:!1},i_={readContext:or,useCallback:Zy,useContext:or,useEffect:Uh,useImperativeHandle:Xy,useInsertionEffect:Gy,useLayoutEffect:Qy,useMemo:eb,useReducer:rm,useRef:Ky,useState:function(){return rm(al)},useDebugValue:Wh,useDeferredValue:function(e){var t=lr();return Kt===null?t.memoizedState=e:tb(t,Kt.memoizedState,e)},useTransition:function(){var e=rm(al)[0],t=lr().memoizedState;return[e,t]},useMutableSource:Hy,useSyncExternalStore:By,useId:nb,unstable_isNewReconciler:!1};function hr(e,t){if(e&&e.defaultProps){t=Tt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Tt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var rd={isMounted:function(e){return(e=e._reactInternals)?Ra(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Nn(),s=Is(e),i=ns(r,s);i.payload=t,n!=null&&(i.callback=n),t=Ls(e,i,s),t!==null&&(yr(t,e,s,r),Cc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Nn(),s=Is(e),i=ns(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ls(e,i,s),t!==null&&(yr(t,e,s,r),Cc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nn(),r=Is(e),s=ns(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ls(e,s,r),t!==null&&(yr(t,e,r,n),Cc(t,e,r))}};function Mg(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Xo(n,r)||!Xo(s,i):!0}function ib(e,t,n){var r=!1,s=Ws,i=t.contextType;return typeof i=="object"&&i!==null?i=or(i):(s=Tn(t)?Sa:gn.current,r=t.contextTypes,i=(r=r!=null)?bi(e,s):Ws),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=rd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Tg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&rd.enqueueReplaceState(t,t.state,null)}function pf(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Rh(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=or(i):(i=Tn(t)?Sa:gn.current,s.context=bi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(hf(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&rd.enqueueReplaceState(s,s.state,null),cu(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function _i(e,t){try{var n="",r=t;do n+=Fj(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function sm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var o_=typeof WeakMap=="function"?WeakMap:Map;function ob(e,t,n){n=ns(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){hu||(hu=!0,Sf=r),gf(e,t)},n}function lb(e,t,n){n=ns(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){gf(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gf(e,t),typeof r!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Og(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new o_;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=w_.bind(null,e,t,n),t.then(e,e))}function Fg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ag(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ns(-1,1),t.tag=2,Ls(n,t,1))),n.lanes|=1),e)}var l_=hs.ReactCurrentOwner,En=!1;function vn(e,t,n,r){t.child=e===null?Ry(t,null,n,r):Ni(t,e.child,n,r)}function Lg(e,t,n,r,s){n=n.render;var i=t.ref;return di(t,s),r=Bh(e,t,n,r,i,s),n=Vh(),e!==null&&!En?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ds(e,t,s)):(St&&n&&Eh(t),t.flags|=1,vn(e,t,r,s),t.child)}function Rg(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Zh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,cb(e,t,i,r,s)):(e=Fc(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xo,n(o,r)&&e.ref===t.ref)return ds(e,t,s)}return t.flags|=1,e=$s(i,r),e.ref=t.ref,e.return=t,t.child=e}function cb(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Xo(i,r)&&e.ref===t.ref)if(En=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(En=!0);else return t.lanes=e.lanes,ds(e,t,s)}return xf(e,t,n,r,s)}function ub(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(ii,In),In|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wt(ii,In),In|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,wt(ii,In),In|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,wt(ii,In),In|=r;return vn(e,t,s,n),t.child}function db(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xf(e,t,n,r,s){var i=Tn(n)?Sa:gn.current;return i=bi(t,i),di(t,s),n=Bh(e,t,n,r,i,s),r=Vh(),e!==null&&!En?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ds(e,t,s)):(St&&r&&Eh(t),t.flags|=1,vn(e,t,n,s),t.child)}function Ig(e,t,n,r,s){if(Tn(n)){var i=!0;su(t)}else i=!1;if(di(t,s),t.stateNode===null)Mc(e,t),ib(t,n,r),pf(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=or(u):(u=Tn(n)?Sa:gn.current,u=bi(t,u));var m=n.getDerivedStateFromProps,h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Tg(t,o,r,u),js=!1;var f=t.memoizedState;o.state=f,cu(t,r,o,s),c=t.memoizedState,l!==r||f!==c||Mn.current||js?(typeof m=="function"&&(hf(t,n,m,r),c=t.memoizedState),(l=js||Mg(t,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,$y(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:hr(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=or(c):(c=Tn(n)?Sa:gn.current,c=bi(t,c));var b=n.getDerivedStateFromProps;(m=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Tg(t,o,r,c),js=!1,f=t.memoizedState,o.state=f,cu(t,r,o,s);var v=t.memoizedState;l!==h||f!==v||Mn.current||js?(typeof b=="function"&&(hf(t,n,b,r),v=t.memoizedState),(u=js||Mg(t,n,u,r,f,v,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return vf(e,t,n,r,i,s)}function vf(e,t,n,r,s,i){db(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&jg(t,n,!1),ds(e,t,i);r=t.stateNode,l_.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ni(t,e.child,null,i),t.child=Ni(t,null,l,i)):vn(e,t,l,i),t.memoizedState=r.state,s&&jg(t,n,!0),t.child}function mb(e){var t=e.stateNode;t.pendingContext?Ng(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ng(e,t.context,!1),Ih(e,t.containerInfo)}function $g(e,t,n,r,s){return wi(),Th(s),t.flags|=256,vn(e,t,n,r),t.child}var yf={dehydrated:null,treeContext:null,retryLane:0};function bf(e){return{baseLanes:e,cachePool:null,transitions:null}}function fb(e,t,n){var r=t.pendingProps,s=Ct.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),wt(Ct,s&1),e===null)return mf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=id(o,r,0,null),e=ba(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=bf(n),t.memoizedState=yf,e):Yh(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return c_(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=$s(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=$s(l,i):(i=ba(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?bf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=yf,r}return i=e.child,e=i.sibling,r=$s(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Yh(e,t){return t=id({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gl(e,t,n,r){return r!==null&&Th(r),Ni(t,e.child,null,n),e=Yh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function c_(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=sm(Error(Ee(422))),Gl(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=id({mode:"visible",children:r.children},s,0,null),i=ba(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ni(t,e.child,null,o),t.child.memoizedState=bf(o),t.memoizedState=yf,i);if(!(t.mode&1))return Gl(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Ee(419)),r=sm(i,r,void 0),Gl(e,t,o,r)}if(l=(o&e.childLanes)!==0,En||l){if(r=Zt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,us(e,s),yr(r,e,s,-1))}return Xh(),r=sm(Error(Ee(421))),Gl(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=N_.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,$n=As(s.nextSibling),zn=t,St=!0,gr=null,e!==null&&(er[tr++]=es,er[tr++]=ts,er[tr++]=Da,es=e.id,ts=e.overflow,Da=t),t=Yh(t,r.children),t.flags|=4096,t)}function zg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ff(e.return,t,n)}function am(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function hb(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(vn(e,t,r.children,n),r=Ct.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zg(e,n,t);else if(e.tag===19)zg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(wt(Ct,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&uu(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),am(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&uu(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}am(t,!0,n,null,i);break;case"together":am(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ds(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Pa|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ee(153));if(t.child!==null){for(e=t.child,n=$s(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=$s(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function u_(e,t,n){switch(t.tag){case 3:mb(t),wi();break;case 5:zy(t);break;case 1:Tn(t.type)&&su(t);break;case 4:Ih(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;wt(ou,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(wt(Ct,Ct.current&1),t.flags|=128,null):n&t.child.childLanes?fb(e,t,n):(wt(Ct,Ct.current&1),e=ds(e,t,n),e!==null?e.sibling:null);wt(Ct,Ct.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return hb(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),wt(Ct,Ct.current),r)break;return null;case 22:case 23:return t.lanes=0,ub(e,t,n)}return ds(e,t,n)}var pb,wf,gb,xb;pb=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wf=function(){};gb=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,da(Br.current);var i=null;switch(n){case"input":s=Bm(e,s),r=Bm(e,r),i=[];break;case"select":s=Tt({},s,{value:void 0}),r=Tt({},r,{value:void 0}),i=[];break;case"textarea":s=Wm(e,s),r=Wm(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=nu)}qm(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&jt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};xb=function(e,t,n,r){n!==r&&(t.flags|=4)};function Zi(e,t){if(!St)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function un(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function d_(e,t,n){var r=t.pendingProps;switch(Mh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(t),null;case 1:return Tn(t.type)&&ru(),un(t),null;case 3:return r=t.stateNode,ji(),kt(Mn),kt(gn),zh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ql(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gr!==null&&(Pf(gr),gr=null))),wf(e,t),un(t),null;case 5:$h(t);var s=da(rl.current);if(n=t.type,e!==null&&t.stateNode!=null)gb(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ee(166));return un(t),null}if(e=da(Br.current),ql(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Ar]=t,r[tl]=i,e=(t.mode&1)!==0,n){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(s=0;s<vo.length;s++)jt(vo[s],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":Gp(r,i),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},jt("invalid",r);break;case"textarea":Jp(r,i),jt("invalid",r)}qm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Yl(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Yl(r.textContent,l,e),s=["children",""+l]):Wo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&jt("scroll",r)}switch(n){case"input":Il(r),Qp(r,i,!0);break;case"textarea":Il(r),Xp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=nu)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Wv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ar]=t,e[tl]=r,pb(e,t,!1,!1),t.stateNode=e;e:{switch(o=Km(n,r),n){case"dialog":jt("cancel",e),jt("close",e),s=r;break;case"iframe":case"object":case"embed":jt("load",e),s=r;break;case"video":case"audio":for(s=0;s<vo.length;s++)jt(vo[s],e);s=r;break;case"source":jt("error",e),s=r;break;case"img":case"image":case"link":jt("error",e),jt("load",e),s=r;break;case"details":jt("toggle",e),s=r;break;case"input":Gp(e,r),s=Bm(e,r),jt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Tt({},r,{value:void 0}),jt("invalid",e);break;case"textarea":Jp(e,r),s=Wm(e,r),jt("invalid",e);break;default:s=r}qm(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Kv(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Yv(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Yo(e,c):typeof c=="number"&&Yo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&jt("scroll",e):c!=null&&gh(e,i,c,o))}switch(n){case"input":Il(e),Qp(e,r,!1);break;case"textarea":Il(e),Xp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Us(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?oi(e,!!r.multiple,i,!1):r.defaultValue!=null&&oi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=nu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return un(t),null;case 6:if(e&&t.stateNode!=null)xb(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ee(166));if(n=da(rl.current),da(Br.current),ql(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ar]=t,(i=r.nodeValue!==n)&&(e=zn,e!==null))switch(e.tag){case 3:Yl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Yl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ar]=t,t.stateNode=r}return un(t),null;case 13:if(kt(Ct),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(St&&$n!==null&&t.mode&1&&!(t.flags&128))Ay(),wi(),t.flags|=98560,i=!1;else if(i=ql(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Ee(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ee(317));i[Ar]=t}else wi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;un(t),i=!1}else gr!==null&&(Pf(gr),gr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ct.current&1?Gt===0&&(Gt=3):Xh())),t.updateQueue!==null&&(t.flags|=4),un(t),null);case 4:return ji(),wf(e,t),e===null&&Zo(t.stateNode.containerInfo),un(t),null;case 10:return Ah(t.type._context),un(t),null;case 17:return Tn(t.type)&&ru(),un(t),null;case 19:if(kt(Ct),i=t.memoizedState,i===null)return un(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Zi(i,!1);else{if(Gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=uu(e),o!==null){for(t.flags|=128,Zi(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return wt(Ct,Ct.current&1|2),t.child}e=e.sibling}i.tail!==null&&Rt()>ki&&(t.flags|=128,r=!0,Zi(i,!1),t.lanes=4194304)}else{if(!r)if(e=uu(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!St)return un(t),null}else 2*Rt()-i.renderingStartTime>ki&&n!==1073741824&&(t.flags|=128,r=!0,Zi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Rt(),t.sibling=null,n=Ct.current,wt(Ct,r?n&1|2:n&1),t):(un(t),null);case 22:case 23:return Jh(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?In&1073741824&&(un(t),t.subtreeFlags&6&&(t.flags|=8192)):un(t),null;case 24:return null;case 25:return null}throw Error(Ee(156,t.tag))}function m_(e,t){switch(Mh(t),t.tag){case 1:return Tn(t.type)&&ru(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ji(),kt(Mn),kt(gn),zh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $h(t),null;case 13:if(kt(Ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ee(340));wi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return kt(Ct),null;case 4:return ji(),null;case 10:return Ah(t.type._context),null;case 22:case 23:return Jh(),null;case 24:return null;default:return null}}var Ql=!1,mn=!1,f_=typeof WeakSet=="function"?WeakSet:Set,Re=null;function ai(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ot(e,t,r)}else n.current=null}function Nf(e,t,n){try{n()}catch(r){Ot(e,t,r)}}var Hg=!1;function h_(e,t){if(sf=Zc,e=Ny(),Ph(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,m=0,h=e,f=null;t:for(;;){for(var b;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(b=h.firstChild)!==null;)f=h,h=b;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===i&&++m===r&&(c=o),(b=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=b}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(af={focusedElem:e,selectionRange:n},Zc=!1,Re=t;Re!==null;)if(t=Re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Re=e;else for(;Re!==null;){t=Re;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var D=v.memoizedProps,p=v.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?D:hr(t.type,D),p);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(j){Ot(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Re=e;break}Re=t.return}return v=Hg,Hg=!1,v}function Oo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Nf(t,n,i)}s=s.next}while(s!==r)}}function sd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vb(e){var t=e.alternate;t!==null&&(e.alternate=null,vb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ar],delete t[tl],delete t[cf],delete t[Q1],delete t[J1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yb(e){return e.tag===5||e.tag===3||e.tag===4}function Bg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _f(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=nu));else if(r!==4&&(e=e.child,e!==null))for(_f(e,t,n),e=e.sibling;e!==null;)_f(e,t,n),e=e.sibling}function kf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(kf(e,t,n),e=e.sibling;e!==null;)kf(e,t,n),e=e.sibling}var sn=null,pr=!1;function vs(e,t,n){for(n=n.child;n!==null;)bb(e,t,n),n=n.sibling}function bb(e,t,n){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(Qu,n)}catch{}switch(n.tag){case 5:mn||ai(n,t);case 6:var r=sn,s=pr;sn=null,vs(e,t,n),sn=r,pr=s,sn!==null&&(pr?(e=sn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):sn.removeChild(n.stateNode));break;case 18:sn!==null&&(pr?(e=sn,n=n.stateNode,e.nodeType===8?Xd(e.parentNode,n):e.nodeType===1&&Xd(e,n),Qo(e)):Xd(sn,n.stateNode));break;case 4:r=sn,s=pr,sn=n.stateNode.containerInfo,pr=!0,vs(e,t,n),sn=r,pr=s;break;case 0:case 11:case 14:case 15:if(!mn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Nf(n,t,o),s=s.next}while(s!==r)}vs(e,t,n);break;case 1:if(!mn&&(ai(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ot(n,t,l)}vs(e,t,n);break;case 21:vs(e,t,n);break;case 22:n.mode&1?(mn=(r=mn)||n.memoizedState!==null,vs(e,t,n),mn=r):vs(e,t,n);break;default:vs(e,t,n)}}function Vg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new f_),t.forEach(function(r){var s=j_.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function mr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:sn=l.stateNode,pr=!1;break e;case 3:sn=l.stateNode.containerInfo,pr=!0;break e;case 4:sn=l.stateNode.containerInfo,pr=!0;break e}l=l.return}if(sn===null)throw Error(Ee(160));bb(i,o,s),sn=null,pr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ot(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wb(t,e),t=t.sibling}function wb(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mr(t,e),Dr(e),r&4){try{Oo(3,e,e.return),sd(3,e)}catch(D){Ot(e,e.return,D)}try{Oo(5,e,e.return)}catch(D){Ot(e,e.return,D)}}break;case 1:mr(t,e),Dr(e),r&512&&n!==null&&ai(n,n.return);break;case 5:if(mr(t,e),Dr(e),r&512&&n!==null&&ai(n,n.return),e.flags&32){var s=e.stateNode;try{Yo(s,"")}catch(D){Ot(e,e.return,D)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Vv(s,i),Km(l,o);var u=Km(l,i);for(o=0;o<c.length;o+=2){var m=c[o],h=c[o+1];m==="style"?Kv(s,h):m==="dangerouslySetInnerHTML"?Yv(s,h):m==="children"?Yo(s,h):gh(s,m,h,u)}switch(l){case"input":Vm(s,i);break;case"textarea":Uv(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?oi(s,!!i.multiple,b,!1):f!==!!i.multiple&&(i.defaultValue!=null?oi(s,!!i.multiple,i.defaultValue,!0):oi(s,!!i.multiple,i.multiple?[]:"",!1))}s[tl]=i}catch(D){Ot(e,e.return,D)}}break;case 6:if(mr(t,e),Dr(e),r&4){if(e.stateNode===null)throw Error(Ee(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(D){Ot(e,e.return,D)}}break;case 3:if(mr(t,e),Dr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qo(t.containerInfo)}catch(D){Ot(e,e.return,D)}break;case 4:mr(t,e),Dr(e);break;case 13:mr(t,e),Dr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Gh=Rt())),r&4&&Vg(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(mn=(u=mn)||m,mr(t,e),mn=u):mr(t,e),Dr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!m&&e.mode&1)for(Re=e,m=e.child;m!==null;){for(h=Re=m;Re!==null;){switch(f=Re,b=f.child,f.tag){case 0:case 11:case 14:case 15:Oo(4,f,f.return);break;case 1:ai(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(D){Ot(r,n,D)}}break;case 5:ai(f,f.return);break;case 22:if(f.memoizedState!==null){Wg(h);continue}}b!==null?(b.return=f,Re=b):Wg(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=qv("display",o))}catch(D){Ot(e,e.return,D)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(D){Ot(e,e.return,D)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mr(t,e),Dr(e),r&4&&Vg(e);break;case 21:break;default:mr(t,e),Dr(e)}}function Dr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(yb(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Yo(s,""),r.flags&=-33);var i=Bg(e);kf(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Bg(e);_f(e,l,o);break;default:throw Error(Ee(161))}}catch(c){Ot(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function p_(e,t,n){Re=e,Nb(e)}function Nb(e,t,n){for(var r=(e.mode&1)!==0;Re!==null;){var s=Re,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ql;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||mn;l=Ql;var u=mn;if(Ql=o,(mn=c)&&!u)for(Re=s;Re!==null;)o=Re,c=o.child,o.tag===22&&o.memoizedState!==null?Yg(s):c!==null?(c.return=o,Re=c):Yg(s);for(;i!==null;)Re=i,Nb(i),i=i.sibling;Re=s,Ql=l,mn=u}Ug(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Re=i):Ug(e)}}function Ug(e){for(;Re!==null;){var t=Re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mn||sd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!mn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:hr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Cg(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cg(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var m=u.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&Qo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}mn||t.flags&512&&jf(t)}catch(f){Ot(t,t.return,f)}}if(t===e){Re=null;break}if(n=t.sibling,n!==null){n.return=t.return,Re=n;break}Re=t.return}}function Wg(e){for(;Re!==null;){var t=Re;if(t===e){Re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Re=n;break}Re=t.return}}function Yg(e){for(;Re!==null;){var t=Re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sd(4,t)}catch(c){Ot(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ot(t,s,c)}}var i=t.return;try{jf(t)}catch(c){Ot(t,i,c)}break;case 5:var o=t.return;try{jf(t)}catch(c){Ot(t,o,c)}}}catch(c){Ot(t,t.return,c)}if(t===e){Re=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Re=l;break}Re=t.return}}var g_=Math.ceil,fu=hs.ReactCurrentDispatcher,qh=hs.ReactCurrentOwner,ir=hs.ReactCurrentBatchConfig,ut=0,Zt=null,Ut=null,on=0,In=0,ii=Qs(0),Gt=0,ol=null,Pa=0,ad=0,Kh=0,Fo=null,Cn=null,Gh=0,ki=1/0,Jr=null,hu=!1,Sf=null,Rs=null,Jl=!1,Cs=null,pu=0,Ao=0,Df=null,Tc=-1,Oc=0;function Nn(){return ut&6?Rt():Tc!==-1?Tc:Tc=Rt()}function Is(e){return e.mode&1?ut&2&&on!==0?on&-on:Z1.transition!==null?(Oc===0&&(Oc=iy()),Oc):(e=yt,e!==0||(e=window.event,e=e===void 0?16:fy(e.type)),e):1}function yr(e,t,n,r){if(50<Ao)throw Ao=0,Df=null,Error(Ee(185));wl(e,n,r),(!(ut&2)||e!==Zt)&&(e===Zt&&(!(ut&2)&&(ad|=n),Gt===4&&ks(e,on)),On(e,r),n===1&&ut===0&&!(t.mode&1)&&(ki=Rt()+500,td&&Js()))}function On(e,t){var n=e.callbackNode;Zj(e,t);var r=Xc(e,e===Zt?on:0);if(r===0)n!==null&&tg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&tg(n),t===1)e.tag===0?X1(qg.bind(null,e)):Ty(qg.bind(null,e)),K1(function(){!(ut&6)&&Js()}),n=null;else{switch(oy(r)){case 1:n=wh;break;case 4:n=sy;break;case 16:n=Jc;break;case 536870912:n=ay;break;default:n=Jc}n=Eb(n,jb.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function jb(e,t){if(Tc=-1,Oc=0,ut&6)throw Error(Ee(327));var n=e.callbackNode;if(mi()&&e.callbackNode!==n)return null;var r=Xc(e,e===Zt?on:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=gu(e,r);else{t=r;var s=ut;ut|=2;var i=kb();(Zt!==e||on!==t)&&(Jr=null,ki=Rt()+500,ya(e,t));do try{y_();break}catch(l){_b(e,l)}while(!0);Fh(),fu.current=i,ut=s,Ut!==null?t=0:(Zt=null,on=0,t=Gt)}if(t!==0){if(t===2&&(s=Zm(e),s!==0&&(r=s,t=Cf(e,s))),t===1)throw n=ol,ya(e,0),ks(e,r),On(e,Rt()),n;if(t===6)ks(e,r);else{if(s=e.current.alternate,!(r&30)&&!x_(s)&&(t=gu(e,r),t===2&&(i=Zm(e),i!==0&&(r=i,t=Cf(e,i))),t===1))throw n=ol,ya(e,0),ks(e,r),On(e,Rt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Ee(345));case 2:sa(e,Cn,Jr);break;case 3:if(ks(e,r),(r&130023424)===r&&(t=Gh+500-Rt(),10<t)){if(Xc(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Nn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=lf(sa.bind(null,e,Cn,Jr),t);break}sa(e,Cn,Jr);break;case 4:if(ks(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-vr(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*g_(r/1960))-r,10<r){e.timeoutHandle=lf(sa.bind(null,e,Cn,Jr),r);break}sa(e,Cn,Jr);break;case 5:sa(e,Cn,Jr);break;default:throw Error(Ee(329))}}}return On(e,Rt()),e.callbackNode===n?jb.bind(null,e):null}function Cf(e,t){var n=Fo;return e.current.memoizedState.isDehydrated&&(ya(e,t).flags|=256),e=gu(e,t),e!==2&&(t=Cn,Cn=n,t!==null&&Pf(t)),e}function Pf(e){Cn===null?Cn=e:Cn.push.apply(Cn,e)}function x_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wr(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ks(e,t){for(t&=~Kh,t&=~ad,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vr(t),r=1<<n;e[n]=-1,t&=~r}}function qg(e){if(ut&6)throw Error(Ee(327));mi();var t=Xc(e,0);if(!(t&1))return On(e,Rt()),null;var n=gu(e,t);if(e.tag!==0&&n===2){var r=Zm(e);r!==0&&(t=r,n=Cf(e,r))}if(n===1)throw n=ol,ya(e,0),ks(e,t),On(e,Rt()),n;if(n===6)throw Error(Ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sa(e,Cn,Jr),On(e,Rt()),null}function Qh(e,t){var n=ut;ut|=1;try{return e(t)}finally{ut=n,ut===0&&(ki=Rt()+500,td&&Js())}}function Ea(e){Cs!==null&&Cs.tag===0&&!(ut&6)&&mi();var t=ut;ut|=1;var n=ir.transition,r=yt;try{if(ir.transition=null,yt=1,e)return e()}finally{yt=r,ir.transition=n,ut=t,!(ut&6)&&Js()}}function Jh(){In=ii.current,kt(ii)}function ya(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,q1(n)),Ut!==null)for(n=Ut.return;n!==null;){var r=n;switch(Mh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ru();break;case 3:ji(),kt(Mn),kt(gn),zh();break;case 5:$h(r);break;case 4:ji();break;case 13:kt(Ct);break;case 19:kt(Ct);break;case 10:Ah(r.type._context);break;case 22:case 23:Jh()}n=n.return}if(Zt=e,Ut=e=$s(e.current,null),on=In=t,Gt=0,ol=null,Kh=ad=Pa=0,Cn=Fo=null,ua!==null){for(t=0;t<ua.length;t++)if(n=ua[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ua=null}return e}function _b(e,t){do{var n=Ut;try{if(Fh(),Pc.current=mu,du){for(var r=Et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}du=!1}if(Ca=0,Jt=Kt=Et=null,To=!1,sl=0,qh.current=null,n===null||n.return===null){Gt=1,ol=t,Ut=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=on,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,m=l,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var f=m.alternate;f?(m.updateQueue=f.updateQueue,m.memoizedState=f.memoizedState,m.lanes=f.lanes):(m.updateQueue=null,m.memoizedState=null)}var b=Fg(o);if(b!==null){b.flags&=-257,Ag(b,o,l,i,t),b.mode&1&&Og(i,u,t),t=b,c=u;var v=t.updateQueue;if(v===null){var D=new Set;D.add(c),t.updateQueue=D}else v.add(c);break e}else{if(!(t&1)){Og(i,u,t),Xh();break e}c=Error(Ee(426))}}else if(St&&l.mode&1){var p=Fg(o);if(p!==null){!(p.flags&65536)&&(p.flags|=256),Ag(p,o,l,i,t),Th(_i(c,l));break e}}i=c=_i(c,l),Gt!==4&&(Gt=2),Fo===null?Fo=[i]:Fo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=ob(i,c,t);Dg(i,y);break e;case 1:l=c;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Rs===null||!Rs.has(S)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=lb(i,l,t);Dg(i,j);break e}}i=i.return}while(i!==null)}Db(n)}catch(F){t=F,Ut===n&&n!==null&&(Ut=n=n.return);continue}break}while(!0)}function kb(){var e=fu.current;return fu.current=mu,e===null?mu:e}function Xh(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),Zt===null||!(Pa&268435455)&&!(ad&268435455)||ks(Zt,on)}function gu(e,t){var n=ut;ut|=2;var r=kb();(Zt!==e||on!==t)&&(Jr=null,ya(e,t));do try{v_();break}catch(s){_b(e,s)}while(!0);if(Fh(),ut=n,fu.current=r,Ut!==null)throw Error(Ee(261));return Zt=null,on=0,Gt}function v_(){for(;Ut!==null;)Sb(Ut)}function y_(){for(;Ut!==null&&!Uj();)Sb(Ut)}function Sb(e){var t=Pb(e.alternate,e,In);e.memoizedProps=e.pendingProps,t===null?Db(e):Ut=t,qh.current=null}function Db(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=m_(n,t),n!==null){n.flags&=32767,Ut=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Gt=6,Ut=null;return}}else if(n=d_(n,t,In),n!==null){Ut=n;return}if(t=t.sibling,t!==null){Ut=t;return}Ut=t=e}while(t!==null);Gt===0&&(Gt=5)}function sa(e,t,n){var r=yt,s=ir.transition;try{ir.transition=null,yt=1,b_(e,t,n,r)}finally{ir.transition=s,yt=r}return null}function b_(e,t,n,r){do mi();while(Cs!==null);if(ut&6)throw Error(Ee(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ee(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(e1(e,i),e===Zt&&(Ut=Zt=null,on=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jl||(Jl=!0,Eb(Jc,function(){return mi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ir.transition,ir.transition=null;var o=yt;yt=1;var l=ut;ut|=4,qh.current=null,h_(e,n),wb(n,e),z1(af),Zc=!!sf,af=sf=null,e.current=n,p_(n),Wj(),ut=l,yt=o,ir.transition=i}else e.current=n;if(Jl&&(Jl=!1,Cs=e,pu=s),i=e.pendingLanes,i===0&&(Rs=null),Kj(n.stateNode),On(e,Rt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(hu)throw hu=!1,e=Sf,Sf=null,e;return pu&1&&e.tag!==0&&mi(),i=e.pendingLanes,i&1?e===Df?Ao++:(Ao=0,Df=e):Ao=0,Js(),null}function mi(){if(Cs!==null){var e=oy(pu),t=ir.transition,n=yt;try{if(ir.transition=null,yt=16>e?16:e,Cs===null)var r=!1;else{if(e=Cs,Cs=null,pu=0,ut&6)throw Error(Ee(331));var s=ut;for(ut|=4,Re=e.current;Re!==null;){var i=Re,o=i.child;if(Re.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Re=u;Re!==null;){var m=Re;switch(m.tag){case 0:case 11:case 15:Oo(8,m,i)}var h=m.child;if(h!==null)h.return=m,Re=h;else for(;Re!==null;){m=Re;var f=m.sibling,b=m.return;if(vb(m),m===u){Re=null;break}if(f!==null){f.return=b,Re=f;break}Re=b}}}var v=i.alternate;if(v!==null){var D=v.child;if(D!==null){v.child=null;do{var p=D.sibling;D.sibling=null,D=p}while(D!==null)}}Re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Re=o;else e:for(;Re!==null;){if(i=Re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oo(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Re=y;break e}Re=i.return}}var w=e.current;for(Re=w;Re!==null;){o=Re;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Re=S;else e:for(o=w;Re!==null;){if(l=Re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:sd(9,l)}}catch(F){Ot(l,l.return,F)}if(l===o){Re=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Re=j;break e}Re=l.return}}if(ut=s,Js(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(Qu,e)}catch{}r=!0}return r}finally{yt=n,ir.transition=t}}return!1}function Kg(e,t,n){t=_i(n,t),t=ob(e,t,1),e=Ls(e,t,1),t=Nn(),e!==null&&(wl(e,1,t),On(e,t))}function Ot(e,t,n){if(e.tag===3)Kg(e,e,n);else for(;t!==null;){if(t.tag===3){Kg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Rs===null||!Rs.has(r))){e=_i(n,e),e=lb(t,e,1),t=Ls(t,e,1),e=Nn(),t!==null&&(wl(t,1,e),On(t,e));break}}t=t.return}}function w_(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Nn(),e.pingedLanes|=e.suspendedLanes&n,Zt===e&&(on&n)===n&&(Gt===4||Gt===3&&(on&130023424)===on&&500>Rt()-Gh?ya(e,0):Kh|=n),On(e,t)}function Cb(e,t){t===0&&(e.mode&1?(t=Hl,Hl<<=1,!(Hl&130023424)&&(Hl=4194304)):t=1);var n=Nn();e=us(e,t),e!==null&&(wl(e,t,n),On(e,n))}function N_(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Cb(e,n)}function j_(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(t),Cb(e,n)}var Pb;Pb=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mn.current)En=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return En=!1,u_(e,t,n);En=!!(e.flags&131072)}else En=!1,St&&t.flags&1048576&&Oy(t,iu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Mc(e,t),e=t.pendingProps;var s=bi(t,gn.current);di(t,n),s=Bh(null,t,r,e,s,n);var i=Vh();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Tn(r)?(i=!0,su(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rh(t),s.updater=rd,t.stateNode=s,s._reactInternals=t,pf(t,r,e,n),t=vf(null,t,r,!0,i,n)):(t.tag=0,St&&i&&Eh(t),vn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Mc(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=k_(r),e=hr(r,e),s){case 0:t=xf(null,t,r,e,n);break e;case 1:t=Ig(null,t,r,e,n);break e;case 11:t=Lg(null,t,r,e,n);break e;case 14:t=Rg(null,t,r,hr(r.type,e),n);break e}throw Error(Ee(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:hr(r,s),xf(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:hr(r,s),Ig(e,t,r,s,n);case 3:e:{if(mb(t),e===null)throw Error(Ee(387));r=t.pendingProps,i=t.memoizedState,s=i.element,$y(e,t),cu(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=_i(Error(Ee(423)),t),t=$g(e,t,r,n,s);break e}else if(r!==s){s=_i(Error(Ee(424)),t),t=$g(e,t,r,n,s);break e}else for($n=As(t.stateNode.containerInfo.firstChild),zn=t,St=!0,gr=null,n=Ry(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wi(),r===s){t=ds(e,t,n);break e}vn(e,t,r,n)}t=t.child}return t;case 5:return zy(t),e===null&&mf(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,of(r,s)?o=null:i!==null&&of(r,i)&&(t.flags|=32),db(e,t),vn(e,t,o,n),t.child;case 6:return e===null&&mf(t),null;case 13:return fb(e,t,n);case 4:return Ih(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ni(t,null,r,n):vn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:hr(r,s),Lg(e,t,r,s,n);case 7:return vn(e,t,t.pendingProps,n),t.child;case 8:return vn(e,t,t.pendingProps.children,n),t.child;case 12:return vn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,wt(ou,r._currentValue),r._currentValue=o,i!==null)if(wr(i.value,o)){if(i.children===s.children&&!Mn.current){t=ds(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ns(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var m=u.pending;m===null?c.next=c:(c.next=m.next,m.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ff(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ee(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ff(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,di(t,n),s=or(s),r=r(s),t.flags|=1,vn(e,t,r,n),t.child;case 14:return r=t.type,s=hr(r,t.pendingProps),s=hr(r.type,s),Rg(e,t,r,s,n);case 15:return cb(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:hr(r,s),Mc(e,t),t.tag=1,Tn(r)?(e=!0,su(t)):e=!1,di(t,n),ib(t,r,s),pf(t,r,s,n),vf(null,t,r,!0,e,n);case 19:return hb(e,t,n);case 22:return ub(e,t,n)}throw Error(Ee(156,t.tag))};function Eb(e,t){return ry(e,t)}function __(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(e,t,n,r){return new __(e,t,n,r)}function Zh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function k_(e){if(typeof e=="function")return Zh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vh)return 11;if(e===yh)return 14}return 2}function $s(e,t){var n=e.alternate;return n===null?(n=rr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Zh(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Qa:return ba(n.children,s,i,t);case xh:o=8,s|=8;break;case Im:return e=rr(12,n,t,s|2),e.elementType=Im,e.lanes=i,e;case $m:return e=rr(13,n,t,s),e.elementType=$m,e.lanes=i,e;case zm:return e=rr(19,n,t,s),e.elementType=zm,e.lanes=i,e;case zv:return id(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Iv:o=10;break e;case $v:o=9;break e;case vh:o=11;break e;case yh:o=14;break e;case Ns:o=16,r=null;break e}throw Error(Ee(130,e==null?e:typeof e,""))}return t=rr(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function ba(e,t,n,r){return e=rr(7,e,r,t),e.lanes=n,e}function id(e,t,n,r){return e=rr(22,e,r,t),e.elementType=zv,e.lanes=n,e.stateNode={isHidden:!1},e}function im(e,t,n){return e=rr(6,e,null,t),e.lanes=n,e}function om(e,t,n){return t=rr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function S_(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hd(0),this.expirationTimes=Hd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ep(e,t,n,r,s,i,o,l,c){return e=new S_(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=rr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rh(i),e}function D_(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ga,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Mb(e){if(!e)return Ws;e=e._reactInternals;e:{if(Ra(e)!==e||e.tag!==1)throw Error(Ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Tn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ee(171))}if(e.tag===1){var n=e.type;if(Tn(n))return My(e,n,t)}return t}function Tb(e,t,n,r,s,i,o,l,c){return e=ep(n,r,!0,e,s,i,o,l,c),e.context=Mb(null),n=e.current,r=Nn(),s=Is(n),i=ns(r,s),i.callback=t??null,Ls(n,i,s),e.current.lanes=s,wl(e,s,r),On(e,r),e}function od(e,t,n,r){var s=t.current,i=Nn(),o=Is(s);return n=Mb(n),t.context===null?t.context=n:t.pendingContext=n,t=ns(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ls(s,t,o),e!==null&&(yr(e,s,o,i),Cc(e,s,o)),o}function xu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function tp(e,t){Gg(e,t),(e=e.alternate)&&Gg(e,t)}function C_(){return null}var Ob=typeof reportError=="function"?reportError:function(e){console.error(e)};function np(e){this._internalRoot=e}ld.prototype.render=np.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ee(409));od(e,t,null,null)};ld.prototype.unmount=np.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ea(function(){od(null,e,null,null)}),t[cs]=null}};function ld(e){this._internalRoot=e}ld.prototype.unstable_scheduleHydration=function(e){if(e){var t=uy();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_s.length&&t!==0&&t<_s[n].priority;n++);_s.splice(n,0,e),n===0&&my(e)}};function rp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qg(){}function P_(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=xu(o);i.call(u)}}var o=Tb(t,r,e,0,null,!1,!1,"",Qg);return e._reactRootContainer=o,e[cs]=o.current,Zo(e.nodeType===8?e.parentNode:e),Ea(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=xu(c);l.call(u)}}var c=ep(e,0,!1,null,null,!1,!1,"",Qg);return e._reactRootContainer=c,e[cs]=c.current,Zo(e.nodeType===8?e.parentNode:e),Ea(function(){od(t,c,n,r)}),c}function ud(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=xu(o);l.call(c)}}od(t,o,e,s)}else o=P_(n,t,e,s,r);return xu(o)}ly=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xo(t.pendingLanes);n!==0&&(Nh(t,n|1),On(t,Rt()),!(ut&6)&&(ki=Rt()+500,Js()))}break;case 13:Ea(function(){var r=us(e,1);if(r!==null){var s=Nn();yr(r,e,1,s)}}),tp(e,1)}};jh=function(e){if(e.tag===13){var t=us(e,134217728);if(t!==null){var n=Nn();yr(t,e,134217728,n)}tp(e,134217728)}};cy=function(e){if(e.tag===13){var t=Is(e),n=us(e,t);if(n!==null){var r=Nn();yr(n,e,t,r)}tp(e,t)}};uy=function(){return yt};dy=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}};Qm=function(e,t,n){switch(t){case"input":if(Vm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ed(r);if(!s)throw Error(Ee(90));Bv(r),Vm(r,s)}}}break;case"textarea":Uv(e,n);break;case"select":t=n.value,t!=null&&oi(e,!!n.multiple,t,!1)}};Jv=Qh;Xv=Ea;var E_={usingClientEntryPoint:!1,Events:[jl,ei,ed,Gv,Qv,Qh]},eo={findFiberByHostInstance:ca,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M_={bundleType:eo.bundleType,version:eo.version,rendererPackageName:eo.rendererPackageName,rendererConfig:eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ty(e),e===null?null:e.stateNode},findFiberByHostInstance:eo.findFiberByHostInstance||C_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{Qu=Xl.inject(M_),Hr=Xl}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E_;Vn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rp(t))throw Error(Ee(200));return D_(e,t,null,n)};Vn.createRoot=function(e,t){if(!rp(e))throw Error(Ee(299));var n=!1,r="",s=Ob;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ep(e,1,!1,null,null,n,!1,r,s),e[cs]=t.current,Zo(e.nodeType===8?e.parentNode:e),new np(t)};Vn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ee(188)):(e=Object.keys(e).join(","),Error(Ee(268,e)));return e=ty(t),e=e===null?null:e.stateNode,e};Vn.flushSync=function(e){return Ea(e)};Vn.hydrate=function(e,t,n){if(!cd(t))throw Error(Ee(200));return ud(null,e,t,!0,n)};Vn.hydrateRoot=function(e,t,n){if(!rp(e))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Ob;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Tb(t,null,e,1,n??null,s,!1,i,o),e[cs]=t.current,Zo(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ld(t)};Vn.render=function(e,t,n){if(!cd(t))throw Error(Ee(200));return ud(null,e,t,!1,n)};Vn.unmountComponentAtNode=function(e){if(!cd(e))throw Error(Ee(40));return e._reactRootContainer?(Ea(function(){ud(null,null,e,!1,function(){e._reactRootContainer=null,e[cs]=null})}),!0):!1};Vn.unstable_batchedUpdates=Qh;Vn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!cd(n))throw Error(Ee(200));if(e==null||e._reactInternals===void 0)throw Error(Ee(38));return ud(e,t,n,!1,r)};Vn.version="18.3.1-next-f1338f8080-20240426";function Fb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fb)}catch(e){console.error(e)}}Fb(),Fv.exports=Vn;var sp=Fv.exports;const T_=lh(sp);var Ab,Jg=sp;Ab=Jg.createRoot,Jg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ll.apply(this,arguments)}var Ps;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ps||(Ps={}));const Xg="popstate";function O_(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:o,hash:l}=r.location;return Ef("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:vu(s)}return A_(t,n,null,e)}function Mt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Lb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function F_(){return Math.random().toString(36).substr(2,8)}function Zg(e,t){return{usr:e.state,key:e.key,idx:t}}function Ef(e,t,n,r){return n===void 0&&(n=null),ll({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?zi(t):t,{state:n,key:t&&t.key||r||F_()})}function vu(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function zi(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function A_(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Ps.Pop,c=null,u=m();u==null&&(u=0,o.replaceState(ll({},o.state,{idx:u}),""));function m(){return(o.state||{idx:null}).idx}function h(){l=Ps.Pop;let p=m(),y=p==null?null:p-u;u=p,c&&c({action:l,location:D.location,delta:y})}function f(p,y){l=Ps.Push;let w=Ef(D.location,p,y);u=m()+1;let S=Zg(w,u),j=D.createHref(w);try{o.pushState(S,"",j)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(j)}i&&c&&c({action:l,location:D.location,delta:1})}function b(p,y){l=Ps.Replace;let w=Ef(D.location,p,y);u=m();let S=Zg(w,u),j=D.createHref(w);o.replaceState(S,"",j),i&&c&&c({action:l,location:D.location,delta:0})}function v(p){let y=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof p=="string"?p:vu(p);return w=w.replace(/ $/,"%20"),Mt(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let D={get action(){return l},get location(){return e(s,o)},listen(p){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Xg,h),c=p,()=>{s.removeEventListener(Xg,h),c=null}},createHref(p){return t(s,p)},createURL:v,encodeLocation(p){let y=v(p);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:b,go(p){return o.go(p)}};return D}var ex;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ex||(ex={}));function L_(e,t,n){return n===void 0&&(n="/"),R_(e,t,n)}function R_(e,t,n,r){let s=typeof t=="string"?zi(t):t,i=Si(s.pathname||"/",n);if(i==null)return null;let o=Rb(e);I_(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=G_(i);l=q_(o[c],u)}return l}function Rb(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Mt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=zs([r,c.relativePath]),m=n.concat(c);i.children&&i.children.length>0&&(Mt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Rb(i.children,t,m,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:W_(u,i.index),routesMeta:m})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Ib(i.path))s(i,o,c)}),t}function Ib(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Ib(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function I_(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Y_(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $_=/^:[\w-]+$/,z_=3,H_=2,B_=1,V_=10,U_=-2,tx=e=>e==="*";function W_(e,t){let n=e.split("/"),r=n.length;return n.some(tx)&&(r+=U_),t&&(r+=H_),n.filter(s=>!tx(s)).reduce((s,i)=>s+($_.test(i)?z_:i===""?B_:V_),r)}function Y_(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function q_(e,t,n){let{routesMeta:r}=e,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,m=i==="/"?t:t.slice(i.length)||"/",h=Mf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},m),f=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:zs([i,h.pathname]),pathnameBase:Z_(zs([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=zs([i,h.pathnameBase]))}return o}function Mf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=K_(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,m,h)=>{let{paramName:f,isOptional:b}=m;if(f==="*"){let D=l[h]||"";o=i.slice(0,i.length-D.length).replace(/(.)\/+$/,"$1")}const v=l[h];return b&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function K_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Lb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function G_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Lb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Si(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Q_(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?zi(e):e;return{pathname:n?n.startsWith("/")?n:J_(n,t):t,search:ek(r),hash:tk(s)}}function J_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function lm(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function X_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ap(e,t){let n=X_(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ip(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=zi(e):(s=ll({},e),Mt(!s.pathname||!s.pathname.includes("?"),lm("?","pathname","search",s)),Mt(!s.pathname||!s.pathname.includes("#"),lm("#","pathname","hash",s)),Mt(!s.search||!s.search.includes("#"),lm("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=Q_(s,l),u=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||m)&&(c.pathname+="/"),c}const zs=e=>e.join("/").replace(/\/\/+/g,"/"),Z_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ek=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,tk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function nk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const $b=["post","put","patch","delete"];new Set($b);const rk=["get",...$b];new Set(rk);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cl.apply(this,arguments)}const dd=E.createContext(null),zb=E.createContext(null),ps=E.createContext(null),md=E.createContext(null),gs=E.createContext({outlet:null,matches:[],isDataRoute:!1}),Hb=E.createContext(null);function sk(e,t){let{relative:n}=t===void 0?{}:t;Hi()||Mt(!1);let{basename:r,navigator:s}=E.useContext(ps),{hash:i,pathname:o,search:l}=hd(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:zs([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Hi(){return E.useContext(md)!=null}function Xs(){return Hi()||Mt(!1),E.useContext(md).location}function Bb(e){E.useContext(ps).static||E.useLayoutEffect(e)}function fd(){let{isDataRoute:e}=E.useContext(gs);return e?yk():ak()}function ak(){Hi()||Mt(!1);let e=E.useContext(dd),{basename:t,future:n,navigator:r}=E.useContext(ps),{matches:s}=E.useContext(gs),{pathname:i}=Xs(),o=JSON.stringify(ap(s,n.v7_relativeSplatPath)),l=E.useRef(!1);return Bb(()=>{l.current=!0}),E.useCallback(function(u,m){if(m===void 0&&(m={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=ip(u,JSON.parse(o),i,m.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:zs([t,h.pathname])),(m.replace?r.replace:r.push)(h,m.state,m)},[t,r,o,i,e])}const ik=E.createContext(null);function ok(e){let t=E.useContext(gs).outlet;return t&&E.createElement(ik.Provider,{value:e},t)}function hd(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=E.useContext(ps),{matches:s}=E.useContext(gs),{pathname:i}=Xs(),o=JSON.stringify(ap(s,r.v7_relativeSplatPath));return E.useMemo(()=>ip(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function lk(e,t){return ck(e,t)}function ck(e,t,n,r){Hi()||Mt(!1);let{navigator:s,static:i}=E.useContext(ps),{matches:o}=E.useContext(gs),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let m=Xs(),h;if(t){var f;let y=typeof t=="string"?zi(t):t;u==="/"||(f=y.pathname)!=null&&f.startsWith(u)||Mt(!1),h=y}else h=m;let b=h.pathname||"/",v=b;if(u!=="/"){let y=u.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(y.length).join("/")}let D=L_(e,{pathname:v}),p=hk(D&&D.map(y=>Object.assign({},y,{params:Object.assign({},c,y.params),pathname:zs([u,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:zs([u,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,r);return t&&p?E.createElement(md.Provider,{value:{location:cl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ps.Pop}},p):p}function uk(){let e=vk(),t=nk(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),n?E.createElement("pre",{style:s},n):null,null)}const dk=E.createElement(uk,null);class mk extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?E.createElement(gs.Provider,{value:this.props.routeContext},E.createElement(Hb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fk(e){let{routeContext:t,match:n,children:r}=e,s=E.useContext(dd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(gs.Provider,{value:t},r)}function hk(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let m=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);m>=0||Mt(!1),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let h=o[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=m),h.route.id){let{loaderData:f,errors:b}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!b||b[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((m,h,f)=>{let b,v=!1,D=null,p=null;n&&(b=l&&h.route.id?l[h.route.id]:void 0,D=h.route.errorElement||dk,c&&(u<0&&f===0?(bk("route-fallback"),v=!0,p=null):u===f&&(v=!0,p=h.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,f+1)),w=()=>{let S;return b?S=D:v?S=p:h.route.Component?S=E.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=m,E.createElement(fk,{match:h,routeContext:{outlet:m,matches:y,isDataRoute:n!=null},children:S})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?E.createElement(mk,{location:n.location,revalidation:n.revalidation,component:D,error:b,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var Vb=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Vb||{}),Ub=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ub||{});function pk(e){let t=E.useContext(dd);return t||Mt(!1),t}function gk(e){let t=E.useContext(zb);return t||Mt(!1),t}function xk(e){let t=E.useContext(gs);return t||Mt(!1),t}function Wb(e){let t=xk(),n=t.matches[t.matches.length-1];return n.route.id||Mt(!1),n.route.id}function vk(){var e;let t=E.useContext(Hb),n=gk(),r=Wb();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function yk(){let{router:e}=pk(Vb.UseNavigateStable),t=Wb(Ub.UseNavigateStable),n=E.useRef(!1);return Bb(()=>{n.current=!0}),E.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,cl({fromRouteId:t},i)))},[e,t])}const nx={};function bk(e,t,n){nx[e]||(nx[e]=!0)}function wk(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Yb(e){let{to:t,replace:n,state:r,relative:s}=e;Hi()||Mt(!1);let{future:i,static:o}=E.useContext(ps),{matches:l}=E.useContext(gs),{pathname:c}=Xs(),u=fd(),m=ip(t,ap(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(m);return E.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function qb(e){return ok(e.context)}function Vt(e){Mt(!1)}function Nk(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Ps.Pop,navigator:i,static:o=!1,future:l}=e;Hi()&&Mt(!1);let c=t.replace(/^\/*/,"/"),u=E.useMemo(()=>({basename:c,navigator:i,static:o,future:cl({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=zi(r));let{pathname:m="/",search:h="",hash:f="",state:b=null,key:v="default"}=r,D=E.useMemo(()=>{let p=Si(m,c);return p==null?null:{location:{pathname:p,search:h,hash:f,state:b,key:v},navigationType:s}},[c,m,h,f,b,v,s]);return D==null?null:E.createElement(ps.Provider,{value:u},E.createElement(md.Provider,{children:n,value:D}))}function jk(e){let{children:t,location:n}=e;return lk(Tf(t),n)}new Promise(()=>{});function Tf(e,t){t===void 0&&(t=[]);let n=[];return E.Children.forEach(e,(r,s)=>{if(!E.isValidElement(r))return;let i=[...t,s];if(r.type===E.Fragment){n.push.apply(n,Tf(r.props.children,i));return}r.type!==Vt&&Mt(!1),!r.props.index||!r.props.children||Mt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Tf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yu(){return yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yu.apply(this,arguments)}function Kb(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function _k(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function kk(e,t){return e.button===0&&(!t||t==="_self")&&!_k(e)}const Sk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Dk=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Ck="6";try{window.__reactRouterVersion=Ck}catch{}const Pk=E.createContext({isTransitioning:!1}),Ek="startTransition",rx=fh[Ek];function Mk(e){let{basename:t,children:n,future:r,window:s}=e,i=E.useRef();i.current==null&&(i.current=O_({window:s,v5Compat:!0}));let o=i.current,[l,c]=E.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},m=E.useCallback(h=>{u&&rx?rx(()=>c(h)):c(h)},[c,u]);return E.useLayoutEffect(()=>o.listen(m),[o,m]),E.useEffect(()=>wk(r),[r]),E.createElement(Nk,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Tk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ok=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fk=E.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:m,viewTransition:h}=t,f=Kb(t,Sk),{basename:b}=E.useContext(ps),v,D=!1;if(typeof u=="string"&&Ok.test(u)&&(v=u,Tk))try{let S=new URL(window.location.href),j=u.startsWith("//")?new URL(S.protocol+u):new URL(u),F=Si(j.pathname,b);j.origin===S.origin&&F!=null?u=F+j.search+j.hash:D=!0}catch{}let p=sk(u,{relative:s}),y=Lk(u,{replace:o,state:l,target:c,preventScrollReset:m,relative:s,viewTransition:h});function w(S){r&&r(S),S.defaultPrevented||y(S)}return E.createElement("a",yu({},f,{href:v||p,onClick:D||i?r:w,ref:n,target:c}))}),cm=E.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:m}=t,h=Kb(t,Dk),f=hd(c,{relative:h.relative}),b=Xs(),v=E.useContext(zb),{navigator:D,basename:p}=E.useContext(ps),y=v!=null&&Rk(f)&&u===!0,w=D.encodeLocation?D.encodeLocation(f).pathname:f.pathname,S=b.pathname,j=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(S=S.toLowerCase(),j=j?j.toLowerCase():null,w=w.toLowerCase()),j&&p&&(j=Si(j,p)||j);const F=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let C=S===w||!o&&S.startsWith(w)&&S.charAt(F)==="/",T=j!=null&&(j===w||!o&&j.startsWith(w)&&j.charAt(w.length)==="/"),P={isActive:C,isPending:T,isTransitioning:y},V=C?r:void 0,Q;typeof i=="function"?Q=i(P):Q=[i,C?"active":null,T?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let ee=typeof l=="function"?l(P):l;return E.createElement(Fk,yu({},h,{"aria-current":V,className:Q,ref:n,style:ee,to:c,viewTransition:u}),typeof m=="function"?m(P):m)});var Of;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Of||(Of={}));var sx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(sx||(sx={}));function Ak(e){let t=E.useContext(dd);return t||Mt(!1),t}function Lk(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=fd(),u=Xs(),m=hd(e,{relative:o});return E.useCallback(h=>{if(kk(h,n)){h.preventDefault();let f=r!==void 0?r:vu(u)===vu(m);c(e,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,m,r,s,n,e,i,o,l])}function Rk(e,t){t===void 0&&(t={});let n=E.useContext(Pk);n==null&&Mt(!1);let{basename:r}=Ak(Of.useViewTransitionState),s=hd(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Si(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Si(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Mf(s.pathname,o)!=null||Mf(s.pathname,i)!=null}let Ik={data:""},$k=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Ik,zk=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Hk=/\/\*[^]*?\*\/|  +/g,ax=/\n+/g,Ss=(e,t)=>{let n="",r="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?Ss(o,i):i+"{"+Ss(o,i[1]=="k"?"":t)+"}":typeof o=="object"?r+=Ss(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ss.p?Ss.p(i,o):i+":"+o+";")}return n+(t&&s?t+"{"+s+"}":s)+r},qr={},Gb=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Gb(e[n]);return t}return e},Bk=(e,t,n,r,s)=>{let i=Gb(e),o=qr[i]||(qr[i]=(c=>{let u=0,m=11;for(;u<c.length;)m=101*m+c.charCodeAt(u++)>>>0;return"go"+m})(i));if(!qr[o]){let c=i!==e?e:(u=>{let m,h,f=[{}];for(;m=zk.exec(u.replace(Hk,""));)m[4]?f.shift():m[3]?(h=m[3].replace(ax," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][m[1]]=m[2].replace(ax," ").trim();return f[0]})(e);qr[o]=Ss(s?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&qr.g?qr.g:null;return n&&(qr.g=qr[o]),((c,u,m,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=m?c+u.data:u.data+c)})(qr[o],t,r,l),o},Vk=(e,t,n)=>e.reduce((r,s,i)=>{let o=t[i];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Ss(l,""):l===!1?"":l}return r+s+(o??"")},"");function pd(e){let t=this||{},n=e.call?e(t.p):e;return Bk(n.unshift?n.raw?Vk(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,$k(t.target),t.g,t.o,t.k)}let Qb,Ff,Af;pd.bind({g:1});let ms=pd.bind({k:1});function Uk(e,t,n,r){Ss.p=t,Qb=e,Ff=n,Af=r}function Zs(e,t){let n=this||{};return function(){let r=arguments;function s(i,o){let l=Object.assign({},i),c=l.className||s.className;n.p=Object.assign({theme:Ff&&Ff()},l),n.o=/ *go\d+/.test(c),l.className=pd.apply(n,r)+(c?" "+c:"");let u=e;return e[0]&&(u=l.as||e,delete l.as),Af&&u[0]&&Af(l),Qb(u,l)}return s}}var Wk=e=>typeof e=="function",bu=(e,t)=>Wk(e)?e(t):e,Yk=(()=>{let e=0;return()=>(++e).toString()})(),Jb=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),qk=20,Xb=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,qk)};case 1:return{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:n}=t;return Xb(e,{type:e.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},Ac=[],ma={toasts:[],pausedAt:void 0},Ia=e=>{ma=Xb(ma,e),Ac.forEach(t=>{t(ma)})},Kk={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Gk=(e={})=>{let[t,n]=E.useState(ma),r=E.useRef(ma);E.useEffect(()=>(r.current!==ma&&n(ma),Ac.push(n),()=>{let i=Ac.indexOf(n);i>-1&&Ac.splice(i,1)}),[]);let s=t.toasts.map(i=>{var o,l,c;return{...e,...e[i.type],...i,removeDelay:i.removeDelay||((o=e[i.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:i.duration||((l=e[i.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||Kk[i.type],style:{...e.style,...(c=e[i.type])==null?void 0:c.style,...i.style}}});return{...t,toasts:s}},Qk=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Yk()}),kl=e=>(t,n)=>{let r=Qk(t,e,n);return Ia({type:2,toast:r}),r.id},bn=(e,t)=>kl("blank")(e,t);bn.error=kl("error");bn.success=kl("success");bn.loading=kl("loading");bn.custom=kl("custom");bn.dismiss=e=>{Ia({type:3,toastId:e})};bn.remove=e=>Ia({type:4,toastId:e});bn.promise=(e,t,n)=>{let r=bn.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?bu(t.success,s):void 0;return i?bn.success(i,{id:r,...n,...n==null?void 0:n.success}):bn.dismiss(r),s}).catch(s=>{let i=t.error?bu(t.error,s):void 0;i?bn.error(i,{id:r,...n,...n==null?void 0:n.error}):bn.dismiss(r)}),e};var Jk=(e,t)=>{Ia({type:1,toast:{id:e,height:t}})},Xk=()=>{Ia({type:5,time:Date.now()})},Lo=new Map,Zk=1e3,eS=(e,t=Zk)=>{if(Lo.has(e))return;let n=setTimeout(()=>{Lo.delete(e),Ia({type:4,toastId:e})},t);Lo.set(e,n)},tS=e=>{let{toasts:t,pausedAt:n}=Gk(e);E.useEffect(()=>{if(n)return;let i=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&bn.dismiss(l.id);return}return setTimeout(()=>bn.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,n]);let r=E.useCallback(()=>{n&&Ia({type:6,time:Date.now()})},[n]),s=E.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},m=t.filter(b=>(b.position||u)===(i.position||u)&&b.height),h=m.findIndex(b=>b.id===i.id),f=m.filter((b,v)=>v<h&&b.visible).length;return m.filter(b=>b.visible).slice(...l?[f+1]:[0,f]).reduce((b,v)=>b+(v.height||0)+c,0)},[t]);return E.useEffect(()=>{t.forEach(i=>{if(i.dismissed)eS(i.id,i.removeDelay);else{let o=Lo.get(i.id);o&&(clearTimeout(o),Lo.delete(i.id))}})},[t]),{toasts:t,handlers:{updateHeight:Jk,startPause:Xk,endPause:r,calculateOffset:s}}},nS=ms`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,rS=ms`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sS=ms`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,aS=Zs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${nS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${rS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${sS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,iS=ms`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,oS=Zs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${iS} 1s linear infinite;
`,lS=ms`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,cS=ms`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,uS=Zs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${lS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${cS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,dS=Zs("div")`
  position: absolute;
`,mS=Zs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,fS=ms`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hS=Zs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${fS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,pS=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?E.createElement(hS,null,t):t:n==="blank"?null:E.createElement(mS,null,E.createElement(oS,{...r}),n!=="loading"&&E.createElement(dS,null,n==="error"?E.createElement(aS,{...r}):E.createElement(uS,{...r})))},gS=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,xS=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,vS="0%{opacity:0;} 100%{opacity:1;}",yS="0%{opacity:1;} 100%{opacity:0;}",bS=Zs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,wS=Zs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,NS=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=Jb()?[vS,yS]:[gS(n),xS(n)];return{animation:t?`${ms(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ms(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},jS=E.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?NS(e.position||t||"top-center",e.visible):{opacity:0},i=E.createElement(pS,{toast:e}),o=E.createElement(wS,{...e.ariaProps},bu(e.message,e));return E.createElement(bS,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:o}):E.createElement(E.Fragment,null,i,o))});Uk(E.createElement);var _S=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=E.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;r(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return E.createElement("div",{ref:i,className:t,style:n},s)},kS=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Jb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},SS=pd`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Zl=16,DS=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=tS(n);return E.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Zl,left:Zl,right:Zl,bottom:Zl,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let m=u.position||t,h=c.calculateOffset(u,{reverseOrder:e,gutter:r,defaultPosition:t}),f=kS(m,h);return E.createElement(_S,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?SS:"",style:f},u.type==="custom"?bu(u.message,u):s?s(u):E.createElement(jS,{toast:u,position:m}))}))},le=bn;function Zb(e,t){return function(){return e.apply(t,arguments)}}const{toString:CS}=Object.prototype,{getPrototypeOf:op}=Object,{iterator:gd,toStringTag:ew}=Symbol,xd=(e=>t=>{const n=CS.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_r=e=>(e=e.toLowerCase(),t=>xd(t)===e),vd=e=>t=>typeof t===e,{isArray:Bi}=Array,ul=vd("undefined");function Sl(e){return e!==null&&!ul(e)&&e.constructor!==null&&!ul(e.constructor)&&Fn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const tw=_r("ArrayBuffer");function PS(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&tw(e.buffer),t}const ES=vd("string"),Fn=vd("function"),nw=vd("number"),Dl=e=>e!==null&&typeof e=="object",MS=e=>e===!0||e===!1,Lc=e=>{if(xd(e)!=="object")return!1;const t=op(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ew in e)&&!(gd in e)},TS=e=>{if(!Dl(e)||Sl(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},OS=_r("Date"),FS=_r("File"),AS=_r("Blob"),LS=_r("FileList"),RS=e=>Dl(e)&&Fn(e.pipe),IS=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Fn(e.append)&&((t=xd(e))==="formdata"||t==="object"&&Fn(e.toString)&&e.toString()==="[object FormData]"))},$S=_r("URLSearchParams"),[zS,HS,BS,VS]=["ReadableStream","Request","Response","Headers"].map(_r),US=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cl(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Bi(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(Sl(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(r=0;r<o;r++)l=i[r],t.call(null,e[l],l,e)}}function rw(e,t){if(Sl(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const fa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sw=e=>!ul(e)&&e!==fa;function Lf(){const{caseless:e}=sw(this)&&this||{},t={},n=(r,s)=>{const i=e&&rw(t,s)||s;Lc(t[i])&&Lc(r)?t[i]=Lf(t[i],r):Lc(r)?t[i]=Lf({},r):Bi(r)?t[i]=r.slice():t[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Cl(arguments[r],n);return t}const WS=(e,t,n,{allOwnKeys:r}={})=>(Cl(t,(s,i)=>{n&&Fn(s)?e[i]=Zb(s,n):e[i]=s},{allOwnKeys:r}),e),YS=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),qS=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},KS=(e,t,n,r)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!r||r(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&op(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},GS=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},QS=e=>{if(!e)return null;if(Bi(e))return e;let t=e.length;if(!nw(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},JS=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&op(Uint8Array)),XS=(e,t)=>{const r=(e&&e[gd]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},ZS=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},e2=_r("HTMLFormElement"),t2=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),ix=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),n2=_r("RegExp"),aw=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Cl(n,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(r[i]=o||s)}),Object.defineProperties(e,r)},r2=e=>{aw(e,(t,n)=>{if(Fn(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Fn(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},s2=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Bi(e)?r(e):r(String(e).split(t)),n},a2=()=>{},i2=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function o2(e){return!!(e&&Fn(e.append)&&e[ew]==="FormData"&&e[gd])}const l2=e=>{const t=new Array(10),n=(r,s)=>{if(Dl(r)){if(t.indexOf(r)>=0)return;if(Sl(r))return r;if(!("toJSON"in r)){t[s]=r;const i=Bi(r)?[]:{};return Cl(r,(o,l)=>{const c=n(o,s+1);!ul(c)&&(i[l]=c)}),t[s]=void 0,i}}return r};return n(e,0)},c2=_r("AsyncFunction"),u2=e=>e&&(Dl(e)||Fn(e))&&Fn(e.then)&&Fn(e.catch),iw=((e,t)=>e?setImmediate:t?((n,r)=>(fa.addEventListener("message",({source:s,data:i})=>{s===fa&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),fa.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Fn(fa.postMessage)),d2=typeof queueMicrotask<"u"?queueMicrotask.bind(fa):typeof process<"u"&&process.nextTick||iw,m2=e=>e!=null&&Fn(e[gd]),ge={isArray:Bi,isArrayBuffer:tw,isBuffer:Sl,isFormData:IS,isArrayBufferView:PS,isString:ES,isNumber:nw,isBoolean:MS,isObject:Dl,isPlainObject:Lc,isEmptyObject:TS,isReadableStream:zS,isRequest:HS,isResponse:BS,isHeaders:VS,isUndefined:ul,isDate:OS,isFile:FS,isBlob:AS,isRegExp:n2,isFunction:Fn,isStream:RS,isURLSearchParams:$S,isTypedArray:JS,isFileList:LS,forEach:Cl,merge:Lf,extend:WS,trim:US,stripBOM:YS,inherits:qS,toFlatObject:KS,kindOf:xd,kindOfTest:_r,endsWith:GS,toArray:QS,forEachEntry:XS,matchAll:ZS,isHTMLForm:e2,hasOwnProperty:ix,hasOwnProp:ix,reduceDescriptors:aw,freezeMethods:r2,toObjectSet:s2,toCamelCase:t2,noop:a2,toFiniteNumber:i2,findKey:rw,global:fa,isContextDefined:sw,isSpecCompliantForm:o2,toJSONObject:l2,isAsyncFn:c2,isThenable:u2,setImmediate:iw,asap:d2,isIterable:m2};function Xe(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}ge.inherits(Xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ge.toJSONObject(this.config),code:this.code,status:this.status}}});const ow=Xe.prototype,lw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{lw[e]={value:e}});Object.defineProperties(Xe,lw);Object.defineProperty(ow,"isAxiosError",{value:!0});Xe.from=(e,t,n,r,s,i)=>{const o=Object.create(ow);return ge.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Xe.call(o,e.message,t,n,r,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const f2=null;function Rf(e){return ge.isPlainObject(e)||ge.isArray(e)}function cw(e){return ge.endsWith(e,"[]")?e.slice(0,-2):e}function ox(e,t,n){return e?e.concat(t).map(function(s,i){return s=cw(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function h2(e){return ge.isArray(e)&&!e.some(Rf)}const p2=ge.toFlatObject(ge,{},null,function(t){return/^is[A-Z]/.test(t)});function yd(e,t,n){if(!ge.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ge.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,p){return!ge.isUndefined(p[D])});const r=n.metaTokens,s=n.visitor||m,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&ge.isSpecCompliantForm(t);if(!ge.isFunction(s))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(ge.isDate(v))return v.toISOString();if(ge.isBoolean(v))return v.toString();if(!c&&ge.isBlob(v))throw new Xe("Blob is not supported. Use a Buffer instead.");return ge.isArrayBuffer(v)||ge.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function m(v,D,p){let y=v;if(v&&!p&&typeof v=="object"){if(ge.endsWith(D,"{}"))D=r?D:D.slice(0,-2),v=JSON.stringify(v);else if(ge.isArray(v)&&h2(v)||(ge.isFileList(v)||ge.endsWith(D,"[]"))&&(y=ge.toArray(v)))return D=cw(D),y.forEach(function(S,j){!(ge.isUndefined(S)||S===null)&&t.append(o===!0?ox([D],j,i):o===null?D:D+"[]",u(S))}),!1}return Rf(v)?!0:(t.append(ox(p,D,i),u(v)),!1)}const h=[],f=Object.assign(p2,{defaultVisitor:m,convertValue:u,isVisitable:Rf});function b(v,D){if(!ge.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+D.join("."));h.push(v),ge.forEach(v,function(y,w){(!(ge.isUndefined(y)||y===null)&&s.call(t,y,ge.isString(w)?w.trim():w,D,f))===!0&&b(y,D?D.concat(w):[w])}),h.pop()}}if(!ge.isObject(e))throw new TypeError("data must be an object");return b(e),t}function lx(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function lp(e,t){this._pairs=[],e&&yd(e,this,t)}const uw=lp.prototype;uw.append=function(t,n){this._pairs.push([t,n])};uw.toString=function(t){const n=t?function(r){return t.call(this,r,lx)}:lx;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function g2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function dw(e,t,n){if(!t)return e;const r=n&&n.encode||g2;ge.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=ge.isURLSearchParams(t)?t.toString():new lp(t,n).toString(r),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class cx{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ge.forEach(this.handlers,function(r){r!==null&&t(r)})}}const mw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},x2=typeof URLSearchParams<"u"?URLSearchParams:lp,v2=typeof FormData<"u"?FormData:null,y2=typeof Blob<"u"?Blob:null,b2={isBrowser:!0,classes:{URLSearchParams:x2,FormData:v2,Blob:y2},protocols:["http","https","file","blob","url","data"]},cp=typeof window<"u"&&typeof document<"u",If=typeof navigator=="object"&&navigator||void 0,w2=cp&&(!If||["ReactNative","NativeScript","NS"].indexOf(If.product)<0),N2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",j2=cp&&window.location.href||"http://localhost",_2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cp,hasStandardBrowserEnv:w2,hasStandardBrowserWebWorkerEnv:N2,navigator:If,origin:j2},Symbol.toStringTag,{value:"Module"})),fn={..._2,...b2};function k2(e,t){return yd(e,new fn.classes.URLSearchParams,{visitor:function(n,r,s,i){return fn.isNode&&ge.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function S2(e){return ge.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function D2(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function fw(e){function t(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&ge.isArray(s)?s.length:o,c?(ge.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!l):((!s[o]||!ge.isObject(s[o]))&&(s[o]=[]),t(n,r,s[o],i)&&ge.isArray(s[o])&&(s[o]=D2(s[o])),!l)}if(ge.isFormData(e)&&ge.isFunction(e.entries)){const n={};return ge.forEachEntry(e,(r,s)=>{t(S2(r),s,n,0)}),n}return null}function C2(e,t,n){if(ge.isString(e))try{return(t||JSON.parse)(e),ge.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Pl={transitional:mw,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=ge.isObject(t);if(i&&ge.isHTMLForm(t)&&(t=new FormData(t)),ge.isFormData(t))return s?JSON.stringify(fw(t)):t;if(ge.isArrayBuffer(t)||ge.isBuffer(t)||ge.isStream(t)||ge.isFile(t)||ge.isBlob(t)||ge.isReadableStream(t))return t;if(ge.isArrayBufferView(t))return t.buffer;if(ge.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return k2(t,this.formSerializer).toString();if((l=ge.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return yd(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),C2(t)):t}],transformResponse:[function(t){const n=this.transitional||Pl.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(ge.isResponse(t)||ge.isReadableStream(t))return t;if(t&&ge.isString(t)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?Xe.from(l,Xe.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fn.classes.FormData,Blob:fn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ge.forEach(["delete","get","head","post","put","patch"],e=>{Pl.headers[e]={}});const P2=ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),E2=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||t[n]&&P2[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},ux=Symbol("internals");function to(e){return e&&String(e).trim().toLowerCase()}function Rc(e){return e===!1||e==null?e:ge.isArray(e)?e.map(Rc):String(e)}function M2(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const T2=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function um(e,t,n,r,s){if(ge.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!ge.isString(t)){if(ge.isString(r))return t.indexOf(r)!==-1;if(ge.isRegExp(r))return r.test(t)}}function O2(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function F2(e,t){const n=ge.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,o){return this[r].call(this,t,s,i,o)},configurable:!0})})}let An=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(l,c,u){const m=to(c);if(!m)throw new Error("header name must be a non-empty string");const h=ge.findKey(s,m);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||c]=Rc(l))}const o=(l,c)=>ge.forEach(l,(u,m)=>i(u,m,c));if(ge.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(ge.isString(t)&&(t=t.trim())&&!T2(t))o(E2(t),n);else if(ge.isObject(t)&&ge.isIterable(t)){let l={},c,u;for(const m of t){if(!ge.isArray(m))throw TypeError("Object iterator must return a key-value pair");l[u=m[0]]=(c=l[u])?ge.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}o(l,n)}else t!=null&&i(n,t,r);return this}get(t,n){if(t=to(t),t){const r=ge.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return M2(s);if(ge.isFunction(n))return n.call(this,s,r);if(ge.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=to(t),t){const r=ge.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||um(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(o){if(o=to(o),o){const l=ge.findKey(r,o);l&&(!n||um(r,r[l],l,n))&&(delete r[l],s=!0)}}return ge.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||um(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return ge.forEach(this,(s,i)=>{const o=ge.findKey(r,i);if(o){n[o]=Rc(s),delete n[i];return}const l=t?O2(i):String(i).trim();l!==i&&delete n[i],n[l]=Rc(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ge.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&ge.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[ux]=this[ux]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=to(o);r[l]||(F2(s,o),r[l]=!0)}return ge.isArray(t)?t.forEach(i):i(t),this}};An.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ge.reduceDescriptors(An.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});ge.freezeMethods(An);function dm(e,t){const n=this||Pl,r=t||n,s=An.from(r.headers);let i=r.data;return ge.forEach(e,function(l){i=l.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function hw(e){return!!(e&&e.__CANCEL__)}function Vi(e,t,n){Xe.call(this,e??"canceled",Xe.ERR_CANCELED,t,n),this.name="CanceledError"}ge.inherits(Vi,Xe,{__CANCEL__:!0});function pw(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Xe("Request failed with status code "+n.status,[Xe.ERR_BAD_REQUEST,Xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function A2(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function L2(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),m=r[i];o||(o=u),n[s]=c,r[s]=u;let h=i,f=0;for(;h!==s;)f+=n[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),u-o<t)return;const b=m&&u-m;return b?Math.round(f*1e3/b):void 0}}function R2(e,t){let n=0,r=1e3/t,s,i;const o=(u,m=Date.now())=>{n=m,s=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const m=Date.now(),h=m-n;h>=r?o(u,m):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},r-h)))},()=>s&&o(s)]}const wu=(e,t,n=3)=>{let r=0;const s=L2(50,250);return R2(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-r,u=s(c),m=o<=l;r=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&m?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},n)},dx=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},mx=e=>(...t)=>ge.asap(()=>e(...t)),I2=fn.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,fn.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(fn.origin),fn.navigator&&/(msie|trident)/i.test(fn.navigator.userAgent)):()=>!0,$2=fn.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const o=[e+"="+encodeURIComponent(t)];ge.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ge.isString(r)&&o.push("path="+r),ge.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function z2(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function H2(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function gw(e,t,n){let r=!z2(t);return e&&(r||n==!1)?H2(e,t):t}const fx=e=>e instanceof An?{...e}:e;function Ma(e,t){t=t||{};const n={};function r(u,m,h,f){return ge.isPlainObject(u)&&ge.isPlainObject(m)?ge.merge.call({caseless:f},u,m):ge.isPlainObject(m)?ge.merge({},m):ge.isArray(m)?m.slice():m}function s(u,m,h,f){if(ge.isUndefined(m)){if(!ge.isUndefined(u))return r(void 0,u,h,f)}else return r(u,m,h,f)}function i(u,m){if(!ge.isUndefined(m))return r(void 0,m)}function o(u,m){if(ge.isUndefined(m)){if(!ge.isUndefined(u))return r(void 0,u)}else return r(void 0,m)}function l(u,m,h){if(h in t)return r(u,m);if(h in e)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,m,h)=>s(fx(u),fx(m),h,!0)};return ge.forEach(Object.keys({...e,...t}),function(m){const h=c[m]||s,f=h(e[m],t[m],m);ge.isUndefined(f)&&h!==l||(n[m]=f)}),n}const xw=e=>{const t=Ma({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=An.from(o),t.url=dw(gw(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(ge.isFormData(n)){if(fn.hasStandardBrowserEnv||fn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...m]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...m].join("; "))}}if(fn.hasStandardBrowserEnv&&(r&&ge.isFunction(r)&&(r=r(t)),r||r!==!1&&I2(t.url))){const u=s&&i&&$2.read(i);u&&o.set(s,u)}return t},B2=typeof XMLHttpRequest<"u",V2=B2&&function(e){return new Promise(function(n,r){const s=xw(e);let i=s.data;const o=An.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,m,h,f,b,v;function D(){b&&b(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let p=new XMLHttpRequest;p.open(s.method.toUpperCase(),s.url,!0),p.timeout=s.timeout;function y(){if(!p)return;const S=An.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),F={data:!l||l==="text"||l==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:S,config:e,request:p};pw(function(T){n(T),D()},function(T){r(T),D()},F),p=null}"onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(y)},p.onabort=function(){p&&(r(new Xe("Request aborted",Xe.ECONNABORTED,e,p)),p=null)},p.onerror=function(){r(new Xe("Network Error",Xe.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let j=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const F=s.transitional||mw;s.timeoutErrorMessage&&(j=s.timeoutErrorMessage),r(new Xe(j,F.clarifyTimeoutError?Xe.ETIMEDOUT:Xe.ECONNABORTED,e,p)),p=null},i===void 0&&o.setContentType(null),"setRequestHeader"in p&&ge.forEach(o.toJSON(),function(j,F){p.setRequestHeader(F,j)}),ge.isUndefined(s.withCredentials)||(p.withCredentials=!!s.withCredentials),l&&l!=="json"&&(p.responseType=s.responseType),u&&([f,v]=wu(u,!0),p.addEventListener("progress",f)),c&&p.upload&&([h,b]=wu(c),p.upload.addEventListener("progress",h),p.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(m=S=>{p&&(r(!S||S.type?new Vi(null,e,p):S),p.abort(),p=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const w=A2(s.url);if(w&&fn.protocols.indexOf(w)===-1){r(new Xe("Unsupported protocol "+w+":",Xe.ERR_BAD_REQUEST,e));return}p.send(i||null)})},U2=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,l();const m=u instanceof Error?u:this.reason;r.abort(m instanceof Xe?m:new Vi(m instanceof Error?m.message:m))}};let o=t&&setTimeout(()=>{o=null,i(new Xe(`timeout ${t} of ms exceeded`,Xe.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>ge.asap(l),c}},W2=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},Y2=async function*(e,t){for await(const n of q2(e))yield*W2(n,t)},q2=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},hx=(e,t,n,r)=>{const s=Y2(e,t);let i=0,o,l=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:m}=await s.next();if(u){l(),c.close();return}let h=m.byteLength;if(n){let f=i+=h;n(f)}c.enqueue(new Uint8Array(m))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},bd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",vw=bd&&typeof ReadableStream=="function",K2=bd&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),yw=(e,...t)=>{try{return!!e(...t)}catch{return!1}},G2=vw&&yw(()=>{let e=!1;const t=new Request(fn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),px=64*1024,$f=vw&&yw(()=>ge.isReadableStream(new Response("").body)),Nu={stream:$f&&(e=>e.body)};bd&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Nu[t]&&(Nu[t]=ge.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Xe(`Response type '${t}' is not supported`,Xe.ERR_NOT_SUPPORT,r)})})})(new Response);const Q2=async e=>{if(e==null)return 0;if(ge.isBlob(e))return e.size;if(ge.isSpecCompliantForm(e))return(await new Request(fn.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(ge.isArrayBufferView(e)||ge.isArrayBuffer(e))return e.byteLength;if(ge.isURLSearchParams(e)&&(e=e+""),ge.isString(e))return(await K2(e)).byteLength},J2=async(e,t)=>{const n=ge.toFiniteNumber(e.getContentLength());return n??Q2(t)},X2=bd&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:m,withCredentials:h="same-origin",fetchOptions:f}=xw(e);u=u?(u+"").toLowerCase():"text";let b=U2([s,i&&i.toAbortSignal()],o),v;const D=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let p;try{if(c&&G2&&n!=="get"&&n!=="head"&&(p=await J2(m,r))!==0){let F=new Request(t,{method:"POST",body:r,duplex:"half"}),C;if(ge.isFormData(r)&&(C=F.headers.get("content-type"))&&m.setContentType(C),F.body){const[T,P]=dx(p,wu(mx(c)));r=hx(F.body,px,T,P)}}ge.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;v=new Request(t,{...f,signal:b,method:n.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:y?h:void 0});let w=await fetch(v,f);const S=$f&&(u==="stream"||u==="response");if($f&&(l||S&&D)){const F={};["status","statusText","headers"].forEach(V=>{F[V]=w[V]});const C=ge.toFiniteNumber(w.headers.get("content-length")),[T,P]=l&&dx(C,wu(mx(l),!0))||[];w=new Response(hx(w.body,px,T,()=>{P&&P(),D&&D()}),F)}u=u||"text";let j=await Nu[ge.findKey(Nu,u)||"text"](w,e);return!S&&D&&D(),await new Promise((F,C)=>{pw(F,C,{data:j,headers:An.from(w.headers),status:w.status,statusText:w.statusText,config:e,request:v})})}catch(y){throw D&&D(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new Xe("Network Error",Xe.ERR_NETWORK,e,v),{cause:y.cause||y}):Xe.from(y,y&&y.code,e,v)}}),zf={http:f2,xhr:V2,fetch:X2};ge.forEach(zf,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const gx=e=>`- ${e}`,Z2=e=>ge.isFunction(e)||e===null||e===!1,bw={getAdapter:e=>{e=ge.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;i<t;i++){n=e[i];let o;if(r=n,!Z2(n)&&(r=zf[(o=String(n)).toLowerCase()],r===void 0))throw new Xe(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(gx).join(`
`):" "+gx(i[0]):"as no adapter specified";throw new Xe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:zf};function mm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vi(null,e)}function xx(e){return mm(e),e.headers=An.from(e.headers),e.data=dm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),bw.getAdapter(e.adapter||Pl.adapter)(e).then(function(r){return mm(e),r.data=dm.call(e,e.transformResponse,r),r.headers=An.from(r.headers),r},function(r){return hw(r)||(mm(e),r&&r.response&&(r.response.data=dm.call(e,e.transformResponse,r.response),r.response.headers=An.from(r.response.headers))),Promise.reject(r)})}const ww="1.11.0",wd={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{wd[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const vx={};wd.transitional=function(t,n,r){function s(i,o){return"[Axios v"+ww+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,l)=>{if(t===!1)throw new Xe(s(o," has been removed"+(n?" in "+n:"")),Xe.ERR_DEPRECATED);return n&&!vx[o]&&(vx[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,l):!0}};wd.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function eD(e,t,n){if(typeof e!="object")throw new Xe("options must be an object",Xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new Xe("option "+i+" must be "+c,Xe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Xe("Unknown option "+i,Xe.ERR_BAD_OPTION)}}const Ic={assertOptions:eD,validators:wd},Cr=Ic.validators;let wa=class{constructor(t){this.defaults=t||{},this.interceptors={request:new cx,response:new cx}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ma(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Ic.assertOptions(r,{silentJSONParsing:Cr.transitional(Cr.boolean),forcedJSONParsing:Cr.transitional(Cr.boolean),clarifyTimeoutError:Cr.transitional(Cr.boolean)},!1),s!=null&&(ge.isFunction(s)?n.paramsSerializer={serialize:s}:Ic.assertOptions(s,{encode:Cr.function,serialize:Cr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ic.assertOptions(n,{baseUrl:Cr.spelling("baseURL"),withXsrfToken:Cr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&ge.merge(i.common,i[n.method]);i&&ge.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=An.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(n)===!1||(c=c&&D.synchronous,l.unshift(D.fulfilled,D.rejected))});const u=[];this.interceptors.response.forEach(function(D){u.push(D.fulfilled,D.rejected)});let m,h=0,f;if(!c){const v=[xx.bind(this),void 0];for(v.unshift(...l),v.push(...u),f=v.length,m=Promise.resolve(n);h<f;)m=m.then(v[h++],v[h++]);return m}f=l.length;let b=n;for(h=0;h<f;){const v=l[h++],D=l[h++];try{b=v(b)}catch(p){D.call(this,p);break}}try{m=xx.call(this,b)}catch(v){return Promise.reject(v)}for(h=0,f=u.length;h<f;)m=m.then(u[h++],u[h++]);return m}getUri(t){t=Ma(this.defaults,t);const n=gw(t.baseURL,t.url,t.allowAbsoluteUrls);return dw(n,t.params,t.paramsSerializer)}};ge.forEach(["delete","get","head","options"],function(t){wa.prototype[t]=function(n,r){return this.request(Ma(r||{},{method:t,url:n,data:(r||{}).data}))}});ge.forEach(["post","put","patch"],function(t){function n(r){return function(i,o,l){return this.request(Ma(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}wa.prototype[t]=n(),wa.prototype[t+"Form"]=n(!0)});let tD=class Nw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{r.subscribe(l),i=l}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i,o,l){r.reason||(r.reason=new Vi(i,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Nw(function(s){t=s}),cancel:t}}};function nD(e){return function(n){return e.apply(null,n)}}function rD(e){return ge.isObject(e)&&e.isAxiosError===!0}const Hf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hf).forEach(([e,t])=>{Hf[t]=e});function jw(e){const t=new wa(e),n=Zb(wa.prototype.request,t);return ge.extend(n,wa.prototype,t,{allOwnKeys:!0}),ge.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return jw(Ma(e,s))},n}const we=jw(Pl);we.Axios=wa;we.CanceledError=Vi;we.CancelToken=tD;we.isCancel=hw;we.VERSION=ww;we.toFormData=yd;we.AxiosError=Xe;we.Cancel=we.CanceledError;we.all=function(t){return Promise.all(t)};we.spread=nD;we.isAxiosError=rD;we.mergeConfig=Ma;we.AxiosHeaders=An;we.formToJSON=e=>fw(ge.isHTMLForm(e)?new FormData(e):e);we.getAdapter=bw.getAdapter;we.HttpStatusCode=Hf;we.default=we;const{Axios:jL,AxiosError:_L,CanceledError:kL,isCancel:SL,CancelToken:DL,VERSION:CL,all:PL,Cancel:EL,isAxiosError:ML,spread:TL,toFormData:OL,AxiosHeaders:FL,HttpStatusCode:AL,formToJSON:LL,getAdapter:RL,mergeConfig:IL}=we,_w=E.createContext(void 0),kw=({children:e})=>{const[t,n]=E.useState(null);E.useEffect(()=>{const l=localStorage.getItem("user");l&&n(JSON.parse(l))},[]);const r=async(l,c)=>{var u,m;try{const f=(await we.post("http://localhost:5000/api/users/login",{username:l,password:c})).data;n(f),localStorage.setItem("user",JSON.stringify(f))}catch(h){throw new Error(((m=(u=h.response)==null?void 0:u.data)==null?void 0:m.message)||"Login failed")}},s=()=>{n(null),localStorage.removeItem("user")},i=async(l,c)=>{var u,m;try{const h={headers:{Authorization:`Bearer ${t.token}`}};await we.put("http://localhost:5000/api/users/change-password",{oldPassword:l,newPassword:c},h)}catch(h){throw new Error(((m=(u=h.response)==null?void 0:u.data)==null?void 0:m.message)||"Password change failed")}},o=async l=>{var c,u;try{const m={headers:{Authorization:`Bearer ${t.token}`}},h=await we.put("http://localhost:5000/api/users/update-username",{username:l},m),f={...t,username:h.data.username};n(f),localStorage.setItem("user",JSON.stringify(f))}catch(m){throw new Error(((u=(c=m.response)==null?void 0:c.data)==null?void 0:u.message)||"Username update failed")}};return a.jsx(_w.Provider,{value:{user:t,login:r,logout:s,changePassword:i,updateUsername:o},children:e})},Ui=()=>{const e=E.useContext(_w);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},sD=()=>{const{user:e}=Ui();return e?a.jsx(qb,{}):a.jsx(Yb,{to:"/login"})};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iD=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),yx=e=>{const t=iD(e);return t.charAt(0).toUpperCase()+t.slice(1)},Sw=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),oD=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>E.createElement("svg",{ref:c,...lD,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Sw("lucide",s),...!i&&!oD(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,m])=>E.createElement(u,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=(e,t)=>{const n=E.forwardRef(({className:r,...s},i)=>E.createElement(cD,{ref:i,iconNode:t,className:Sw(`lucide-${aD(yx(e))}`,`lucide-${e}`,r),...s}));return n.displayName=yx(e),n};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M10 10H6",key:"1bsnug"}],["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14",key:"lrkjwd"}],["path",{d:"M8 8v4",key:"1fwk8c"}],["path",{d:"M9 18h6",key:"x1upvd"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],dD=at("ambulance",uD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],fD=at("banknote",mD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],pD=at("calendar-days",hD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Nd=at("calendar",gD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],pt=at("car",xD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yD=at("chevron-down",vD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],wD=at("chevron-right",bD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jD=at("circle-check-big",ND);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],fm=at("circle-user",_D);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],SD=at("credit-card",kD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],CD=at("dollar-sign",DD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dl=at("file-text",PD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],MD=at("funnel",ED);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],OD=at("gauge",TD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],AD=at("layout-dashboard",FD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],RD=at("log-out",LD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],$D=at("mail",ID);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],HD=at("map-pin",zD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],VD=at("maximize-2",BD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],WD=at("menu",UD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],hm=at("pen",YD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],KD=at("phone",qD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ht=at("plus",GD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Bf=at("receipt",QD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],XD=at("save",JD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Wn=at("search",ZD);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tC=at("settings",eC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],rC=at("shield-check",nC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ln=at("trash-2",sC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],iC=at("trending-up",aC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Nr=at("triangle-alert",oC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Vf=at("upload",lC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],uC=at("user-check",cC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Dw=at("users",dC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],fC=at("wallet",mC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],pC=at("wrench",hC);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],kr=at("x",gC),xC=({isOpen:e,setIsOpen:t})=>{const{logout:n}=Ui(),[r,s]=E.useState({}),i=l=>{s(c=>({...c,[l]:!c[l]}))},o=[{name:"Tableau de bord",path:"/",icon:a.jsx(AD,{size:20})},{name:"Véhicules",path:"/vehicules",icon:a.jsx(pt,{size:20}),subItems:[{name:"Visite technique",path:"/vehicules/visites-techniques",icon:a.jsx(OD,{size:16})},{name:"Liste assurances",path:"/vehicules/assurances",icon:a.jsx(rC,{size:16})}]},{name:"Clients",path:"/clients",icon:a.jsx(Dw,{size:20}),subItems:[{name:"Liste réglements",path:"/clients/reglements",icon:a.jsx(uC,{size:16})}]},{name:"Infractions",path:"/infractions",icon:a.jsx(Nr,{size:20})},{name:"Interventions",path:"/interventions",icon:a.jsx(pC,{size:20})},{name:"Accidents",path:"/accidents",icon:a.jsx(dD,{size:20})},{name:"Contrats",path:"/contrats",icon:a.jsx(pt,{size:20})},{name:"Factures",path:"/factures",icon:a.jsx(Bf,{size:20})},{name:"Charges",path:"/charges",icon:a.jsx(CD,{size:20})},{name:"Traites",path:"/traites",icon:a.jsx(SD,{size:20})},{name:"Réservations",path:"/reservations",icon:a.jsx(Nd,{size:20})},{name:"Paramètres",path:"/parametres",icon:a.jsx(tC,{size:20})}];return a.jsxs(a.Fragment,{children:[e&&a.jsx("div",{className:"fixed inset-0 z-20 bg-blue-600 bg-opacity-50 lg:hidden",onClick:()=>t(!1)}),a.jsxs("div",{className:`fixed inset-y-0 left-0 z-30 w-64 transform bg-blue-600 transition duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 lg:flex lg:flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[a.jsx("div",{className:"flex items-center justify-center h-24 border-b border-blue-700",children:a.jsx("img",{src:"/media/ChatGPT Image Sep 4, 2025, 06_32_30 PM.png",alt:"AdminCar Logo",className:"h-20"})}),a.jsxs("div",{className:"flex flex-col justify-between h-[calc(100%-6rem)]",children:[a.jsx("nav",{className:"mt-5 px-2 overflow-y-auto",children:o.map(l=>a.jsx("div",{className:"mb-1",children:l.subItems?a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsxs(cm,{to:l.path,className:({isActive:c})=>`flex flex-grow items-center px-4 py-3 text-sm rounded-l-lg transition-colors ${c?"bg-blue-700 text-white":"text-gray-100 hover:bg-blue-700 hover:text-white"}`,onClick:()=>t(!1),children:[a.jsx("span",{className:"mr-3",children:l.icon}),l.name]}),a.jsx("button",{className:`p-2 text-gray-100 hover:text-white focus:outline-none rounded-r-lg transition-colors ${r[l.path]?"bg-blue-700 text-white":"hover:bg-blue-700"}`,onClick:()=>i(l.path),children:r[l.path]?a.jsx(yD,{size:16}):a.jsx(wD,{size:16})})]}),a.jsx("div",{className:`transition-all duration-300 overflow-hidden ${r[l.path]?"max-h-40":"max-h-0"}`,children:l.subItems.map(c=>a.jsxs(cm,{to:c.path,className:({isActive:u})=>`flex items-center px-4 py-2 ml-6 mt-1 text-sm rounded-lg transition-colors ${u?"bg-blue-700 text-white":"text-gray-100 hover:bg-blue-700 hover:text-white"}`,onClick:()=>t(!1),children:[a.jsx("span",{className:"mr-2",children:c.icon}),c.name]},c.path))})]}):a.jsxs(cm,{to:l.path,className:({isActive:c})=>`flex items-center px-4 py-3 text-sm rounded-lg transition-colors ${c?"bg-blue-700 text-white":"text-gray-100 hover:bg-blue-700 hover:text-white"}`,onClick:()=>t(!1),children:[a.jsx("span",{className:"mr-3",children:l.icon}),l.name]})},l.path))}),a.jsx("div",{className:"p-4",children:a.jsxs("button",{onClick:n,className:"flex items-center w-full px-4 py-2 text-sm text-gray-100 rounded-lg hover:bg-blue-700 hover:text-white",children:[a.jsx(RD,{size:20,className:"mr-3"}),"Déconnexion"]})})]})]})]})},vC=({onMenuClick:e})=>{const t=Xs(),{user:n}=Ui(),r=()=>{const s=t.pathname;return{"/":"Tableau de bord","/vehicules":"Gestion des Véhicules","/clients":"Gestion des Clients","/contrats":"Gestion des Contrats","/factures":"Gestion des Factures","/reservations":"Gestion des Réservations","/parametres":"Paramètres","/accidents":"Gestion des Accidents","/charges":"Gestion des Charges","/clientpayments":"Gestion des Paiements Clients","/infractions":"Gestion des Infractions","/interventions":"Gestion des Interventions","/login":"Connexion","/traites":"Gestion des Traites","/vehicleinspections":"Gestion des Inspections Véhicules","/vehicleinsurance":"Gestion des Assurances Véhicules"}[s]||"AdminCar"};return a.jsxs("header",{className:"sticky top-0 z-10 flex items-center justify-between h-16 px-4 bg-white border-b border-gray-200 shadow-sm lg:px-6 md:px-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:e,className:"p-2 rounded-md text-gray-600 hover:bg-gray-100 lg:hidden",children:a.jsx(WD,{size:24})}),a.jsx("h1",{className:"hidden md:block ml-4 text-xl font-semibold text-gray-800",children:r()})]}),a.jsx("div",{className:"flex items-center space-x-4"})]})},yC=()=>{const[e,t]=E.useState(!1),{user:n}=Ui(),r=Xs();if(E.useEffect(()=>{r.pathname!=="/login"&&localStorage.setItem("lastPath",r.pathname)},[r]),!n){const s=localStorage.getItem("lastPath")||"/";return a.jsx(Yb,{to:"/login",state:{from:s}})}return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[" ",a.jsx(xC,{isOpen:e,setIsOpen:t}),a.jsxs("div",{className:"flex flex-col flex-1 overflow-y-auto",children:[" ",a.jsx(vC,{onMenuClick:()=>t(!e)}),a.jsxs("main",{className:"flex-1 p-4 md:p-6",children:[" ",a.jsx(qb,{})]})]})]})},tn=({onClick:e,size:t="md",withText:n=!1,className:r="",isEditing:s=!1,onEdit:i,onSave:o,onCancel:l})=>{const c=t==="sm"?16:18,u="text-blue-600 hover:text-blue-900";return i!==void 0&&o!==void 0&&l!==void 0?s?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:o,className:"text-green-600 hover:text-green-900",title:"Save",children:a.jsx(XD,{size:c})}),a.jsx("button",{onClick:l,className:"text-red-600 hover:text-red-900",title:"Cancel",children:a.jsx(kr,{size:c})})]}):a.jsx("button",{onClick:i,className:`${u} ${r}`,title:"Edit",children:a.jsx(hm,{size:c})}):n&&e?a.jsxs("button",{onClick:e,className:`${u} text-sm font-medium flex items-center ${r}`,children:[a.jsx(hm,{size:c,className:"mr-2"}),"Modifier"]}):a.jsx("button",{onClick:e,className:`${u} ${r}`,children:a.jsx(hm,{size:c})})};function Cw(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Cw(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function an(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Cw(e))&&(r&&(r+=" "),r+=t);return r}const Pw=6048e5,bC=864e5,jd=6e4,_d=36e5,wC=1e3,bx=Symbol.for("constructDateFrom");function bt(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&bx in e?e[bx](t):e instanceof Date?new e.constructor(t):new Date(t)}function $e(e,t){return bt(t||e,e)}function br(e,t,n){const r=$e(e,n==null?void 0:n.in);return isNaN(t)?bt((n==null?void 0:n.in)||e,NaN):(t&&r.setDate(r.getDate()+t),r)}function jr(e,t,n){const r=$e(e,n==null?void 0:n.in);if(isNaN(t))return bt(e,NaN);if(!t)return r;const s=r.getDate(),i=bt(e,r.getTime());i.setMonth(r.getMonth()+t+1,0);const o=i.getDate();return s>=o?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}function Ew(e,t,n){return bt(e,+$e(e)+t)}function NC(e,t,n){return Ew(e,t*_d)}let jC={};function $a(){return jC}function fs(e,t){var l,c,u,m;const n=$a(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((m=(u=n.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??0,s=$e(e,t==null?void 0:t.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Di(e,t){return fs(e,{...t,weekStartsOn:1})}function Mw(e,t){const n=$e(e,t==null?void 0:t.in),r=n.getFullYear(),s=bt(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Di(s),o=bt(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=Di(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function ju(e){const t=$e(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function xs(e,...t){const n=bt.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function Ta(e,t){const n=$e(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Ci(e,t,n){const[r,s]=xs(n==null?void 0:n.in,e,t),i=Ta(r),o=Ta(s),l=+i-ju(i),c=+o-ju(o);return Math.round((l-c)/bC)}function _C(e,t){const n=Mw(e,t),r=bt(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Di(r)}function Uf(e,t,n){const r=$e(e,n==null?void 0:n.in);return r.setTime(r.getTime()+t*jd),r}function up(e,t,n){return jr(e,t*3,n)}function kC(e,t,n){return Ew(e,t*1e3)}function _u(e,t,n){return br(e,t*7,n)}function rs(e,t,n){return jr(e,t*12,n)}function wx(e,t){let n,r=t==null?void 0:t.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=bt.bind(null,s));const i=$e(s,r);(!n||n<i||isNaN(+i))&&(n=i)}),bt(r,n||NaN)}function Nx(e,t){let n,r=t==null?void 0:t.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=bt.bind(null,s));const i=$e(s,r);(!n||n>i||isNaN(+i))&&(n=i)}),bt(r,n||NaN)}function SC(e,t,n){const[r,s]=xs(n==null?void 0:n.in,e,t);return+Ta(r)==+Ta(s)}function ss(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ku(e){return!(!ss(e)&&typeof e!="number"||isNaN(+$e(e)))}function Su(e,t,n){const[r,s]=xs(n==null?void 0:n.in,e,t),i=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return i*12+o}function Na(e,t){const n=$e(e,t==null?void 0:t.in);return Math.trunc(n.getMonth()/3)+1}function Du(e,t,n){const[r,s]=xs(n==null?void 0:n.in,e,t),i=r.getFullYear()-s.getFullYear(),o=Na(r)-Na(s);return i*4+o}function Cu(e,t,n){const[r,s]=xs(n==null?void 0:n.in,e,t);return r.getFullYear()-s.getFullYear()}function DC(e,t,n){const[r,s]=xs(n==null?void 0:n.in,e,t),i=jx(r,s),o=Math.abs(Ci(r,s));r.setDate(r.getDate()-i*o);const l=+(jx(r,s)===-i),c=i*(o-l);return c===0?0:c}function jx(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Tw(e,t){const n=$e(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function Ow(e,t){const n=$e(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Wf(e,t){const n=$e(e,t==null?void 0:t.in),r=n.getMonth(),s=r-r%3;return n.setMonth(s,1),n.setHours(0,0,0,0),n}function Fw(e,t){const n=$e(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Aw(e,t){const n=$e(e,t==null?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function kd(e,t){const n=$e(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function CC(e,t){var l,c;const n=$a(),r=n.weekStartsOn??((c=(l=n.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,s=$e(e,t==null?void 0:t.in),i=s.getDay(),o=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}const PC={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},EC=(e,t,n)=>{let r;const s=PC[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function fi(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const MC={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},TC={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},OC={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},FC={date:fi({formats:MC,defaultWidth:"full"}),time:fi({formats:TC,defaultWidth:"full"}),dateTime:fi({formats:OC,defaultWidth:"full"})},AC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},LC=(e,t,n,r)=>AC[e];function Lr(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const RC={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},IC={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$C={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zC={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},HC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},BC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},VC=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},UC={ordinalNumber:VC,era:Lr({values:RC,defaultWidth:"wide"}),quarter:Lr({values:IC,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Lr({values:$C,defaultWidth:"wide"}),day:Lr({values:zC,defaultWidth:"wide"}),dayPeriod:Lr({values:HC,defaultWidth:"wide",formattingValues:BC,defaultFormattingWidth:"wide"})};function Rr(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?YC(l,h=>h.test(o)):WC(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const m=t.slice(o.length);return{value:u,rest:m}}}function WC(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function YC(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Lw(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const qC=/^(\d+)(th|st|nd|rd)?/i,KC=/\d+/i,GC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},QC={any:[/^b/i,/^(a|c)/i]},JC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},XC={any:[/1/i,/2/i,/3/i,/4/i]},ZC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},eP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aP={ordinalNumber:Lw({matchPattern:qC,parsePattern:KC,valueCallback:e=>parseInt(e,10)}),era:Rr({matchPatterns:GC,defaultMatchWidth:"wide",parsePatterns:QC,defaultParseWidth:"any"}),quarter:Rr({matchPatterns:JC,defaultMatchWidth:"wide",parsePatterns:XC,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Rr({matchPatterns:ZC,defaultMatchWidth:"wide",parsePatterns:eP,defaultParseWidth:"any"}),day:Rr({matchPatterns:tP,defaultMatchWidth:"wide",parsePatterns:nP,defaultParseWidth:"any"}),dayPeriod:Rr({matchPatterns:rP,defaultMatchWidth:"any",parsePatterns:sP,defaultParseWidth:"any"})},Rw={code:"en-US",formatDistance:EC,formatLong:FC,formatRelative:LC,localize:UC,match:aP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function iP(e,t){const n=$e(e,t==null?void 0:t.in);return Ci(n,kd(n))+1}function dp(e,t){const n=$e(e,t==null?void 0:t.in),r=+Di(n)-+_C(n);return Math.round(r/Pw)+1}function mp(e,t){var m,h,f,b;const n=$e(e,t==null?void 0:t.in),r=n.getFullYear(),s=$a(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((b=(f=s.locale)==null?void 0:f.options)==null?void 0:b.firstWeekContainsDate)??1,o=bt((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=fs(o,t),c=bt((t==null?void 0:t.in)||e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=fs(c,t);return+n>=+l?r+1:+n>=+u?r:r-1}function oP(e,t){var l,c,u,m;const n=$a(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(u=n.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,s=mp(e,t),i=bt((t==null?void 0:t.in)||e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),fs(i,t)}function Iw(e,t){const n=$e(e,t==null?void 0:t.in),r=+fs(n,t)-+oP(n,t);return Math.round(r/Pw)+1}function xt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const ys={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return xt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):xt(n+1,2)},d(e,t){return xt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return xt(e.getHours()%12||12,t.length)},H(e,t){return xt(e.getHours(),t.length)},m(e,t){return xt(e.getMinutes(),t.length)},s(e,t){return xt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return xt(s,t.length)}},Va={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_x={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ys.y(e,t)},Y:function(e,t,n,r){const s=mp(e,r),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return xt(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):xt(i,t.length)},R:function(e,t){const n=Mw(e);return xt(n,t.length)},u:function(e,t){const n=e.getFullYear();return xt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return xt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return xt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ys.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return xt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=Iw(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):xt(s,t.length)},I:function(e,t,n){const r=dp(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):xt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ys.d(e,t)},D:function(e,t,n){const r=iP(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):xt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return xt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return xt(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return xt(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Va.noon:r===0?s=Va.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Va.evening:r>=12?s=Va.afternoon:r>=4?s=Va.morning:s=Va.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ys.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ys.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):xt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):xt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ys.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ys.s(e,t)},S:function(e,t){return ys.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Sx(r);case"XXXX":case"XX":return aa(r);case"XXXXX":case"XXX":default:return aa(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Sx(r);case"xxxx":case"xx":return aa(r);case"xxxxx":case"xxx":default:return aa(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+kx(r,":");case"OOOO":default:return"GMT"+aa(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+kx(r,":");case"zzzz":default:return"GMT"+aa(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return xt(r,t.length)},T:function(e,t,n){return xt(+e,t.length)}};function kx(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+t+xt(i,2)}function Sx(e,t){return e%60===0?(e>0?"-":"+")+xt(Math.abs(e)/60,2):aa(e,t)}function aa(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=xt(Math.trunc(r/60),2),i=xt(r%60,2);return n+s+t+i}const Dx=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},$w=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},lP=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Dx(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Dx(r,t)).replace("{{time}}",$w(s,t))},Yf={p:$w,P:lP},cP=/^D+$/,uP=/^Y+$/,dP=["D","DD","YY","YYYY"];function mP(e){return cP.test(e)}function fP(e){return uP.test(e)}function hP(e,t,n){const r=pP(e,t,n);if(console.warn(r),dP.includes(e))throw new RangeError(r)}function pP(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vP=/^'([^]*?)'?$/,yP=/''/g,bP=/[a-zA-Z]/;function Cx(e,t,n){var m,h,f,b,v,D,p,y;const r=$a(),s=(n==null?void 0:n.locale)??r.locale??Rw,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((b=(f=r.locale)==null?void 0:f.options)==null?void 0:b.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((D=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:D.weekStartsOn)??r.weekStartsOn??((y=(p=r.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??0,l=$e(e,n==null?void 0:n.in);if(!ku(l))throw new RangeError("Invalid time value");let c=t.match(xP).map(w=>{const S=w[0];if(S==="p"||S==="P"){const j=Yf[S];return j(w,s.formatLong)}return w}).join("").match(gP).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const S=w[0];if(S==="'")return{isToken:!1,value:wP(w)};if(_x[S])return{isToken:!0,value:w};if(S.match(bP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:w}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(w=>{if(!w.isToken)return w.value;const S=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&fP(S)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&mP(S))&&hP(S,t,String(e));const j=_x[S[0]];return j(l,S,s.localize,u)}).join("")}function wP(e){const t=e.match(vP);return t?t[1].replace(yP,"'"):e}function Px(e,t){return $e(e,t==null?void 0:t.in).getDate()}function NP(e,t){return $e(e,t==null?void 0:t.in).getDay()}function jP(e,t){const n=$e(e,t==null?void 0:t.in),r=n.getFullYear(),s=n.getMonth(),i=bt(n,0);return i.setFullYear(r,s+1,0),i.setHours(0,0,0,0),i.getDate()}function _P(){return Object.assign({},$a())}function as(e,t){return $e(e,t==null?void 0:t.in).getHours()}function kP(e,t){const n=$e(e,t==null?void 0:t.in).getDay();return n===0?7:n}function is(e,t){return $e(e,t==null?void 0:t.in).getMinutes()}function hn(e,t){return $e(e,t==null?void 0:t.in).getMonth()}function Hs(e){return $e(e).getSeconds()}function qf(e){return+$e(e)}function rt(e,t){return $e(e,t==null?void 0:t.in).getFullYear()}function Ys(e,t){return+$e(e)>+$e(t)}function Oa(e,t){return+$e(e)<+$e(t)}function SP(e,t){return+$e(e)==+$e(t)}function DP(e,t){const n=CP(t)?new t(0):bt(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}function CP(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}const PP=10;class zw{constructor(){ke(this,"subPriority",0)}validate(t,n){return!0}}class EP extends zw{constructor(t,n,r,s,i){super(),this.value=t,this.validateValue=n,this.setValue=r,this.priority=s,i&&(this.subPriority=i)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,r){return this.setValue(t,n,this.value,r)}}class MP extends zw{constructor(n,r){super();ke(this,"priority",PP);ke(this,"subPriority",-1);this.context=n||(s=>bt(r,s))}set(n,r){return r.timestampIsSet?n:bt(n,DP(n,this.context))}}class ft{run(t,n,r,s){const i=this.parse(t,n,r,s);return i?{setter:new EP(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,n,r){return!0}}class TP extends ft{constructor(){super(...arguments);ke(this,"priority",140);ke(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})||s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"})}}set(n,r,s){return r.era=s,n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}const It={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ir={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function $t(e,t){return e&&{value:t(e.value),rest:e.rest}}function Pt(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function $r(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(s*_d+i*jd+o*wC),rest:t.slice(n[0].length)}}function Hw(e){return Pt(It.anyDigitsSigned,e)}function Ft(e,t){switch(e){case 1:return Pt(It.singleDigit,t);case 2:return Pt(It.twoDigits,t);case 3:return Pt(It.threeDigits,t);case 4:return Pt(It.fourDigits,t);default:return Pt(new RegExp("^\\d{1,"+e+"}"),t)}}function Pu(e,t){switch(e){case 1:return Pt(It.singleDigitSigned,t);case 2:return Pt(It.twoDigitsSigned,t);case 3:return Pt(It.threeDigitsSigned,t);case 4:return Pt(It.fourDigitsSigned,t);default:return Pt(new RegExp("^-?\\d{1,"+e+"}"),t)}}function fp(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Bw(e,t){const n=t>0,r=n?t:1-t;let s;if(r<=50)s=e||100;else{const i=r+50,o=Math.trunc(i/100)*100,l=e>=i%100;s=e+o-(l?100:0)}return n?s:1-s}function Vw(e){return e%400===0||e%4===0&&e%100!==0}class OP extends ft{constructor(){super(...arguments);ke(this,"priority",130);ke(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,s){const i=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return $t(Ft(4,n),i);case"yo":return $t(s.ordinalNumber(n,{unit:"year"}),i);default:return $t(Ft(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s){const i=n.getFullYear();if(s.isTwoDigitYear){const l=Bw(s.year,i);return n.setFullYear(l,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class FP extends ft{constructor(){super(...arguments);ke(this,"priority",130);ke(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,s){const i=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return $t(Ft(4,n),i);case"Yo":return $t(s.ordinalNumber(n,{unit:"year"}),i);default:return $t(Ft(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s,i){const o=mp(n,i);if(s.isTwoDigitYear){const c=Bw(s.year,o);return n.setFullYear(c,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),fs(n,i)}const l=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(l,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),fs(n,i)}}class AP extends ft{constructor(){super(...arguments);ke(this,"priority",130);ke(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return Pu(r==="R"?4:r.length,n)}set(n,r,s){const i=bt(n,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),Di(i)}}class LP extends ft{constructor(){super(...arguments);ke(this,"priority",130);ke(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return Pu(r==="u"?4:r.length,n)}set(n,r,s){return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class RP extends ft{constructor(){super(...arguments);ke(this,"priority",120);ke(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"Q":case"QQ":return Ft(r.length,n);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})||s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class IP extends ft{constructor(){super(...arguments);ke(this,"priority",120);ke(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"q":case"qq":return Ft(r.length,n);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})||s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class $P extends ft{constructor(){super(...arguments);ke(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ke(this,"priority",110)}parse(n,r,s){const i=o=>o-1;switch(r){case"M":return $t(Pt(It.month,n),i);case"MM":return $t(Ft(2,n),i);case"Mo":return $t(s.ordinalNumber(n,{unit:"month"}),i);case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})||s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}class zP extends ft{constructor(){super(...arguments);ke(this,"priority",110);ke(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,s){const i=o=>o-1;switch(r){case"L":return $t(Pt(It.month,n),i);case"LL":return $t(Ft(2,n),i);case"Lo":return $t(s.ordinalNumber(n,{unit:"month"}),i);case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})||s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}function HP(e,t,n){const r=$e(e,n==null?void 0:n.in),s=Iw(r,n)-t;return r.setDate(r.getDate()-s*7),$e(r,n==null?void 0:n.in)}class BP extends ft{constructor(){super(...arguments);ke(this,"priority",100);ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,s){switch(r){case"w":return Pt(It.week,n);case"wo":return s.ordinalNumber(n,{unit:"week"});default:return Ft(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s,i){return fs(HP(n,s,i),i)}}function VP(e,t,n){const r=$e(e,n==null?void 0:n.in),s=dp(r,n)-t;return r.setDate(r.getDate()-s*7),r}class UP extends ft{constructor(){super(...arguments);ke(this,"priority",100);ke(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,s){switch(r){case"I":return Pt(It.week,n);case"Io":return s.ordinalNumber(n,{unit:"week"});default:return Ft(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s){return Di(VP(n,s))}}const WP=[31,28,31,30,31,30,31,31,30,31,30,31],YP=[31,29,31,30,31,30,31,31,30,31,30,31];class qP extends ft{constructor(){super(...arguments);ke(this,"priority",90);ke(this,"subPriority",1);ke(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"d":return Pt(It.date,n);case"do":return s.ordinalNumber(n,{unit:"date"});default:return Ft(r.length,n)}}validate(n,r){const s=n.getFullYear(),i=Vw(s),o=n.getMonth();return i?r>=1&&r<=YP[o]:r>=1&&r<=WP[o]}set(n,r,s){return n.setDate(s),n.setHours(0,0,0,0),n}}class KP extends ft{constructor(){super(...arguments);ke(this,"priority",90);ke(this,"subpriority",1);ke(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,s){switch(r){case"D":case"DD":return Pt(It.dayOfYear,n);case"Do":return s.ordinalNumber(n,{unit:"date"});default:return Ft(r.length,n)}}validate(n,r){const s=n.getFullYear();return Vw(s)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,s){return n.setMonth(0,s),n.setHours(0,0,0,0),n}}function hp(e,t,n){var h,f,b,v;const r=$a(),s=(n==null?void 0:n.weekStartsOn)??((f=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((v=(b=r.locale)==null?void 0:b.options)==null?void 0:v.weekStartsOn)??0,i=$e(e,n==null?void 0:n.in),o=i.getDay(),c=(t%7+7)%7,u=7-s,m=t<0||t>6?t-(o+u)%7:(c+u)%7-(o+u)%7;return br(i,m,n)}class GP extends ft{constructor(){super(...arguments);ke(this,"priority",90);ke(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=hp(n,s,i),n.setHours(0,0,0,0),n}}class QP extends ft{constructor(){super(...arguments);ke(this,"priority",90);ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,s,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return $t(Ft(r.length,n),o);case"eo":return $t(s.ordinalNumber(n,{unit:"day"}),o);case"eee":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=hp(n,s,i),n.setHours(0,0,0,0),n}}class JP extends ft{constructor(){super(...arguments);ke(this,"priority",90);ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,s,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return $t(Ft(r.length,n),o);case"co":return $t(s.ordinalNumber(n,{unit:"day"}),o);case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})||s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=hp(n,s,i),n.setHours(0,0,0,0),n}}function XP(e,t,n){const r=$e(e,n==null?void 0:n.in),s=kP(r,n),i=t-s;return br(r,i,n)}class ZP extends ft{constructor(){super(...arguments);ke(this,"priority",90);ke(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,s){const i=o=>o===0?7:o;switch(r){case"i":case"ii":return Ft(r.length,n);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return $t(s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiii":return $t(s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiiii":return $t(s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiii":default:return $t(s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i)}}validate(n,r){return r>=1&&r<=7}set(n,r,s){return n=XP(n,s),n.setHours(0,0,0,0),n}}class e5 extends ft{constructor(){super(...arguments);ke(this,"priority",80);ke(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(fp(s),0,0,0),n}}class t5 extends ft{constructor(){super(...arguments);ke(this,"priority",80);ke(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(fp(s),0,0,0),n}}class n5 extends ft{constructor(){super(...arguments);ke(this,"priority",80);ke(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(fp(s),0,0,0),n}}class r5 extends ft{constructor(){super(...arguments);ke(this,"priority",70);ke(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,s){switch(r){case"h":return Pt(It.hour12h,n);case"ho":return s.ordinalNumber(n,{unit:"hour"});default:return Ft(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,s){const i=n.getHours()>=12;return i&&s<12?n.setHours(s+12,0,0,0):!i&&s===12?n.setHours(0,0,0,0):n.setHours(s,0,0,0),n}}class s5 extends ft{constructor(){super(...arguments);ke(this,"priority",70);ke(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,s){switch(r){case"H":return Pt(It.hour23h,n);case"Ho":return s.ordinalNumber(n,{unit:"hour"});default:return Ft(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,s){return n.setHours(s,0,0,0),n}}class a5 extends ft{constructor(){super(...arguments);ke(this,"priority",70);ke(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,s){switch(r){case"K":return Pt(It.hour11h,n);case"Ko":return s.ordinalNumber(n,{unit:"hour"});default:return Ft(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.getHours()>=12&&s<12?n.setHours(s+12,0,0,0):n.setHours(s,0,0,0),n}}class i5 extends ft{constructor(){super(...arguments);ke(this,"priority",70);ke(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,s){switch(r){case"k":return Pt(It.hour24h,n);case"ko":return s.ordinalNumber(n,{unit:"hour"});default:return Ft(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,s){const i=s<=24?s%24:s;return n.setHours(i,0,0,0),n}}class o5 extends ft{constructor(){super(...arguments);ke(this,"priority",60);ke(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"m":return Pt(It.minute,n);case"mo":return s.ordinalNumber(n,{unit:"minute"});default:return Ft(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setMinutes(s,0,0),n}}class l5 extends ft{constructor(){super(...arguments);ke(this,"priority",50);ke(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"s":return Pt(It.second,n);case"so":return s.ordinalNumber(n,{unit:"second"});default:return Ft(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setSeconds(s,0),n}}class c5 extends ft{constructor(){super(...arguments);ke(this,"priority",30);ke(this,"incompatibleTokens",["t","T"])}parse(n,r){const s=i=>Math.trunc(i*Math.pow(10,-r.length+3));return $t(Ft(r.length,n),s)}set(n,r,s){return n.setMilliseconds(s),n}}class u5 extends ft{constructor(){super(...arguments);ke(this,"priority",10);ke(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return $r(Ir.basicOptionalMinutes,n);case"XX":return $r(Ir.basic,n);case"XXXX":return $r(Ir.basicOptionalSeconds,n);case"XXXXX":return $r(Ir.extendedOptionalSeconds,n);case"XXX":default:return $r(Ir.extended,n)}}set(n,r,s){return r.timestampIsSet?n:bt(n,n.getTime()-ju(n)-s)}}class d5 extends ft{constructor(){super(...arguments);ke(this,"priority",10);ke(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return $r(Ir.basicOptionalMinutes,n);case"xx":return $r(Ir.basic,n);case"xxxx":return $r(Ir.basicOptionalSeconds,n);case"xxxxx":return $r(Ir.extendedOptionalSeconds,n);case"xxx":default:return $r(Ir.extended,n)}}set(n,r,s){return r.timestampIsSet?n:bt(n,n.getTime()-ju(n)-s)}}class m5 extends ft{constructor(){super(...arguments);ke(this,"priority",40);ke(this,"incompatibleTokens","*")}parse(n){return Hw(n)}set(n,r,s){return[bt(n,s*1e3),{timestampIsSet:!0}]}}class f5 extends ft{constructor(){super(...arguments);ke(this,"priority",20);ke(this,"incompatibleTokens","*")}parse(n){return Hw(n)}set(n,r,s){return[bt(n,s),{timestampIsSet:!0}]}}const h5={G:new TP,y:new OP,Y:new FP,R:new AP,u:new LP,Q:new RP,q:new IP,M:new $P,L:new zP,w:new BP,I:new UP,d:new qP,D:new KP,E:new GP,e:new QP,c:new JP,i:new ZP,a:new e5,b:new t5,B:new n5,h:new r5,H:new s5,K:new a5,k:new i5,m:new o5,s:new l5,S:new c5,X:new u5,x:new d5,t:new m5,T:new f5},p5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,g5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,x5=/^'([^]*?)'?$/,v5=/''/g,y5=/\S/,b5=/[a-zA-Z]/;function w5(e,t,n,r){var p,y,w,S,j,F,C,T;const s=()=>bt((r==null?void 0:r.in)||n,NaN),i=_P(),o=(r==null?void 0:r.locale)??i.locale??Rw,l=(r==null?void 0:r.firstWeekContainsDate)??((y=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??i.firstWeekContainsDate??((S=(w=i.locale)==null?void 0:w.options)==null?void 0:S.firstWeekContainsDate)??1,c=(r==null?void 0:r.weekStartsOn)??((F=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:F.weekStartsOn)??i.weekStartsOn??((T=(C=i.locale)==null?void 0:C.options)==null?void 0:T.weekStartsOn)??0;if(!t)return e?s():$e(n,r==null?void 0:r.in);const u={firstWeekContainsDate:l,weekStartsOn:c,locale:o},m=[new MP(r==null?void 0:r.in,n)],h=t.match(g5).map(P=>{const V=P[0];if(V in Yf){const Q=Yf[V];return Q(P,o.formatLong)}return P}).join("").match(p5),f=[];for(let P of h){const V=P[0],Q=h5[V];if(Q){const{incompatibleTokens:ee}=Q;if(Array.isArray(ee)){const fe=f.find(G=>ee.includes(G.token)||G.token===V);if(fe)throw new RangeError(`The format string mustn't contain \`${fe.fullToken}\` and \`${P}\` at the same time`)}else if(Q.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${P}\` and any other token at the same time`);f.push({token:V,fullToken:P});const ce=Q.run(e,P,o.match,u);if(!ce)return s();m.push(ce.setter),e=ce.rest}else{if(V.match(b5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+V+"`");if(P==="''"?P="'":V==="'"&&(P=N5(P)),e.indexOf(P)===0)e=e.slice(P.length);else return s()}}if(e.length>0&&y5.test(e))return s();const b=m.map(P=>P.priority).sort((P,V)=>V-P).filter((P,V,Q)=>Q.indexOf(P)===V).map(P=>m.filter(V=>V.priority===P).sort((V,Q)=>Q.subPriority-V.subPriority)).map(P=>P[0]);let v=$e(n,r==null?void 0:r.in);if(isNaN(+v))return s();const D={};for(const P of b){if(!P.validate(v,u))return s();const V=P.set(v,D,u);Array.isArray(V)?(v=V[0],Object.assign(D,V[1])):v=V}return v}function N5(e){return e.match(x5)[1].replace(v5,"'")}function j5(e,t,n){const[r,s]=xs(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function _5(e,t,n){const[r,s]=xs(n==null?void 0:n.in,e,t);return+Wf(r)==+Wf(s)}function k5(e,t,n){const[r,s]=xs(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()}function ml(e,t,n){const r=+$e(e,n==null?void 0:n.in),[s,i]=[+$e(t.start,n==null?void 0:n.in),+$e(t.end,n==null?void 0:n.in)].sort((o,l)=>o-l);return r>=s&&r<=i}function S5(e,t,n){return br(e,-1,n)}function D5(e,t){const n=()=>bt(t==null?void 0:t.in,NaN),s=M5(e);let i;if(s.date){const u=T5(s.date,2);i=O5(u.restDateString,u.year)}if(!i||isNaN(+i))return n();const o=+i;let l=0,c;if(s.time&&(l=F5(s.time),isNaN(l)))return n();if(s.timezone){if(c=A5(s.timezone),isNaN(c))return n()}else{const u=new Date(o+l),m=$e(0,t==null?void 0:t.in);return m.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),m.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),m}return $e(o+l+c,t==null?void 0:t.in)}const ec={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},C5=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,P5=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,E5=/^([+-])(\d{2})(?::?(\d{2}))?$/;function M5(e){const t={},n=e.split(ec.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],ec.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ec.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const s=ec.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function T5(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((r[1]||r[2]).length)}}function O5(e,t){if(t===null)return new Date(NaN);const n=e.match(C5);if(!n)return new Date(NaN);const r=!!n[4],s=no(n[1]),i=no(n[2])-1,o=no(n[3]),l=no(n[4]),c=no(n[5])-1;if(r)return z5(t,l,c)?L5(t,l,c):new Date(NaN);{const u=new Date(0);return!I5(t,i,o)||!$5(t,s)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(s,o)),u)}}function no(e){return e?parseInt(e):1}function F5(e){const t=e.match(P5);if(!t)return NaN;const n=pm(t[1]),r=pm(t[2]),s=pm(t[3]);return H5(n,r,s)?n*_d+r*jd+s*1e3:NaN}function pm(e){return e&&parseFloat(e.replace(",","."))||0}function A5(e){if(e==="Z")return 0;const t=e.match(E5);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return B5(r,s)?n*(r*_d+s*jd):NaN}function L5(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const s=r.getUTCDay()||7,i=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const R5=[31,null,31,30,31,30,31,31,30,31,30,31];function Uw(e){return e%400===0||e%4===0&&e%100!==0}function I5(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(R5[t]||(Uw(e)?29:28))}function $5(e,t){return t>=1&&t<=(Uw(e)?366:365)}function z5(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function H5(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function B5(e,t){return t>=0&&t<=59}function Zn(e,t,n){const r=$e(e,n==null?void 0:n.in),s=r.getFullYear(),i=r.getDate(),o=bt(e,0);o.setFullYear(s,t,15),o.setHours(0,0,0,0);const l=jP(o);return r.setMonth(t,Math.min(i,l)),r}function hi(e,t,n){const r=$e(e,n==null?void 0:n.in);return r.setHours(t),r}function pi(e,t,n){const r=$e(e,n==null?void 0:n.in);return r.setMinutes(t),r}function Ka(e,t,n){const r=$e(e,n==null?void 0:n.in),s=Math.trunc(r.getMonth()/3)+1,i=t-s;return Zn(r,r.getMonth()+i*3)}function $c(e,t,n){const r=$e(e,n==null?void 0:n.in);return r.setSeconds(t),r}function Or(e,t,n){const r=$e(e,n==null?void 0:n.in);return isNaN(+r)?bt(e,NaN):(r.setFullYear(t),r)}function ja(e,t,n){return jr(e,-t,n)}function Ww(e,t,n){return up(e,-1,n)}function Ex(e,t,n){return _u(e,-1,n)}function Pi(e,t,n){return rs(e,-t,n)}function Sd(){return typeof window<"u"}function Wi(e){return Yw(e)?(e.nodeName||"").toLowerCase():"#document"}function Hn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Yr(e){var t;return(t=(Yw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Yw(e){return Sd()?e instanceof Node||e instanceof Hn(e).Node:!1}function wn(e){return Sd()?e instanceof Element||e instanceof Hn(e).Element:!1}function Wr(e){return Sd()?e instanceof HTMLElement||e instanceof Hn(e).HTMLElement:!1}function Mx(e){return!Sd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Hn(e).ShadowRoot}const V5=new Set(["inline","contents"]);function El(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=cr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!V5.has(s)}const U5=new Set(["table","td","th"]);function W5(e){return U5.has(Wi(e))}const Y5=[":popover-open",":modal"];function Dd(e){return Y5.some(t=>{try{return e.matches(t)}catch{return!1}})}const q5=["transform","translate","scale","rotate","perspective"],K5=["transform","translate","scale","rotate","perspective","filter"],G5=["paint","layout","strict","content"];function pp(e){const t=gp(),n=wn(e)?cr(e):e;return q5.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||K5.some(r=>(n.willChange||"").includes(r))||G5.some(r=>(n.contain||"").includes(r))}function Q5(e){let t=qs(e);for(;Wr(t)&&!Ei(t);){if(pp(t))return t;if(Dd(t))return null;t=qs(t)}return null}function gp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const J5=new Set(["html","body","#document"]);function Ei(e){return J5.has(Wi(e))}function cr(e){return Hn(e).getComputedStyle(e)}function Cd(e){return wn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qs(e){if(Wi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Mx(e)&&e.host||Yr(e);return Mx(t)?t.host:t}function qw(e){const t=qs(e);return Ei(t)?e.ownerDocument?e.ownerDocument.body:e.body:Wr(t)&&El(t)?t:qw(t)}function fl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=qw(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=Hn(s);if(i){const l=Kf(o);return t.concat(o,o.visualViewport||[],El(s)?s:[],l&&n?fl(l):[])}return t.concat(s,fl(s,[],n))}function Kf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Mi=Math.min,_a=Math.max,Eu=Math.round,tc=Math.floor,Vr=e=>({x:e,y:e}),X5={left:"right",right:"left",bottom:"top",top:"bottom"},Z5={start:"end",end:"start"};function eE(e,t,n){return _a(e,Mi(t,n))}function Pd(e,t){return typeof e=="function"?e(t):e}function Ti(e){return e.split("-")[0]}function Ml(e){return e.split("-")[1]}function tE(e){return e==="x"?"y":"x"}function xp(e){return e==="y"?"height":"width"}const nE=new Set(["top","bottom"]);function ha(e){return nE.has(Ti(e))?"y":"x"}function vp(e){return tE(ha(e))}function rE(e,t,n){n===void 0&&(n=!1);const r=Ml(e),s=vp(e),i=xp(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Mu(o)),[o,Mu(o)]}function sE(e){const t=Mu(e);return[Gf(e),t,Gf(t)]}function Gf(e){return e.replace(/start|end/g,t=>Z5[t])}const Tx=["left","right"],Ox=["right","left"],aE=["top","bottom"],iE=["bottom","top"];function oE(e,t,n){switch(e){case"top":case"bottom":return n?t?Ox:Tx:t?Tx:Ox;case"left":case"right":return t?aE:iE;default:return[]}}function lE(e,t,n,r){const s=Ml(e);let i=oE(Ti(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(Gf)))),i}function Mu(e){return e.replace(/left|right|bottom|top/g,t=>X5[t])}function cE(e){return{top:0,right:0,bottom:0,left:0,...e}}function Kw(e){return typeof e!="number"?cE(e):{top:e,right:e,bottom:e,left:e}}function Tu(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}var uE=typeof document<"u",dE=function(){},Ou=uE?E.useLayoutEffect:dE;const mE={...fh},fE=mE.useInsertionEffect,hE=fE||(e=>e());function pE(e){const t=E.useRef(()=>{});return hE(()=>{t.current=e}),E.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Fx(e,t,n){let{reference:r,floating:s}=e;const i=ha(t),o=vp(t),l=xp(o),c=Ti(t),u=i==="y",m=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[l]/2-s[l]/2;let b;switch(c){case"top":b={x:m,y:r.y-s.height};break;case"bottom":b={x:m,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:h};break;case"left":b={x:r.x-s.width,y:h};break;default:b={x:r.x,y:r.y}}switch(Ml(t)){case"start":b[o]-=f*(n&&u?-1:1);break;case"end":b[o]+=f*(n&&u?-1:1);break}return b}const gE=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:m,y:h}=Fx(u,r,c),f=r,b={},v=0;for(let D=0;D<l.length;D++){const{name:p,fn:y}=l[D],{x:w,y:S,data:j,reset:F}=await y({x:m,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:b,rects:u,platform:o,elements:{reference:e,floating:t}});m=w??m,h=S??h,b={...b,[p]:{...b[p],...j}},F&&v<=50&&(v++,typeof F=="object"&&(F.placement&&(f=F.placement),F.rects&&(u=F.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):F.rects),{x:m,y:h}=Fx(u,f,c)),D=-1)}return{x:m,y:h,placement:f,strategy:s,middlewareData:b}};async function xE(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:h="floating",altBoundary:f=!1,padding:b=0}=Pd(t,e),v=Kw(b),p=l[f?h==="floating"?"reference":"floating":h],y=Tu(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(p)))==null||n?p:p.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:m,strategy:c})),w=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},F=Tu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:S,strategy:c}):w);return{top:(y.top-F.top+v.top)/j.y,bottom:(F.bottom-y.bottom+v.bottom)/j.y,left:(y.left-F.left+v.left)/j.x,right:(F.right-y.right+v.right)/j.x}}const vE=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:m=0}=Pd(e,t)||{};if(u==null)return{};const h=Kw(m),f={x:n,y:r},b=vp(s),v=xp(b),D=await o.getDimensions(u),p=b==="y",y=p?"top":"left",w=p?"bottom":"right",S=p?"clientHeight":"clientWidth",j=i.reference[v]+i.reference[b]-f[b]-i.floating[v],F=f[b]-i.reference[b],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=C?C[S]:0;(!T||!await(o.isElement==null?void 0:o.isElement(C)))&&(T=l.floating[S]||i.floating[v]);const P=j/2-F/2,V=T/2-D[v]/2-1,Q=Mi(h[y],V),ee=Mi(h[w],V),ce=Q,fe=T-D[v]-ee,G=T/2-D[v]/2+P,re=eE(ce,G,fe),$=!c.arrow&&Ml(s)!=null&&G!==re&&i.reference[v]/2-(G<ce?Q:ee)-D[v]/2<0,H=$?G<ce?G-ce:G-fe:0;return{[b]:f[b]+H,data:{[b]:re,centerOffset:G-re-H,...$&&{alignmentOffset:H}},reset:$}}}),yE=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:m=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:D=!0,...p}=Pd(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=Ti(s),w=ha(l),S=Ti(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),F=f||(S||!D?[Mu(l)]:sE(l)),C=v!=="none";!f&&C&&F.push(...lE(l,D,v,j));const T=[l,...F],P=await xE(t,p),V=[];let Q=((r=i.flip)==null?void 0:r.overflows)||[];if(m&&V.push(P[y]),h){const G=rE(s,o,j);V.push(P[G[0]],P[G[1]])}if(Q=[...Q,{placement:s,overflows:V}],!V.every(G=>G<=0)){var ee,ce;const G=(((ee=i.flip)==null?void 0:ee.index)||0)+1,re=T[G];if(re&&(!(h==="alignment"?w!==ha(re):!1)||Q.every(Y=>Y.overflows[0]>0&&ha(Y.placement)===w)))return{data:{index:G,overflows:Q},reset:{placement:re}};let $=(ce=Q.filter(H=>H.overflows[0]<=0).sort((H,Y)=>H.overflows[1]-Y.overflows[1])[0])==null?void 0:ce.placement;if(!$)switch(b){case"bestFit":{var fe;const H=(fe=Q.filter(Y=>{if(C){const X=ha(Y.placement);return X===w||X==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(X=>X>0).reduce((X,J)=>X+J,0)]).sort((Y,X)=>Y[1]-X[1])[0])==null?void 0:fe[0];H&&($=H);break}case"initialPlacement":$=l;break}if(s!==$)return{reset:{placement:$}}}return{}}}},bE=new Set(["left","top"]);async function wE(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ti(n),l=Ml(n),c=ha(n)==="y",u=bE.has(o)?-1:1,m=i&&c?-1:1,h=Pd(t,e);let{mainAxis:f,crossAxis:b,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(b=l==="end"?v*-1:v),c?{x:b*m,y:f*u}:{x:f*u,y:b*m}}const NE=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=t,c=await wE(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}};function Gw(e){const t=cr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Wr(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,l=Eu(n)!==i||Eu(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function yp(e){return wn(e)?e:e.contextElement}function gi(e){const t=yp(e);if(!Wr(t))return Vr(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=Gw(t);let o=(i?Eu(n.width):n.width)/r,l=(i?Eu(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const jE=Vr(0);function Qw(e){const t=Hn(e);return!gp()||!t.visualViewport?jE:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function _E(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Hn(e)?!1:t}function Fa(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=yp(e);let o=Vr(1);t&&(r?wn(r)&&(o=gi(r)):o=gi(e));const l=_E(i,n,r)?Qw(i):Vr(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,m=s.width/o.x,h=s.height/o.y;if(i){const f=Hn(i),b=r&&wn(r)?Hn(r):r;let v=f,D=Kf(v);for(;D&&r&&b!==v;){const p=gi(D),y=D.getBoundingClientRect(),w=cr(D),S=y.left+(D.clientLeft+parseFloat(w.paddingLeft))*p.x,j=y.top+(D.clientTop+parseFloat(w.paddingTop))*p.y;c*=p.x,u*=p.y,m*=p.x,h*=p.y,c+=S,u+=j,v=Hn(D),D=Kf(v)}}return Tu({width:m,height:h,x:c,y:u})}function bp(e,t){const n=Cd(e).scrollLeft;return t?t.left+n:Fa(Yr(e)).left+n}function Jw(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:bp(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function kE(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=Yr(r),l=t?Dd(t.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Vr(1);const m=Vr(0),h=Wr(r);if((h||!h&&!i)&&((Wi(r)!=="body"||El(o))&&(c=Cd(r)),Wr(r))){const b=Fa(r);u=gi(r),m.x=b.x+r.clientLeft,m.y=b.y+r.clientTop}const f=o&&!h&&!i?Jw(o,c,!0):Vr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+m.x+f.x,y:n.y*u.y-c.scrollTop*u.y+m.y+f.y}}function SE(e){return Array.from(e.getClientRects())}function DE(e){const t=Yr(e),n=Cd(e),r=e.ownerDocument.body,s=_a(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=_a(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+bp(e);const l=-n.scrollTop;return cr(r).direction==="rtl"&&(o+=_a(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function CE(e,t){const n=Hn(e),r=Yr(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=gp();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const PE=new Set(["absolute","fixed"]);function EE(e,t){const n=Fa(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Wr(e)?gi(e):Vr(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function Ax(e,t,n){let r;if(t==="viewport")r=CE(e,n);else if(t==="document")r=DE(Yr(e));else if(wn(t))r=EE(t,n);else{const s=Qw(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Tu(r)}function Xw(e,t){const n=qs(e);return n===t||!wn(n)||Ei(n)?!1:cr(n).position==="fixed"||Xw(n,t)}function ME(e,t){const n=t.get(e);if(n)return n;let r=fl(e,[],!1).filter(l=>wn(l)&&Wi(l)!=="body"),s=null;const i=cr(e).position==="fixed";let o=i?qs(e):e;for(;wn(o)&&!Ei(o);){const l=cr(o),c=pp(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&PE.has(s.position)||El(o)&&!c&&Xw(e,o))?r=r.filter(m=>m!==o):s=l,o=qs(o)}return t.set(e,r),r}function TE(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?Dd(t)?[]:ME(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,m)=>{const h=Ax(t,m,s);return u.top=_a(h.top,u.top),u.right=Mi(h.right,u.right),u.bottom=Mi(h.bottom,u.bottom),u.left=_a(h.left,u.left),u},Ax(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function OE(e){const{width:t,height:n}=Gw(e);return{width:t,height:n}}function FE(e,t,n){const r=Wr(t),s=Yr(t),i=n==="fixed",o=Fa(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Vr(0);function u(){c.x=bp(s)}if(r||!r&&!i)if((Wi(t)!=="body"||El(s))&&(l=Cd(t)),r){const b=Fa(t,!0,i,t);c.x=b.x+t.clientLeft,c.y=b.y+t.clientTop}else s&&u();i&&!r&&s&&u();const m=s&&!r&&!i?Jw(s,l):Vr(0),h=o.left+l.scrollLeft-c.x-m.x,f=o.top+l.scrollTop-c.y-m.y;return{x:h,y:f,width:o.width,height:o.height}}function gm(e){return cr(e).position==="static"}function Lx(e,t){if(!Wr(e)||cr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Yr(e)===n&&(n=n.ownerDocument.body),n}function Zw(e,t){const n=Hn(e);if(Dd(e))return n;if(!Wr(e)){let s=qs(e);for(;s&&!Ei(s);){if(wn(s)&&!gm(s))return s;s=qs(s)}return n}let r=Lx(e,t);for(;r&&W5(r)&&gm(r);)r=Lx(r,t);return r&&Ei(r)&&gm(r)&&!pp(r)?n:r||Q5(e)||n}const AE=async function(e){const t=this.getOffsetParent||Zw,n=this.getDimensions,r=await n(e.floating);return{reference:FE(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function LE(e){return cr(e).direction==="rtl"}const RE={convertOffsetParentRelativeRectToViewportRelativeRect:kE,getDocumentElement:Yr,getClippingRect:TE,getOffsetParent:Zw,getElementRects:AE,getClientRects:SE,getDimensions:OE,getScale:gi,isElement:wn,isRTL:LE};function eN(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function IE(e,t){let n=null,r;const s=Yr(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:m,top:h,width:f,height:b}=u;if(l||t(),!f||!b)return;const v=tc(h),D=tc(s.clientWidth-(m+f)),p=tc(s.clientHeight-(h+b)),y=tc(m),S={rootMargin:-v+"px "+-D+"px "+-p+"px "+-y+"px",threshold:_a(0,Mi(1,c))||1};let j=!0;function F(C){const T=C[0].intersectionRatio;if(T!==c){if(!j)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!eN(u,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(F,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(F,S)}n.observe(e)}return o(!0),i}function $E(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=yp(e),m=s||i?[...u?fl(u):[],...fl(t)]:[];m.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const h=u&&l?IE(u,n):null;let f=-1,b=null;o&&(b=new ResizeObserver(y=>{let[w]=y;w&&w.target===u&&b&&(b.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=b)==null||S.observe(t)})),n()}),u&&!c&&b.observe(u),b.observe(t));let v,D=c?Fa(e):null;c&&p();function p(){const y=Fa(e);D&&!eN(D,y)&&n(),D=y,v=requestAnimationFrame(p)}return n(),()=>{var y;m.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),h==null||h(),(y=b)==null||y.disconnect(),b=null,c&&cancelAnimationFrame(v)}}const zE=NE,HE=yE,Rx=vE,BE=(e,t,n)=>{const r=new Map,s={platform:RE,...n},i={...s.platform,_c:r};return gE(e,t,{...s,platform:i})};var VE=typeof document<"u",UE=function(){},zc=VE?E.useLayoutEffect:UE;function Fu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Fu(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!Fu(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function tN(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ix(e,t){const n=tN(e);return Math.round(t*n)/n}function xm(e){const t=E.useRef(e);return zc(()=>{t.current=e}),t}function WE(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[m,h]=E.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,b]=E.useState(r);Fu(f,r)||b(r);const[v,D]=E.useState(null),[p,y]=E.useState(null),w=E.useCallback(Y=>{Y!==C.current&&(C.current=Y,D(Y))},[]),S=E.useCallback(Y=>{Y!==T.current&&(T.current=Y,y(Y))},[]),j=i||v,F=o||p,C=E.useRef(null),T=E.useRef(null),P=E.useRef(m),V=c!=null,Q=xm(c),ee=xm(s),ce=xm(u),fe=E.useCallback(()=>{if(!C.current||!T.current)return;const Y={placement:t,strategy:n,middleware:f};ee.current&&(Y.platform=ee.current),BE(C.current,T.current,Y).then(X=>{const J={...X,isPositioned:ce.current!==!1};G.current&&!Fu(P.current,J)&&(P.current=J,sp.flushSync(()=>{h(J)}))})},[f,t,n,ee,ce]);zc(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(Y=>({...Y,isPositioned:!1})))},[u]);const G=E.useRef(!1);zc(()=>(G.current=!0,()=>{G.current=!1}),[]),zc(()=>{if(j&&(C.current=j),F&&(T.current=F),j&&F){if(Q.current)return Q.current(j,F,fe);fe()}},[j,F,fe,Q,V]);const re=E.useMemo(()=>({reference:C,floating:T,setReference:w,setFloating:S}),[w,S]),$=E.useMemo(()=>({reference:j,floating:F}),[j,F]),H=E.useMemo(()=>{const Y={position:n,left:0,top:0};if(!$.floating)return Y;const X=Ix($.floating,m.x),J=Ix($.floating,m.y);return l?{...Y,transform:"translate("+X+"px, "+J+"px)",...tN($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:J}},[n,l,$.floating,m.x,m.y]);return E.useMemo(()=>({...m,update:fe,refs:re,elements:$,floatingStyles:H}),[m,fe,re,$,H])}const YE=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Rx({element:r.current,padding:s}).fn(n):{}:r?Rx({element:r,padding:s}).fn(n):{}}}},qE=(e,t)=>({...zE(e),options:[e,t]}),KE=(e,t)=>({...HE(e),options:[e,t]}),GE=(e,t)=>({...YE(e),options:[e,t]}),QE={...fh};let $x=!1,JE=0;const zx=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+JE++;function XE(){const[e,t]=E.useState(()=>$x?zx():void 0);return Ou(()=>{e==null&&t(zx())},[]),E.useEffect(()=>{$x=!0},[]),e}const ZE=QE.useId,nN=ZE||XE,eM=E.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:l=14,height:c=7,tipRadius:u=0,strokeWidth:m=0,staticOffset:h,stroke:f,d:b,style:{transform:v,...D}={},...p}=t,y=nN(),[w,S]=E.useState(!1);if(Ou(()=>{if(!s)return;cr(s).direction==="rtl"&&S(!0)},[s]),!s)return null;const[j,F]=r.split("-"),C=j==="top"||j==="bottom";let T=h;(C&&o!=null&&o.x||!C&&o!=null&&o.y)&&(T=null);const P=m*2,V=P/2,Q=l/2*(u/-8+1),ee=c/2*u/4,ce=!!b,fe=T&&F==="end"?"bottom":"top";let G=T&&F==="end"?"right":"left";T&&w&&(G=F==="end"?"left":"right");const re=(i==null?void 0:i.x)!=null?T||i.x:"",$=(i==null?void 0:i.y)!=null?T||i.y:"",H=b||"M0,0"+(" H"+l)+(" L"+(l-Q)+","+(c-ee))+(" Q"+l/2+","+c+" "+Q+","+(c-ee))+" Z",Y={top:ce?"rotate(180deg)":"",left:ce?"rotate(90deg)":"rotate(-90deg)",bottom:ce?"":"rotate(180deg)",right:ce?"rotate(-90deg)":"rotate(90deg)"}[j];return a.jsxs("svg",{...p,"aria-hidden":!0,ref:n,width:ce?l:l+P,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[G]:re,[fe]:$,[j]:C||ce?"100%":"calc(100% - "+P/2+"px)",transform:[Y,v].filter(X=>!!X).join(" "),...D},children:[P>0&&a.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:f,strokeWidth:P+(b?0:1),d:H}),a.jsx("path",{stroke:P&&!b?p.fill:"none",d:H}),a.jsx("clipPath",{id:y,children:a.jsx("rect",{x:-V,y:V*(ce?-1:1),width:l+P,height:l})})]})});function tM(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const nM=E.createContext(null),rM=E.createContext(null),sM=()=>{var e;return((e=E.useContext(nM))==null?void 0:e.id)||null},aM=()=>E.useContext(rM);function iM(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=nN(),i=E.useRef({}),[o]=E.useState(()=>tM()),l=sM()!=null,[c,u]=E.useState(r.reference),m=pE((b,v,D)=>{i.current.openEvent=b?v:void 0,o.emit("openchange",{open:b,event:v,reason:D,nested:l}),n==null||n(b,v,D)}),h=E.useMemo(()=>({setPositionReference:u}),[]),f=E.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return E.useMemo(()=>({dataRef:i,open:t,onOpenChange:m,elements:f,events:o,floatingId:s,refs:h}),[t,m,f,o,s,h])}function oM(e){e===void 0&&(e={});const{nodeId:t}=e,n=iM({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[i,o]=E.useState(null),[l,c]=E.useState(null),m=(s==null?void 0:s.domReference)||i,h=E.useRef(null),f=aM();Ou(()=>{m&&(h.current=m)},[m]);const b=WE({...e,elements:{...s,...l&&{reference:l}}}),v=E.useCallback(S=>{const j=wn(S)?{getBoundingClientRect:()=>S.getBoundingClientRect(),getClientRects:()=>S.getClientRects(),contextElement:S}:S;c(j),b.refs.setReference(j)},[b.refs]),D=E.useCallback(S=>{(wn(S)||S===null)&&(h.current=S,o(S)),(wn(b.refs.reference.current)||b.refs.reference.current===null||S!==null&&!wn(S))&&b.refs.setReference(S)},[b.refs]),p=E.useMemo(()=>({...b.refs,setReference:D,setPositionReference:v,domReference:h}),[b.refs,D,v]),y=E.useMemo(()=>({...b.elements,domReference:m}),[b.elements,m]),w=E.useMemo(()=>({...b,...r,refs:p,elements:y,nodeId:t}),[b,p,y,t,r]);return Ou(()=>{r.dataRef.current.floatingContext=w;const S=f==null?void 0:f.nodesRef.current.find(j=>j.id===t);S&&(S.context=w)}),E.useMemo(()=>({...b,context:w,refs:p,elements:y}),[b,p,y,w])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var Qf=function(t,n){return Qf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},Qf(t,n)};function nn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Qf(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ct=function(){return ct=Object.assign||function(n){for(var r,s=1,i=arguments.length;s<i;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},ct.apply(this,arguments)};function zr(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var lM=function(e){var t=e.showTimeSelectOnly,n=t===void 0?!1:t,r=e.showTime,s=r===void 0?!1:r,i=e.className,o=e.children,l=n?"Choose Time":"Choose Date".concat(s?" and Time":"");return ve.createElement("div",{className:i,role:"dialog","aria-label":l,"aria-modal":"true"},o)},cM=function(e,t){var n=E.useRef(null),r=E.useRef(e);r.current=e;var s=E.useCallback(function(i){var o,l=i.composed&&i.composedPath&&i.composedPath().find(function(c){return c instanceof Node})||i.target;n.current&&!n.current.contains(l)&&(t&&l instanceof HTMLElement&&l.classList.contains(t)||(o=r.current)===null||o===void 0||o.call(r,i))},[t]);return E.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),n},Ed=function(e){var t=e.children,n=e.onClickOutside,r=e.className,s=e.containerRef,i=e.style,o=e.ignoreClass,l=cM(n,o);return ve.createElement("div",{className:r,style:i,ref:function(c){l.current=c,s&&(s.current=c)}},t)},Ae;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(Ae||(Ae={}));function wp(){var e=typeof window<"u"?window:globalThis;return e}var Tl=12;function ht(e){if(e==null)return new Date;var t=typeof e=="string"?D5(e):$e(e);return Md(t)?t:new Date}function vm(e,t,n,r,s){s===void 0&&(s=ht());for(var i=Oi(n)||Oi(Np()),o=Array.isArray(t)?t:[t],l=0,c=o;l<c.length;l++){var u=c[l],m=w5(e,u,s,{locale:i});if(Md(m)&&(!r||e===Dt(m,u,n)))return m}return null}function Md(e,t){return ku(e)&&!Oa(e,new Date("1/1/1800"))}function Dt(e,t,n){if(n==="en")return Cx(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?Oi(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),r=r||Oi(Np()),Cx(e,t,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Xn(e,t){var n=t.dateFormat,r=t.locale,s=Array.isArray(n)&&n.length>0?n[0]:n;return e&&Dt(e,s,r)||""}var rN=" - ";function uM(e,t,n){if(!e)return"";var r=Xn(e,n),s=t?Xn(t,n):"";return"".concat(r).concat(rN).concat(s)}function dM(e,t){if(!(e!=null&&e.length))return"";var n=e[0]?Xn(e[0],t):"";if(e.length===1)return n;if(e.length===2&&e[1]){var r=Xn(e[1],t);return"".concat(n,", ").concat(r)}var s=e.length-1;return"".concat(n," (+").concat(s,")")}function ym(e,t){var n=t.hour,r=n===void 0?0:n,s=t.minute,i=s===void 0?0:s,o=t.second,l=o===void 0?0:o;return hi(pi($c(e,l),i),r)}function mM(e){return dp(e)}function fM(e,t){return Dt(e,"ddd",t)}function Hc(e){return Ta(e)}function Bs(e,t,n){var r=Oi(t||Np());return fs(e,{locale:r,weekStartsOn:n})}function os(e){return Fw(e)}function yo(e){return kd(e)}function Hx(e){return Wf(e)}function Bx(){return Ta(ht())}function Vx(e){return Tw(e)}function hM(e){return CC(e)}function pM(e){return Ow(e)}function Fr(e,t){return e&&t?k5(e,t):!e&&!t}function yn(e,t){return e&&t?j5(e,t):!e&&!t}function Au(e,t){return e&&t?_5(e,t):!e&&!t}function lt(e,t){return e&&t?SC(e,t):!e&&!t}function pa(e,t){return e&&t?SP(e,t):!e&&!t}function bo(e,t,n){var r,s=Ta(t),i=Tw(n);try{r=ml(e,{start:s,end:i})}catch{r=!1}return r}function kn(e,t){var n=wp();n.__localeData__||(n.__localeData__={}),n.__localeData__[e]=t}function Np(){var e=wp();return e.__localeId__}function Oi(e){if(typeof e=="string"){var t=wp();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function gM(e,t,n){return t(Dt(e,"EEEE",n))}function xM(e,t){return Dt(e,"EEEEEE",t)}function vM(e,t){return Dt(e,"EEE",t)}function jp(e,t){return Dt(Zn(ht(),e),"LLLL",t)}function sN(e,t){return Dt(Zn(ht(),e),"LLL",t)}function yM(e,t){return Dt(Ka(ht(),e),"QQQ",t)}function nr(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.excludeDateIntervals,l=n.includeDates,c=n.includeDateIntervals,u=n.filterDate;return Ol(e,{minDate:r,maxDate:s})||i&&i.some(function(m){return m instanceof Date?lt(e,m):lt(e,m.date)})||o&&o.some(function(m){var h=m.start,f=m.end;return ml(e,{start:h,end:f})})||l&&!l.some(function(m){return lt(e,m)})||c&&!c.some(function(m){var h=m.start,f=m.end;return ml(e,{start:h,end:f})})||u&&!u(ht(e))||!1}function _p(e,t){var n=t===void 0?{}:t,r=n.excludeDates,s=n.excludeDateIntervals;return s&&s.length>0?s.some(function(i){var o=i.start,l=i.end;return ml(e,{start:o,end:l})}):r&&r.some(function(i){var o;return i instanceof Date?lt(e,i):lt(e,(o=i.date)!==null&&o!==void 0?o:new Date)})||!1}function aN(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.includeDates,l=n.filterDate;return Ol(e,{minDate:r?Fw(r):void 0,maxDate:s?Ow(s):void 0})||(i==null?void 0:i.some(function(c){return yn(e,c instanceof Date?c:c.date)}))||o&&!o.some(function(c){return yn(e,c)})||l&&!l(ht(e))||!1}function nc(e,t,n,r){var s=rt(e),i=hn(e),o=rt(t),l=hn(t),c=rt(r);return s===o&&s===c?i<=n&&n<=l:s<o?c===s&&i<=n||c===o&&l>=n||c<o&&c>s:!1}function bM(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.includeDates;return Ol(e,{minDate:r,maxDate:s})||i&&i.some(function(l){return yn(l instanceof Date?l:l.date,e)})||o&&!o.some(function(l){return yn(l,e)})||!1}function rc(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.includeDates,l=n.filterDate;return Ol(e,{minDate:r,maxDate:s})||(i==null?void 0:i.some(function(c){return Au(e,c instanceof Date?c:c.date)}))||o&&!o.some(function(c){return Au(e,c)})||l&&!l(ht(e))||!1}function sc(e,t,n){if(!t||!n||!ku(t)||!ku(n))return!1;var r=rt(t),s=rt(n);return r<=e&&s>=e}function Bc(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.maxDate,i=n.excludeDates,o=n.includeDates,l=n.filterDate,c=new Date(e,0,1);return Ol(c,{minDate:r?kd(r):void 0,maxDate:s?Aw(s):void 0})||(i==null?void 0:i.some(function(u){return Fr(c,u instanceof Date?u:u.date)}))||o&&!o.some(function(u){return Fr(c,u)})||l&&!l(ht(c))||!1}function ac(e,t,n,r){var s=rt(e),i=Na(e),o=rt(t),l=Na(t),c=rt(r);return s===o&&s===c?i<=n&&n<=l:s<o?c===s&&i<=n||c===o&&l>=n||c<o&&c>s:!1}function Ol(e,t){var n,r=t===void 0?{}:t,s=r.minDate,i=r.maxDate;return(n=s&&Ci(e,s)<0||i&&Ci(e,i)>0)!==null&&n!==void 0?n:!1}function Ux(e,t){return t.some(function(n){return as(n)===as(e)&&is(n)===is(e)&&Hs(n)===Hs(e)})}function Wx(e,t){var n=t===void 0?{}:t,r=n.excludeTimes,s=n.includeTimes,i=n.filterTime;return r&&Ux(e,r)||s&&!Ux(e,s)||i&&!i(e)||!1}function Yx(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var s=ht();s=hi(s,as(e)),s=pi(s,is(e)),s=$c(s,Hs(e));var i=ht();i=hi(i,as(n)),i=pi(i,is(n)),i=$c(i,Hs(n));var o=ht();o=hi(o,as(r)),o=pi(o,is(r)),o=$c(o,Hs(r));var l;try{l=!ml(s,{start:i,end:o})}catch{l=!1}return l}function qx(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.includeDates,i=ja(e,1);return r&&Su(r,i)>0||s&&s.every(function(o){return Su(o,i)>0})||!1}function Kx(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.includeDates,i=jr(e,1);return r&&Su(i,r)>0||s&&s.every(function(o){return Su(i,o)>0})||!1}function wM(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.includeDates,i=kd(e),o=Ww(i);return r&&Du(r,o)>0||s&&s.every(function(l){return Du(l,o)>0})||!1}function NM(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.includeDates,i=Aw(e),o=up(i,1);return r&&Du(o,r)>0||s&&s.every(function(l){return Du(o,l)>0})||!1}function Gx(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.includeDates,i=Pi(e,1);return r&&Cu(r,i)>0||s&&s.every(function(o){return Cu(o,i)>0})||!1}function jM(e,t){var n=t===void 0?{}:t,r=n.minDate,s=n.yearItemNumber,i=s===void 0?Tl:s,o=yo(Pi(e,i)),l=Es(o,i).endPeriod,c=r&&rt(r);return c&&c>l||!1}function Qx(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.includeDates,i=rs(e,1);return r&&Cu(i,r)>0||s&&s.every(function(o){return Cu(i,o)>0})||!1}function _M(e,t){var n=t===void 0?{}:t,r=n.maxDate,s=n.yearItemNumber,i=s===void 0?Tl:s,o=rs(e,i),l=Es(o,i).startPeriod,c=r&&rt(r);return c&&c<l||!1}function iN(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter(function(s){return Ci(s,t)>=0});return Nx(r)}else return n?Nx(n):t}function oN(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter(function(s){return Ci(s,t)<=0});return wx(r)}else return n?wx(n):t}function Jx(e,t){var n;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var r=new Map,s=0,i=e.length;s<i;s++){var o=e[s];if(ss(o)){var l=Dt(o,"MM.dd.yyyy"),c=r.get(l)||[];c.includes(t)||(c.push(t),r.set(l,c))}else if(typeof o=="object"){var u=Object.keys(o),m=(n=u[0])!==null&&n!==void 0?n:"",h=o[m];if(typeof m=="string"&&Array.isArray(h))for(var f=0,b=h.length;f<b;f++){var v=h[f];if(v){var l=Dt(v,"MM.dd.yyyy"),c=r.get(l)||[];c.includes(m)||(c.push(m),r.set(l,c))}}}}return r}function kM(e,t){return e.length!==t.length?!1:e.every(function(n,r){return n===t[r]})}function SM(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var n=new Map;return e.forEach(function(r){var s=r.date,i=r.holidayName;if(ss(s)){var o=Dt(s,"MM.dd.yyyy"),l=n.get(o)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===t&&kM(l.holidayNames,[i]))){l.className=t;var c=l.holidayNames;l.holidayNames=c?zr(zr([],c,!0),[i],!1):[i],n.set(o,l)}}}),n}function DM(e,t,n,r,s){for(var i=s.length,o=[],l=0;l<i;l++){var c=e,u=s[l];u&&(c=NC(c,as(u)),c=Uf(c,is(u)),c=kC(c,Hs(u)));var m=Uf(e,(n+1)*r);Ys(c,t)&&Oa(c,m)&&u!=null&&o.push(u)}return o}function Xx(e){return e<10?"0".concat(e):"".concat(e)}function Es(e,t){t===void 0&&(t=Tl);var n=Math.ceil(rt(e)/t)*t,r=n-(t-1);return{startPeriod:r,endPeriod:n}}function CM(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}function Zx(e){var t=e.getSeconds(),n=e.getMilliseconds();return $e(e.getTime()-t*1e3-n)}function PM(e,t){return Zx(e).getTime()===Zx(t).getTime()}function e0(e){if(!ss(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function t0(e,t){if(!ss(e)||!ss(t))throw new Error("Invalid date received");var n=e0(e),r=e0(t);return Oa(n,r)}function lN(e){return e.key===Ae.Space}var EM=function(e){nn(t,e);function t(n){var r=e.call(this,n)||this;return r.inputRef=ve.createRef(),r.onTimeChange=function(s){var i,o;r.setState({time:s});var l=r.props.date,c=l instanceof Date&&!isNaN(+l),u=c?l:new Date;if(s!=null&&s.includes(":")){var m=s.split(":"),h=m[0],f=m[1];u.setHours(Number(h)),u.setMinutes(Number(f))}(o=(i=r.props).onChange)===null||o===void 0||o.call(i,u)},r.renderTimeInput=function(){var s=r.state.time,i=r.props,o=i.date,l=i.timeString,c=i.customTimeInput;return c?E.cloneElement(c,{date:o,value:s,onChange:r.onTimeChange}):ve.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var u;(u=r.inputRef.current)===null||u===void 0||u.focus()},required:!0,value:s,onChange:function(u){r.onTimeChange(u.target.value||l)}})},r.state={time:r.props.timeString},r}return t.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},t.prototype.render=function(){return ve.createElement("div",{className:"react-datepicker__input-time-container"},ve.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),ve.createElement("div",{className:"react-datepicker-time__input-container"},ve.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(E.Component),MM=function(e){nn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.dayEl=E.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var s,i,o=r.key;o===Ae.Space&&(r.preventDefault(),r.key=Ae.Enter),(i=(s=n.props).handleOnKeyDown)===null||i===void 0||i.call(s,r)},n.isSameDay=function(r){return lt(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var s=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(o){return n.isSameDayOrWeek(o)}):n.isSameDayOrWeek(n.props.selected),i=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!s&&n.isSameDayOrWeek(n.props.preSelection)&&!i},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),nr(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(){return _p(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return lt(n.props.day,Bs(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&lt(r,Bs(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,s=r.day,i=r.highlightDates;if(!i)return!1;var o=Dt(s,"MM.dd.yyyy");return i.get(o)},n.getHolidaysClass=function(){var r,s=n.props,i=s.day,o=s.holidays;if(!o)return[void 0];var l=Dt(i,"MM.dd.yyyy");return o.has(l)?[(r=o.get(l))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,s=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:bo(s,i,o)},n.isInSelectingRange=function(){var r,s=n.props,i=s.day,o=s.selectsStart,l=s.selectsEnd,c=s.selectsRange,u=s.selectsDisabledDaysInRange,m=s.startDate,h=s.endDate,f=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(o||l||c)||!f||!u&&n.isDisabled()?!1:o&&h&&(Oa(f,h)||pa(f,h))?bo(i,f,h):l&&m&&(Ys(f,m)||pa(f,m))||c&&m&&!h&&(Ys(f,m)||pa(f,m))?bo(i,m,f):!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,i=s.day,o=s.startDate,l=s.selectsStart,c=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return l?lt(i,c):lt(i,o)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,i=s.day,o=s.endDate,l=s.selectsEnd,c=s.selectsRange,u=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return l||c?lt(i,u):lt(i,o)},n.isRangeStart=function(){var r=n.props,s=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:lt(i,s)},n.isRangeEnd=function(){var r=n.props,s=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:lt(o,s)},n.isWeekend=function(){var r=NP(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===hn(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(hn(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(ht())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(s){return n.isSameDayOrWeek(s)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var s=n.props.dayClassName?n.props.dayClassName(r):void 0;return an("react-datepicker__day",s,"react-datepicker__day--"+fM(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,s=r.day,i=r.ariaLabelPrefixWhenEnabled,o=i===void 0?"Choose":i,l=r.ariaLabelPrefixWhenDisabled,c=l===void 0?"Not available":l,u=n.isDisabled()||n.isExcluded()?c:o;return"".concat(u," ").concat(Dt(s,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,s=r.day,i=r.holidays,o=i===void 0?new Map:i,l=r.excludeDates,c=Dt(s,"MM.dd.yyyy"),u=[];return o.has(c)&&u.push.apply(u,o.get(c).holidayNames),n.isExcluded()&&u.push(l==null?void 0:l.filter(function(m){return m instanceof Date?lt(m,s):lt(m==null?void 0:m.date,s)}).map(function(m){if(!(m instanceof Date))return m==null?void 0:m.message})),u.join(", ")},n.getTabIndex=function(){var r=n.props.selected,s=n.props.preSelection,i=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&lt(s,r))?0:-1;return i},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(Px(n.props.day),n.props.day):Px(n.props.day)},n.render=function(){return ve.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&ve.createElement("span",{className:"overlay"},n.getTitle()))},n}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},t.prototype.isDayActiveElement=function(){var n,r,s;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(E.Component),TM=function(e){nn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.weekNumberEl=E.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var s,i,o=r.key;o===Ae.Space&&(r.preventDefault(),r.key=Ae.Enter),(i=(s=n.props).handleOnKeyDown)===null||i===void 0||i.call(s,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!lt(n.props.date,n.props.selected)&&lt(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||lt(n.props.date,n.props.selected)&&lt(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var s=!1;n.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&lt(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(s=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},t.prototype.render=function(){var n=this.props,r=n.weekNumber,s=n.isWeekDisabled,i=n.ariaLabelPrefix,o=i===void 0?t.defaultProps.ariaLabelPrefix:i,l=n.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l&&!s,"react-datepicker__week-number--selected":!!l&&lt(this.props.date,this.props.selected)};return ve.createElement("div",{ref:this.weekNumberEl,className:an(c),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},t}(E.Component),OM=function(e){nn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isDisabled=function(r){return nr(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,s){n.props.onDayClick&&n.props.onDayClick(r,s)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,s,i){for(var o,l,c,u=new Date(r),m=0;m<7;m++){var h=new Date(r);h.setDate(h.getDate()+m);var f=!n.isDisabled(h);if(f){u=h;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(u,s,i),n.props.showWeekPicker&&n.handleDayClick(u,i),((o=n.props.shouldCloseOnSelect)!==null&&o!==void 0?o:t.defaultProps.shouldCloseOnSelect)&&((c=(l=n.props).setOpen)===null||c===void 0||c.call(l,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):mM(r)},n.isWeekDisabled=function(){for(var r=n.startOfWeek(),s=br(r,6),i=new Date(r);i<=s;){if(!n.isDisabled(i))return!1;i=br(i,1)}return!0},n.renderDays=function(){var r=n.startOfWeek(),s=[],i=n.formatWeekNumber(r);if(n.props.showWeekNumber){var o=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,i):void 0;s.push(ve.createElement(TM,ct({key:"W"},t.defaultProps,n.props,{weekNumber:i,isWeekDisabled:n.isWeekDisabled(),date:r,onClick:o})))}return s.concat([0,1,2,3,4,5,6].map(function(l){var c=br(r,l);return ve.createElement(MM,ct({},t.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:c.valueOf(),day:c,onClick:n.handleDayClick.bind(n,c),onMouseEnter:n.handleDayMouseEnter.bind(n,c)}))}))},n.startOfWeek=function(){return Bs(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!lt(n.startOfWeek(),n.props.selected)&&lt(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":lt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return ve.createElement("div",{className:an(n)},this.renderDays())},t}(E.Component),ro,FM=6,xi={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},bm=(ro={},ro[xi.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},ro[xi.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},ro[xi.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},ro),ic=1;function n0(e,t){return e?xi.FOUR_COLUMNS:t?xi.TWO_COLUMNS:xi.THREE_COLUMNS}var AM=function(e){nn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.MONTH_REFS=zr([],Array(12),!0).map(function(){return E.createRef()}),n.QUARTER_REFS=zr([],Array(4),!0).map(function(){return E.createRef()}),n.isDisabled=function(r){return nr(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return _p(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,s){var i,o;(o=(i=n.props).onDayClick)===null||o===void 0||o.call(i,r,s,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var s,i;(i=(s=n.props).onDayMouseEnter)===null||i===void 0||i.call(s,r)},n.handleMouseLeave=function(){var r,s;(s=(r=n.props).onMouseLeave)===null||s===void 0||s.call(r)},n.isRangeStartMonth=function(r){var s=n.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:yn(Zn(i,r),o)},n.isRangeStartQuarter=function(r){var s=n.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Au(Ka(i,r),o)},n.isRangeEndMonth=function(r){var s=n.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:yn(Zn(i,r),l)},n.isRangeEndQuarter=function(r){var s=n.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Au(Ka(i,r),l)},n.isInSelectingRangeMonth=function(r){var s,i=n.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,u=i.selectsRange,m=i.startDate,h=i.endDate,f=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(l||c||u)||!f?!1:l&&h?nc(f,h,r,o):c&&m||u&&m&&!h?nc(m,f,r,o):!1},n.isSelectingMonthRangeStart=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var i=n.props,o=i.day,l=i.startDate,c=i.selectsStart,u=Zn(o,r),m=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return c?yn(u,m):yn(u,l)},n.isSelectingMonthRangeEnd=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var i=n.props,o=i.day,l=i.endDate,c=i.selectsEnd,u=i.selectsRange,m=Zn(o,r),h=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return c||u?yn(m,h):yn(m,l)},n.isInSelectingRangeQuarter=function(r){var s,i=n.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,u=i.selectsRange,m=i.startDate,h=i.endDate,f=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(l||c||u)||!f?!1:l&&h?ac(f,h,r,o):c&&m||u&&m&&!h?ac(m,f,r,o):!1},n.isWeekInMonth=function(r){var s=n.props.day,i=br(r,6);return yn(r,s)||yn(i,s)},n.isCurrentMonth=function(r,s){return rt(r)===rt(ht())&&s===hn(ht())},n.isCurrentQuarter=function(r,s){return rt(r)===rt(ht())&&s===Na(ht())},n.isSelectedMonth=function(r,s,i){return hn(i)===s&&rt(r)===rt(i)},n.isSelectMonthInList=function(r,s,i){return i.some(function(o){return n.isSelectedMonth(r,s,o)})},n.isSelectedQuarter=function(r,s,i){return Na(r)===s&&rt(r)===rt(i)},n.isMonthSelected=function(){var r=n.props,s=r.day,i=r.selected,o=r.selectedDates,l=r.selectsMultiple,c=hn(s);return l?o==null?void 0:o.some(function(u){return n.isSelectedMonth(s,c,u)}):!!i&&n.isSelectedMonth(s,c,i)},n.renderWeeks=function(){for(var r=[],s=n.props.fixedHeight,i=0,o=!1,l=Bs(os(n.props.day),n.props.locale,n.props.calendarStartDay),c=function(v){return n.props.showWeekPicker?Bs(v,n.props.locale,n.props.calendarStartDay):n.props.preSelection},u=function(v){return n.props.showWeekPicker?Bs(v,n.props.locale,n.props.calendarStartDay):n.props.selected},m=n.props.selected?u(n.props.selected):void 0,h=n.props.preSelection?c(n.props.preSelection):void 0;r.push(ve.createElement(OM,ct({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:i,day:l,month:hn(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:m,preSelection:h,showWeekNumber:n.props.showWeekNumbers}))),!o;){i++,l=_u(l,1);var f=s&&i>=FM,b=!s&&!n.isWeekInMonth(l);if(f||b)if(n.props.peekNextMonth)o=!0;else break}return r},n.onMonthClick=function(r,s){var i=n.isMonthDisabledForLabelDate(s),o=i.isDisabled,l=i.labelDate;o||n.handleDayClick(os(l),r)},n.onMonthMouseEnter=function(r){var s=n.isMonthDisabledForLabelDate(r),i=s.isDisabled,o=s.labelDate;i||n.handleDayMouseEnter(os(o))},n.handleMonthNavigation=function(r,s){var i,o,l,c;(o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=n.MONTH_REFS[r])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus()},n.handleKeyboardNavigation=function(r,s,i){var o,l=n.props,c=l.selected,u=l.preSelection,m=l.setPreSelection,h=l.minDate,f=l.maxDate,b=l.showFourColumnMonthYearPicker,v=l.showTwoColumnMonthYearPicker;if(u){var D=n0(b,v),p=n.getVerticalOffset(D),y=(o=bm[D])===null||o===void 0?void 0:o.grid,w=function(T,P,V){var Q,ee,ce=P,fe=V;switch(T){case Ae.ArrowRight:ce=jr(P,ic),fe=V===11?0:V+ic;break;case Ae.ArrowLeft:ce=ja(P,ic),fe=V===0?11:V-ic;break;case Ae.ArrowUp:ce=ja(P,p),fe=!((Q=y==null?void 0:y[0])===null||Q===void 0)&&Q.includes(V)?V+12-p:V-p;break;case Ae.ArrowDown:ce=jr(P,p),fe=!((ee=y==null?void 0:y[y.length-1])===null||ee===void 0)&&ee.includes(V)?V-12+p:V+p;break}return{newCalculatedDate:ce,newCalculatedMonth:fe}},S=function(T,P,V){for(var Q=40,ee=T,ce=!1,fe=0,G=w(ee,P,V),re=G.newCalculatedDate,$=G.newCalculatedMonth;!ce;){if(fe>=Q){re=P,$=V;break}if(h&&re<h){ee=Ae.ArrowRight;var H=w(ee,re,$);re=H.newCalculatedDate,$=H.newCalculatedMonth}if(f&&re>f){ee=Ae.ArrowLeft;var H=w(ee,re,$);re=H.newCalculatedDate,$=H.newCalculatedMonth}if(bM(re,n.props)){var H=w(ee,re,$);re=H.newCalculatedDate,$=H.newCalculatedMonth}else ce=!0;fe++}return{newCalculatedDate:re,newCalculatedMonth:$}};if(s===Ae.Enter){n.isMonthDisabled(i)||(n.onMonthClick(r,i),m==null||m(c));return}var j=S(s,u,i),F=j.newCalculatedDate,C=j.newCalculatedMonth;switch(s){case Ae.ArrowRight:case Ae.ArrowLeft:case Ae.ArrowUp:case Ae.ArrowDown:n.handleMonthNavigation(C,F);break}}},n.getVerticalOffset=function(r){var s,i;return(i=(s=bm[r])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&i!==void 0?i:0},n.onMonthKeyDown=function(r,s){var i=n.props,o=i.disabledKeyboardNavigation,l=i.handleOnMonthKeyDown,c=r.key;c!==Ae.Tab&&r.preventDefault(),o||n.handleKeyboardNavigation(r,c,s),l&&l(r)},n.onQuarterClick=function(r,s){var i=Ka(n.props.day,s);rc(i,n.props)||n.handleDayClick(Hx(i),r)},n.onQuarterMouseEnter=function(r){var s=Ka(n.props.day,r);rc(s,n.props)||n.handleDayMouseEnter(Hx(s))},n.handleQuarterNavigation=function(r,s){var i,o,l,c;n.isDisabled(s)||n.isExcluded(s)||((o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=n.QUARTER_REFS[r-1])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())},n.onQuarterKeyDown=function(r,s){var i,o,l=r.key;if(!n.props.disabledKeyboardNavigation)switch(l){case Ae.Enter:n.onQuarterClick(r,s),(o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,n.props.selected);break;case Ae.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===4?1:s+1,up(n.props.preSelection,1));break;case Ae.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===1?4:s-1,Ww(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(r){var s,i=n.props,o=i.day,l=i.minDate,c=i.maxDate,u=i.excludeDates,m=i.includeDates,h=Zn(o,r);return{isDisabled:(s=(l||c||u||m)&&aN(h,n.props))!==null&&s!==void 0?s:!1,labelDate:h}},n.isMonthDisabled=function(r){var s=n.isMonthDisabledForLabelDate(r).isDisabled;return s},n.getMonthClassNames=function(r){var s=n.props,i=s.day,o=s.startDate,l=s.endDate,c=s.preSelection,u=s.monthClassName,m=u?u(Zn(i,r)):void 0,h=n.getSelection();return an("react-datepicker__month-text","react-datepicker__month-".concat(r),m,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":h?n.isSelectMonthInList(i,r,h):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&c&&n.isSelectedMonth(i,r,c)&&!n.isMonthSelected()&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":o&&l?nc(o,l,r,i):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(i,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=hn(n.props.preSelection),i=n.isMonthDisabledForLabelDate(s).isDisabled,o=r===s&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return o},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=Na(n.props.preSelection),i=rc(n.props.day,n.props),o=r===s&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return o},n.getAriaLabel=function(r){var s=n.props,i=s.chooseDayAriaLabelPrefix,o=i===void 0?"Choose":i,l=s.disabledDayAriaLabelPrefix,c=l===void 0?"Not available":l,u=s.day,m=s.locale,h=Zn(u,r),f=n.isDisabled(h)||n.isExcluded(h)?c:o;return"".concat(f," ").concat(Dt(h,"MMMM yyyy",m))},n.getQuarterClassNames=function(r){var s=n.props,i=s.day,o=s.startDate,l=s.endDate,c=s.selected,u=s.minDate,m=s.maxDate,h=s.excludeDates,f=s.includeDates,b=s.filterDate,v=s.preSelection,D=s.disabledKeyboardNavigation,p=(u||m||h||f||b)&&rc(Ka(i,r),n.props);return an("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":p,"react-datepicker__quarter-text--selected":c?n.isSelectedQuarter(i,r,c):void 0,"react-datepicker__quarter-text--keyboard-selected":!D&&v&&n.isSelectedQuarter(i,r,v)&&!p,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":o&&l?ac(o,l,r,i):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r),"react-datepicker__quarter-text--today":n.isCurrentQuarter(i,r)})},n.getMonthContent=function(r){var s=n.props,i=s.showFullMonthYearPicker,o=s.renderMonthContent,l=s.locale,c=s.day,u=sN(r,l),m=jp(r,l);return o?o(r,u,m,c):i?m:u},n.getQuarterContent=function(r){var s,i=n.props,o=i.renderQuarterContent,l=i.locale,c=yM(r,l);return(s=o==null?void 0:o(r,c))!==null&&s!==void 0?s:c},n.renderMonths=function(){var r,s=n.props,i=s.showTwoColumnMonthYearPicker,o=s.showFourColumnMonthYearPicker,l=s.day,c=s.selected,u=(r=bm[n0(o,i)])===null||r===void 0?void 0:r.grid;return u==null?void 0:u.map(function(m,h){return ve.createElement("div",{className:"react-datepicker__month-wrapper",key:h},m.map(function(f,b){return ve.createElement("div",{ref:n.MONTH_REFS[f],key:b,onClick:function(v){n.onMonthClick(v,f)},onKeyDown:function(v){lN(v)&&(v.preventDefault(),v.key=Ae.Enter),n.onMonthKeyDown(v,f)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(f)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(f)}:void 0,tabIndex:Number(n.getTabIndex(f)),className:n.getMonthClassNames(f),"aria-disabled":n.isMonthDisabled(f),role:"option","aria-label":n.getAriaLabel(f),"aria-current":n.isCurrentMonth(l,f)?"date":void 0,"aria-selected":c?n.isSelectedMonth(l,f,c):void 0},n.getMonthContent(f))}))})},n.renderQuarters=function(){var r=n.props,s=r.day,i=r.selected,o=[1,2,3,4];return ve.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(l,c){return ve.createElement("div",{key:c,ref:n.QUARTER_REFS[c],role:"option",onClick:function(u){n.onQuarterClick(u,l)},onKeyDown:function(u){n.onQuarterKeyDown(u,l)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(l)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(l)}:void 0,className:n.getQuarterClassNames(l),"aria-selected":i?n.isSelectedQuarter(s,l,i):void 0,tabIndex:Number(n.getQuarterTabIndex(l)),"aria-current":n.isCurrentQuarter(s,l)?"date":void 0},n.getQuarterContent(l))}))},n.getClassNames=function(){var r=n.props,s=r.selectingDate,i=r.selectsStart,o=r.selectsEnd,l=r.showMonthYearPicker,c=r.showQuarterYearPicker,u=r.showWeekPicker;return an("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(i||o)},{"react-datepicker__monthPicker":l},{"react-datepicker__quarterPicker":c},{"react-datepicker__weekPicker":u})},n}return t.prototype.getSelection=function(){var n=this.props,r=n.selected,s=n.selectedDates,i=n.selectsMultiple;if(i)return s;if(r)return[r]},t.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,s=n.showQuarterYearPicker,i=n.day,o=n.ariaLabelPrefix,l=o===void 0?"Month ":o,c=l?l.trim()+" ":"";return ve.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(c).concat(Dt(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},t}(E.Component),LM=function(e){nn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isSelectedMonth=function(r){return n.props.month===r},n.renderOptions=function(){return n.props.monthNames.map(function(r,s){return ve.createElement("div",{className:n.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,s),"aria-selected":n.isSelectedMonth(s)?"true":void 0},n.isSelectedMonth(s)?ve.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return t.prototype.render=function(){return ve.createElement(Ed,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(E.Component),RM=function(e){nn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(s,i){return ve.createElement("option",{key:s,value:i},s)})},n.renderSelectMode=function(r){return ve.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(s){return n.onChange(parseInt(s.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,s){return ve.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},ve.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),ve.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[n.props.month]))},n.renderDropdown=function(r){return ve.createElement(LM,ct({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var s=n.state.dropdownVisible,i=[n.renderReadView(!s,r)];return s&&i.unshift(n.renderDropdown(r)),i},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return sN(i,n.props.locale)}:function(i){return jp(i,n.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(r);break;case"select":s=this.renderSelectMode(r);break}return ve.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(E.Component);function IM(e,t){for(var n=[],r=os(e),s=os(t);!Ys(r,s);)n.push(ht(r)),r=jr(r,1);return n}var $M=function(e){nn(t,e);function t(n){var r=e.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(s){var i=qf(s),o=Fr(r.props.date,s)&&yn(r.props.date,s);return ve.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:r.onChange.bind(r,i),"aria-selected":o?"true":void 0},o?ve.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",Dt(s,r.props.dateFormat,r.props.locale))})},r.onChange=function(s){return r.props.onChange(s)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:IM(r.props.minDate,r.props.maxDate)},r}return t.prototype.render=function(){var n=an({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return ve.createElement(Ed,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(E.Component),zM=function(e){nn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=os(n.props.minDate),s=os(n.props.maxDate),i=[];!Ys(r,s);){var o=qf(r);i.push(ve.createElement("option",{key:o,value:o},Dt(r,n.props.dateFormat,n.props.locale))),r=jr(r,1)}return i},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return ve.createElement("select",{value:qf(os(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var s=Dt(n.props.date,n.props.dateFormat,n.props.locale);return ve.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},ve.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),ve.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},n.renderDropdown=function(){return ve.createElement($M,ct({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown();var s=ht(r);Fr(n.props.date,s)&&yn(n.props.date,s)||n.props.onChange(s)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return ve.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(E.Component),HM=function(e){nn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,s,i;n.list&&(n.list.scrollTop=(i=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((s=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&s!==void 0?s:0):n.list.clientHeight,n.centerLi))!==null&&i!==void 0?i:0)})},n.handleClick=function(r){var s,i;(n.props.minTime||n.props.maxTime)&&Yx(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&Wx(r,n.props)||(i=(s=n.props).onChange)===null||i===void 0||i.call(s,r)},n.isSelectedTime=function(r){return n.props.selected&&PM(n.props.selected,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&Yx(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&Wx(r,n.props)},n.liClasses=function(r){var s,i=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&i.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&i.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(as(r)*3600+is(r)*60+Hs(r))%(((s=n.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},n.handleOnKeyDown=function(r,s){var i,o;r.key===Ae.Space&&(r.preventDefault(),r.key=Ae.Enter),(r.key===Ae.ArrowUp||r.key===Ae.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===Ae.ArrowDown||r.key===Ae.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===Ae.Enter&&n.handleClick(s),(o=(i=n.props).handleOnKeyDown)===null||o===void 0||o.call(i,r)},n.renderTimes=function(){for(var r,s=[],i=typeof n.props.format=="string"?n.props.format:"p",o=(r=n.props.intervals)!==null&&r!==void 0?r:t.defaultProps.intervals,l=n.props.selected||n.props.openToDate||ht(),c=Hc(l),u=n.props.injectTimes&&n.props.injectTimes.sort(function(p,y){return p.getTime()-y.getTime()}),m=60*CM(l),h=m/o,f=0;f<h;f++){var b=Uf(c,f*o);if(s.push(b),u){var v=DM(c,b,f,o,u);s=s.concat(v)}}var D=s.reduce(function(p,y){return y.getTime()<=l.getTime()?y:p},s[0]);return s.map(function(p){return ve.createElement("li",{key:p.valueOf(),onClick:n.handleClick.bind(n,p),className:n.liClasses(p),ref:function(y){p===D&&(n.centerLi=y)},onKeyDown:function(y){n.handleOnKeyDown(y,p)},tabIndex:p===D?0:-1,role:"option","aria-selected":n.isSelectedTime(p)?"true":void 0,"aria-disabled":n.isDisabledTime(p)?"true":void 0},Dt(p,i,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?ve.createElement(ve.Fragment,null):ve.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){n.header=r}},ve.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var n;(n=this.resizeObserver)===null||n===void 0||n.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var n=this,r=this.props.monthRef;this.updateContainerHeight(),r&&(this.resizeObserver=new ResizeObserver(function(){n.updateContainerHeight()}),this.resizeObserver.observe(r))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var n=this,r,s=this.state.height;return ve.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),ve.createElement("div",{className:"react-datepicker__time"},ve.createElement("div",{className:"react-datepicker__time-box"},ve.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){n.list=i},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},t}(E.Component),r0=3,BM=function(e){nn(t,e);function t(n){var r=e.call(this,n)||this;return r.YEAR_REFS=zr([],Array(r.props.yearItemNumber),!0).map(function(){return E.createRef()}),r.isDisabled=function(s){return nr(s,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(s){return _p(s,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var s;return(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection},r.updateFocusOnPaginate=function(s){var i=function(){var o,l;(l=(o=r.YEAR_REFS[s])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()};window.requestAnimationFrame(i)},r.handleYearClick=function(s,i){r.props.onDayClick&&r.props.onDayClick(s,i)},r.handleYearNavigation=function(s,i){var o,l,c,u,m=r.props,h=m.date,f=m.yearItemNumber;if(!(h===void 0||f===void 0)){var b=Es(h,f).startPeriod;r.isDisabled(i)||r.isExcluded(i)||((l=(o=r.props).setPreSelection)===null||l===void 0||l.call(o,i),s-b<0?r.updateFocusOnPaginate(f-(b-s)):s-b>=f?r.updateFocusOnPaginate(Math.abs(f-(s-b))):(u=(c=r.YEAR_REFS[s-b])===null||c===void 0?void 0:c.current)===null||u===void 0||u.focus())}},r.isSameDay=function(s,i){return lt(s,i)},r.isCurrentYear=function(s){return s===rt(ht())},r.isRangeStart=function(s){return r.props.startDate&&r.props.endDate&&Fr(Or(ht(),s),r.props.startDate)},r.isRangeEnd=function(s){return r.props.startDate&&r.props.endDate&&Fr(Or(ht(),s),r.props.endDate)},r.isInRange=function(s){return sc(s,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(s){var i=r.props,o=i.selectsStart,l=i.selectsEnd,c=i.selectsRange,u=i.startDate,m=i.endDate;return!(o||l||c)||!r.selectingDate()?!1:o&&m?sc(s,r.selectingDate(),m):l&&u||c&&u&&!m?sc(s,u,r.selectingDate()):!1},r.isSelectingRangeStart=function(s){var i;if(!r.isInSelectingRange(s))return!1;var o=r.props,l=o.startDate,c=o.selectsStart,u=Or(ht(),s);return c?Fr(u,(i=r.selectingDate())!==null&&i!==void 0?i:null):Fr(u,l??null)},r.isSelectingRangeEnd=function(s){var i;if(!r.isInSelectingRange(s))return!1;var o=r.props,l=o.endDate,c=o.selectsEnd,u=o.selectsRange,m=Or(ht(),s);return c||u?Fr(m,(i=r.selectingDate())!==null&&i!==void 0?i:null):Fr(m,l??null)},r.isKeyboardSelected=function(s){if(!(r.props.date===void 0||r.props.selected==null||r.props.preSelection==null)){var i=r.props,o=i.minDate,l=i.maxDate,c=i.excludeDates,u=i.includeDates,m=i.filterDate,h=yo(Or(r.props.date,s)),f=(o||l||c||u||m)&&Bc(s,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!lt(h,yo(r.props.selected))&&lt(h,yo(r.props.preSelection))&&!f}},r.isSelectedYear=function(s){var i=r.props,o=i.selectsMultiple,l=i.selected,c=i.selectedDates;return o?c==null?void 0:c.some(function(u){return s===rt(u)}):!!l&&s===rt(l)},r.onYearClick=function(s,i){var o=r.props.date;o!==void 0&&r.handleYearClick(yo(Or(o,i)),s)},r.onYearKeyDown=function(s,i){var o,l,c=s.key,u=r.props,m=u.date,h=u.yearItemNumber,f=u.handleOnKeyDown;if(c!==Ae.Tab&&s.preventDefault(),!r.props.disabledKeyboardNavigation)switch(c){case Ae.Enter:if(r.props.selected==null)break;r.onYearClick(s,i),(l=(o=r.props).setPreSelection)===null||l===void 0||l.call(o,r.props.selected);break;case Ae.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(i+1,rs(r.props.preSelection,1));break;case Ae.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(i-1,Pi(r.props.preSelection,1));break;case Ae.ArrowUp:{if(m===void 0||h===void 0||r.props.preSelection==null)break;var b=Es(m,h).startPeriod,v=r0,D=i-v;if(D<b){var p=h%v;i>=b&&i<b+p?v=p:v+=p,D=i-v}r.handleYearNavigation(D,Pi(r.props.preSelection,v));break}case Ae.ArrowDown:{if(m===void 0||h===void 0||r.props.preSelection==null)break;var y=Es(m,h).endPeriod,v=r0,D=i+v;if(D>y){var p=h%v;i<=y&&i>y-p?v=p:v+=p,D=i+v}r.handleYearNavigation(D,rs(r.props.preSelection,v));break}}f&&f(s)},r.getYearClassNames=function(s){var i=r.props,o=i.date,l=i.minDate,c=i.maxDate,u=i.excludeDates,m=i.includeDates,h=i.filterDate,f=i.yearClassName;return an("react-datepicker__year-text","react-datepicker__year-".concat(s),o?f==null?void 0:f(Or(o,s)):void 0,{"react-datepicker__year-text--selected":r.isSelectedYear(s),"react-datepicker__year-text--disabled":(l||c||u||m||h)&&Bc(s,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(s),"react-datepicker__year-text--range-start":r.isRangeStart(s),"react-datepicker__year-text--range-end":r.isRangeEnd(s),"react-datepicker__year-text--in-range":r.isInRange(s),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(s),"react-datepicker__year-text--today":r.isCurrentYear(s)})},r.getYearTabIndex=function(s){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var i=rt(r.props.preSelection),o=Bc(s,r.props);return s===i&&!o?"0":"-1"},r.getYearContent=function(s){return r.props.renderYearContent?r.props.renderYearContent(s):s},r}return t.prototype.render=function(){var n=this,r=[],s=this.props,i=s.date,o=s.yearItemNumber,l=s.onYearMouseEnter,c=s.onYearMouseLeave;if(i===void 0)return null;for(var u=Es(i,o),m=u.startPeriod,h=u.endPeriod,f=function(D){r.push(ve.createElement("div",{ref:b.YEAR_REFS[D-m],onClick:function(p){n.onYearClick(p,D)},onKeyDown:function(p){lN(p)&&(p.preventDefault(),p.key=Ae.Enter),n.onYearKeyDown(p,D)},tabIndex:Number(b.getYearTabIndex(D)),className:b.getYearClassNames(D),onMouseEnter:b.props.usePointerEvent?void 0:function(p){return l(p,D)},onPointerEnter:b.props.usePointerEvent?function(p){return l(p,D)}:void 0,onMouseLeave:b.props.usePointerEvent?void 0:function(p){return c(p,D)},onPointerLeave:b.props.usePointerEvent?function(p){return c(p,D)}:void 0,key:D,"aria-current":b.isCurrentYear(D)?"date":void 0},b.getYearContent(D)))},b=this,v=m;v<=h;v++)f(v);return ve.createElement("div",{className:"react-datepicker__year"},ve.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},t}(E.Component);function VM(e,t,n,r){for(var s=[],i=0;i<2*t+1;i++){var o=e+t-i,l=!0;n&&(l=rt(n)<=o),r&&l&&(l=rt(r)>=o),l&&s.push(o)}return s}var UM=function(e){nn(t,e);function t(n){var r=e.call(this,n)||this;r.renderOptions=function(){var l=r.props.year,c=r.state.yearsList.map(function(h){return ve.createElement("div",{className:l===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:r.onChange.bind(r,h),"aria-selected":l===h?"true":void 0},l===h?ve.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",h)}),u=r.props.minDate?rt(r.props.minDate):null,m=r.props.maxDate?rt(r.props.maxDate):null;return(!m||!r.state.yearsList.find(function(h){return h===m}))&&c.unshift(ve.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},ve.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!u||!r.state.yearsList.find(function(h){return h===u}))&&c.push(ve.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},ve.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c},r.onChange=function(l){r.props.onChange(l)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(l){var c=r.state.yearsList.map(function(u){return u+l});r.setState({yearsList:c})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var s=n.yearDropdownItemNumber,i=n.scrollableYearDropdown,o=s||(i?10:5);return r.state={yearsList:VM(r.props.year,o,r.props.minDate,r.props.maxDate)},r.dropdownRef=E.createRef(),r}return t.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,s=r?r.find(function(i){return i.ariaSelected}):null;n.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},t.prototype.render=function(){var n=an({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return ve.createElement(Ed,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(E.Component),WM=function(e){nn(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?rt(n.props.minDate):1900,s=n.props.maxDate?rt(n.props.maxDate):2100,i=[],o=r;o<=s;o++)i.push(ve.createElement("option",{key:o,value:o},o));return i},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return ve.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return ve.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return n.toggleDropdown(s)}},ve.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),ve.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return ve.createElement(UM,ct({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,s){var i;(i=n.onSelect)===null||i===void 0||i.call(n,r,s),n.setOpen()},n.onSelect=function(r,s){var i,o;(o=(i=n.props).onSelect)===null||o===void 0||o.call(i,r,s)},n.setOpen=function(){var r,s;(s=(r=n.props).setOpen)===null||s===void 0||s.call(r,!0)},n}return t.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return ve.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},t}(E.Component),YM=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],qM=function(e){var t=(e.className||"").split(/\s+/);return YM.some(function(n){return t.indexOf(n)>=0})},KM=function(e){nn(t,e);function t(n){var r=e.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(s){r.props.onClickOutside(s)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(s){var i,o;qM(s.target)&&((o=(i=r.props).onDropdownFocus)===null||o===void 0||o.call(i,s))},r.getDateInView=function(){var s=r.props,i=s.preSelection,o=s.selected,l=s.openToDate,c=iN(r.props),u=oN(r.props),m=ht(),h=l||o||i;return h||(c&&Oa(m,c)?c:u&&Ys(m,u)?u:m)},r.increaseMonth=function(){r.setState(function(s){var i=s.date;return{date:jr(i,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(s){var i=s.date;return{date:ja(i,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(s,i,o){r.props.onSelect(s,i,o),r.props.setPreSelection&&r.props.setPreSelection(s)},r.handleDayMouseEnter=function(s){r.setState({selectingDate:s}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(s)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(s,i){r.setState({selectingDate:Or(ht(),i)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(s,i)},r.handleYearMouseLeave=function(s,i){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(s,i)},r.handleYearChange=function(s){var i,o,l,c;(o=(i=r.props).onYearChange)===null||o===void 0||o.call(i,s),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(s),(c=(l=r.props).setOpen)===null||c===void 0||c.call(l,!0)),r.props.setPreSelection&&r.props.setPreSelection(s)},r.getEnabledPreSelectionDateForMonth=function(s){if(!nr(s,r.props))return s;for(var i=os(s),o=pM(s),l=DC(o,i),c=null,u=0;u<=l;u++){var m=br(i,u);if(!nr(m,r.props)){c=m;break}}return c},r.handleMonthChange=function(s){var i,o,l,c=(i=r.getEnabledPreSelectionDateForMonth(s))!==null&&i!==void 0?i:s;r.handleCustomMonthChange(c),r.props.adjustDateOnChange&&(r.props.onSelect(c),(l=(o=r.props).setOpen)===null||l===void 0||l.call(o,!0)),r.props.setPreSelection&&r.props.setPreSelection(c)},r.handleCustomMonthChange=function(s){var i,o;(o=(i=r.props).onMonthChange)===null||o===void 0||o.call(i,s),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(s){r.handleYearChange(s),r.handleMonthChange(s)},r.changeYear=function(s){r.setState(function(i){var o=i.date;return{date:Or(o,Number(s))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(s){r.setState(function(i){var o=i.date;return{date:Zn(o,Number(s))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(s){r.setState(function(i){var o=i.date;return{date:Or(Zn(o,hn(s)),rt(s))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(s){s===void 0&&(s=r.state.date);var i=Bs(s,r.props.locale,r.props.calendarStartDay),o=[];return r.props.showWeekNumbers&&o.push(ve.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(l){var c=br(i,l),u=r.formatWeekday(c,r.props.locale),m=r.props.weekDayClassName?r.props.weekDayClassName(c):void 0;return ve.createElement("div",{key:l,"aria-label":Dt(c,"EEEE",r.props.locale),className:an("react-datepicker__day-name",m)},u)}))},r.formatWeekday=function(s,i){return r.props.formatWeekDay?gM(s,r.props.formatWeekDay,i):r.props.useWeekdaysShort?vM(s,i):xM(s,i)},r.decreaseYear=function(){r.setState(function(s){var i,o=s.date;return{date:Pi(o,r.props.showYearPicker?(i=r.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var s,i,o;if(!r.props.renderCustomHeader){var l=(s=r.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=r.props.showPreviousMonths?l-1:0,u=(i=r.props.monthSelectedIn)!==null&&i!==void 0?i:c,m=ja(r.state.date,u),h;switch(!0){case r.props.showMonthYearPicker:h=Gx(r.state.date,r.props);break;case r.props.showYearPicker:h=jM(r.state.date,r.props);break;case r.props.showQuarterYearPicker:h=wM(r.state.date,r.props);break;default:h=qx(m,r.props);break}if(!(!((o=r.props.forceShowMonthNavigation)!==null&&o!==void 0?o:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&h||r.props.showTimeSelectOnly)){var f=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],b=["react-datepicker__navigation","react-datepicker__navigation--previous"],v=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(v=r.decreaseYear),h&&r.props.showDisabledMonthNavigation&&(b.push("react-datepicker__navigation--previous--disabled"),v=void 0);var D=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,p=r.props,y=p.previousMonthButtonLabel,w=y===void 0?t.defaultProps.previousMonthButtonLabel:y,S=p.previousYearButtonLabel,j=S===void 0?t.defaultProps.previousYearButtonLabel:S,F=r.props,C=F.previousMonthAriaLabel,T=C===void 0?typeof w=="string"?w:"Previous Month":C,P=F.previousYearAriaLabel,V=P===void 0?typeof j=="string"?j:"Previous Year":P;return ve.createElement("button",{type:"button",className:b.join(" "),onClick:v,onKeyDown:r.props.handleOnKeyDown,"aria-label":D?V:T},ve.createElement("span",{className:f.join(" ")},D?j:w))}}},r.increaseYear=function(){r.setState(function(s){var i,o=s.date;return{date:rs(o,r.props.showYearPicker?(i=r.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var s;if(!r.props.renderCustomHeader){var i;switch(!0){case r.props.showMonthYearPicker:i=Qx(r.state.date,r.props);break;case r.props.showYearPicker:i=_M(r.state.date,r.props);break;case r.props.showQuarterYearPicker:i=NM(r.state.date,r.props);break;default:i=Kx(r.state.date,r.props);break}if(!(!((s=r.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&i||r.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],l=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var c=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(c=r.increaseYear),i&&r.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),c=void 0);var u=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,m=r.props,h=m.nextMonthButtonLabel,f=h===void 0?t.defaultProps.nextMonthButtonLabel:h,b=m.nextYearButtonLabel,v=b===void 0?t.defaultProps.nextYearButtonLabel:b,D=r.props,p=D.nextMonthAriaLabel,y=p===void 0?typeof f=="string"?f:"Next Month":p,w=D.nextYearAriaLabel,S=w===void 0?typeof v=="string"?v:"Next Year":w;return ve.createElement("button",{type:"button",className:o.join(" "),onClick:c,onKeyDown:r.props.handleOnKeyDown,"aria-label":u?S:y},ve.createElement("span",{className:l.join(" ")},u?v:f))}}},r.renderCurrentMonth=function(s){s===void 0&&(s=r.state.date);var i=["react-datepicker__current-month"];return r.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),ve.createElement("h2",{className:i.join(" ")},Dt(s,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showYearDropdown||s))return ve.createElement(WM,ct({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:rt(r.state.date)}))},r.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthDropdown||s))return ve.createElement(RM,ct({},t.defaultProps,r.props,{month:hn(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthYearDropdown||s))return ve.createElement(zM,ct({},t.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(s){r.props.onSelect(Bx(),s),r.props.setPreSelection&&r.props.setPreSelection(Bx())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return ve.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDefaultHeader=function(s){var i=s.monthDate,o=s.i;return ve.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(i),ve.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(o!==0),r.renderMonthYearDropdown(o!==0),r.renderYearDropdown(o!==0)),ve.createElement("div",{className:"react-datepicker__day-names"},r.header(i)))},r.renderCustomHeader=function(s){var i,o,l=s.monthDate,c=s.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var u=qx(r.state.date,r.props),m=Kx(r.state.date,r.props),h=Gx(r.state.date,r.props),f=Qx(r.state.date,r.props),b=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return ve.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(o=(i=r.props).renderCustomHeader)===null||o===void 0?void 0:o.call(i,ct(ct({},r.state),{customHeaderCount:c,monthDate:l,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:u,nextMonthButtonDisabled:m,prevYearButtonDisabled:h,nextYearButtonDisabled:f})),b&&ve.createElement("div",{className:"react-datepicker__day-names"},r.header(l)))},r.renderYearHeader=function(s){var i=s.monthDate,o=r.props,l=o.showYearPicker,c=o.yearItemNumber,u=c===void 0?t.defaultProps.yearItemNumber:c,m=Es(i,u),h=m.startPeriod,f=m.endPeriod;return ve.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(h," - ").concat(f):rt(i))},r.renderHeader=function(s){var i=s.monthDate,o=s.i,l=o===void 0?0:o,c={monthDate:i,i:l};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(c);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(c);default:return r.renderDefaultHeader(c)}},r.renderMonths=function(){var s,i;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var o=[],l=(s=r.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=r.props.showPreviousMonths?l-1:0,u=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?rs(r.state.date,c):ja(r.state.date,c),m=(i=r.props.monthSelectedIn)!==null&&i!==void 0?i:c,h=0;h<l;++h){var f=h-m+c,b=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?rs(u,f):jr(u,f),v="month-".concat(h),D=h<l-1,p=h>0;o.push(ve.createElement("div",{key:v,ref:function(y){r.monthContainer=y??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:b,i:h}),ve.createElement(AM,ct({},t.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:b,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:h,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:D,monthShowsDuplicateDaysStart:p}))))}return o}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return ve.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),ve.createElement(BM,ct({},t.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return ve.createElement(HM,ct({},t.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var s=r.props.selected?new Date(r.props.selected):void 0,i=s&&Md(s)&&!!r.props.selected,o=i?"".concat(Xx(s.getHours()),":").concat(Xx(s.getMinutes())):"";if(r.props.showTimeInput)return ve.createElement(EM,ct({},t.defaultProps,r.props,{date:s,timeString:o,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var s,i=Es(r.state.date,(s=r.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),o=i.startPeriod,l=i.endPeriod,c;return r.props.showYearPicker?c="".concat(o," - ").concat(l):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?c=rt(r.state.date):c="".concat(jp(hn(r.state.date),r.props.locale)," ").concat(rt(r.state.date)),ve.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&c)},r.renderChildren=function(){if(r.props.children)return ve.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=E.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Tl}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){n.setState({monthContainer:n.monthContainer})}())},t.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&(!lt(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var s=!yn(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!lt(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var n=this.props.container||lM;return ve.createElement(Ed,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},ve.createElement("div",{style:{display:"contents"},ref:this.containerRef},ve.createElement(n,{className:an("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(E.Component),GM=function(e){var t=e.icon,n=e.className,r=n===void 0?"":n,s=e.onClick,i="react-datepicker__calendar-icon";if(typeof t=="string")return ve.createElement("i",{className:"".concat(i," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:s});if(ve.isValidElement(t)){var o=t;return ve.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(i," ").concat(r),onClick:function(l){typeof o.props.onClick=="function"&&o.props.onClick(l),typeof s=="function"&&s(l)}})}return ve.createElement("svg",{className:"".concat(i," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},ve.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},cN=function(e){nn(t,e);function t(n){var r=e.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return T_.createPortal(this.props.children,this.el)},t}(E.Component),QM="[tabindex], a, button, input, select, textarea",JM=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},uN=function(e){nn(t,e);function t(n){var r=e.call(this,n)||this;return r.getTabChildren=function(){var s;return Array.prototype.slice.call((s=r.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(QM),1,-1).filter(JM)},r.handleFocusStart=function(){var s=r.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},r.handleFocusEnd=function(){var s=r.getTabChildren();s&&s.length>1&&s[0].focus()},r.tabLoopRef=E.createRef(),r}return t.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:t.defaultProps.enableTabLoop)?ve.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},ve.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,ve.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(E.Component);function XM(e){var t=function(n){var r,s=typeof n.hidePopper=="boolean"?n.hidePopper:!0,i=E.useRef(null),o=oM(ct({open:!s,whileElementsMounted:$E,placement:n.popperPlacement,middleware:zr([KE({padding:15}),qE(10),GE({element:i})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),l=ct(ct({},n),{hidePopper:s,popperProps:ct(ct({},o),{arrowRef:i})});return ve.createElement(e,ct({},l))};return t}var ZM=function(e){nn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n=this.props,r=n.className,s=n.wrapperClassName,i=n.hidePopper,o=i===void 0?t.defaultProps.hidePopper:i,l=n.popperComponent,c=n.targetComponent,u=n.enableTabLoop,m=n.popperOnKeyDown,h=n.portalId,f=n.portalHost,b=n.popperProps,v=n.showArrow,D=void 0;if(!o){var p=an("react-datepicker-popper",r);D=ve.createElement(uN,{enableTabLoop:u},ve.createElement("div",{ref:b.refs.setFloating,style:b.floatingStyles,className:p,"data-placement":b.placement,onKeyDown:m},l,v&&ve.createElement(eM,{ref:b.arrowRef,context:b.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(D=E.createElement(this.props.popperContainer,{},D)),h&&!o&&(D=ve.createElement(cN,{portalId:h,portalHost:f},D));var y=an("react-datepicker-wrapper",s);return ve.createElement(ve.Fragment,null,ve.createElement("div",{ref:b.refs.setReference,className:y},c),D)},t}(E.Component),eT=XM(ZM),s0="react-datepicker-ignore-onclickoutside";function tT(e,t){return e&&t?hn(e)!==hn(t)||rt(e)!==rt(t):e!==t}var wm="Date input not valid.",Me=function(e){nn(t,e);function t(n){var r=e.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:ht()},r.modifyHolidays=function(){var s;return(s=r.props.holidays)===null||s===void 0?void 0:s.reduce(function(i,o){var l=new Date(o.date);return Md(l)?zr(zr([],i,!0),[ct(ct({},o),{date:l})],!1):i},[])},r.calcInitialState=function(){var s,i=r.getPreSelection(),o=iN(r.props),l=oN(r.props),c=o&&Oa(i,Hc(o))?o:l&&Ys(i,Vx(l))?l:i;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&s!==void 0?s:c,highlightDates:Jx(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.resetHiddenStatus=function(){r.setState(ct(ct({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(ct(ct({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var s,i;(i=(s=r.input)===null||s===void 0?void 0:s.focus)===null||i===void 0||i.call(s,{preventScroll:!0})},r.setBlur=function(){var s,i;(i=(s=r.input)===null||s===void 0?void 0:s.blur)===null||i===void 0||i.call(s),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(s,i){i===void 0&&(i=!1),r.setState({open:s,preSelection:s&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:Nm},function(){s||r.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return ss(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(s){var i,o,l=r.state.wasHidden,c=l?r.state.open:!0;l&&r.resetHiddenStatus(),r.state.preventFocus||((o=(i=r.props).onFocus)===null||o===void 0||o.call(i,s),c&&!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.handleBlur=function(s){var i,o;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((o=(i=r.props).onBlur)===null||o===void 0||o.call(i,s)),r.state.open&&r.props.open===!1&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(s){var i,o;r.props.inline||r.setOpen(!1),(o=(i=r.props).onClickOutside)===null||o===void 0||o.call(i,s),r.props.withPortal&&s.preventDefault()},r.handleChange=function(){for(var s,i,o,l,c,u=[],m=0;m<arguments.length;m++)u[m]=arguments[m];var h=u[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,u),!h||typeof h.isDefaultPrevented!="function"||h.isDefaultPrevented()))){r.setState({inputValue:(h==null?void 0:h.target)instanceof HTMLInputElement?h.target.value:null,lastPreSelectChange:nT});var f=r.props,b=f.selectsRange,v=f.startDate,D=f.endDate,p=(s=r.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,y=(i=r.props.strictParsing)!==null&&i!==void 0?i:t.defaultProps.strictParsing,w=(h==null?void 0:h.target)instanceof HTMLInputElement?h.target.value:"";if(b){var S=w.split(p.includes("-")?rN:"-",2).map(function(ee){return ee.trim()}),j=S[0],F=S[1],C=vm(j??"",p,r.props.locale,y),T=vm(F??"",p,r.props.locale,y),P=(v==null?void 0:v.getTime())!==(C==null?void 0:C.getTime()),V=(D==null?void 0:D.getTime())!==(T==null?void 0:T.getTime());if(!P&&!V||C&&nr(C,r.props)||T&&nr(T,r.props))return;(l=(o=r.props).onChange)===null||l===void 0||l.call(o,[C,T],h)}else{var Q=vm(w,p,r.props.locale,y,(c=r.props.selected)!==null&&c!==void 0?c:void 0);(Q||!w)&&r.setSelected(Q,h,!0)}}},r.handleSelect=function(s,i,o){if(!r.props.readOnly){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(i),r.setSelected(s,i,!1,o),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(s);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var l=r.props,c=l.startDate,u=l.endDate;c&&!u&&(r.props.swapRange||!t0(s,c))&&r.setOpen(!1)}}},r.setSelected=function(s,i,o,l){var c,u,m=s;if(r.props.showYearPicker){if(m!==null&&Bc(rt(m),r.props))return}else if(r.props.showMonthYearPicker){if(m!==null&&aN(m,r.props))return}else if(m!==null&&nr(m,r.props))return;var h=r.props,f=h.onChange,b=h.selectsRange,v=h.startDate,D=h.endDate,p=h.selectsMultiple,y=h.selectedDates,w=h.minTime,S=h.swapRange;if(!pa(r.props.selected,m)||r.props.allowSameDay||b||p)if(m!==null&&(r.props.selected&&(!o||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(m=ym(m,{hour:as(r.props.selected),minute:is(r.props.selected),second:Hs(r.props.selected)})),!o&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&w&&(m=ym(m,{hour:w.getHours(),minute:w.getMinutes(),second:w.getSeconds()})),r.props.inline||r.setState({preSelection:m}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:l})),b){var j=!v&&!D,F=v&&!D,C=v&&D;j?f==null||f([m,null],i):F&&(m===null?f==null||f([null,null],i):t0(m,v)?S?f==null||f([m,v],i):f==null||f([m,null],i):f==null||f([v,m],i)),C&&(f==null||f([m,null],i))}else if(p){if(m!==null)if(!(y!=null&&y.length))f==null||f([m],i);else{var T=y.some(function(V){return lt(V,m)});if(T){var P=y.filter(function(V){return!lt(V,m)});f==null||f(P,i)}else f==null||f(zr(zr([],y,!0),[m],!1),i)}}else f==null||f(m,i);o||((u=(c=r.props).onSelect)===null||u===void 0||u.call(c,m,i),r.setState({inputValue:null}))},r.setPreSelection=function(s){if(!r.props.readOnly){var i=ss(r.props.minDate),o=ss(r.props.maxDate),l=!0;if(s){var c=Hc(s);if(i&&o)l=bo(s,r.props.minDate,r.props.maxDate);else if(i){var u=Hc(r.props.minDate);l=Ys(s,u)||pa(c,u)}else if(o){var m=Vx(r.props.maxDate);l=Oa(s,m)||pa(c,m)}}l&&r.setState({preSelection:s})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(s){var i,o;if(!(r.props.selectsRange||r.props.selectsMultiple)){var l=r.props.selected?r.props.selected:r.getPreSelection(),c=r.props.selected?s:ym(l,{hour:as(s),minute:is(s)});r.setState({preSelection:c}),(o=(i=r.props).onChange)===null||o===void 0||o.call(i,c),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var s,i;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(i=(s=r.props).onInputClick)===null||i===void 0||i.call(s)},r.onInputKeyDown=function(s){var i,o,l,c,u,m;(o=(i=r.props).onKeyDown)===null||o===void 0||o.call(i,s);var h=s.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(h===Ae.ArrowDown||h===Ae.ArrowUp||h===Ae.Enter)&&((l=r.onInputClick)===null||l===void 0||l.call(r));return}if(r.state.open){if(h===Ae.ArrowDown||h===Ae.ArrowUp){s.preventDefault();var f=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',b=((c=r.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(f);b instanceof HTMLElement&&b.focus({preventScroll:!0});return}var v=ht(r.state.preSelection);h===Ae.Enter?(s.preventDefault(),s.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===Nm?(r.handleSelect(v,s),!r.props.shouldCloseOnSelect&&r.setPreSelection(v)):r.setOpen(!1)):h===Ae.Escape?(s.preventDefault(),s.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):h===Ae.Tab&&r.setOpen(!1),r.inputOk()||(m=(u=r.props).onInputError)===null||m===void 0||m.call(u,{code:1,msg:wm})}},r.onPortalKeyDown=function(s){var i=s.key;i===Ae.Escape&&(s.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(s){var i,o,l,c,u,m,h=r.props,f=h.minDate,b=h.maxDate,v=h.disabledKeyboardNavigation,D=h.showWeekPicker,p=h.shouldCloseOnSelect,y=h.locale,w=h.calendarStartDay,S=h.adjustDateOnChange,j=h.inline;if((o=(i=r.props).onKeyDown)===null||o===void 0||o.call(i,s),!v){var F=s.key,C=s.shiftKey,T=ht(r.state.preSelection),P=function(re,$){var H=$;switch(re){case Ae.ArrowRight:H=D?_u($,1):br($,1);break;case Ae.ArrowLeft:H=D?Ex($):S5($);break;case Ae.ArrowUp:H=Ex($);break;case Ae.ArrowDown:H=_u($,1);break;case Ae.PageUp:H=C?Pi($,1):ja($,1);break;case Ae.PageDown:H=C?rs($,1):jr($,1);break;case Ae.Home:H=Bs($,y,w);break;case Ae.End:H=hM($);break}return H},V=function(re,$){for(var H=40,Y=re,X=!1,J=0,he=P(re,$);!X;){if(J>=H){he=$;break}f&&he<f&&(Y=Ae.ArrowRight,he=nr(f,r.props)?P(Y,he):f),b&&he>b&&(Y=Ae.ArrowLeft,he=nr(b,r.props)?P(Y,he):b),nr(he,r.props)?((Y===Ae.PageUp||Y===Ae.Home)&&(Y=Ae.ArrowRight),(Y===Ae.PageDown||Y===Ae.End)&&(Y=Ae.ArrowLeft),he=P(Y,he)):X=!0,J++}return he};if(F===Ae.Enter){s.preventDefault(),r.handleSelect(T,s),!p&&r.setPreSelection(T);return}else if(F===Ae.Escape){s.preventDefault(),r.setOpen(!1),r.inputOk()||(c=(l=r.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:wm});return}var Q=null;switch(F){case Ae.ArrowLeft:case Ae.ArrowRight:case Ae.ArrowUp:case Ae.ArrowDown:case Ae.PageUp:case Ae.PageDown:case Ae.Home:case Ae.End:Q=V(F,T);break}if(!Q){(m=(u=r.props).onInputError)===null||m===void 0||m.call(u,{code:1,msg:wm});return}if(s.preventDefault(),r.setState({lastPreSelectChange:Nm}),S&&r.setSelected(Q),r.setPreSelection(Q),j){var ee=hn(T),ce=hn(Q),fe=rt(T),G=rt(Q);ee!==ce||fe!==G?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(s){var i=s.key;i===Ae.Escape&&(s.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),r.sendFocusBackToInput();var i=r.props,o=i.selectsRange,l=i.onChange;o?l==null||l([null,null],s):l==null||l(null,s),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(s){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(s)&&r.setOpen(!1)},r.renderCalendar=function(){var s,i;return!r.props.inline&&!r.isCalendarOpen()?null:ve.createElement(KM,ct({showMonthYearDropdown:void 0,ref:function(o){r.calendar=o}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(s=r.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:SM(r.modifyHolidays()),outsideClickIgnoreClass:s0,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(i=r.props.dropdownMode)!==null&&i!==void 0?i:t.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var s=r.props,i=s.dateFormat,o=i===void 0?t.defaultProps.dateFormat:i,l=s.locale,c=r.props.showTimeInput||r.props.showTimeSelect,u=c?"PPPPp":"PPPP",m;return r.props.selectsRange?m="Selected start date: ".concat(Xn(r.props.startDate,{dateFormat:u,locale:l}),". ").concat(r.props.endDate?"End date: "+Xn(r.props.endDate,{dateFormat:u,locale:l}):""):r.props.showTimeSelectOnly?m="Selected time: ".concat(Xn(r.props.selected,{dateFormat:o,locale:l})):r.props.showYearPicker?m="Selected year: ".concat(Xn(r.props.selected,{dateFormat:"yyyy",locale:l})):r.props.showMonthYearPicker?m="Selected month: ".concat(Xn(r.props.selected,{dateFormat:"MMMM yyyy",locale:l})):r.props.showQuarterYearPicker?m="Selected quarter: ".concat(Xn(r.props.selected,{dateFormat:"yyyy, QQQ",locale:l})):m="Selected date: ".concat(Xn(r.props.selected,{dateFormat:u,locale:l})),ve.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},m)},r.renderDateInput=function(){var s,i,o,l=an(r.props.className,(s={},s[s0]=r.state.open,s)),c=r.props.customInput||ve.createElement("input",{type:"text"}),u=r.props.customInputRef||"ref",m=r.props,h=m.dateFormat,f=h===void 0?t.defaultProps.dateFormat:h,b=m.locale,v=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?uM(r.props.startDate,r.props.endDate,{dateFormat:f,locale:b}):r.props.selectsMultiple?dM((o=r.props.selectedDates)!==null&&o!==void 0?o:[],{dateFormat:f,locale:b}):Xn(r.props.selected,{dateFormat:f,locale:b});return E.cloneElement(c,(i={},i[u]=function(D){r.input=D},i.value=v,i.onBlur=r.handleBlur,i.onChange=r.handleChange,i.onClick=r.onInputClick,i.onFocus=r.handleFocus,i.onKeyDown=r.onInputKeyDown,i.id=r.props.id,i.name=r.props.name,i.form=r.props.form,i.autoFocus=r.props.autoFocus,i.placeholder=r.props.placeholderText,i.disabled=r.props.disabled,i.autoComplete=r.props.autoComplete,i.className=an(c.props.className,l),i.title=r.props.title,i.readOnly=r.props.readOnly,i.required=r.props.required,i.tabIndex=r.props.tabIndex,i["aria-describedby"]=r.props.ariaDescribedBy,i["aria-invalid"]=r.props.ariaInvalid,i["aria-labelledby"]=r.props.ariaLabelledBy,i["aria-required"]=r.props.ariaRequired,i))},r.renderClearButton=function(){var s=r.props,i=s.isClearable,o=s.disabled,l=s.selected,c=s.startDate,u=s.endDate,m=s.clearButtonTitle,h=s.clearButtonClassName,f=h===void 0?"":h,b=s.ariaLabelClose,v=b===void 0?"Close":b,D=s.selectedDates,p=s.readOnly;return i&&!p&&(l!=null||c!=null||u!=null||D!=null&&D.length)?ve.createElement("button",{type:"button",className:an("react-datepicker__close-icon",f,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":v,onClick:r.onClearClick,title:m,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Tl,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(n,r){var s,i,o,l;n.inline&&tT(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Jx(this.props.highlightDates)}),!r.focused&&!pa(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((i=(s=this.props).onCalendarOpen)===null||i===void 0||i.call(s)),r.open===!0&&this.state.open===!1&&((l=(o=this.props).onCalendarClose)===null||l===void 0||l.call(o)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,s=n.icon,i=n.calendarIconClassname,o=n.calendarIconClassName,l=n.toggleCalendarOnIconClick,c=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),ve.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&ve.createElement(GM,ct({icon:s,className:an(o,!o&&i,c&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?ve.createElement(uN,{enableTabLoop:this.props.enableTabLoop},ve.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=ve.createElement(cN,ct({portalId:this.props.portalId},this.props),r)),ve.createElement("div",null,this.renderInputContainer(),r)}return ve.createElement(eT,ct({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(E.Component),nT="input",Nm="navigate";const rT={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},sT=(e,t,n)=>{let r;const s=rT[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},aT={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},iT={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},oT={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lT={date:fi({formats:aT,defaultWidth:"full"}),time:fi({formats:iT,defaultWidth:"full"}),dateTime:fi({formats:oT,defaultWidth:"full"})},cT={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},uT=(e,t,n,r)=>cT[e],dT={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},mT={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},fT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},hT={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},pT={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},gT=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let i;return n===1?i=r&&s.includes(r)?"ère":"er":i="ème",n+i},xT=["MMM","MMMM"],vT={preprocessor:(e,t)=>e.getDate()===1||!t.some(r=>r.isToken&&xT.includes(r.value))?t:t.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:gT,era:Lr({values:dT,defaultWidth:"wide"}),quarter:Lr({values:mT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Lr({values:fT,defaultWidth:"wide"}),day:Lr({values:hT,defaultWidth:"wide"}),dayPeriod:Lr({values:pT,defaultWidth:"wide"})},yT=/^(\d+)(ième|ère|ème|er|e)?/i,bT=/\d+/i,wT={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},NT={any:[/^av/i,/^ap/i]},jT={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},_T={any:[/1/i,/2/i,/3/i,/4/i]},kT={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},ST={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},DT={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},CT={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},PT={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},ET={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},MT={ordinalNumber:Lw({matchPattern:yT,parsePattern:bT,valueCallback:e=>parseInt(e)}),era:Rr({matchPatterns:wT,defaultMatchWidth:"wide",parsePatterns:NT,defaultParseWidth:"any"}),quarter:Rr({matchPatterns:jT,defaultMatchWidth:"wide",parsePatterns:_T,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Rr({matchPatterns:kT,defaultMatchWidth:"wide",parsePatterns:ST,defaultParseWidth:"any"}),day:Rr({matchPatterns:DT,defaultMatchWidth:"wide",parsePatterns:CT,defaultParseWidth:"any"}),dayPeriod:Rr({matchPatterns:PT,defaultMatchWidth:"any",parsePatterns:ET,defaultParseWidth:"any"})},Sn={code:"fr",formatDistance:sT,formatLong:lT,formatRelative:uT,localize:vT,match:MT,options:{weekStartsOn:1,firstWeekContainsDate:4}};kn("fr",Sn);const Lu=e=>typeof e=="string"&&e.trim().length===0,so=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},TT=({status:e})=>{const n={en_cours:{color:"bg-blue-100 text-blue-800",label:"En cours"},validee:{color:"bg-green-100 text-green-800",label:"Validée"},annulee:{color:"bg-red-100 text-red-800",label:"Annulée"},fin_de_periode:{color:"bg-gray-100 text-gray-800",label:"Fin de période"}}[e];return a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${n.color}`,children:n.label})},ao="http://localhost:5000",OT=()=>{var Se,se;const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState([]),[o,l]=E.useState(!0),[c,u]=E.useState(null),[m,h]=E.useState(""),[f,b]=E.useState(null),[v,D]=E.useState(""),[p,y]=E.useState(!1),[w,S]=E.useState(null),[j,F]=E.useState(!1),[C,T]=E.useState(null),[P,V]=E.useState({}),Q=`${ao}/api/reservations`,ee=`${ao}/api/customers`,ce=`${ao}/api/vehicles`,fe=I=>{j?confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")&&(S(I),F(!1),T(null),V({})):S(I)},G=E.useCallback(async()=>{l(!0),u(null);try{const[I,q,_]=await Promise.all([we.get(Q),we.get(ee),we.get(ce)]),O=I.data.map(d=>{const g=q.data.find(k=>k._id===d.customer),N=_.data.find(k=>k._id===d.vehicle);return{...d,customer:g||d.customer,vehicle:N||d.vehicle}});t(O),r(q.data),i(_.data)}catch(I){console.error("Error fetching data:",I),u("Failed to load data."),le.error("Failed to load data.")}finally{l(!1)}},[]);E.useEffect(()=>{G()},[G]);const re=e.filter(I=>{const q=m.toLowerCase(),_=typeof I.customer=="object"&&I.customer?I.customer:null,O=_?`${_.prenomFr||""} ${_.nomFr||""}`.toLowerCase():"",d=typeof I.vehicle=="object"&&I.vehicle?I.vehicle:null,g=d?(d.model||"").toLowerCase():"",N=I.reservationNumber.toLowerCase().includes(q)||O.includes(q)||g.includes(q),k=new Date(I.reservationDate),x=f?k.toDateString()===f.toDateString():!0,M=v?I.status===v:!0;return N&&x&&M}),$=async I=>{try{const _=(await we.post(Q,I)).data,O=n.find(N=>N._id===_.customer),d=s.find(N=>N._id===_.vehicle),g={..._,customer:O||_.customer,vehicle:d||_.vehicle};t([...e,g]),y(!1),le.success("Reservation added successfully.")}catch(q){console.error("Error adding reservation:",q),le.error("Failed to add reservation.")}},H=async I=>{if(!w||!C)return;const q={};if(C.notes&&Lu(C.notes)&&(q.notes="Les notes ne peuvent pas contenir uniquement des espaces."),C.advance!==void 0&&C.advance<0&&(q.advance="L'avance ne peut pas être inférieure à 0."),V(q),Object.keys(q).length>0){le.error("Veuillez corriger les erreurs de validation.");return}try{const O=(await we.put(`${Q}/${w._id}`,I)).data,d=n.find(k=>k._id===O.customer),g=s.find(k=>k._id===O.vehicle),N={...O,customer:d||O.customer,vehicle:g||O.vehicle};t(e.map(k=>k._id===N._id?N:k)),S(N),F(!1),T(null),V({}),le.success("Reservation updated successfully.")}catch(_){console.error("Error updating reservation:",_),le.error("Failed to update reservation.")}},[Y,X]=E.useState(!1),J=I=>{S(e.find(q=>q._id===I)||null),X(!0)},he=async()=>{if(w)try{await we.delete(`${Q}/${w._id}`),t(e.filter(I=>I._id!==w._id)),S(null),X(!1),le.success("Reservation deleted successfully.")}catch(I){console.error("Error deleting reservation:",I),le.error("Failed to delete reservation.")}};return E.useEffect(()=>{if(j&&C&&C.startDate&&C.endDate){const I=new Date(C.startDate),q=new Date(C.endDate);if(!isNaN(I.getTime())&&!isNaN(q.getTime())&&q>=I){const _=Math.abs(q.getTime()-I.getTime()),O=Math.ceil(_/(1e3*60*60*24));let d=C.totalAmount,g=null;typeof C.vehicle=="object"&&C.vehicle?g=C.vehicle._id:typeof C.vehicle=="string"&&(g=C.vehicle);const N=s.find(k=>k._id===g);N?d=O*N.rentalPrice:d=0,T(k=>!k||k.duration===O&&k.totalAmount===d?k:{...k,duration:O,totalAmount:d})}}},[C==null?void 0:C.startDate,C==null?void 0:C.endDate,C==null?void 0:C.vehicle,s,j]),o?a.jsx("p",{children:"Loading..."}):c?a.jsx("p",{children:c}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Réservations"}),a.jsxs("button",{onClick:()=>{S(null),y(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Nouvelle Réservation"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Rechercher une réservation...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:m,onChange:I=>h(I.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status-filter",className:"sr-only",children:"Filtrer par statut"}),a.jsxs("select",{id:"status-filter",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:v,onChange:I=>D(I.target.value),children:[a.jsx("option",{value:"",children:"Tous les statuts"}),a.jsx("option",{value:"en_cours",children:"En cours"}),a.jsx("option",{value:"validee",children:"Validée"}),a.jsx("option",{value:"annulee",children:"Annulée"}),a.jsx("option",{value:"fin_de_periode",children:"Fin de période"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date-filter",className:"sr-only",children:"Filtrer par date de réservation"}),a.jsx(Me,{id:"date-filter",selected:f,onChange:I=>b(I),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"Sélectionner une date",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Réservation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client & Véhicule"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Dates"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:re.map(I=>{var q;return a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(w==null?void 0:w._id)===I._id?"bg-blue-50":""}`,onClick:()=>fe(I),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"md:block overflow-x-auto md:overflow-visible",children:a.jsxs("div",{className:"flex items-center min-w-[220px] md:min-w-0",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:typeof I.vehicle=="object"&&((q=I.vehicle)!=null&&q.imageUrl)?a.jsx("img",{src:I.vehicle.imageUrl.startsWith("data:")?I.vehicle.imageUrl:`${ao}/${I.vehicle.imageUrl.replace(/\\/g,"/")}`,alt:`${I.vehicle.brand||"N/A"} ${I.vehicle.model||"N/A"}`,className:"w-10 h-10 object-cover rounded-full"}):a.jsx(pt,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.reservationNumber}),a.jsx("div",{className:"text-xs text-gray-500",children:typeof I.customer=="object"&&I.customer&&`${I.customer.prenomFr||""} ${I.customer.nomFr||""}`.trim()||"N/A"})]})]})})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium",children:typeof I.vehicle=="object"&&I.vehicle&&I.vehicle.model||"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:typeof I.vehicle=="object"&&I.vehicle&&I.vehicle.licensePlate||"N/A"})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:so(I.startDate)}),a.jsx("div",{className:"text-sm text-gray-500",children:so(I.endDate)})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[I.totalAmount.toLocaleString("fr-FR")," DH"]}),a.jsx("div",{className:`text-xs ${I.totalAmount-I.advance>0?"text-amber-600":"text-green-600"}`,children:I.totalAmount-I.advance>0?`Reste: ${(I.totalAmount-I.advance).toLocaleString("fr-FR")} DH`:"Payé"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${I.status==="en_cours"?"bg-blue-100 text-blue-800":I.status==="validee"?"bg-green-100 text-green-800":I.status==="annulee"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:I.status==="en_cours"?"En cours":I.status==="validee"?"Validée":I.status==="annulee"?"Annulée":"Fin de période"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(tn,{onClick:_=>{_.stopPropagation(),S(I),F(!0),T({...I,customer:typeof I.customer=="object"?I.customer._id:I.customer,vehicle:typeof I.vehicle=="object"?I.vehicle._id:I.vehicle})},size:"md",className:"mr-3"}),a.jsx("button",{onClick:_=>{_.stopPropagation(),J(I._id)},children:a.jsx(Ln,{size:18})})]})]},I._id)})})]})})}),a.jsx("div",{className:"lg:col-span-1",children:w?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de la réservation"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[j?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{confirm("Êtes-vous sûr de vouloir annuler les modifications ?")&&(F(!1),T(null),V({}))},className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{onClick:()=>{C&&H(C)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx(tn,{onClick:()=>{T({...w}),F(!0),V({})},withText:!0,className:"mr-2"}),a.jsx("button",{onClick:()=>S(null),className:"p-2",children:a.jsx(kr,{size:20})})]})]}),a.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto max-h-[calc(100vh-150px)]",children:[w.vehicle&&typeof w.vehicle=="object"?a.jsx("div",{className:"mb-6 relative",children:w.vehicle.imageUrl?a.jsx("img",{src:w.vehicle.imageUrl.startsWith("data:")?w.vehicle.imageUrl:`${ao}/${w.vehicle.imageUrl.replace(/\\/g,"/").replace(/^\//,"")}`,alt:`${w.vehicle.brand||"N/A"} ${w.vehicle.model||"N/A"}`,className:"w-full h-48 object-cover rounded-lg"}):a.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:a.jsx(pt,{size:48,className:"text-gray-400"})})}):a.jsx("div",{className:"mb-6 relative",children:a.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:a.jsx(pt,{size:48,className:"text-gray-400"})})}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informations générales"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"N° de Réservation"}),j&&C?a.jsx("input",{type:"text",name:"reservationNumber",value:C.reservationNumber||"",onChange:I=>T(q=>q?{...q,reservationNumber:I.target.value}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:w.reservationNumber||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Client"}),j&&C?a.jsxs("select",{name:"customer",onChange:I=>{const q=I.target.value;T(_=>_?{..._,customer:q}:null)},value:typeof(C==null?void 0:C.customer)=="object"&&C.customer?C.customer._id:(C==null?void 0:C.customer)||"",className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),n.map(I=>a.jsxs("option",{value:I._id,children:[I.prenomFr," ",I.nomFr]},I._id))]}):a.jsx("p",{className:"font-medium",children:typeof w.customer=="object"&&w.customer&&`${w.customer.prenomFr||""} ${w.customer.nomFr||""}`.trim()||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Véhicule"}),j&&C?a.jsxs("select",{name:"vehicle",onChange:I=>{const q=I.target.value;T(_=>_?{..._,vehicle:q}:null)},value:typeof(C==null?void 0:C.vehicle)=="object"&&C.vehicle?C.vehicle._id:(C==null?void 0:C.vehicle)||"",className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),s.map(I=>a.jsxs("option",{value:I._id,children:[I.licensePlate," - ",I.model]},I._id))]}):a.jsx("p",{className:"font-medium",children:typeof w.vehicle=="object"&&w.vehicle?`${w.vehicle.brand||"N/A"} ${w.vehicle.model||"N/A"}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de Réservation"}),j&&C?a.jsx(Me,{selected:C.reservationDate?new Date(C.reservationDate):null,onChange:I=>T(q=>q?{...q,reservationDate:I?I.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:so(w.reservationDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de Début"}),j&&C?a.jsx(Me,{selected:C.startDate?new Date(C.startDate):null,onChange:I=>T(q=>q?{...q,startDate:I?I.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:so(w.startDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de Fin"}),j&&C?a.jsx(Me,{selected:C.endDate?new Date(C.endDate):null,onChange:I=>T(q=>q?{...q,endDate:I?I.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:so(w.endDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Durée"}),a.jsxs("p",{className:"font-medium",children:[w.duration||"N/A"," jours"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant Total"}),j&&C?a.jsx("input",{type:"number",name:"totalAmount",value:C.totalAmount||0,onChange:I=>T(q=>q?{...q,totalAmount:Number(I.target.value)}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsxs("p",{className:"font-medium",children:[((Se=w.totalAmount)==null?void 0:Se.toLocaleString("fr-FR"))||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Avance"}),j&&C?a.jsx("input",{type:"number",name:"advance",value:C.advance||0,onChange:I=>{T(q=>q?{...q,advance:Number(I.target.value)}:null),Number(I.target.value)<0?V(q=>({...q,advance:"L'avance ne peut pas être inférieure à 0."})):V(q=>{const _={...q};return delete _.advance,_})},className:`w-full border rounded-lg p-2 mt-1 ${P.advance?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}):a.jsxs("p",{className:"font-medium",children:[((se=w.advance)==null?void 0:se.toLocaleString("fr-FR"))||"N/A"," DH"]}),P.advance&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.advance})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Reste à payer"}),a.jsxs("p",{className:"font-medium",children:[(w.totalAmount-w.advance).toLocaleString("fr-FR")||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Statut"}),j&&C?a.jsxs("select",{name:"status",value:C.status||"",onChange:I=>T(q=>q?{...q,status:I.target.value}:null),className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"en_cours",children:"En cours"}),a.jsx("option",{value:"validee",children:"Validée"}),a.jsx("option",{value:"annulee",children:"Annulée"}),a.jsx("option",{value:"fin_de_periode",children:"Fin de période"})]}):a.jsx("p",{className:"font-medium",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${w.status==="en_cours"?"bg-blue-100 text-blue-800":w.status==="validee"?"bg-green-100 text-green-800":w.status==="annulee"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:w.status==="en_cours"?"En cours":w.status==="validee"?"Validée":w.status==="annulee"?"Annulée":"Fin de période"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Notes"}),j&&C?a.jsx("textarea",{name:"notes",value:C.notes||"",onChange:I=>{T(q=>q?{...q,notes:I.target.value}:null),Lu(I.target.value)?V(q=>({...q,notes:"Les notes ne peuvent pas contenir uniquement des espaces."})):V(q=>{const _={...q};return delete _.notes,_})},rows:3,className:`w-full border rounded-lg p-2 mt-1 ${P.notes?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}):a.jsx("p",{className:"font-medium",children:w.notes||"Aucune note"}),P.notes&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.notes})]})]})]})]})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(Nd,{size:64,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune réservation sélectionnée"})]})})]}),p&&a.jsx(FT,{onSubmit:$,onClose:()=>y(!1),initialData:null,customers:n,vehicles:s}),Y&&w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirmer la suppression"}),a.jsxs("p",{children:['Êtes-vous sûr de vouloir supprimer la réservation "',w.reservationNumber,'" ?']}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>X(!1),className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"button",onClick:he,className:"px-4 py-2 bg-red-600 text-white rounded-lg",children:"Supprimer"})]})]})})]})},FT=({onSubmit:e,onClose:t,initialData:n,customers:r,vehicles:s})=>{var D;const i=new Date().toISOString().split("T")[0],o=new Date;o.setDate(o.getDate()+1);const l=o.toISOString().split("T")[0],[c,u]=E.useState(()=>n?{...n,customer:typeof n.customer=="object"?n.customer._id:n.customer,vehicle:typeof n.vehicle=="object"?n.vehicle._id:n.vehicle}:{reservationNumber:"",reservationDate:i,startDate:i,endDate:l,duration:0,status:"en_cours",customer:"",vehicle:"",totalAmount:0,advance:0,notes:""}),[m,h]=E.useState({});E.useEffect(()=>{if(c.startDate&&c.endDate){const p=new Date(c.startDate),y=new Date(c.endDate);if(!isNaN(p.getTime())&&!isNaN(y.getTime())&&y>=p){const w=Math.abs(y.getTime()-p.getTime()),S=Math.ceil(w/(1e3*60*60*24));let j=c.totalAmount||0;if(c.vehicle){const F=s.find(C=>C._id===c.vehicle);F&&(j=S*F.rentalPrice)}u(F=>({...F,duration:S,totalAmount:j}))}}},[c.startDate,c.endDate,c.vehicle,s]);const f=p=>{const{name:y,value:w}=p.target;y==="notes"&&(w&&Lu(w)?h(S=>({...S,[y]:"Les notes ne peuvent pas contenir uniquement des espaces."})):h(S=>{const j={...S};return delete j[y],j})),u(S=>({...S,[y]:w}))},b=(p,y)=>{u(w=>({...w,[y]:p?p.toISOString().split("T")[0]:""}))},v=p=>{p.preventDefault();const y={};if(!c.customer||!c.vehicle||!c.startDate||!c.endDate||!c.reservationDate){le.error("Veuillez remplir tous les champs obligatoires.");return}if(c.notes&&Lu(c.notes)&&(y.notes="Les notes ne peuvent pas contenir uniquement des espaces."),c.advance!==void 0&&c.advance<0&&(y.advance="L'avance ne peut pas être inférieure à 0."),h(y),Object.keys(y).length>0){le.error("Veuillez corriger les erreurs de validation.");return}const w={...c,customer:c.customer,vehicle:c.vehicle,duration:Number(c.duration),totalAmount:Number(c.totalAmount),advance:Number(c.advance)};e(w)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold",children:n?"Modifier la réservation":"Ajouter une réservation"}),a.jsx("button",{onClick:t,children:a.jsx(kr,{size:24})})]}),a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informations sur la Réservation"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"customer",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),a.jsxs("select",{id:"customer",name:"customer",value:c.customer||"",onChange:f,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),r.map(p=>a.jsxs("option",{value:p._id,children:[p.prenomFr," ",p.nomFr]},p._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",value:c.vehicle||"",onChange:f,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),s.map(p=>a.jsxs("option",{value:p._id,children:[p.licensePlate," - ",p.model]},p._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"reservationDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Réservation"}),a.jsx(Me,{selected:c.reservationDate?new Date(c.reservationDate):null,onChange:p=>b(p,"reservationDate"),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"Date de réservation",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Début"}),a.jsx(Me,{selected:c.startDate?new Date(c.startDate):null,onChange:p=>b(p,"startDate"),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"Date de début",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Fin"}),a.jsx(Me,{selected:c.endDate?new Date(c.endDate):null,onChange:p=>b(p,"endDate"),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"Date de fin",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Durée"}),a.jsx("input",{type:"number",id:"duration",name:"duration",placeholder:"Durée",value:c.duration||"",readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"rentalPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix de journée"}),a.jsx("input",{type:"number",id:"rentalPrice",name:"rentalPrice",placeholder:"Prix de journée",value:((D=s.find(p=>p._id===c.vehicle))==null?void 0:D.rentalPrice)||"",readOnly:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut"}),a.jsxs("select",{id:"status",name:"status",value:c.status||"",onChange:f,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3",children:[a.jsx("option",{value:"en_cours",children:"En cours"}),a.jsx("option",{value:"validee",children:"Validée"}),a.jsx("option",{value:"annulee",children:"Annulée"}),a.jsx("option",{value:"fin_de_periode",children:"Fin de période"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"totalAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant Total"}),a.jsx("input",{type:"number",id:"totalAmount",name:"totalAmount",placeholder:"Montant total",value:c.totalAmount||"",onChange:p=>u(y=>({...y,totalAmount:parseFloat(p.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"advance",className:"block text-sm font-medium text-gray-700 mb-1",children:"Avance"}),a.jsx("input",{type:"number",id:"advance",name:"advance",placeholder:"Avance",value:c.advance||"",onChange:p=>{u(y=>({...y,advance:parseFloat(p.target.value)})),parseFloat(p.target.value)<0?h(y=>({...y,advance:"L'avance ne peut pas être inférieure à 0."})):h(y=>{const w={...y};return delete w.advance,w})},className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 ${m.advance?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),m.advance&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.advance})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("textarea",{id:"notes",name:"notes",placeholder:"Notes",value:c.notes||"",onChange:f,className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 ${m.notes?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),m.notes&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.notes})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:n?"Modifier":"Ajouter"})]})]})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Fl(e){return e+.5|0}const Ms=(e,t,n)=>Math.max(Math.min(e,n),t);function wo(e){return Ms(Fl(e*2.55),0,255)}function Vs(e){return Ms(Fl(e*255),0,255)}function Zr(e){return Ms(Fl(e/2.55)/100,0,1)}function a0(e){return Ms(Fl(e*100),0,100)}const Jn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Jf=[..."0123456789ABCDEF"],AT=e=>Jf[e&15],LT=e=>Jf[(e&240)>>4]+Jf[e&15],oc=e=>(e&240)>>4===(e&15),RT=e=>oc(e.r)&&oc(e.g)&&oc(e.b)&&oc(e.a);function IT(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Jn[e[1]]*17,g:255&Jn[e[2]]*17,b:255&Jn[e[3]]*17,a:t===5?Jn[e[4]]*17:255}:(t===7||t===9)&&(n={r:Jn[e[1]]<<4|Jn[e[2]],g:Jn[e[3]]<<4|Jn[e[4]],b:Jn[e[5]]<<4|Jn[e[6]],a:t===9?Jn[e[7]]<<4|Jn[e[8]]:255})),n}const $T=(e,t)=>e<255?t(e):"";function zT(e){var t=RT(e)?AT:LT;return e?"#"+t(e.r)+t(e.g)+t(e.b)+$T(e.a,t):void 0}const HT=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dN(e,t,n){const r=t*Math.min(n,1-n),s=(i,o=(i+e/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function BT(e,t,n){const r=(s,i=(s+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function VT(e,t,n){const r=dN(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function UT(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}function kp(e){const n=e.r/255,r=e.g/255,s=e.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),l=(i+o)/2;let c,u,m;return i!==o&&(m=i-o,u=l>.5?m/(2-i-o):m/(i+o),c=UT(n,r,s,m,i),c=c*60+.5),[c|0,u||0,l]}function Sp(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Vs)}function Dp(e,t,n){return Sp(dN,e,t,n)}function WT(e,t,n){return Sp(VT,e,t,n)}function YT(e,t,n){return Sp(BT,e,t,n)}function mN(e){return(e%360+360)%360}function qT(e){const t=HT.exec(e);let n=255,r;if(!t)return;t[5]!==r&&(n=t[6]?wo(+t[5]):Vs(+t[5]));const s=mN(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?r=WT(s,i,o):t[1]==="hsv"?r=YT(s,i,o):r=Dp(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function KT(e,t){var n=kp(e);n[0]=mN(n[0]+t),n=Dp(n),e.r=n[0],e.g=n[1],e.b=n[2]}function GT(e){if(!e)return;const t=kp(e),n=t[0],r=a0(t[1]),s=a0(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${s}%, ${Zr(e.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const i0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},o0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function QT(){const e={},t=Object.keys(o0),n=Object.keys(i0);let r,s,i,o,l;for(r=0;r<t.length;r++){for(o=l=t[r],s=0;s<n.length;s++)i=n[s],l=l.replace(i,i0[i]);i=parseInt(o0[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let lc;function JT(e){lc||(lc=QT(),lc.transparent=[0,0,0,0]);const t=lc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const XT=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ZT(e){const t=XT.exec(e);let n=255,r,s,i;if(t){if(t[7]!==r){const o=+t[7];n=t[8]?wo(o):Ms(o*255,0,255)}return r=+t[1],s=+t[3],i=+t[5],r=255&(t[2]?wo(r):Ms(r,0,255)),s=255&(t[4]?wo(s):Ms(s,0,255)),i=255&(t[6]?wo(i):Ms(i,0,255)),{r,g:s,b:i,a:n}}}function e4(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Zr(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const jm=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Ua=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function t4(e,t,n){const r=Ua(Zr(e.r)),s=Ua(Zr(e.g)),i=Ua(Zr(e.b));return{r:Vs(jm(r+n*(Ua(Zr(t.r))-r))),g:Vs(jm(s+n*(Ua(Zr(t.g))-s))),b:Vs(jm(i+n*(Ua(Zr(t.b))-i))),a:e.a+n*(t.a-e.a)}}function cc(e,t,n){if(e){let r=kp(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,t===0?360:1)),r=Dp(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function fN(e,t){return e&&Object.assign(t||{},e)}function l0(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Vs(e[3]))):(t=fN(e,{r:0,g:0,b:0,a:1}),t.a=Vs(t.a)),t}function n4(e){return e.charAt(0)==="r"?ZT(e):qT(e)}class hl{constructor(t){if(t instanceof hl)return t;const n=typeof t;let r;n==="object"?r=l0(t):n==="string"&&(r=IT(t)||JT(t)||n4(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=fN(this._rgb);return t&&(t.a=Zr(t.a)),t}set rgb(t){this._rgb=l0(t)}rgbString(){return this._valid?e4(this._rgb):void 0}hexString(){return this._valid?zT(this._rgb):void 0}hslString(){return this._valid?GT(this._rgb):void 0}mix(t,n){if(t){const r=this.rgb,s=t.rgb;let i;const o=n===i?.5:n,l=2*o-1,c=r.a-s.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(t,n){return t&&(this._rgb=t4(this._rgb,t._rgb,n)),this}clone(){return new hl(this.rgb)}alpha(t){return this._rgb.a=Vs(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Fl(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return cc(this._rgb,2,t),this}darken(t){return cc(this._rgb,2,-t),this}saturate(t){return cc(this._rgb,1,t),this}desaturate(t){return cc(this._rgb,1,-t),this}rotate(t){return KT(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Kr(){}const r4=(()=>{let e=0;return()=>e++})();function Nt(e){return e==null}function Xt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function dt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function ur(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Pr(e,t){return ur(e)?e:t}function ot(e,t){return typeof e>"u"?t:e}const s4=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function _t(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function vt(e,t,n,r){let s,i,o;if(Xt(e))for(i=e.length,s=0;s<i;s++)t.call(n,e[s],s);else if(dt(e))for(o=Object.keys(e),i=o.length,s=0;s<i;s++)t.call(n,e[o[s]],o[s])}function Ru(e,t){let n,r,s,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],i=t[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Iu(e){if(Xt(e))return e.map(Iu);if(dt(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=Iu(e[n[s]]);return t}return e}function hN(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function a4(e,t,n,r){if(!hN(e))return;const s=t[e],i=n[e];dt(s)&&dt(i)?pl(s,i,r):t[e]=Iu(i)}function pl(e,t,n){const r=Xt(t)?t:[t],s=r.length;if(!dt(e))return e;n=n||{};const i=n.merger||a4;let o;for(let l=0;l<s;++l){if(o=r[l],!dt(o))continue;const c=Object.keys(o);for(let u=0,m=c.length;u<m;++u)i(c[u],e,o,n)}return e}function Ro(e,t){return pl(e,t,{merger:i4})}function i4(e,t,n){if(!hN(e))return;const r=t[e],s=n[e];dt(r)&&dt(s)?Ro(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Iu(s))}const c0={"":e=>e,x:e=>e.x,y:e=>e.y};function o4(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function l4(e){const t=o4(e);return n=>{for(const r of t){if(r==="")break;n=n&&n[r]}return n}}function $u(e,t){return(c0[t]||(c0[t]=l4(t)))(e)}function Cp(e){return e.charAt(0).toUpperCase()+e.slice(1)}const zu=e=>typeof e<"u",Ks=e=>typeof e=="function",u0=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function c4(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const en=Math.PI,Ur=2*en,u4=Ur+en,Hu=Number.POSITIVE_INFINITY,d4=en/180,xr=en/2,ea=en/4,d0=en*2/3,pN=Math.log10,Fi=Math.sign;function Io(e,t,n){return Math.abs(e-t)<n}function m0(e){const t=Math.round(e);e=Io(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(pN(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function m4(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(n|0)&&t.push(n),t.sort((s,i)=>s-i).pop(),t}function f4(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function gl(e){return!f4(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function h4(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function p4(e,t,n){let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function ga(e){return e*(en/180)}function g4(e){return e*(180/en)}function f0(e){if(!ur(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function x4(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*en&&(i+=Ur),{angle:i,distance:s}}function Xf(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function v4(e,t){return(e-t+u4)%Ur-en}function ws(e){return(e%Ur+Ur)%Ur}function gN(e,t,n,r){const s=ws(e),i=ws(t),o=ws(n),l=ws(i-s),c=ws(o-s),u=ws(s-i),m=ws(s-o);return s===i||s===o||r&&i===o||l>c&&u<m}function sr(e,t,n){return Math.max(t,Math.min(n,e))}function y4(e){return sr(e,-32768,32767)}function No(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function Pp(e,t,n){n=n||(o=>e[o]<t);let r=e.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const xa=(e,t,n,r)=>Pp(e,n,r?s=>{const i=e[s][t];return i<n||i===n&&e[s+1][t]===n}:s=>e[s][t]<n),b4=(e,t,n)=>Pp(e,n,r=>e[r][t]>=n);function w4(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}const xN=["push","pop","shift","splice","unshift"];function N4(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),xN.forEach(n=>{const r="_onData"+Cp(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...i)}),o}})})}function h0(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);s!==-1&&r.splice(s,1),!(r.length>0)&&(xN.forEach(i=>{delete e[i]}),delete e._chartjs)}function j4(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const vN=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function yN(e,t){let n=[],r=!1;return function(...s){n=s,r||(r=!0,vN.call(window,()=>{r=!1,e.apply(t,n)}))}}function _4(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const Ep=e=>e==="start"?"left":e==="end"?"right":"center",dn=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,k4=(e,t,n,r)=>e===(r?"left":"right")?n:e==="center"?(t+n)/2:t;function S4(e,t,n){const r=t.length;let s=0,i=r;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,m=o.axis,{min:h,max:f,minDefined:b,maxDefined:v}=o.getUserBounds();if(b){if(s=Math.min(xa(c,m,h).lo,n?r:xa(t,m,o.getPixelForValue(h)).lo),u){const D=c.slice(0,s+1).reverse().findIndex(p=>!Nt(p[l.axis]));s-=Math.max(0,D)}s=sr(s,0,r-1)}if(v){let D=Math.max(xa(c,o.axis,f,!0).hi+1,n?0:xa(t,m,o.getPixelForValue(f),!0).hi+1);if(u){const p=c.slice(D-1).findIndex(y=>!Nt(y[l.axis]));D+=Math.max(0,p)}i=sr(D,s,r)-s}else i=r-s}return{start:s,count:i}}function D4(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const uc=e=>e===0||e===1,p0=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ur/n)),g0=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ur/n)+1,$o={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*xr)+1,easeOutSine:e=>Math.sin(e*xr),easeInOutSine:e=>-.5*(Math.cos(en*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>uc(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>uc(e)?e:p0(e,.075,.3),easeOutElastic:e=>uc(e)?e:g0(e,.075,.3),easeInOutElastic(e){return uc(e)?e:e<.5?.5*p0(e*2,.1125,.45):.5+.5*g0(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-$o.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?$o.easeInBounce(e*2)*.5:$o.easeOutBounce(e*2-1)*.5+.5};function Mp(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function x0(e){return Mp(e)?e:new hl(e)}function _m(e){return Mp(e)?e:new hl(e).saturate(.5).darken(.1).hexString()}const C4=["x","y","borderWidth","radius","tension"],P4=["color","borderColor","backgroundColor"];function E4(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:P4},numbers:{type:"number",properties:C4}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function M4(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const v0=new Map;function T4(e,t){t=t||{};const n=e+JSON.stringify(t);let r=v0.get(n);return r||(r=new Intl.NumberFormat(e,t),v0.set(n,r)),r}function bN(e,t,n){return T4(t,n).format(e)}const O4={values(e){return Xt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const r=this.chart.options.locale;let s,i=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=F4(e,n)}const o=pN(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),bN(e,r,c)}};function F4(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var wN={formatters:O4};function A4(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:wN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Aa=Object.create(null),Zf=Object.create(null);function zo(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];e=e[i]||(e[i]=Object.create(null))}return e}function km(e,t,n){return typeof t=="string"?pl(zo(e,t),n):pl(zo(e,""),t)}class L4{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>_m(s.backgroundColor),this.hoverBorderColor=(r,s)=>_m(s.borderColor),this.hoverColor=(r,s)=>_m(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return km(this,t,n)}get(t){return zo(this,t)}describe(t,n){return km(Zf,t,n)}override(t,n){return km(Aa,t,n)}route(t,n,r,s){const i=zo(this,t),o=zo(this,r),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=o[s];return dt(c)?Object.assign({},u,c):ot(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var zt=new L4({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[E4,M4,A4]);function R4(e){return!e||Nt(e.size)||Nt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function y0(e,t,n,r,s){let i=t[s];return i||(i=t[s]=e.measureText(s).width,n.push(s)),i>r&&(r=i),r}function ta(e,t,n){const r=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function b0(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function eh(e,t,n,r){NN(e,t,n,r,null)}function NN(e,t,n,r,s){let i,o,l,c,u,m,h,f;const b=t.pointStyle,v=t.rotation,D=t.radius;let p=(v||0)*d4;if(b&&typeof b=="object"&&(i=b.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,r),e.rotate(p),e.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),e.restore();return}if(!(isNaN(D)||D<=0)){switch(e.beginPath(),b){default:s?e.ellipse(n,r,s/2,D,0,0,Ur):e.arc(n,r,D,0,Ur),e.closePath();break;case"triangle":m=s?s/2:D,e.moveTo(n+Math.sin(p)*m,r-Math.cos(p)*D),p+=d0,e.lineTo(n+Math.sin(p)*m,r-Math.cos(p)*D),p+=d0,e.lineTo(n+Math.sin(p)*m,r-Math.cos(p)*D),e.closePath();break;case"rectRounded":u=D*.516,c=D-u,o=Math.cos(p+ea)*c,h=Math.cos(p+ea)*(s?s/2-u:c),l=Math.sin(p+ea)*c,f=Math.sin(p+ea)*(s?s/2-u:c),e.arc(n-h,r-l,u,p-en,p-xr),e.arc(n+f,r-o,u,p-xr,p),e.arc(n+h,r+l,u,p,p+xr),e.arc(n-f,r+o,u,p+xr,p+en),e.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*D,m=s?s/2:c,e.rect(n-m,r-c,2*m,2*c);break}p+=ea;case"rectRot":h=Math.cos(p)*(s?s/2:D),o=Math.cos(p)*D,l=Math.sin(p)*D,f=Math.sin(p)*(s?s/2:D),e.moveTo(n-h,r-l),e.lineTo(n+f,r-o),e.lineTo(n+h,r+l),e.lineTo(n-f,r+o),e.closePath();break;case"crossRot":p+=ea;case"cross":h=Math.cos(p)*(s?s/2:D),o=Math.cos(p)*D,l=Math.sin(p)*D,f=Math.sin(p)*(s?s/2:D),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o);break;case"star":h=Math.cos(p)*(s?s/2:D),o=Math.cos(p)*D,l=Math.sin(p)*D,f=Math.sin(p)*(s?s/2:D),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o),p+=ea,h=Math.cos(p)*(s?s/2:D),o=Math.cos(p)*D,l=Math.sin(p)*D,f=Math.sin(p)*(s?s/2:D),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o);break;case"line":o=s?s/2:Math.cos(p)*D,l=Math.sin(p)*D,e.moveTo(n-o,r-l),e.lineTo(n+o,r+l);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(p)*(s?s/2:D),r+Math.sin(p)*D);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function xl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Tp(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Op(e){e.restore()}function I4(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else s==="after"!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function $4(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function z4(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Nt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function H4(e,t,n,r,s){if(s.strikethrough||s.underline){const i=e.measureText(r),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,m=s.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,m),e.lineTo(l,m),e.stroke()}}function B4(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function vl(e,t,n,r,s,i={}){const o=Xt(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(e.save(),e.font=s.string,z4(e,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&B4(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Nt(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,n,r,i.maxWidth)),e.fillText(u,n,r,i.maxWidth),H4(e,n,r,u,i),r+=Number(s.lineHeight);e.restore()}function th(e,t){const{x:n,y:r,w:s,h:i,radius:o}=t;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*en,en,!0),e.lineTo(n,r+i-o.bottomLeft),e.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,en,xr,!0),e.lineTo(n+s-o.bottomRight,r+i),e.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,xr,0,!0),e.lineTo(n+s,r+o.topRight),e.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-xr,!0),e.lineTo(n+o.topLeft,r)}const V4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,U4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function W4(e,t){const n=(""+e).match(V4);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Y4=e=>+e||0;function jN(e,t){const n={},r=dt(t),s=r?Object.keys(t):t,i=dt(e)?r?o=>ot(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of s)n[o]=Y4(i(o));return n}function q4(e){return jN(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Ho(e){return jN(e,["topLeft","topRight","bottomLeft","bottomRight"])}function dr(e){const t=q4(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function pn(e,t){e=e||{},t=t||zt.font;let n=ot(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let r=ot(e.style,t.style);r&&!(""+r).match(U4)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ot(e.family,t.family),lineHeight:W4(ot(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:ot(e.weight,t.weight),string:""};return s.string=R4(s),s}function dc(e,t,n,r){let s,i,o;for(s=0,i=e.length;s<i;++s)if(o=e[s],o!==void 0&&o!==void 0)return o}function K4(e,t,n){const{min:r,max:s}=e,i=s4(t,(s-r)/2),o=(l,c)=>n&&l===0?0:l+c;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function za(e,t){return Object.assign(Object.create(e),t)}function Fp(e,t=[""],n,r,s=()=>e[0]){const i=n||e;typeof r>"u"&&(r=DN("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:r,_getTarget:s,override:l=>Fp([l,...e],t,i,r)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return kN(l,c,()=>nO(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return N0(l).includes(c)},ownKeys(l){return N0(l)},set(l,c,u){const m=l._storage||(l._storage=s());return l[c]=m[c]=u,delete l._keys,!0}})}function Ai(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:_N(e,r),setContext:i=>Ai(e,i,n,r),override:i=>Ai(e.override(i),t,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return kN(i,o,()=>Q4(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function _N(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Ks(n)?n:()=>n,isIndexable:Ks(r)?r:()=>r}}const G4=(e,t)=>e?e+Cp(t):t,Ap=(e,t)=>dt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function kN(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const r=n();return e[t]=r,r}function Q4(e,t,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=e;let l=r[t];return Ks(l)&&o.isScriptable(t)&&(l=J4(t,l,e,n)),Xt(l)&&l.length&&(l=X4(t,l,e,o.isIndexable)),Ap(t,l)&&(l=Ai(l,s,i&&i[t],o)),l}function J4(e,t,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||r);return l.delete(e),Ap(e,c)&&(c=Lp(s._scopes,s,e,c)),c}function X4(e,t,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:l}=n;if(typeof i.index<"u"&&r(e))return t[i.index%t.length];if(dt(t[0])){const c=t,u=s._scopes.filter(m=>m!==c);t=[];for(const m of c){const h=Lp(u,s,e,m);t.push(Ai(h,i,o&&o[e],l))}}return t}function SN(e,t,n){return Ks(e)?e(t,n):e}const Z4=(e,t)=>e===!0?t:typeof e=="string"?$u(t,e):void 0;function eO(e,t,n,r,s){for(const i of t){const o=Z4(n,i);if(o){e.add(o);const l=SN(o._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Lp(e,t,n,r){const s=t._rootScopes,i=SN(t._fallback,n,r),o=[...e,...s],l=new Set;l.add(r);let c=w0(l,o,n,i||n,r);return c===null||typeof i<"u"&&i!==n&&(c=w0(l,o,i,c,r),c===null)?!1:Fp(Array.from(l),[""],s,i,()=>tO(t,n,r))}function w0(e,t,n,r,s){for(;n;)n=eO(e,t,n,r,s);return n}function tO(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];return Xt(s)&&dt(n)?n:s||{}}function nO(e,t,n,r){let s;for(const i of t)if(s=DN(G4(i,e),n),typeof s<"u")return Ap(e,s)?Lp(n,r,e,s):s}function DN(e,t){for(const n of t){if(!n)continue;const r=n[e];if(typeof r<"u")return r}}function N0(e){let t=e._keys;return t||(t=e._keys=rO(e._scopes)),t}function rO(e){const t=new Set;for(const n of e)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(r);return Array.from(t)}const sO=Number.EPSILON||1e-14,Li=(e,t)=>t<e.length&&!e[t].skip&&e[t],CN=e=>e==="x"?"y":"x";function aO(e,t,n,r){const s=e.skip?t:e,i=t,o=n.skip?t:n,l=Xf(i,s),c=Xf(o,i);let u=l/(l+c),m=c/(l+c);u=isNaN(u)?0:u,m=isNaN(m)?0:m;const h=r*u,f=r*m;return{previous:{x:i.x-h*(o.x-s.x),y:i.y-h*(o.y-s.y)},next:{x:i.x+f*(o.x-s.x),y:i.y+f*(o.y-s.y)}}}function iO(e,t,n){const r=e.length;let s,i,o,l,c,u=Li(e,0);for(let m=0;m<r-1;++m)if(c=u,u=Li(e,m+1),!(!c||!u)){if(Io(t[m],0,sO)){n[m]=n[m+1]=0;continue}s=n[m]/t[m],i=n[m+1]/t[m],l=Math.pow(s,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),n[m]=s*o*t[m],n[m+1]=i*o*t[m])}}function oO(e,t,n="x"){const r=CN(n),s=e.length;let i,o,l,c=Li(e,0);for(let u=0;u<s;++u){if(o=l,l=c,c=Li(e,u+1),!l)continue;const m=l[n],h=l[r];o&&(i=(m-o[n])/3,l[`cp1${n}`]=m-i,l[`cp1${r}`]=h-i*t[u]),c&&(i=(c[n]-m)/3,l[`cp2${n}`]=m+i,l[`cp2${r}`]=h+i*t[u])}}function lO(e,t="x"){const n=CN(t),r=e.length,s=Array(r).fill(0),i=Array(r);let o,l,c,u=Li(e,0);for(o=0;o<r;++o)if(l=c,c=u,u=Li(e,o+1),!!c){if(u){const m=u[t]-c[t];s[o]=m!==0?(u[n]-c[n])/m:0}i[o]=l?u?Fi(s[o-1])!==Fi(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}iO(e,s,i),oO(e,i,t)}function mc(e,t,n){return Math.max(Math.min(e,n),t)}function cO(e,t){let n,r,s,i,o,l=xl(e[0],t);for(n=0,r=e.length;n<r;++n)o=i,i=l,l=n<r-1&&xl(e[n+1],t),i&&(s=e[n],o&&(s.cp1x=mc(s.cp1x,t.left,t.right),s.cp1y=mc(s.cp1y,t.top,t.bottom)),l&&(s.cp2x=mc(s.cp2x,t.left,t.right),s.cp2y=mc(s.cp2y,t.top,t.bottom)))}function uO(e,t,n,r,s){let i,o,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")lO(e,s);else{let u=r?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=aO(u,l,e[Math.min(i+1,o-(r?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&cO(e,n)}function Rp(){return typeof window<"u"&&typeof document<"u"}function Ip(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Bu(e,t,n){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}const Td=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function dO(e,t){return Td(e).getPropertyValue(t)}const mO=["top","right","bottom","left"];function ka(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=mO[s];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const fO=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function hO(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:i}=r;let o=!1,l,c;if(fO(s,i,e.target))l=s,c=i;else{const u=t.getBoundingClientRect();l=r.clientX-u.left,c=r.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function ia(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=Td(n),i=s.boxSizing==="border-box",o=ka(s,"padding"),l=ka(s,"border","width"),{x:c,y:u,box:m}=hO(e,n),h=o.left+(m&&l.left),f=o.top+(m&&l.top);let{width:b,height:v}=t;return i&&(b-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-h)/b*n.width/r),y:Math.round((u-f)/v*n.height/r)}}function pO(e,t,n){let r,s;if(t===void 0||n===void 0){const i=e&&Ip(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const o=i.getBoundingClientRect(),l=Td(i),c=ka(l,"border","width"),u=ka(l,"padding");t=o.width-u.width-c.width,n=o.height-u.height-c.height,r=Bu(l.maxWidth,i,"clientWidth"),s=Bu(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:r||Hu,maxHeight:s||Hu}}const fc=e=>Math.round(e*10)/10;function gO(e,t,n,r){const s=Td(e),i=ka(s,"margin"),o=Bu(s.maxWidth,e,"clientWidth")||Hu,l=Bu(s.maxHeight,e,"clientHeight")||Hu,c=pO(e,t,n);let{width:u,height:m}=c;if(s.boxSizing==="content-box"){const f=ka(s,"border","width"),b=ka(s,"padding");u-=b.width+f.width,m-=b.height+f.height}return u=Math.max(0,u-i.width),m=Math.max(0,r?u/r:m-i.height),u=fc(Math.min(u,o,c.maxWidth)),m=fc(Math.min(m,l,c.maxHeight)),u&&!m&&(m=fc(u/2)),(t!==void 0||n!==void 0)&&r&&c.height&&m>c.height&&(m=c.height,u=fc(Math.floor(m*r))),{width:u,height:m}}function j0(e,t,n){const r=t||1,s=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(e.currentDevicePixelRatio=r,o.height=s,o.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}const xO=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Rp()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function _0(e,t){const n=dO(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function oa(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function vO(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:r==="middle"?n<.5?e.y:t.y:r==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function yO(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=oa(e,s,n),l=oa(s,i,n),c=oa(i,t,n),u=oa(o,l,n),m=oa(l,c,n);return oa(u,m,n)}const bO=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},wO=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function vi(e,t,n){return e?bO(t,n):wO()}function PN(e,t){let n,r;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function EN(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function MN(e){return e==="angle"?{between:gN,compare:v4,normalize:ws}:{between:No,compare:(t,n)=>t-n,normalize:t=>t}}function k0({start:e,end:t,count:n,loop:r,style:s}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n===0,style:s}}function NO(e,t,n){const{property:r,start:s,end:i}=n,{between:o,normalize:l}=MN(r),c=t.length;let{start:u,end:m,loop:h}=e,f,b;if(h){for(u+=c,m+=c,f=0,b=c;f<b&&o(l(t[u%c][r]),s,i);++f)u--,m--;u%=c,m%=c}return m<u&&(m+=c),{start:u,end:m,loop:h,style:e.style}}function jO(e,t,n){if(!n)return[e];const{property:r,start:s,end:i}=n,o=t.length,{compare:l,between:c,normalize:u}=MN(r),{start:m,end:h,loop:f,style:b}=NO(e,t,n),v=[];let D=!1,p=null,y,w,S;const j=()=>c(s,S,y)&&l(s,S)!==0,F=()=>l(i,y)===0||c(i,S,y),C=()=>D||j(),T=()=>!D||F();for(let P=m,V=m;P<=h;++P)w=t[P%o],!w.skip&&(y=u(w[r]),y!==S&&(D=c(y,s,i),p===null&&C()&&(p=l(y,s)===0?P:V),p!==null&&T()&&(v.push(k0({start:p,end:P,loop:f,count:o,style:b})),p=null),V=P,S=y));return p!==null&&v.push(k0({start:p,end:h,loop:f,count:o,style:b})),v}function _O(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const i=jO(r[s],e.points,t);i.length&&n.push(...i)}return n}function kO(e,t,n,r){let s=0,i=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(i+=s);i>s&&e[i%t].skip;)i--;return i%=t,{start:s,end:i}}function SO(e,t,n,r){const s=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=n;++c){const u=e[c%s];u.skip||u.stop?l.skip||(r=!1,i.push({start:t%s,end:(c-1)%s,loop:r}),t=o=u.stop?c:null):(o=c,l.skip&&(t=c)),l=u}return o!==null&&i.push({start:t%s,end:o%s,loop:r}),i}function DO(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const i=!!e._loop,{start:o,end:l}=kO(n,s,i,r);if(r===!0)return S0(e,[{start:o,end:l,loop:i}],n,t);const c=l<o?l+s:l,u=!!e._fullLoop&&o===0&&l===s-1;return S0(e,SO(n,o,c,u),n,t)}function S0(e,t,n,r){return!r||!r.setContext||!n?t:CO(e,t,n,r)}function CO(e,t,n,r){const s=e._chart.getContext(),i=D0(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=n.length,u=[];let m=i,h=t[0].start,f=h;function b(v,D,p,y){const w=l?-1:1;if(v!==D){for(v+=c;n[v%c].skip;)v-=w;for(;n[D%c].skip;)D+=w;v%c!==D%c&&(u.push({start:v%c,end:D%c,loop:p,style:y}),m=y,h=D%c)}}for(const v of t){h=l?h:v.start;let D=n[h%c],p;for(f=h+1;f<=v.end;f++){const y=n[f%c];p=D0(r.setContext(za(s,{type:"segment",p0:D,p1:y,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),PO(p,m)&&b(h,f-1,v.loop,m),D=y,m=p}h<f-1&&b(h,f-1,v.loop,m)}return u}function D0(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function PO(e,t){if(!t)return!1;const n=[],r=function(s,i){return Mp(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function hc(e,t,n){return e.options.clip?e[n]:t[n]}function EO(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:hc(n,t,"left"),right:hc(n,t,"right"),top:hc(r,t,"top"),bottom:hc(r,t,"bottom")}:t}function MO(e,t){const n=t._clip;if(n.disabled)return!1;const r=EO(t,e.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class TO{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=vN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(s.draw(),this._notify(s,r,t,"progress")),i.length||(r.running=!1,this._notify(s,r,t,"complete"),r.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let r=n.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,r)),r}listen(t,n,r){this._getAnims(t).listeners[n].push(r)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Gr=new TO;const C0="transparent",OO={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=x0(e||C0),s=r.valid&&x0(t||C0);return s&&s.valid?s.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class FO{constructor(t,n,r,s){const i=n[r];s=dc([t.to,s,i,t.from]);const o=dc([t.from,i,s]);this._active=!0,this._fn=t.fn||OO[t.type||typeof o],this._easing=$o[t.easing]||$o.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=dc([t.to,n,s,t.from]),this._from=dc([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||n<r),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=i;return}c=n/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,r)=>{t.push({res:n,rej:r})})}_notify(t){const n=t?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class TN{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!dt(t))return;const n=Object.keys(zt.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const i=t[s];if(!dt(i))return;const o={};for(const l of n)o[l]=i[l];(Xt(i.properties)&&i.properties||[s]).forEach(l=>{(l===s||!r.has(l))&&r.set(l,o)})})}_animateOptions(t,n){const r=n.options,s=LO(t,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&AO(t.options.$animations,r).then(()=>{t.options=r},()=>{}),i}_createAnimations(t,n){const r=this._properties,s=[],i=t.$animations||(t.$animations={}),o=Object.keys(n),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(t,n));continue}const m=n[u];let h=i[u];const f=r.get(u);if(h)if(f&&h.active()){h.update(f,m,l);continue}else h.cancel();if(!f||!f.duration){t[u]=m;continue}i[u]=h=new FO(f,t,u,m),s.push(h)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const r=this._createAnimations(t,n);if(r.length)return Gr.add(this._chart,r),!0}}function AO(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const i=e[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function LO(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function P0(e,t){const n=e&&e.options||{},r=n.reverse,s=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:r?i:s,end:r?s:i}}function RO(e,t,n){if(n===!1)return!1;const r=P0(e,n),s=P0(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function IO(e){let t,n,r,s;return dt(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:e===!1}}function ON(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function E0(e,t,n,r={}){const s=e.keys,i=r.mode==="single";let o,l,c,u;if(t===null)return;let m=!1;for(o=0,l=s.length;o<l;++o){if(c=+s[o],c===n){if(m=!0,r.all)continue;break}u=e.values[c],ur(u)&&(i||t===0||Fi(t)===Fi(u))&&(t+=u)}return!m&&!r.all?0:t}function $O(e,t){const{iScale:n,vScale:r}=t,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,u,m;for(c=0,u=o.length;c<u;++c)m=o[c],l[c]={[s]:m,[i]:e[m]};return l}function Sm(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function zO(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function HO(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function BO(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function M0(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const i=e[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function T0(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:l}=r,c=i.axis,u=o.axis,m=zO(i,o,r),h=t.length;let f;for(let b=0;b<h;++b){const v=t[b],{[c]:D,[u]:p}=v,y=v._stacks||(v._stacks={});f=y[u]=BO(s,m,D),f[l]=p,f._top=M0(f,o,!0,r.type),f._bottom=M0(f,o,!1,r.type);const w=f._visualValues||(f._visualValues={});w[l]=p}}function Dm(e,t){const n=e.scales;return Object.keys(n).filter(r=>n[r].axis===t).shift()}function VO(e,t){return za(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function UO(e,t,n){return za(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function io(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const s of t){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Cm=e=>e==="reset"||e==="none",O0=(e,t)=>t?e:Object.assign({},e),WO=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:ON(n,!0),values:null};class Bo{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Sm(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&io(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,f,b,v)=>h==="x"?f:h==="r"?v:b,i=n.xAxisID=ot(r.xAxisID,Dm(t,"x")),o=n.yAxisID=ot(r.yAxisID,Dm(t,"y")),l=n.rAxisID=ot(r.rAxisID,Dm(t,"r")),c=n.indexAxis,u=n.iAxisID=s(c,i,o,l),m=n.vAxisID=s(c,o,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&h0(this._data,this),t._stacked&&io(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(dt(n)){const s=this._cachedMeta;this._data=$O(n,s)}else if(r!==n){if(r){h0(r,this);const s=this._cachedMeta;io(s),s._parsed=[]}n&&Object.isExtensible(n)&&N4(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Sm(n.vScale,n),n.stack!==r.stack&&(s=!0,io(n),n.stack=r.stack),this._resyncElements(t),(s||i!==n._stacked)&&(T0(this,n._parsed),n._stacked=Sm(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,l=i.axis;let c=t===0&&n===s.length?!0:r._sorted,u=t>0&&r._parsed[t-1],m,h,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{Xt(s[t])?f=this.parseArrayData(r,s,t,n):dt(s[t])?f=this.parseObjectData(r,s,t,n):f=this.parsePrimitiveData(r,s,t,n);const b=()=>h[l]===null||u&&h[l]<u[l];for(m=0;m<n;++m)r._parsed[m+t]=h=f[m],c&&(b()&&(c=!1),u=h);r._sorted=c}o&&T0(this,f)}parsePrimitiveData(t,n,r,s){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,u=i.getLabels(),m=i===o,h=new Array(s);let f,b,v;for(f=0,b=s;f<b;++f)v=f+r,h[f]={[l]:m||i.parse(u[v],v),[c]:o.parse(n[v],v)};return h}parseArrayData(t,n,r,s){const{xScale:i,yScale:o}=t,l=new Array(s);let c,u,m,h;for(c=0,u=s;c<u;++c)m=c+r,h=n[m],l[c]={x:i.parse(h[0],m),y:o.parse(h[1],m)};return l}parseObjectData(t,n,r,s){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let m,h,f,b;for(m=0,h=s;m<h;++m)f=m+r,b=n[f],u[m]={x:i.parse($u(b,l),f),y:o.parse($u(b,c),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const s=this.chart,i=this._cachedMeta,o=n[t.axis],l={keys:ON(s,!0),values:n._stacks[t.axis]._visualValues};return E0(l,o,i.index,{mode:r})}updateRangeFromParsed(t,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const l=s&&r._stacks[n.axis];s&&l&&(s.values=l,o=E0(s,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&t===r.iScale,o=s.length,l=this._getOtherScale(t),c=WO(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:h}=HO(l);let f,b;function v(){b=s[f];const D=b[l.axis];return!ur(b[t.axis])||m>D||h<D}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(u,t,b,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(u,t,b,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][t.axis],ur(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(t);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=IO(ot(this.options.clip,RO(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let m;for(r.dataset&&r.dataset.draw(t,i,l,c),m=l;m<l+c;++m){const h=s[m];h.hidden||(h.active&&u?o.push(h):h.draw(t,i))}for(m=0;m<o.length;++m)o[m].draw(t,i)}getStyle(t,n){const r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const s=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=UO(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=s.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=VO(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=t+"-"+n,l=i[o],c=this.enableOptionSharing&&zu(r);if(l)return O0(l,c);const u=this.chart.config,m=u.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),m),b=Object.keys(zt.elements[t]),v=()=>this.getContext(r,s,n),D=u.resolveNamedOptions(f,b,v,h);return D.$shared&&(D.$shared=c,i[o]=Object.freeze(O0(D,c))),D}_resolveAnimations(t,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,l=i[o];if(l)return l;let c;if(s.options.animation!==!1){const m=this.chart.config,h=m.datasetAnimationScopeKeys(this._type,n),f=m.getOptionScopes(this.getDataset(),h);c=m.createResolver(f,this.getContext(t,r,n))}const u=new TN(s,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Cm(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const r=this.resolveDataElementOptions(t,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(t,n,r,s){Cm(s)?Object.assign(t,r):this._resolveAnimations(n,s).update(t,r)}updateSharedOptions(t,n,r){t&&!Cm(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,s){t.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(t,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,t):i<s&&this._removeElements(i,s-i)}_insertElements(t,n,r=!0){const s=this._cachedMeta,i=s.data,o=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=o;l--)u[l]=u[l-n]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,n),r&&this.updateElements(i,t,n,"reset")}updateElements(t,n,r,s){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(t,n);r._stacked&&io(r,s)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,s]=t;this[n](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ke(Bo,"defaults",{}),ke(Bo,"datasetElementType",null),ke(Bo,"dataElementType",null);class Vc extends Bo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:l,count:c}=S4(n,s,o);this._drawStart=l,this._drawCount=c,D4(n)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},t),this.updateElements(s,l,c,t)}updateElements(t,n,r,s){const i=s==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:m,includeOptions:h}=this._getSharedOptions(n,s),f=o.axis,b=l.axis,{spanGaps:v,segment:D}=this.options,p=gl(v)?v:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||s==="none",w=n+r,S=t.length;let j=n>0&&this.getParsed(n-1);for(let F=0;F<S;++F){const C=t[F],T=y?C:{};if(F<n||F>=w){T.skip=!0;continue}const P=this.getParsed(F),V=Nt(P[b]),Q=T[f]=o.getPixelForValue(P[f],F),ee=T[b]=i||V?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,P,c):P[b],F);T.skip=isNaN(Q)||isNaN(ee)||V,T.stop=F>0&&Math.abs(P[f]-j[f])>p,D&&(T.parsed=P,T.raw=u.data[F]),h&&(T.options=m||this.resolveDataElementOptions(F,C.active?"active":s)),y||this.updateElement(C,F,T,s),j=P}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ke(Vc,"id","line"),ke(Vc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ke(Vc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function na(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $p{constructor(t){ke(this,"options");this.options=t||{}}static override(t){Object.assign($p.prototype,t)}init(){}formats(){return na()}parse(){return na()}format(){return na()}add(){return na()}diff(){return na()}startOf(){return na()}endOf(){return na()}}var YO={_date:$p};function qO(e,t,n,r){const{controller:s,data:i,_sorted:o}=e,l=s._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const u=l._reversePixels?b4:xa;if(r){if(s._sharedOptions){const m=i[0],h=typeof m.getRange=="function"&&m.getRange(t);if(h){const f=u(i,t,n-h),b=u(i,t,n+h);return{lo:f.lo,hi:b.hi}}}}else{const m=u(i,t,n);if(c){const{vScale:h}=s._cachedMeta,{_parsed:f}=e,b=f.slice(0,m.lo+1).reverse().findIndex(D=>!Nt(D[h.axis]));m.lo-=Math.max(0,b);const v=f.slice(m.hi).findIndex(D=>!Nt(D[h.axis]));m.hi+=Math.max(0,v)}return m}}return{lo:0,hi:i.length-1}}function Od(e,t,n,r,s){const i=e.getSortedVisibleDatasetMetas(),o=n[t];for(let l=0,c=i.length;l<c;++l){const{index:u,data:m}=i[l],{lo:h,hi:f}=qO(i[l],t,o,s);for(let b=h;b<=f;++b){const v=m[b];v.skip||r(v,u,b)}}}function KO(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(r,s){const i=t?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Pm(e,t,n,r,s){const i=[];return!s&&!e.isPointInArea(t)||Od(e,n,t,function(l,c,u){!s&&!xl(l,e.chartArea,0)||l.inRange(t.x,t.y,r)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function GO(e,t,n,r){let s=[];function i(o,l,c){const{startAngle:u,endAngle:m}=o.getProps(["startAngle","endAngle"],r),{angle:h}=x4(o,{x:t.x,y:t.y});gN(h,u,m)&&s.push({element:o,datasetIndex:l,index:c})}return Od(e,n,t,i),s}function QO(e,t,n,r,s,i){let o=[];const l=KO(n);let c=Number.POSITIVE_INFINITY;function u(m,h,f){const b=m.inRange(t.x,t.y,s);if(r&&!b)return;const v=m.getCenterPoint(s);if(!(!!i||e.isPointInArea(v))&&!b)return;const p=l(t,v);p<c?(o=[{element:m,datasetIndex:h,index:f}],c=p):p===c&&o.push({element:m,datasetIndex:h,index:f})}return Od(e,n,t,u),o}function Em(e,t,n,r,s,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!r?GO(e,t,n,s):QO(e,t,n,r,s,i)}function F0(e,t,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return Od(e,n,t,(c,u,m)=>{c[o]&&c[o](t[n],s)&&(i.push({element:c,datasetIndex:u,index:m}),l=l||c.inRange(t.x,t.y,s))}),r&&!l?[]:i}var JO={modes:{index(e,t,n,r){const s=ia(t,e),i=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?Pm(e,s,i,r,o):Em(e,s,i,!1,r,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const m=l[0].index,h=u.data[m];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:m})}),c):[]},dataset(e,t,n,r){const s=ia(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?Pm(e,s,i,r,o):Em(e,s,i,!1,r,o);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let m=0;m<u.length;++m)l.push({element:u[m],datasetIndex:c,index:m})}return l},point(e,t,n,r){const s=ia(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return Pm(e,s,i,r,o)},nearest(e,t,n,r){const s=ia(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return Em(e,s,i,n.intersect,r,o)},x(e,t,n,r){const s=ia(t,e);return F0(e,s,"x",n.intersect,r)},y(e,t,n,r){const s=ia(t,e);return F0(e,s,"y",n.intersect,r)}}};const FN=["left","top","right","bottom"];function oo(e,t){return e.filter(n=>n.pos===t)}function A0(e,t){return e.filter(n=>FN.indexOf(n.pos)===-1&&n.box.axis===t)}function lo(e,t){return e.sort((n,r)=>{const s=t?r:n,i=t?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function XO(e){const t=[];let n,r,s,i,o,l;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],{position:i,options:{stack:o,stackWeight:l=1}}=s,t.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:l});return t}function ZO(e){const t={};for(const n of e){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!FN.includes(s))continue;const o=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function eF(e,t){const n=ZO(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,u=n[l.stack],m=u&&l.stackWeight/u.weight;l.horizontal?(l.width=m?m*r:c&&t.availableWidth,l.height=s):(l.width=r,l.height=m?m*s:c&&t.availableHeight)}return n}function tF(e){const t=XO(e),n=lo(t.filter(u=>u.box.fullSize),!0),r=lo(oo(t,"left"),!0),s=lo(oo(t,"right")),i=lo(oo(t,"top"),!0),o=lo(oo(t,"bottom")),l=A0(t,"x"),c=A0(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(c).concat(o).concat(l),chartArea:oo(t,"chartArea"),vertical:r.concat(s).concat(c),horizontal:i.concat(o).concat(l)}}function L0(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function AN(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function nF(e,t,n,r){const{pos:s,box:i}=n,o=e.maxPadding;if(!dt(s)){n.size&&(e[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[s]+=n.size}i.getPadding&&AN(o,i.getPadding());const l=Math.max(0,t.outerWidth-L0(o,e,"left","right")),c=Math.max(0,t.outerHeight-L0(o,e,"top","bottom")),u=l!==e.w,m=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:m}:{same:m,other:u}}function rF(e){const t=e.maxPadding;function n(r){const s=Math.max(t[r]-e[r],0);return e[r]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function sF(e,t){const n=t.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(t[o],n[o])}),i}return r(e?["left","right"]:["top","bottom"])}function jo(e,t,n,r){const s=[];let i,o,l,c,u,m;for(i=0,o=e.length,u=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,sF(l.horizontal,t));const{same:h,other:f}=nF(t,n,l,r);u|=h&&s.length,m=m||f,c.fullSize||s.push(l)}return u&&jo(s,t,n,r)||m}function pc(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function R0(e,t,n,r){const s=n.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,u=r[l.stack]||{placed:0,weight:1},m=l.stackWeight/u.weight||1;if(l.horizontal){const h=t.w*m,f=u.size||c.height;zu(u.start)&&(o=u.start),c.fullSize?pc(c,s.left,o,n.outerWidth-s.right-s.left,f):pc(c,t.left+u.placed,o,h,f),u.start=o,u.placed+=h,o=c.bottom}else{const h=t.h*m,f=u.size||c.width;zu(u.start)&&(i=u.start),c.fullSize?pc(c,i,s.top,f,n.outerHeight-s.bottom-s.top):pc(c,i,t.top+u.placed,f,h),u.start=i,u.placed+=h,i=c.right}}t.x=i,t.y=o}var ar={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=dr(e.options.layout.padding),i=Math.max(t-s.width,0),o=Math.max(n-s.height,0),l=tF(e.boxes),c=l.vertical,u=l.horizontal;vt(e.boxes,D=>{typeof D.beforeLayout=="function"&&D.beforeLayout()});const m=c.reduce((D,p)=>p.box.options&&p.box.options.display===!1?D:D+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/m,hBoxMaxHeight:o/2}),f=Object.assign({},s);AN(f,dr(r));const b=Object.assign({maxPadding:f,w:i,h:o,x:s.left,y:s.top},s),v=eF(c.concat(u),h);jo(l.fullSize,b,h,v),jo(c,b,h,v),jo(u,b,h,v)&&jo(c,b,h,v),rF(b),R0(l.leftAndTop,b,h,v),b.x+=b.w,b.y+=b.h,R0(l.rightAndBottom,b,h,v),e.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},vt(l.chartArea,D=>{const p=D.box;Object.assign(p,e.chartArea),p.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class LN{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,r){}removeEventListener(t,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,r,s){return n=Math.max(0,n||t.width),r=r||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(t){return!0}updateConfig(t){}}class aF extends LN{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Uc="$chartjs",iF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},I0=e=>e===null||e==="";function oF(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[Uc]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",I0(s)){const i=_0(e,"width");i!==void 0&&(e.width=i)}if(I0(r))if(e.style.height==="")e.height=e.width/(t||2);else{const i=_0(e,"height");i!==void 0&&(e.height=i)}return e}const RN=xO?{passive:!0}:!1;function lF(e,t,n){e&&e.addEventListener(t,n,RN)}function cF(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,RN)}function uF(e,t){const n=iF[e.type]||e.type,{x:r,y:s}=ia(e,t);return{type:n,chart:t,native:e,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Vu(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function dF(e,t,n){const r=e.canvas,s=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Vu(l.addedNodes,r),o=o&&!Vu(l.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function mF(e,t,n){const r=e.canvas,s=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Vu(l.removedNodes,r),o=o&&!Vu(l.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const yl=new Map;let $0=0;function IN(){const e=window.devicePixelRatio;e!==$0&&($0=e,yl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function fF(e,t){yl.size||window.addEventListener("resize",IN),yl.set(e,t)}function hF(e){yl.delete(e),yl.size||window.removeEventListener("resize",IN)}function pF(e,t,n){const r=e.canvas,s=r&&Ip(r);if(!s)return;const i=yN((l,c)=>{const u=s.clientWidth;n(l,c),u<s.clientWidth&&n()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,m=c.contentRect.height;u===0&&m===0||i(u,m)});return o.observe(s),fF(e,i),o}function Mm(e,t,n){n&&n.disconnect(),t==="resize"&&hF(e)}function gF(e,t,n){const r=e.canvas,s=yN(i=>{e.ctx!==null&&n(uF(i,e))},e);return lF(r,t,s),s}class xF extends LN{acquireContext(t,n){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(oF(t,n),r):null}releaseContext(t){const n=t.canvas;if(!n[Uc])return!1;const r=n[Uc].initial;["height","width"].forEach(i=>{const o=r[i];Nt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Uc],!0}addEventListener(t,n,r){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),o={attach:dF,detach:mF,resize:pF}[n]||gF;s[n]=o(t,n,r)}removeEventListener(t,n){const r=t.$proxies||(t.$proxies={}),s=r[n];if(!s)return;({attach:Mm,detach:Mm,resize:Mm}[n]||cF)(t,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,r,s){return gO(t,n,r,s)}isAttached(t){const n=t&&Ip(t);return!!(n&&n.isConnected)}}function vF(e){return!Rp()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?aF:xF}var Nc;let Ha=(Nc=class{constructor(){ke(this,"x");ke(this,"y");ke(this,"active",!1);ke(this,"options");ke(this,"$animations")}tooltipPosition(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}hasValue(){return gl(this.x)&&gl(this.y)}getProps(t,n){const r=this.$animations;if(!n||!r)return this;const s={};return t.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},ke(Nc,"defaults",{}),ke(Nc,"defaultRoutes"),Nc);function yF(e,t){const n=e.options.ticks,r=bF(e),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?NF(t):[],o=i.length,l=i[0],c=i[o-1],u=[];if(o>s)return jF(t,u,i,o/s),u;const m=wF(i,t,s);if(o>0){let h,f;const b=o>1?Math.round((c-l)/(o-1)):null;for(gc(t,u,m,Nt(b)?0:l-b,l),h=0,f=o-1;h<f;h++)gc(t,u,m,i[h],i[h+1]);return gc(t,u,m,c,Nt(b)?t.length:c+b),u}return gc(t,u,m),u}function bF(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}function wF(e,t,n){const r=_F(e),s=t.length/n;if(!r)return Math.max(s,1);const i=m4(r);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>s)return c}return Math.max(s,1)}function NF(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function jF(e,t,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<e.length;o++)o===i&&(t.push(e[o]),s++,i=n[s*r])}function gc(e,t,n,r,s){const i=ot(r,0),o=Math.min(ot(s,e.length),e.length);let l=0,c,u,m;for(n=Math.ceil(n),s&&(c=s-r,n=c/Math.floor(c/n)),m=i;m<0;)l++,m=Math.round(i+l*n);for(u=Math.max(i,0);u<o;u++)u===m&&(t.push(e[u]),l++,m=Math.round(i+l*n))}function _F(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}const kF=e=>e==="left"?"right":e==="right"?"left":e,z0=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,H0=(e,t)=>Math.min(t||e,e);function B0(e,t){const n=[],r=e.length/t,s=e.length;let i=0;for(;i<s;i+=r)n.push(e[Math.floor(i)]);return n}function SF(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(c-i,o-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(s-1))/2,c+=s<t?u:-u,c<i-l||c>o+l)))return c}function DF(e,t){vt(e,n=>{const r=n.gc,s=r.length/2;let i;if(s>t){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function co(e){return e.drawTicks?e.tickLength:0}function V0(e,t){if(!e.display)return 0;const n=pn(e.font,t),r=dr(e.padding);return(Xt(e.text)?e.text.length:1)*n.lineHeight+r.height}function CF(e,t){return za(e,{scale:t,type:"scale"})}function PF(e,t,n){return za(e,{tick:n,index:t,type:"tick"})}function EF(e,t,n){let r=Ep(e);return(n&&t!=="right"||!n&&t==="right")&&(r=kF(r)),r}function MF(e,t,n,r){const{top:s,left:i,bottom:o,right:l,chart:c}=e,{chartArea:u,scales:m}=c;let h=0,f,b,v;const D=o-s,p=l-i;if(e.isHorizontal()){if(b=dn(r,i,l),dt(n)){const y=Object.keys(n)[0],w=n[y];v=m[y].getPixelForValue(w)+D-t}else n==="center"?v=(u.bottom+u.top)/2+D-t:v=z0(e,n,t);f=l-i}else{if(dt(n)){const y=Object.keys(n)[0],w=n[y];b=m[y].getPixelForValue(w)-p+t}else n==="center"?b=(u.left+u.right)/2-p+t:b=z0(e,n,t);v=dn(r,o,s),h=n==="left"?-xr:xr}return{titleX:b,titleY:v,maxWidth:f,rotation:h}}class Yi extends Ha{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return t=Pr(t,Number.POSITIVE_INFINITY),n=Pr(n,Number.NEGATIVE_INFINITY),r=Pr(r,Number.POSITIVE_INFINITY),s=Pr(s,Number.NEGATIVE_INFINITY),{min:Pr(t,r),max:Pr(n,s),minDefined:ur(t),maxDefined:ur(n)}}getMinMax(t){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,t),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Pr(n,Pr(r,n)),max:Pr(r,Pr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_t(this.options.beforeUpdate,[this])}update(t,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=K4(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?B0(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=yF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,t=!t),this._startPixel=n,this._endPixel=r,this._reversePixels=t,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_t(this.options.afterUpdate,[this])}beforeSetDimensions(){_t(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_t(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),_t(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_t(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r],i.label=_t(n.callback,[i.value,r,t],this)}afterTickToLabelConversion(){_t(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_t(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,r=H0(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,l,c,u;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const m=this._getLabelSizes(),h=m.widest.width,f=m.highest.height,b=sr(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/r:b/(r-1),h+6>l&&(l=b/(r-(t.offset?.5:1)),c=this.maxHeight-co(t.grid)-n.padding-V0(t.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),o=g4(Math.min(Math.asin(sr((m.highest.height+6)/l,-1,1)),Math.asin(sr(c/u,-1,1))-Math.asin(sr(f/u,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){_t(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_t(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=V0(s,n.options.font);if(l?(t.width=this.maxWidth,t.height=co(i)+c):(t.height=this.maxHeight,t.width=co(i)+c),r.display&&this.ticks.length){const{first:u,last:m,widest:h,highest:f}=this._getLabelSizes(),b=r.padding*2,v=ga(this.labelRotation),D=Math.cos(v),p=Math.sin(v);if(l){const y=r.mirror?0:p*h.width+D*f.height;t.height=Math.min(this.maxHeight,t.height+y+b)}else{const y=r.mirror?0:D*h.width+p*f.height;t.width=Math.min(this.maxWidth,t.width+y+b)}this._calculatePadding(u,m,p,D)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,r,s){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,b=0;c?u?(f=s*t.width,b=r*n.height):(f=r*t.height,b=s*n.width):i==="start"?b=n.width:i==="end"?f=t.width:i!=="inner"&&(f=t.width/2,b=n.width/2),this.paddingLeft=Math.max((f-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((b-h+o)*this.width/(this.width-h),0)}else{let m=n.height/2,h=t.height/2;i==="start"?(m=0,h=t.height):i==="end"&&(m=n.height,h=0),this.paddingTop=m+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_t(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,r;for(n=0,r=t.length;n<r;n++)Nt(t[n].label)&&(t.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=B0(r,n)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(n/H0(n,r));let u=0,m=0,h,f,b,v,D,p,y,w,S,j,F;for(h=0;h<n;h+=c){if(v=t[h].label,D=this._resolveTickFontOptions(h),s.font=p=D.string,y=i[p]=i[p]||{data:{},gc:[]},w=D.lineHeight,S=j=0,!Nt(v)&&!Xt(v))S=y0(s,y.data,y.gc,S,v),j=w;else if(Xt(v))for(f=0,b=v.length;f<b;++f)F=v[f],!Nt(F)&&!Xt(F)&&(S=y0(s,y.data,y.gc,S,F),j+=w);o.push(S),l.push(j),u=Math.max(S,u),m=Math.max(j,m)}DF(i,n);const C=o.indexOf(u),T=l.indexOf(m),P=V=>({width:o[V]||0,height:l[V]||0});return{first:P(0),last:P(n-1),widest:P(C),highest:P(T),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return y4(this._alignToPixels?ta(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const r=n[t];return r.$context||(r.$context=PF(this.getContext(),t,r))}return this.$context||(this.$context=CF(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=ga(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*r>l*s?l/r:c/s:c*s<l*r?c/r:l/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:l}=s,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=co(i),b=[],v=l.setContext(this.getContext()),D=v.display?v.width:0,p=D/2,y=function($){return ta(r,$,D)};let w,S,j,F,C,T,P,V,Q,ee,ce,fe;if(o==="top")w=y(this.bottom),T=this.bottom-f,V=w-p,ee=y(t.top)+p,fe=t.bottom;else if(o==="bottom")w=y(this.top),ee=t.top,fe=y(t.bottom)-p,T=w+p,V=this.top+f;else if(o==="left")w=y(this.right),C=this.right-f,P=w-p,Q=y(t.left)+p,ce=t.right;else if(o==="right")w=y(this.left),Q=t.left,ce=y(t.right)-p,C=w+p,P=this.left+f;else if(n==="x"){if(o==="center")w=y((t.top+t.bottom)/2+.5);else if(dt(o)){const $=Object.keys(o)[0],H=o[$];w=y(this.chart.scales[$].getPixelForValue(H))}ee=t.top,fe=t.bottom,T=w+p,V=T+f}else if(n==="y"){if(o==="center")w=y((t.left+t.right)/2);else if(dt(o)){const $=Object.keys(o)[0],H=o[$];w=y(this.chart.scales[$].getPixelForValue(H))}C=w-p,P=C-f,Q=t.left,ce=t.right}const G=ot(s.ticks.maxTicksLimit,h),re=Math.max(1,Math.ceil(h/G));for(S=0;S<h;S+=re){const $=this.getContext(S),H=i.setContext($),Y=l.setContext($),X=H.lineWidth,J=H.color,he=Y.dash||[],Se=Y.dashOffset,se=H.tickWidth,I=H.tickColor,q=H.tickBorderDash||[],_=H.tickBorderDashOffset;j=SF(this,S,c),j!==void 0&&(F=ta(r,j,X),u?C=P=Q=ce=F:T=V=ee=fe=F,b.push({tx1:C,ty1:T,tx2:P,ty2:V,x1:Q,y1:ee,x2:ce,y2:fe,width:X,color:J,borderDash:he,borderDashOffset:Se,tickWidth:se,tickColor:I,tickBorderDash:q,tickBorderDashOffset:_}))}return this._ticksLength=h,this._borderValue=w,b}_computeLabelItems(t){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:m,mirror:h}=i,f=co(r.grid),b=f+m,v=h?-m:b,D=-ga(this.labelRotation),p=[];let y,w,S,j,F,C,T,P,V,Q,ee,ce,fe="middle";if(s==="top")C=this.bottom-v,T=this._getXAxisLabelAlignment();else if(s==="bottom")C=this.top+v,T=this._getXAxisLabelAlignment();else if(s==="left"){const re=this._getYAxisLabelAlignment(f);T=re.textAlign,F=re.x}else if(s==="right"){const re=this._getYAxisLabelAlignment(f);T=re.textAlign,F=re.x}else if(n==="x"){if(s==="center")C=(t.top+t.bottom)/2+b;else if(dt(s)){const re=Object.keys(s)[0],$=s[re];C=this.chart.scales[re].getPixelForValue($)+b}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")F=(t.left+t.right)/2-b;else if(dt(s)){const re=Object.keys(s)[0],$=s[re];F=this.chart.scales[re].getPixelForValue($)}T=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(c==="start"?fe="top":c==="end"&&(fe="bottom"));const G=this._getLabelSizes();for(y=0,w=l.length;y<w;++y){S=l[y],j=S.label;const re=i.setContext(this.getContext(y));P=this.getPixelForTick(y)+i.labelOffset,V=this._resolveTickFontOptions(y),Q=V.lineHeight,ee=Xt(j)?j.length:1;const $=ee/2,H=re.color,Y=re.textStrokeColor,X=re.textStrokeWidth;let J=T;o?(F=P,T==="inner"&&(y===w-1?J=this.options.reverse?"left":"right":y===0?J=this.options.reverse?"right":"left":J="center"),s==="top"?u==="near"||D!==0?ce=-ee*Q+Q/2:u==="center"?ce=-G.highest.height/2-$*Q+Q:ce=-G.highest.height+Q/2:u==="near"||D!==0?ce=Q/2:u==="center"?ce=G.highest.height/2-$*Q:ce=G.highest.height-ee*Q,h&&(ce*=-1),D!==0&&!re.showLabelBackdrop&&(F+=Q/2*Math.sin(D))):(C=P,ce=(1-ee)*Q/2);let he;if(re.showLabelBackdrop){const Se=dr(re.backdropPadding),se=G.heights[y],I=G.widths[y];let q=ce-Se.top,_=0-Se.left;switch(fe){case"middle":q-=se/2;break;case"bottom":q-=se;break}switch(T){case"center":_-=I/2;break;case"right":_-=I;break;case"inner":y===w-1?_-=I:y>0&&(_-=I/2);break}he={left:_,top:q,width:I+Se.width,height:se+Se.height,color:re.backdropColor}}p.push({label:j,font:V,textOffset:ce,options:{rotation:D,color:H,strokeColor:Y,strokeWidth:X,textAlign:J,textBaseline:fe,translation:[F,C],backdrop:he}})}return p}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-ga(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let u,m;return n==="left"?s?(m=this.right+i,r==="near"?u="left":r==="center"?(u="center",m+=c/2):(u="right",m+=c)):(m=this.right-l,r==="near"?u="right":r==="center"?(u="center",m-=c/2):(u="left",m=this.left)):n==="right"?s?(m=this.left+i,r==="near"?u="right":r==="center"?(u="center",m-=c/2):(u="left",m-=c)):(m=this.left+l,r==="near"?u="left":r==="center"?(u="center",m+=c/2):(u="right",m=this.right)):u="right",{textAlign:u,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(r,s,i,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,u,m)=>{!m.width||!m.color||(r.save(),r.lineWidth=m.width,r.strokeStyle=m.color,r.setLineDash(m.borderDash||[]),r.lineDashOffset=m.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const c=s[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,m,h,f;this.isHorizontal()?(u=ta(t,this.left,o)-o/2,m=ta(t,this.right,l)+l/2,h=f=c):(h=ta(t,this.top,o)-o/2,f=ta(t,this.bottom,l)+l/2,u=m=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(m,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Tp(r,s);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,u=o.label,m=o.textOffset;vl(r,u,0,m,c,l)}s&&Op(r)}drawTitle(){const{ctx:t,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=pn(r.font),o=dr(r.padding),l=r.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||dt(n)?(c+=o.bottom,Xt(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:u,titleY:m,maxWidth:h,rotation:f}=MF(this,c,n,l);vl(t,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:f,textAlign:EF(l,n,s),textBaseline:"middle",translation:[u,m]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,r=ot(t.grid&&t.grid.z,-1),s=ot(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Yi.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const l=n[i];l[r]===this.id&&(!t||l.type===t)&&s.push(l)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return pn(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class xc{constructor(t,n,r){this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let r;FF(n)&&(r=this.register(n));const s=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in s||(s[i]=t,TF(t,o,r),this.override&&zt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,r=t.id,s=this.scope;r in n&&delete n[r],s&&r in zt[s]&&(delete zt[s][r],this.override&&delete Aa[r])}}function TF(e,t,n){const r=pl(Object.create(null),[n?zt.get(n):{},zt.get(t),e.defaults]);zt.set(t,r),e.defaultRoutes&&OF(t,e.defaultRoutes),e.descriptors&&zt.describe(t,e.descriptors)}function OF(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),i=[e].concat(r).join("."),o=t[n].split("."),l=o.pop(),c=o.join(".");zt.route(i,s,c,l)})}function FF(e){return"id"in e&&"defaults"in e}class AF{constructor(){this.controllers=new xc(Bo,"datasets",!0),this.elements=new xc(Ha,"elements"),this.plugins=new xc(Object,"plugins"),this.scales=new xc(Yi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(t,i,s):vt(s,o=>{const l=r||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,n,r){const s=Cp(t);_t(r["before"+s],[],r),n[t](r),_t(r["after"+s],[],r)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(t))return r}return this.plugins}_get(t,n,r){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return s}}var Tr=new AF;class LF{constructor(){this._init=[]}notify(t,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(i,t,n,r);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,r,s){s=s||{};for(const i of t){const o=i.plugin,l=o[r],c=[n,s,i.options];if(_t(l,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Nt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const r=t&&t.config,s=ot(r.options&&r.options.plugins,{}),i=RF(r);return s===!1&&!n?[]:$F(t,i,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(s(n,r),t,"stop"),this._notify(s(r,n),t,"start")}}function RF(e){const t={},n=[],r=Object.keys(Tr.plugins.items);for(let i=0;i<r.length;i++)n.push(Tr.getPlugin(r[i]));const s=e.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function IF(e,t){return!t&&e===!1?null:e===!0?{}:e}function $F(e,{plugins:t,localIds:n},r,s){const i=[],o=e.getContext();for(const l of t){const c=l.id,u=IF(r[c],s);u!==null&&i.push({plugin:l,options:zF(e.config,{plugin:l,local:n[c]},u,o)})}return i}function zF(e,{plugin:t,local:n},r,s){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(r,i);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function nh(e,t){const n=zt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function HF(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function BF(e,t){return e===t?"_index_":"_value_"}function U0(e){if(e==="x"||e==="y"||e==="r")return e}function VF(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function rh(e,...t){if(U0(e))return e;for(const n of t){const r=n.axis||VF(n.position)||e.length>1&&U0(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function W0(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function UF(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(n.length)return W0(e,"x",n[0])||W0(e,"y",n[0])}return{}}function WF(e,t){const n=Aa[e.type]||{scales:{}},r=t.scales||{},s=nh(e.type,t),i=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!dt(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=rh(o,l,UF(o,e),zt.scales[l.type]),u=BF(c,s),m=n.scales||{};i[o]=Ro(Object.create(null),[{axis:c},l,m[c],m[u]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||nh(l,t),m=(Aa[l]||{}).scales||{};Object.keys(m).forEach(h=>{const f=HF(h,c),b=o[f+"AxisID"]||f;i[b]=i[b]||Object.create(null),Ro(i[b],[{axis:f},r[b],m[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];Ro(l,[zt.scales[l.type],zt.scale])}),i}function $N(e){const t=e.options||(e.options={});t.plugins=ot(t.plugins,{}),t.scales=WF(e,t)}function zN(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function YF(e){return e=e||{},e.data=zN(e.data),$N(e),e}const Y0=new Map,HN=new Set;function vc(e,t){let n=Y0.get(e);return n||(n=t(),Y0.set(e,n),HN.add(n)),n}const uo=(e,t,n)=>{const r=$u(t,n);r!==void 0&&e.add(r)};class qF{constructor(t){this._config=YF(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=zN(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),$N(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return vc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return vc(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return vc(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,r=this.type;return vc(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const r=this._scopeCache;let s=r.get(t);return(!s||n)&&(s=new Map,r.set(t,s)),s}getOptionScopes(t,n,r){const{options:s,type:i}=this,o=this._cachedScopes(t,r),l=o.get(n);if(l)return l;const c=new Set;n.forEach(m=>{t&&(c.add(t),m.forEach(h=>uo(c,t,h))),m.forEach(h=>uo(c,s,h)),m.forEach(h=>uo(c,Aa[i]||{},h)),m.forEach(h=>uo(c,zt,h)),m.forEach(h=>uo(c,Zf,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),HN.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,Aa[n]||{},zt.datasets[n]||{},{type:n},zt,Zf]}resolveNamedOptions(t,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=q0(this._resolverCache,t,s);let c=o;if(GF(o,n)){i.$shared=!1,r=Ks(r)?r():r;const u=this.createResolver(t,r,l);c=Ai(o,r,u)}for(const u of n)i[u]=c[u];return i}createResolver(t,n,r=[""],s){const{resolver:i}=q0(this._resolverCache,t,r);return dt(n)?Ai(i,n,void 0,s):i}}function q0(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Fp(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(s,i)),i}const KF=e=>dt(e)&&Object.getOwnPropertyNames(e).some(t=>Ks(e[t]));function GF(e,t){const{isScriptable:n,isIndexable:r}=_N(e);for(const s of t){const i=n(s),o=r(s),l=(o||i)&&e[s];if(i&&(Ks(l)||KF(l))||o&&Xt(l))return!0}return!1}var QF="4.5.0";const JF=["top","bottom","left","right","chartArea"];function K0(e,t){return e==="top"||e==="bottom"||JF.indexOf(e)===-1&&t==="x"}function G0(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function Q0(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),_t(n&&n.onComplete,[e],t)}function XF(e){const t=e.chart,n=t.options.animation;_t(n&&n.onProgress,[e],t)}function BN(e){return Rp()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Wc={},J0=e=>{const t=BN(e);return Object.values(Wc).filter(n=>n.canvas===t).pop()};function ZF(e,t,n){const r=Object.keys(e);for(const s of r){const i=+s;if(i>=t){const o=e[s];delete e[s],(n>0||i>t)&&(e[i+n]=o)}}}function eA(e,t,n,r){return!n||e.type==="mouseout"?null:r?t:e}var bs;let Fd=(bs=class{static register(...t){Tr.add(...t),X0()}static unregister(...t){Tr.remove(...t),X0()}constructor(t,n){const r=this.config=new qF(n),s=BN(t),i=J0(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||vF(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,m=c&&c.width;if(this.id=r4(),this.ctx=l,this.canvas=c,this.width=m,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new LF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=_4(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Wc[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Gr.listen(this,"complete",Q0),Gr.listen(this,"progress",XF),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Nt(t)?n&&i?i:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Tr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():j0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return b0(this.canvas,this.ctx),this}stop(){return Gr.stop(this),this}resize(t,n){Gr.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,n,i),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,j0(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),_t(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};vt(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,r=this.scales,s=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const l=n[o],c=rh(o,l),u=c==="r",m=c==="x";return{options:l,dposition:u?"chartArea":m?"bottom":"left",dtype:u?"radialLinear":m?"category":"linear"}}))),vt(i,o=>{const l=o.options,c=l.id,u=rh(c,l),m=ot(l.type,o.dtype);(l.position===void 0||K0(l.position,u)!==K0(o.dposition))&&(l.position=o.dposition),s[c]=!0;let h=null;if(c in r&&r[c].type===m)h=r[c];else{const f=Tr.getScale(m);h=new f({id:c,type:m,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,t)}),vt(s,(o,l)=>{o||delete r[l]}),vt(r,o=>{ar.configure(this,o,o.options),ar.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(G0("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=i.indexAxis||nh(l,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=Tr.getController(l),{datasetElementType:u,dataElementType:m}=zt.datasets[l];Object.assign(c,{dataElementType:Tr.getElement(m),datasetElementType:u&&Tr.getElement(u)}),o.controller=new c(this,r),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){vt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,m=this.data.datasets.length;u<m;u++){const{controller:h}=this.getDatasetMeta(u),f=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||vt(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(G0("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){vt(this.scales,t=>{ar.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!u0(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;ZF(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!u0(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ar.update(this,this.width,this.height,t);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],vt(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ks(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const r=this.getDatasetMeta(t),s={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Gr.has(this)?this.attached&&!Gr.running(this)&&Gr.start(this):(this.draw(),Q0({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!t||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,r={meta:t,index:t.index,cancelable:!0},s=MO(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Tp(n,s),t.controller.draw(),s&&Op(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return xl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,r,s){const i=JO.modes[n];return typeof i=="function"?i(this,t,r,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=za(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){const r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,s);zu(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),o.update(i,{visible:r}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Gr.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),b0(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Wc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),t[i]=o},s=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};vt(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,r=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},s=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){vt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},vt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){const s=r?"set":"remove";let i,o,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],r=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Ru(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,r){const s=this.options.hover,i=(c,u)=>c.filter(m=>!u.some(h=>m.datasetIndex===h.datasetIndex&&m.index===h.index)),o=i(n,t),l=r?t:i(t,n);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,n){const r={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(t,n,r){const{_active:s=[],options:i}=this,o=n,l=this._getActiveElements(t,s,r,o),c=c4(t),u=eA(t,this._lastEvent,r,c);r&&(this._lastEvent=null,_t(i.onHover,[t,l,this],this),c&&_t(i.onClick,[t,l,this],this));const m=!Ru(l,s);return(m||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=u,m}_getActiveElements(t,n,r,s){if(t.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,s)}},ke(bs,"defaults",zt),ke(bs,"instances",Wc),ke(bs,"overrides",Aa),ke(bs,"registry",Tr),ke(bs,"version",QF),ke(bs,"getChart",J0),bs);function X0(){return vt(Fd.instances,e=>e._plugins.invalidate())}function VN(e,t,n=t){e.lineCap=ot(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ot(n.borderDash,t.borderDash)),e.lineDashOffset=ot(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ot(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ot(n.borderWidth,t.borderWidth),e.strokeStyle=ot(n.borderColor,t.borderColor)}function tA(e,t,n){e.lineTo(n.x,n.y)}function nA(e){return e.stepped?I4:e.tension||e.cubicInterpolationMode==="monotone"?$4:tA}function UN(e,t,n={}){const r=e.length,{start:s=0,end:i=r-1}=n,{start:o,end:l}=t,c=Math.max(s,o),u=Math.min(i,l),m=s<o&&i<o||s>l&&i>l;return{count:r,start:c,loop:t.loop,ilen:u<c&&!m?r+u-c:u-c}}function rA(e,t,n,r){const{points:s,options:i}=t,{count:o,start:l,loop:c,ilen:u}=UN(s,n,r),m=nA(i);let{move:h=!0,reverse:f}=r||{},b,v,D;for(b=0;b<=u;++b)v=s[(l+(f?u-b:b))%o],!v.skip&&(h?(e.moveTo(v.x,v.y),h=!1):m(e,D,v,f,i.stepped),D=v);return c&&(v=s[(l+(f?u:0))%o],m(e,D,v,f,i.stepped)),!!c}function sA(e,t,n,r){const s=t.points,{count:i,start:o,ilen:l}=UN(s,n,r),{move:c=!0,reverse:u}=r||{};let m=0,h=0,f,b,v,D,p,y;const w=j=>(o+(u?l-j:j))%i,S=()=>{D!==p&&(e.lineTo(m,p),e.lineTo(m,D),e.lineTo(m,y))};for(c&&(b=s[w(0)],e.moveTo(b.x,b.y)),f=0;f<=l;++f){if(b=s[w(f)],b.skip)continue;const j=b.x,F=b.y,C=j|0;C===v?(F<D?D=F:F>p&&(p=F),m=(h*m+j)/++h):(S(),e.lineTo(j,F),v=C,h=0,D=p=F),y=F}S()}function sh(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?sA:rA}function aA(e){return e.stepped?vO:e.tension||e.cubicInterpolationMode==="monotone"?yO:oa}function iA(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),VN(e,t.options),e.stroke(s)}function oA(e,t,n,r){const{segments:s,options:i}=t,o=sh(t);for(const l of s)VN(e,i,l.style),e.beginPath(),o(e,t,l,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}const lA=typeof Path2D=="function";function cA(e,t,n,r){lA&&!t.options.segment?iA(e,t,n,r):oA(e,t,n,r)}class _o extends Ha{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;uO(this._points,r,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=DO(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){const r=this.options,s=t[n],i=this.points,o=_O(this,{property:n,start:s,end:s});if(!o.length)return;const l=[],c=aA(r);let u,m;for(u=0,m=o.length;u<m;++u){const{start:h,end:f}=o[u],b=i[h],v=i[f];if(b===v){l.push(b);continue}const D=Math.abs((s-b[n])/(v[n]-b[n])),p=c(b,v,D,r.stepped);p[n]=t[n],l.push(p)}return l.length===1?l[0]:l}pathSegment(t,n,r){return sh(this)(t,this,n,r)}path(t,n,r){const s=this.segments,i=sh(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const l of s)o&=i(t,this,l,{start:n,end:n+r-1});return!!o}draw(t,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),cA(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ke(_o,"id","line"),ke(_o,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ke(_o,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ke(_o,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Z0(e,t,n,r){const s=e.options,{[n]:i}=e.getProps([n],r);return Math.abs(t-i)<s.radius+s.hitRadius}class Yc extends Ha{constructor(n){super();ke(this,"parsed");ke(this,"skip");ke(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return Z0(this,n,"x",r)}inYRange(n,r){return Z0(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!xl(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,eh(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ke(Yc,"id","point"),ke(Yc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ke(Yc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const ev=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},uA=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class tv extends Ha{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,r){this.maxWidth=t,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=_t(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(r=>t.filter(r,this.chart.data))),t.sort&&(n=n.sort((r,s)=>t.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,s=pn(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=ev(r,i);let u,m;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,m=this._fitRows(o,i,l,c)+10):(m=this.maxHeight,u=this._fitCols(o,s,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(m,t.maxHeight||this.maxHeight)}_fitRows(t,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],m=s+l;let h=t;i.textAlign="left",i.textBaseline="middle";let f=-1,b=-m;return this.legendItems.forEach((v,D)=>{const p=r+n/2+i.measureText(v.text).width;(D===0||u[u.length-1]+p+2*l>o)&&(h+=m,u[u.length-(D>0?0:1)]=0,b+=m,f++),c[D]={left:0,top:b,row:f,width:p,height:s},u[u.length-1]+=p+l}),h}_fitCols(t,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],m=o-t;let h=l,f=0,b=0,v=0,D=0;return this.legendItems.forEach((p,y)=>{const{itemWidth:w,itemHeight:S}=dA(r,n,i,p,s);y>0&&b+S+2*l>m&&(h+=f+l,u.push({width:f,height:b}),v+=f+l,D++,f=b=0),c[y]={left:v,top:b,col:D,width:w,height:S},f=Math.max(f,w),b+=S+l}),h+=f,u.push({width:f,height:b}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=vi(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=dn(r,this.left+s,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=dn(r,this.left+s,this.right-this.lineWidths[l])),u.top+=this.top+t+s,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+s}else{let l=0,c=dn(r,this.top+t+s,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=dn(r,this.top+t+s,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Tp(t,this),this._draw(),Op(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=t,l=zt.color,c=vi(t.rtl,this.left,this.width),u=pn(o.font),{padding:m}=o,h=u.size,f=h/2;let b;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:v,boxHeight:D,itemHeight:p}=ev(o,h),y=function(C,T,P){if(isNaN(v)||v<=0||isNaN(D)||D<0)return;s.save();const V=ot(P.lineWidth,1);if(s.fillStyle=ot(P.fillStyle,l),s.lineCap=ot(P.lineCap,"butt"),s.lineDashOffset=ot(P.lineDashOffset,0),s.lineJoin=ot(P.lineJoin,"miter"),s.lineWidth=V,s.strokeStyle=ot(P.strokeStyle,l),s.setLineDash(ot(P.lineDash,[])),o.usePointStyle){const Q={radius:D*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:V},ee=c.xPlus(C,v/2),ce=T+f;NN(s,Q,ee,ce,o.pointStyleWidth&&v)}else{const Q=T+Math.max((h-D)/2,0),ee=c.leftForLtr(C,v),ce=Ho(P.borderRadius);s.beginPath(),Object.values(ce).some(fe=>fe!==0)?th(s,{x:ee,y:Q,w:v,h:D,radius:ce}):s.rect(ee,Q,v,D),s.fill(),V!==0&&s.stroke()}s.restore()},w=function(C,T,P){vl(s,P.text,C,T+p/2,u,{strikethrough:P.hidden,textAlign:c.textAlign(P.textAlign)})},S=this.isHorizontal(),j=this._computeTitleHeight();S?b={x:dn(i,this.left+m,this.right-r[0]),y:this.top+m+j,line:0}:b={x:this.left+m,y:dn(i,this.top+j+m,this.bottom-n[0].height),line:0},PN(this.ctx,t.textDirection);const F=p+m;this.legendItems.forEach((C,T)=>{s.strokeStyle=C.fontColor,s.fillStyle=C.fontColor;const P=s.measureText(C.text).width,V=c.textAlign(C.textAlign||(C.textAlign=o.textAlign)),Q=v+f+P;let ee=b.x,ce=b.y;c.setWidth(this.width),S?T>0&&ee+Q+m>this.right&&(ce=b.y+=F,b.line++,ee=b.x=dn(i,this.left+m,this.right-r[b.line])):T>0&&ce+F>this.bottom&&(ee=b.x=ee+n[b.line].width+m,b.line++,ce=b.y=dn(i,this.top+j+m,this.bottom-n[b.line].height));const fe=c.x(ee);if(y(fe,ce,C),ee=k4(V,ee+v+f,S?ee+Q:this.right,t.rtl),w(c.x(ee),ce,C),S)b.x+=Q+m;else if(typeof C.text!="string"){const G=u.lineHeight;b.y+=WN(C,G)+m}else b.y+=F}),EN(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,r=pn(n.font),s=dr(n.padding);if(!n.display)return;const i=vi(t.rtl,this.left,this.width),o=this.ctx,l=n.position,c=r.size/2,u=s.top+c;let m,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),m=this.top+u,h=dn(t.align,h,this.right-f);else{const v=this.columnSizes.reduce((D,p)=>Math.max(D,p.height),0);m=u+dn(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const b=dn(l,h,h+f);o.textAlign=i.textAlign(Ep(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,vl(o,n.text,b,m,r)}_computeTitleHeight(){const t=this.options.title,n=pn(t.font),r=dr(t.padding);return t.display?n.lineHeight+r.height:0}_getLegendItemAt(t,n){let r,s,i;if(No(t,this.left,this.right)&&No(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],No(t,s.left,s.left+s.width)&&No(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(t){const n=this.options;if(!hA(t.type,n))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,i=uA(s,r);s&&!i&&_t(n.onLeave,[t,s,this],this),this._hoveredItem=r,r&&!i&&_t(n.onHover,[t,r,this],this)}else r&&_t(n.onClick,[t,r,this],this)}}function dA(e,t,n,r,s){const i=mA(r,e,t,n),o=fA(s,r,t.lineHeight);return{itemWidth:i,itemHeight:o}}function mA(e,t,n,r){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),t+n.size/2+r.measureText(s).width}function fA(e,t,n){let r=e;return typeof t.text!="string"&&(r=WN(t,n)),r}function WN(e,t){const n=e.text?e.text.length:0;return t*n}function hA(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var pA={id:"legend",_element:tv,start(e,t,n){const r=e.legend=new tv({ctx:e.ctx,options:n,chart:e});ar.configure(e,r,n),ar.addBox(e,r)},stop(e){ar.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;ar.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),m=dr(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class YN extends Ha{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const s=Xt(r.text)?r.text.length:1;this._padding=dr(r.padding);const i=s*pn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:r,bottom:s,right:i,options:o}=this,l=o.align;let c=0,u,m,h;return this.isHorizontal()?(m=dn(l,r,i),h=n+t,u=i-r):(o.position==="left"?(m=r+t,h=dn(l,s,n),c=en*-.5):(m=i-t,h=dn(l,n,s),c=en*.5),u=s-n),{titleX:m,titleY:h,maxWidth:u,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const r=pn(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);vl(t,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:u,textAlign:Ep(n.align),textBaseline:"middle",translation:[o,l]})}}function gA(e,t){const n=new YN({ctx:e.ctx,options:t,chart:e});ar.configure(e,n,t),ar.addBox(e,n),e.titleBlock=n}var xA={id:"title",_element:YN,start(e,t,n){gA(e,n)},stop(e){const t=e.titleBlock;ar.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;ar.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ko={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),s+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:s/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,r=t.y,s=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),m=Xf(t,u);m<s&&(s=m,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,r=c.y}return{x:n,y:r}}};function Er(e,t){return t&&(Xt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Qr(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function vA(e,t){const{element:n,datasetIndex:r,index:s}=t,i=e.getDatasetMeta(r).controller,{label:o,value:l}=i.getLabelAndValue(s);return{chart:e,label:o,parsed:i.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:l,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function nv(e,t){const n=e.chart.ctx,{body:r,footer:s,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=pn(t.bodyFont),u=pn(t.titleFont),m=pn(t.footerFont),h=i.length,f=s.length,b=r.length,v=dr(t.padding);let D=v.height,p=0,y=r.reduce((j,F)=>j+F.before.length+F.lines.length+F.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(D+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){const j=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;D+=b*j+(y-b)*c.lineHeight+(y-1)*t.bodySpacing}f&&(D+=t.footerMarginTop+f*m.lineHeight+(f-1)*t.footerSpacing);let w=0;const S=function(j){p=Math.max(p,n.measureText(j).width+w)};return n.save(),n.font=u.string,vt(e.title,S),n.font=c.string,vt(e.beforeBody.concat(e.afterBody),S),w=t.displayColors?o+2+t.boxPadding:0,vt(r,j=>{vt(j.before,S),vt(j.lines,S),vt(j.after,S)}),w=0,n.font=m.string,vt(e.footer,S),n.restore(),p+=v.width,{width:p,height:D}}function yA(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function bA(e,t,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(e==="left"&&s+i+o>t.width||e==="right"&&s-i-o<0)return!0}function wA(e,t,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:l,right:c}}=e;let u="center";return r==="center"?u=s<=(l+c)/2?"left":"right":s<=i/2?u="left":s>=o-i/2&&(u="right"),bA(u,e,t,n)&&(u="center"),u}function rv(e,t,n){const r=n.yAlign||t.yAlign||yA(e,n);return{xAlign:n.xAlign||t.xAlign||wA(e,t,n,r),yAlign:r}}function NA(e,t){let{x:n,width:r}=e;return t==="right"?n-=r:t==="center"&&(n-=r/2),n}function jA(e,t,n){let{y:r,height:s}=e;return t==="top"?r+=n:t==="bottom"?r-=s+n:r-=s/2,r}function sv(e,t,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=n,u=s+i,{topLeft:m,topRight:h,bottomLeft:f,bottomRight:b}=Ho(o);let v=NA(t,l);const D=jA(t,c,u);return c==="center"?l==="left"?v+=u:l==="right"&&(v-=u):l==="left"?v-=Math.max(m,f)+s:l==="right"&&(v+=Math.max(h,b)+s),{x:sr(v,0,r.width-t.width),y:sr(D,0,r.height-t.height)}}function yc(e,t,n){const r=dr(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-r.right:e.x+r.left}function av(e){return Er([],Qr(e))}function _A(e,t,n){return za(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function iv(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const qN={beforeTitle:Kr,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:Kr,beforeBody:Kr,beforeLabel:Kr,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Nt(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Kr,afterBody:Kr,beforeFooter:Kr,footer:Kr,afterFooter:Kr};function Dn(e,t,n,r){const s=e[t].call(n,r);return typeof s>"u"?qN[t].call(n,r):s}class ah extends Ha{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new TN(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=_A(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,s=Dn(r,"beforeTitle",this,t),i=Dn(r,"title",this,t),o=Dn(r,"afterTitle",this,t);let l=[];return l=Er(l,Qr(s)),l=Er(l,Qr(i)),l=Er(l,Qr(o)),l}getBeforeBody(t,n){return av(Dn(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:r}=n,s=[];return vt(t,i=>{const o={before:[],lines:[],after:[]},l=iv(r,i);Er(o.before,Qr(Dn(l,"beforeLabel",this,i))),Er(o.lines,Dn(l,"label",this,i)),Er(o.after,Qr(Dn(l,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(t,n){return av(Dn(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:r}=n,s=Dn(r,"beforeFooter",this,t),i=Dn(r,"footer",this,t),o=Dn(r,"afterFooter",this,t);let l=[];return l=Er(l,Qr(s)),l=Er(l,Qr(i)),l=Er(l,Qr(o)),l}_createItems(t){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(vA(this.chart,n[c]));return t.filter&&(l=l.filter((m,h,f)=>t.filter(m,h,f,r))),t.itemSort&&(l=l.sort((m,h)=>t.itemSort(m,h,r))),vt(l,m=>{const h=iv(t.callbacks,m);s.push(Dn(h,"labelColor",this,m)),i.push(Dn(h,"labelPointStyle",this,m)),o.push(Dn(h,"labelTextColor",this,m))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const l=ko[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=nv(this,r),u=Object.assign({},l,c),m=rv(this.chart,r,u),h=sv(r,u,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,s){const i=this.getCaretPosition(t,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:m,bottomRight:h}=Ho(l),{x:f,y:b}=t,{width:v,height:D}=n;let p,y,w,S,j,F;return i==="center"?(j=b+D/2,s==="left"?(p=f,y=p-o,S=j+o,F=j-o):(p=f+v,y=p+o,S=j-o,F=j+o),w=p):(s==="left"?y=f+Math.max(c,m)+o:s==="right"?y=f+v-Math.max(u,h)-o:y=this.caretX,i==="top"?(S=b,j=S-o,p=y-o,w=y+o):(S=b+D,j=S+o,p=y+o,w=y-o),F=S),{x1:p,x2:y,x3:w,y1:S,y2:j,y3:F}}drawTitle(t,n,r){const s=this.title,i=s.length;let o,l,c;if(i){const u=vi(r.rtl,this.x,this.width);for(t.x=yc(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=pn(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,c=0;c<i;++c)n.fillText(s[c],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=r.titleMarginBottom-l)}}_drawColorBox(t,n,r,s,i){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=i,m=pn(i.bodyFont),h=yc(this,"left",i),f=s.x(h),b=c<m.lineHeight?(m.lineHeight-c)/2:0,v=n.y+b;if(i.usePointStyle){const D={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},p=s.leftForLtr(f,u)+u/2,y=v+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,eh(t,D,p,y),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,eh(t,D,p,y)}else{t.lineWidth=dt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const D=s.leftForLtr(f,u),p=s.leftForLtr(s.xPlus(f,1),u-2),y=Ho(o.borderRadius);Object.values(y).some(w=>w!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,th(t,{x:D,y:v,w:u,h:c,radius:y}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),th(t,{x:p,y:v+1,w:u-2,h:c-2,radius:y}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(D,v,u,c),t.strokeRect(D,v,u,c),t.fillStyle=o.backgroundColor,t.fillRect(p,v+1,u-2,c-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:m}=r,h=pn(r.bodyFont);let f=h.lineHeight,b=0;const v=vi(r.rtl,this.x,this.width),D=function(P){n.fillText(P,v.x(t.x+b),t.y+f/2),t.y+=f+i},p=v.textAlign(o);let y,w,S,j,F,C,T;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,t.x=yc(this,p,r),n.fillStyle=r.bodyColor,vt(this.beforeBody,D),b=l&&p!=="right"?o==="center"?u/2+m:u+2+m:0,j=0,C=s.length;j<C;++j){for(y=s[j],w=this.labelTextColors[j],n.fillStyle=w,vt(y.before,D),S=y.lines,l&&S.length&&(this._drawColorBox(n,t,j,v,r),f=Math.max(h.lineHeight,c)),F=0,T=S.length;F<T;++F)D(S[F]),f=h.lineHeight;vt(y.after,D)}b=0,f=h.lineHeight,vt(this.afterBody,D),t.y-=i}drawFooter(t,n,r){const s=this.footer,i=s.length;let o,l;if(i){const c=vi(r.rtl,this.x,this.width);for(t.x=yc(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",o=pn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+r.footerSpacing}}drawBackground(t,n,r,s){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:u,height:m}=r,{topLeft:h,topRight:f,bottomLeft:b,bottomRight:v}=Ho(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+h,c),o==="top"&&this.drawCaret(t,n,r,s),n.lineTo(l+u-f,c),n.quadraticCurveTo(l+u,c,l+u,c+f),o==="center"&&i==="right"&&this.drawCaret(t,n,r,s),n.lineTo(l+u,c+m-v),n.quadraticCurveTo(l+u,c+m,l+u-v,c+m),o==="bottom"&&this.drawCaret(t,n,r,s),n.lineTo(l+b,c+m),n.quadraticCurveTo(l,c+m,l,c+m-b),o==="center"&&i==="left"&&this.drawCaret(t,n,r,s),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=ko[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=nv(this,t),c=Object.assign({},o,this._size),u=rv(n,t,c),m=sv(t,c,u,n);(s._to!==m.x||i._to!==m.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=dr(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(i,t,s,n),PN(t,n.textDirection),i.y+=o.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),EN(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,s=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!Ru(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(t,i,n,r),l=this._positionChanged(o,t),c=n||!Ru(o,i)||l;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,r,s){const i=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:r,caretY:s,options:i}=this,o=ko[i.position].call(this,t,n);return o!==!1&&(r!==o.x||s!==o.y)}}ke(ah,"positioners",ko);var kA={id:"tooltip",_element:ah,positioners:ko,afterInit(e,t,n){n&&(e.tooltip=new ah({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:qN},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const SA=(e,t,n,r)=>(typeof t=="string"?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function DA(e,t,n,r){const s=e.indexOf(t);if(s===-1)return SA(e,t,n,r);const i=e.lastIndexOf(t);return s!==i?n:s}const CA=(e,t)=>e===null?null:sr(Math.round(e),0,t);function ov(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ih extends Yi{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Nt(t))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===t?n:DA(r,t,ot(n,t),this._addedLabels),CA(n,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const t=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=t;o<=n;o++)s.push({value:o});return s}getLabelForValue(t){return ov.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ke(ih,"id","category"),ke(ih,"defaults",{ticks:{callback:ov}});function PA(e,t){const n=[],{bounds:s,step:i,min:o,max:l,precision:c,count:u,maxTicks:m,maxDigits:h,includeBounds:f}=e,b=i||1,v=m-1,{min:D,max:p}=t,y=!Nt(o),w=!Nt(l),S=!Nt(u),j=(p-D)/(h+1);let F=m0((p-D)/v/b)*b,C,T,P,V;if(F<1e-14&&!y&&!w)return[{value:D},{value:p}];V=Math.ceil(p/F)-Math.floor(D/F),V>v&&(F=m0(V*F/v/b)*b),Nt(c)||(C=Math.pow(10,c),F=Math.ceil(F*C)/C),s==="ticks"?(T=Math.floor(D/F)*F,P=Math.ceil(p/F)*F):(T=D,P=p),y&&w&&i&&h4((l-o)/i,F/1e3)?(V=Math.round(Math.min((l-o)/F,m)),F=(l-o)/V,T=o,P=l):S?(T=y?o:T,P=w?l:P,V=u-1,F=(P-T)/V):(V=(P-T)/F,Io(V,Math.round(V),F/1e3)?V=Math.round(V):V=Math.ceil(V));const Q=Math.max(f0(F),f0(T));C=Math.pow(10,Nt(c)?Q:c),T=Math.round(T*C)/C,P=Math.round(P*C)/C;let ee=0;for(y&&(f&&T!==o?(n.push({value:o}),T<o&&ee++,Io(Math.round((T+ee*F)*C)/C,o,lv(o,j,e))&&ee++):T<o&&ee++);ee<V;++ee){const ce=Math.round((T+ee*F)*C)/C;if(w&&ce>l)break;n.push({value:ce})}return w&&f&&P!==l?n.length&&Io(n[n.length-1].value,l,lv(l,j,e))?n[n.length-1].value=l:n.push({value:l}):(!w||P===l)&&n.push({value:P}),n}function lv(e,t,{horizontal:n,minRotation:r}){const s=ga(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class EA extends Yi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Nt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=c=>s=n?s:c,l=c=>i=r?i:c;if(t){const c=Fi(s),u=Fi(i);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(s===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(s-c)}this.min=s,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=t,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=PA(s,i);return t.bounds==="ticks"&&p4(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const s=(r-n)/Math.max(t.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(t){return bN(t,this.chart.options.locale,this.options.ticks.format)}}class oh extends EA{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=ur(t)?t:0,this.max=ur(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,r=ga(this.options.ticks.minRotation),s=(t?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ke(oh,"id","linear"),ke(oh,"defaults",{ticks:{callback:wN.formatters.numeric}});const Ad={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Pn=Object.keys(Ad);function cv(e,t){return e-t}function uv(e,t){if(Nt(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:i}=e._parseOpts;let o=t;return typeof r=="function"&&(o=r(o)),ur(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(gl(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function dv(e,t,n,r){const s=Pn.length;for(let i=Pn.indexOf(e);i<s-1;++i){const o=Ad[Pn[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(l*o.size))<=r)return Pn[i]}return Pn[s-1]}function MA(e,t,n,r,s){for(let i=Pn.length-1;i>=Pn.indexOf(n);i--){const o=Pn[i];if(Ad[o].common&&e._adapter.diff(s,r,o)>=t-1)return o}return Pn[n?Pn.indexOf(n):0]}function TA(e){for(let t=Pn.indexOf(e)+1,n=Pn.length;t<n;++t)if(Ad[Pn[t]].common)return Pn[t]}function mv(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:r,hi:s}=Pp(n,t),i=n[r]>=t?n[r]:n[s];e[i]=!0}}function OA(e,t,n,r){const s=e._adapter,i=+s.startOf(t[0].value,r),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+s.add(l,1,r))c=n[l],c>=0&&(t[c].major=!0);return t}function fv(e,t,n){const r=[],s={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],s[l]=o,r.push({value:l,major:!1});return i===0||!n?r:OA(e,r,s,n)}class Uu extends Yi{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const r=t.time||(t.time={}),s=this._adapter=new YO._date(t.adapters.date);s.init(n),Ro(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:uv(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=ur(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=ur(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,l=w4(s,i,o);return this._unit=n.unit||(r.autoSkip?dv(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):MA(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:TA(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),fv(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,r=0,s,i;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?r=i:r=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=sr(n,0,o),r=sr(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||dv(i.minUnit,n,r,this._getLabelCapacity(n)),l=ot(s.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=gl(c)||c===!0,m={};let h=n,f,b;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":o),t.diff(r,n,o)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,b=0;f<r;f=+t.add(f,l,o),b++)mv(m,f,v);return(f===r||s.bounds==="ticks"||b===1)&&mv(m,f,v),Object.keys(m).sort(cv).map(D=>+D)}getLabelForValue(t){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(t,o)}_tickFormatFunction(t,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return _t(o,[t,n,r],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,m=c&&l[c],h=u&&l[u],f=r[n],b=u&&h&&f&&f.major;return this._adapter.format(t,s||(b?h:m))}generateTickLabels(t){let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,s=ga(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*i+l*o,h:r*o+l*i}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(t,0,fv(this,[t],this._majorUnit),s),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)t.push(uv(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return j4(t.sort(cv))}}ke(Uu,"id","time"),ke(Uu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function bc(e,t,n){let r=0,s=e.length-1,i,o,l,c;n?(t>=e[r].pos&&t<=e[s].pos&&({lo:r,hi:s}=xa(e,"pos",t)),{pos:i,time:l}=e[r],{pos:o,time:c}=e[s]):(t>=e[r].time&&t<=e[s].time&&({lo:r,hi:s}=xa(e,"time",t)),{time:i,pos:l}=e[r],{time:o,pos:c}=e[s]);const u=o-i;return u?l+(c-l)*(t-i)/u:l}class hv extends Uu{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=bc(n,this.min),this._tableRange=bc(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:r}=this,s=[],i=[];let o,l,c,u,m;for(o=0,l=t.length;o<l;++o)u=t[o],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,l=s.length;o<l;++o)m=s[o+1],c=s[o-1],u=s[o],Math.round((m+c)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const t=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?t=this.normalize(n.concat(r)):t=n.length?n:r,t=this._cache.all=t,t}getDecimalForValue(t){return(bc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return bc(this._table,r*this._tableRange+this._minPos,!0)}}ke(hv,"id","timeseries"),ke(hv,"defaults",Uu.defaults);const KN="label";function pv(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function FA(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function GN(e,t){e.labels=t}function QN(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:KN;const r=[];e.datasets=t.map(s=>{const i=e.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function AA(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:KN;const n={labels:[],datasets:[]};return GN(n,e.labels),QN(n,e.datasets,t),n}function LA(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:u=[],fallbackContent:m,updateMode:h,...f}=e,b=E.useRef(null),v=E.useRef(null),D=()=>{b.current&&(v.current=new Fd(b.current,{type:o,data:AA(l,i),options:c&&{...c},plugins:u}),pv(t,v.current))},p=()=>{pv(t,null),v.current&&(v.current.destroy(),v.current=null)};return E.useEffect(()=>{!s&&v.current&&c&&FA(v.current,c)},[s,c]),E.useEffect(()=>{!s&&v.current&&GN(v.current.config.data,l.labels)},[s,l.labels]),E.useEffect(()=>{!s&&v.current&&l.datasets&&QN(v.current.config.data,l.datasets,i)},[s,l.datasets]),E.useEffect(()=>{v.current&&(s?(p(),setTimeout(D)):v.current.update(h))},[s,c,l.labels,l.datasets,h]),E.useEffect(()=>{v.current&&(p(),setTimeout(D))},[o]),E.useEffect(()=>(D(),()=>p()),[]),ve.createElement("canvas",{ref:b,role:"img",height:n,width:r,...f},m)}const RA=E.forwardRef(LA);function IA(e,t){return Fd.register(t),E.forwardRef((n,r)=>ve.createElement(RA,{...n,ref:r,type:e}))}const $A=IA("line",Vc);Fd.register(ih,oh,Yc,_o,xA,kA,pA);const zA=({title:e,value:t,icon:n,color:r})=>a.jsx("div",{className:"bg-white rounded-lg shadow p-5 transition-all duration-300 hover:shadow-md",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 font-medium",children:e}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:t})]}),a.jsx("div",{className:`p-3 rounded-full ${r}`,children:n})]})}),HA=()=>{const e=fd(),[t,n]=E.useState([]),[r,s]=E.useState([]),[i,o]=E.useState([]),[l,c]=E.useState([]),[u,m]=E.useState([]),[h,f]=E.useState([]),[b,v]=E.useState([]),[D,p]=E.useState([]),[y,w]=E.useState([]),[S,j]=E.useState([]),[F,C]=E.useState([]),[T,P]=E.useState([]),[V,Q]=E.useState([]),[ee,ce]=E.useState(!0),[fe,G]=E.useState(null),[re,$]=E.useState(null),[H,Y]=E.useState(null),[X,J]=E.useState(new Date().getFullYear()),he="http://localhost:5000/api/customers",Se="http://localhost:5000/api/reservations",se="http://localhost:5000/api/vehicles",I="http://localhost:5000/api/interventions",q="http://localhost:5000/api/factures",_="http://localhost:5000/api/traites",O="http://localhost:5000/api/charges",d="http://localhost:5000/api/vehicleinspections",g="http://localhost:5000/api/vehicleinsurances",N=E.useCallback(async()=>{ce(!0),G(null),console.log("Fetching dashboard data...");try{const[te,ie,me,pe,xe,_e,Ce,ye,Le]=await Promise.all([we.get(he),we.get(Se).catch(je=>(console.warn("Reservations API not ready:",je.message),{data:[]})),we.get(se),we.get(I).catch(je=>(console.warn("Interventions API not ready:",je.message),{data:[]})),we.get(q).catch(je=>(console.warn("Factures API not ready:",je.message),{data:[]})),we.get(_).catch(je=>(console.warn("Traites API not ready:",je.message),{data:[]})),we.get(O).catch(je=>(console.warn("Charges API not ready:",je.message),{data:[]})),we.get(d).catch(je=>(console.warn("Vehicle Inspections API not ready:",je.message),{data:[]})),we.get(g).catch(je=>(console.warn("Vehicle Insurances API not ready:",je.message),{data:[]}))]);n(te.data),s(ie.data),o(me.data),c(pe.data),m(xe.data),f(_e.data),v(Ce.data),p(ye.data),w(Le.data),console.log("Dashboard data fetched successfully. Charges:",Ce.data),le.success("Dashboard data loaded!")}catch(te){console.error("Error fetching dashboard data:",te),G("Failed to load dashboard data."),le.error("Failed to load dashboard data.")}finally{ce(!1)}},[]);E.useEffect(()=>{N();const te=()=>{console.log("chargeUpdated event received. Re-fetching data..."),N()};return window.addEventListener("chargeUpdated",te),()=>{window.removeEventListener("chargeUpdated",te)}},[N]),E.useEffect(()=>{const te=new Date;te.setHours(0,0,0,0);const ie=new Date(te);ie.setDate(te.getDate()+30),ie.setHours(0,0,0,0);const me=[],pe=[],xe=[],_e=[];i.forEach(Ce=>{if(D.some(je=>(je.vehicle&&typeof je.vehicle=="object"?je.vehicle._id:je.vehicle)===Ce._id&&new Date(je.endDate)>=te)||me.push(Ce),y.some(je=>(je.vehicle&&typeof je.vehicle=="object"?je.vehicle._id:je.vehicle)===Ce._id&&new Date(je.endDate)>=te)||pe.push(Ce),Ce.autorisationValidity){const je=new Date(Ce.autorisationValidity);je.setHours(0,0,0,0);const Oe=je.getTime()-te.getTime(),We=Math.ceil(Oe/(1e3*60*60*24));We>=0&&We<=30&&xe.push(Ce)}if(Ce.carteGriseValidity){const je=new Date(Ce.carteGriseValidity);je.setHours(0,0,0,0);const Oe=je.getTime()-te.getTime(),We=Math.ceil(Oe/(1e3*60*60*24));We>=0&&We<=30&&_e.push(Ce)}}),j(me),C(pe),P(xe),Q(_e)},[i,D,y]);const k=E.useCallback(()=>{const te=Array(12).fill(0);return r.forEach(ie=>{const me=new Date(ie.reservationDate);me.getFullYear()===X&&ie.status==="validee"&&(!re||me>=re)&&(!H||me<=H)&&(te[me.getMonth()]+=ie.totalAmount)}),u.forEach(ie=>{const me=new Date(ie.invoiceDate);me.getFullYear()===X&&(!re||me>=re)&&(!H||me<=H)&&(te[me.getMonth()]+=ie.totalTTC)}),te},[r,u,re,H,X]),x=E.useCallback(()=>{const te=Array(12).fill(0);return h.forEach(ie=>{const me=new Date(ie.datePaiement||ie.createdAt);me.getFullYear()===X&&(!re||me>=re)&&(!H||me<=H)&&(te[me.getMonth()]+=ie.montant)}),b.forEach(ie=>{const me=new Date(ie.date||ie.createdAt),pe=Number(ie.montant);me.getFullYear()===X&&!isNaN(pe)&&(!re||me>=re)&&(!H||me<=H)&&(te[me.getMonth()]+=pe)}),l.forEach(ie=>{const me=new Date(ie.date);me.getFullYear()===X&&(!re||me>=re)&&(!H||me<=H)&&(te[me.getMonth()]+=ie.cost)}),D.forEach(ie=>{const me=new Date(ie.inspectionDate);me.getFullYear()===X&&(!re||me>=re)&&(!H||me<=H)&&(te[me.getMonth()]+=ie.price)}),y.forEach(ie=>{const me=new Date(ie.operationDate);me.getFullYear()===X&&(!re||me>=re)&&(!H||me<=H)&&(te[me.getMonth()]+=ie.price)}),te},[h,b,l,D,y,re,H,X]),M=k(),A=x(),L=M.reduce((te,ie)=>te+ie,0),R=A.reduce((te,ie)=>te+ie,0),B=i.filter(te=>te.statut==="En parc").length,W=t.filter(te=>te.status==="Actif").length,K=[{title:"Véhicules actifs",value:B.toString(),icon:a.jsx(pt,{size:20,className:"text-white"}),color:"bg-blue-600"},{title:"Réservations",value:r.length.toString(),icon:a.jsx(pD,{size:20,className:"text-white"}),color:"bg-green-600"},{title:"Clients",value:W.toString(),icon:a.jsx(Dw,{size:20,className:"text-white"}),color:"bg-purple-600"},{title:"Total des recettes",value:`${L.toLocaleString("fr-FR")} DH`,icon:a.jsx(fD,{size:20,className:"text-white"}),color:"bg-amber-600"},{title:"Total des dépenses",value:`${R.toLocaleString("fr-FR")} DH`,icon:a.jsx(fC,{size:20,className:"text-white"}),color:"bg-red-600"}],U={labels:["Jan","Fév","Mar","Avr","Mai","Juin","Juil","Août","Sep","Oct","Nov","Déc"],datasets:[{label:"Recettes",data:M,borderColor:"rgb(255, 159, 64)",backgroundColor:"rgba(255, 159, 64, 0.5)",tension:.3},{label:"Dépenses",data:A,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",tension:.3}]},ne={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:`Recettes et Dépenses Mensuelles (${X})`}}},Z=1e4,oe=200,ae=[];i.forEach(te=>{const ie=Number(te.mileage)||0,me=Math.ceil((ie+1)/Z)*Z,pe=me-ie;pe>0&&pe<=oe&&(l.some(_e=>{const Ce=_e.vehicle&&typeof _e.vehicle=="object"?_e.vehicle._id:_e.vehicle,ye=_e.nextMileage!==void 0&&_e.nextMileage!==null?Number(_e.nextMileage):null;return Ce===te._id&&ye!==null&&ye>=me})||ae.push({vehicle:te,nextThreshold:me,distance:pe}))});const ue=[];return S.length>0&&ue.push({title:`Visite Technique requise (${S.length} véhicules)`,description:`Les véhicules suivants nécessitent une visite technique : ${S.map(te=>te.licensePlate).join(", ")}`,action:"Gérer les visites techniques",type:"warning",onClick:()=>e("/vehicules/visites-techniques")}),F.length>0&&ue.push({title:`Assurance requise (${F.length} véhicules)`,description:`Les véhicules suivants nécessitent une assurance : ${F.map(te=>te.licensePlate).join(", ")}`,action:"Gérer les assurances",type:"warning",onClick:()=>e("/vehicules/assurances")}),T.length>0&&ue.push({title:`Validité autorisation expirant (${T.length} véhicules)`,description:`L'autorisation des véhicules suivants expire bientôt : ${T.map(te=>te.licensePlate).join(", ")}`,action:"Gérer les véhicules",type:"warning",onClick:()=>e("/vehicules")}),V.length>0&&ue.push({title:`Validité carte grise expirant (${V.length} véhicules)`,description:`La carte grise des véhicules suivants expire bientôt : ${V.map(te=>te.licensePlate).join(", ")}`,action:"Gérer les véhicules",type:"warning",onClick:()=>e("/vehicules")}),ae.length>0&&ae.forEach(({vehicle:te,nextThreshold:ie,distance:me})=>{ue.push({title:`Intervention requise — ${te.licensePlate}`,description:`Le véhicule ${te.licensePlate} approche ${ie.toLocaleString("fr-FR")} km (dans ${me} km).`,action:"Aller aux Interventions",type:"warning",onClick:()=>e(`/interventions?vehicle=${te._id}`)})}),ee?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading dashboard data..."})}):fe?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:fe}),a.jsx("button",{onClick:N,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:K.map((te,ie)=>a.jsx(zA,{...te},ie))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow col-span-2 p-4",children:[a.jsx("h2",{className:"text-lg font-medium mb-4",children:"Recettes et Dépenses Mensuelles"}),a.jsxs("div",{className:"flex flex-wrap items-end gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"yearPicker",className:"block text-sm font-medium text-gray-700",children:"Année"}),a.jsx(Me,{id:"yearPicker",selected:new Date(X,0,1),onChange:te=>J(te?te.getFullYear():new Date().getFullYear()),showYearPicker:!0,dateFormat:"yyyy",className:"mt-1 block w-full rounded-md border border-gray-300 bg-white shadow-sm focus:border-blue-500 focus:ring-blue-500 hover:border-blue-500 hover:ring-blue-500 sm:text-sm p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700",children:"Date de début"}),a.jsx(Me,{id:"startDate",selected:re,onChange:te=>$(te),selectsStart:!0,startDate:re,endDate:H,dateFormat:"dd/MM/yyyy",className:"mt-1 block w-full rounded-md border border-gray-300 bg-white shadow-sm focus:border-blue-500 focus:ring-blue-500 hover:border-blue-500 hover:ring-blue-500 sm:text-sm p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700",children:"Date de fin"}),a.jsx(Me,{id:"endDate",selected:H,onChange:te=>Y(te),selectsEnd:!0,startDate:re,endDate:H,minDate:re||void 0,dateFormat:"dd/MM/yyyy",className:"mt-1 block w-full rounded-md border border-gray-300 bg-white shadow-sm focus:border-blue-500 focus:ring-blue-500 hover:border-blue-500 hover:ring-blue-500 sm:text-sm p-2"})]}),a.jsx("button",{onClick:()=>{$(null),Y(null),J(new Date().getFullYear())},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Réinitialiser"})]}),a.jsx($A,{data:U,options:ne})]}),a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"border-b border-gray-200 p-4",children:a.jsx("h2",{className:"text-lg font-medium",children:"Alertes"})}),a.jsx("div",{className:"p-4 space-y-4",children:ue.map((te,ie)=>a.jsx("div",{className:`p-4 rounded-lg ${te.type==="warning"?"bg-red-50 border-l-4 border-red-400":"bg-blue-50 border-l-4 border-blue-400"}`,children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:te.type==="warning"?a.jsx(Nr,{size:18,className:"text-red-400"}):a.jsx(iC,{size:18,className:"text-blue-400"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium",children:te.title}),a.jsx("div",{className:"mt-1 text-sm text-gray-600",children:te.description}),a.jsx("div",{className:"mt-2",children:a.jsx("button",{onClick:te.onClick,className:`text-sm font-medium ${te.type==="warning"?"text-red-700 hover:text-red-600":"text-blue-700 hover:text-blue-600"}`,children:te.action})})]})]})},ie))})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow col-span-full",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Réservations récentes"}),a.jsx("button",{onClick:()=>e("/reservations"),className:"text-blue-600 text-sm font-medium hover:text-blue-800 focus:outline-none",children:"Voir tout"})]}),a.jsx("div",{className:"p-4",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de début"}),a.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[r.slice(0,5).map(te=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:te.customer&&typeof te.customer=="object"?`${te.customer.prenomFr} ${te.customer.nomFr}`:"N/A"})}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:te.vehicle&&typeof te.vehicle=="object"?te.vehicle.model:"N/A"})}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:new Date(te.startDate).toLocaleDateString("fr-FR")})}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:a.jsx(TT,{status:te.status})})]},te._id)),r.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-4 py-3 text-center text-sm text-gray-500",children:"Aucune réservation récente."})})]})]})})]})]})]})},Sr=({onClick:e,className:t})=>a.jsx("button",{type:"button",onClick:e,className:`absolute top-4 right-4 text-gray-400 hover:text-gray-600 focus:outline-none ${t}`,"aria-label":"Close",children:a.jsx(kr,{size:24})}),BA=({file:e,api_url:t,onRemove:n})=>{var u,m;const[r,s]=E.useState(!1),i=new URL(t).origin;let o=e.url;if((u=e.url)!=null&&u.startsWith("blob:")||(m=e.url)!=null&&m.startsWith("data:"))o=e.url;else{const h=e.url.split(/[\\/]/).pop();h?o=`${i}/uploads/${h}`:o=`${i}/${e.url.replace(/\\/g,"/")}`}const l=()=>{var v,D,p;const h=(D=(v=e.name)==null?void 0:v.split(".").pop())==null?void 0:D.toLowerCase(),f=((p=e.type)==null?void 0:p.startsWith("image/"))||["jpg","jpeg","png","gif","bmp","webp"].includes(h||""),b=e.type==="application/pdf"||h==="pdf";return f?a.jsx("div",{className:"flex items-center",children:a.jsx("div",{className:"w-8 h-8 mr-2 bg-gray-100 rounded overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:o,alt:e.name,className:"max-h-full max-w-full object-cover"})})}):b?a.jsx(dl,{size:16,className:"mr-2 text-red-500"}):a.jsx(dl,{size:16,className:"mr-2 text-blue-500"})},c=()=>{var v,D,p;const h=(D=(v=e.name)==null?void 0:v.split(".").pop())==null?void 0:D.toLowerCase(),f=((p=e.type)==null?void 0:p.startsWith("image/"))||["jpg","jpeg","png","gif","bmp","webp"].includes(h||""),b=e.type==="application/pdf"||h==="pdf";return f?a.jsx("div",{className:"flex flex-col items-center",children:a.jsx("img",{src:o,alt:e.name,className:"max-h-[70vh] max-w-full object-contain shadow-lg rounded"})}):b?a.jsx("div",{className:"w-full h-[70vh] flex flex-col",children:a.jsx("iframe",{src:o,className:"w-full flex-grow border rounded shadow-lg",title:e.name})}):a.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[a.jsx("p",{className:"text-lg font-medium",children:e.name}),a.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-md text-center",children:"L'aperçu n'est pas disponible pour ce type de fichier."})]})};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-2 rounded-lg",onClick:()=>s(!0),children:[l(),a.jsx("span",{className:"text-sm flex-grow",children:e.name}),a.jsx(VD,{size:14,className:"ml-2 text-gray-500"}),n&&a.jsx("button",{type:"button",onClick:h=>{h.stopPropagation(),n(e)},className:"ml-2 text-red-500 hover:text-red-700",children:a.jsx(Ln,{size:16})})]}),r&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-4xl max-h-[90vh] w-full flex flex-col relative",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[a.jsx("h3",{className:"text-lg font-medium",children:e.name}),a.jsx(Sr,{onClick:()=>s(!1)})]}),a.jsx("div",{className:"flex-grow overflow-auto p-4 flex items-center justify-center",children:c()})]})})]})},mt=({api_url:e,existingDocuments:t,newFiles:n,onNewFilesChange:r,onRemoveExistingDocument:s,label:i="Documents",readOnly:o=!1,multiple:l=!0})=>{const c=E.useRef(null),u=f=>{if(f.target.files){const b=Array.from(f.target.files);r(l?[...n,...b]:b.slice(0,1))}},m=f=>{r(n.filter(b=>b!==f))},h=l?[...t.map(f=>({...f,isNew:!1,_file:null})),...n.map(f=>({name:f.name,type:f.type,size:f.size,url:URL.createObjectURL(f),isNew:!0,_file:f}))]:n.length>0?n.map(f=>({name:f.name,type:f.type,size:f.size,url:URL.createObjectURL(f),isNew:!0,_file:f})):t.map(f=>({...f,isNew:!1,_file:null}));return a.jsxs("section",{className:"pb-4",children:[i&&a.jsx("h3",{className:"font-semibold mb-3",children:i}),!o&&a.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:a.jsxs("div",{className:"space-y-1 text-center",children:[a.jsx(Vf,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsxs("div",{className:"flex text-sm text-gray-600",children:[a.jsxs("label",{htmlFor:"attachment-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[a.jsx("span",{children:"Télécharger des fichiers"}),a.jsx("input",{id:"attachment-upload",name:"documents",type:"file",multiple:!0,className:"sr-only",onChange:u,ref:c})]}),a.jsx("p",{className:"pl-1",children:"ou glisser-déposer"})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Tous types de fichiers"})]})}),h.length>0&&a.jsx("div",{className:"space-y-2 mt-4",children:h.map((f,b)=>a.jsx("div",{className:"flex items-center justify-between p-2 border rounded-md bg-gray-50",children:a.jsx(BA,{file:f,api_url:e,onRemove:o?void 0:()=>{f.isNew&&f._file?m(f._file):f.isNew||s(f)}})},`${f.url}-${b}`))})]})};kn("fr",Sn);const mo=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},gv=e=>typeof e=="string"&&e.trim().length===0,JN=[{id:"pneuDeSecours",label:"PNEU DE SECOURS"},{id:"posteRadio",label:"POSTE RADIO"},{id:"cricManivelle",label:"CRIC MANIVELLE"},{id:"allumeCigare",label:"ALLUME CIGARE"},{id:"jeuDe4Tapis",label:"JEU DE 4 TAPIS"},{id:"vetDeSecurite",label:"VÊT.DE SÉCURITÉ"}],VA=({onSubmit:e,onClose:t,initialData:n=null,API_URL:r})=>{const s=E.useRef(null),[i,o]=E.useState((n==null?void 0:n.imageUrl)||null),[l,c]=E.useState([]),[u,m]=E.useState(n!=null&&n.circulationDate?new Date(n.circulationDate):null),[h,f]=E.useState(n!=null&&n.autorisationDate?new Date(n.autorisationDate):null),[b,v]=E.useState(n!=null&&n.autorisationValidity?new Date(n.autorisationValidity):null),[D,p]=E.useState(n!=null&&n.carteGriseDate?new Date(n.carteGriseDate):null),[y,w]=E.useState(n!=null&&n.carteGriseValidity?new Date(n.carteGriseValidity):null),[S,j]=E.useState({}),F=P=>{var Q;const V=(Q=P.target.files)==null?void 0:Q[0];if(V){const ee=new FileReader;ee.onloadend=()=>{o(ee.result)},ee.readAsDataURL(V)}},C=(P,V,Q,ee)=>{let ce="";return Q?typeof V=="string"&&V.trim()===""?ce=`${ee} ne peut pas être vide ou contenir uniquement des espaces.`:typeof V=="number"&&V<1?ce=`${ee} ne peut pas être inférieur à 1.`:V==null&&(ce=`${ee} est obligatoire.`):typeof V=="string"&&V.length>0&&V.trim()===""&&(ce=`${ee} ne peut pas contenir uniquement des espaces.`),j(fe=>({...fe,[P]:ce})),ce},T=P=>{P.preventDefault();const V=P.target,Q=new FormData(V),ee={chassisNumber:Q.get("chassisNumber"),temporaryPlate:Q.get("temporaryPlate"),licensePlate:Q.get("licensePlate"),brand:Q.get("brand"),model:Q.get("model"),circulationDate:Q.get("circulationDate"),fuelType:Q.get("fuelType"),fuelLevel:Q.get("fuelLevel"),mileage:Number(Q.get("mileage")),color:Q.get("color"),colorCode:Q.get("colorCode"),rentalPrice:Number(Q.get("rentalPrice")),nombreDePlaces:Number(Q.get("nombreDePlaces")),nombreDeVitesses:Number(Q.get("nombreDeVitesses")),transmission:Q.get("transmission"),observation:Q.get("observation"),statut:Q.get("statut"),equipment:{pneuDeSecours:Q.get("pneuDeSecours")==="on",posteRadio:Q.get("posteRadio")==="on",cricManivelle:Q.get("cricManivelle")==="on",allumeCigare:Q.get("allumeCigare")==="on",jeuDe4Tapis:Q.get("jeuDe4Tapis")==="on",vetDeSecurite:Q.get("vetDeSecurite")==="on"},autorisationDate:h?h.toISOString().split("T")[0]:void 0,autorisationValidity:b?b.toISOString().split("T")[0]:void 0,carteGriseDate:D?D.toISOString().split("T")[0]:void 0,carteGriseValidity:y?y.toISOString().split("T")[0]:void 0};let ce=!1;const fe={};fe.chassisNumber=C("chassisNumber",ee.chassisNumber,!0,"Numéro de châssis"),fe.temporaryPlate=C("temporaryPlate",ee.temporaryPlate,!1,"Matricule WW"),fe.licensePlate=C("licensePlate",ee.licensePlate,!0,"Matricule"),fe.brand=C("brand",ee.brand,!0,"Marque"),fe.model=C("model",ee.model,!0,"Modèle"),fe.color=C("color",ee.color,!1,"Couleur"),fe.colorCode=C("colorCode",ee.colorCode,!1,"Code couleur"),fe.observation=C("observation",ee.observation,!1,"Observation"),fe.nombreDePlaces=C("nombreDePlaces",ee.nombreDePlaces,!1,"Nombre de places"),fe.nombreDeVitesses=C("nombreDeVitesses",ee.nombreDeVitesses,!1,"Nombre de vitesses"),fe.rentalPrice=C("rentalPrice",ee.rentalPrice,!0,"Prix location"),fe.mileage=C("mileage",ee.mileage,!0,"Kilométrage"),fe.autorisationDate=C("autorisationDate",h,!0,"Date autorisation (I/C)"),fe.autorisationValidity=C("autorisationValidity",b,!0,"Validité autorisation"),fe.carteGriseDate=C("carteGriseDate",D,!0,"Date carte grise"),fe.carteGriseValidity=C("carteGriseValidity",y,!0,"Validité carte grise");for(const G in fe)if(fe[G]){ce=!0;break}if(j(fe),ce){le.error("Veuillez corriger les erreurs de validation.");return}i&&(ee.imageUrl=i),e(ee,l)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold",children:n?"Modifier le véhicule":"Ajouter un véhicule"}),a.jsx("button",{onClick:t,children:a.jsx(kr,{size:24})})]}),a.jsxs("form",{className:"space-y-6",onSubmit:T,children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informations véhicule"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro de châssis*"}),a.jsx("input",{name:"chassisNumber",type:"text",required:!0,className:`w-full border rounded-lg p-2 ${S.chassisNumber?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.chassisNumber,onChange:P=>C("chassisNumber",P.target.value,!0,"Numéro de châssis")}),S.chassisNumber&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.chassisNumber})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image du véhicule"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{type:"button",onClick:()=>{var P;return(P=s.current)==null?void 0:P.click()},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:[a.jsx(Ht,{size:16,className:"inline mr-2"}),"Choisir une image"]}),a.jsx("input",{type:"file",ref:s,className:"hidden",accept:"image/*",onChange:F})]}),i&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:i,alt:"Aperçu",className:"h-20 w-auto rounded-md"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Matricule WW"}),a.jsx("input",{name:"temporaryPlate",type:"text",className:`w-full border rounded-lg p-2 ${S.temporaryPlate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.temporaryPlate,onChange:P=>C("temporaryPlate",P.target.value,!1,"Matricule WW")}),S.temporaryPlate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.temporaryPlate})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Matricule*"}),a.jsx("input",{name:"licensePlate",type:"text",required:!0,className:`w-full border rounded-lg p-2 ${S.licensePlate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.licensePlate,onChange:P=>C("licensePlate",P.target.value,!0,"Matricule")}),S.licensePlate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.licensePlate})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marque*"}),a.jsx("input",{name:"brand",type:"text",required:!0,className:`w-full border rounded-lg p-2 ${S.brand?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.brand,onChange:P=>C("brand",P.target.value,!0,"Marque")}),S.brand&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.brand})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modèle*"}),a.jsx("input",{name:"model",type:"text",required:!0,className:`w-full border rounded-lg p-2 ${S.model?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.model,onChange:P=>C("model",P.target.value,!0,"Modèle")}),S.model&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.model})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date mise en circulation"}),a.jsx(Me,{selected:u,onChange:P=>m(P),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:"w-full border rounded-lg p-2"}),a.jsx("input",{type:"hidden",name:"circulationDate",value:u?u.toISOString().split("T")[0]:""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type carburant*"}),a.jsxs("select",{name:"fuelType",required:!0,className:"w-full border rounded-lg p-2",defaultValue:n==null?void 0:n.fuelType,children:[a.jsx("option",{value:"diesel",children:"Diesel"}),a.jsx("option",{value:"essence",children:"Essence"}),a.jsx("option",{value:"electrique",children:"Électrique"}),a.jsx("option",{value:"hybride",children:"Hybride"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau carburant*"}),a.jsxs("select",{name:"fuelLevel",required:!0,className:"w-full border rounded-lg p-2",defaultValue:n==null?void 0:n.fuelLevel,children:[a.jsx("option",{value:"reserve",children:"Réserve"}),a.jsx("option",{value:"1/4",children:"1/4"}),a.jsx("option",{value:"1/2",children:"1/2"}),a.jsx("option",{value:"3/4",children:"3/4"}),a.jsx("option",{value:"plein",children:"Plein"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kilométrage*"}),a.jsx("input",{name:"mileage",type:"number",required:!0,className:`w-full border rounded-lg p-2 ${S.mileage?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.mileage,onChange:P=>C("mileage",Number(P.target.value),!0,"Kilométrage")}),S.mileage&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.mileage})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Couleur"}),a.jsx("input",{name:"color",type:"text",className:`w-full border rounded-lg p-2 ${S.color?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.color,onChange:P=>C("color",P.target.value,!1,"Couleur")}),S.color&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.color})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code couleur"}),a.jsx("input",{name:"colorCode",type:"text",className:`w-full border rounded-lg p-2 ${S.colorCode?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.colorCode,onChange:P=>C("colorCode",P.target.value,!1,"Code couleur")}),S.colorCode&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.colorCode})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix location*"}),a.jsx("input",{name:"rentalPrice",type:"number",required:!0,className:`w-full border rounded-lg p-2 ${S.rentalPrice?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.rentalPrice,onChange:P=>C("rentalPrice",Number(P.target.value),!0,"Prix location")}),S.rentalPrice&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.rentalPrice})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de places"}),a.jsx("input",{name:"nombreDePlaces",type:"number",className:`w-full border rounded-lg p-2 ${S.nombreDePlaces?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.nombreDePlaces,onChange:P=>C("nombreDePlaces",Number(P.target.value),!1,"Nombre de places")}),S.nombreDePlaces&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.nombreDePlaces})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de vitesses"}),a.jsx("input",{name:"nombreDeVitesses",type:"number",className:`w-full border rounded-lg p-2 ${S.nombreDeVitesses?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.nombreDeVitesses,onChange:P=>C("nombreDeVitesses",Number(P.target.value),!1,"Nombre de vitesses")}),S.nombreDeVitesses&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.nombreDeVitesses})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transmission"}),a.jsxs("select",{name:"transmission",className:"w-full border rounded-lg p-2",defaultValue:(n==null?void 0:n.transmission)||"",children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"Manuelle",children:"Manuelle"}),a.jsx("option",{value:"Automatique",children:"Automatique"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut*"}),a.jsxs("select",{name:"statut",required:!0,className:"w-full border rounded-lg p-2",defaultValue:(n==null?void 0:n.statut)||"En parc",children:[a.jsx("option",{value:"En parc",children:"En parc"}),a.jsx("option",{value:"En circulation",children:"En circulation"})]})]}),a.jsxs("div",{className:"md:col-span-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observation"}),a.jsx("textarea",{name:"observation",className:`w-full border rounded-lg p-2 ${S.observation?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,rows:3,defaultValue:n==null?void 0:n.observation,onChange:P=>C("observation",P.target.value,!1,"Observation")}),S.observation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.observation})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Équipements/Accessoires"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:JN.map(P=>{var V;return a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{name:P.id,type:"checkbox",id:P.id,defaultChecked:(V=n==null?void 0:n.equipment)==null?void 0:V[P.id],className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:P.id,className:"ml-2 block text-sm text-gray-900",children:P.label})]},P.id)})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Papiers véhicule"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date autorisation (I/C)*"}),a.jsx(Me,{selected:h,onChange:P=>{f(P),C("autorisationDate",P,!0,"Date autorisation (I/C)")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`w-full border rounded-lg p-2 ${S.autorisationDate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),S.autorisationDate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.autorisationDate})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Validité autorisation*"}),a.jsx(Me,{selected:b,onChange:P=>{v(P),C("autorisationValidity",P,!0,"Validité autorisation")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`w-full border rounded-lg p-2 ${S.autorisationValidity?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),S.autorisationValidity&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.autorisationValidity})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date carte grise*"}),a.jsx(Me,{selected:D,onChange:P=>{p(P),C("carteGriseDate",P,!0,"Date carte grise")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`w-full border rounded-lg p-2 ${S.carteGriseDate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),S.carteGriseDate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.carteGriseDate})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Validité carte grise*"}),a.jsx(Me,{selected:y,onChange:P=>{w(P),C("carteGriseValidity",P,!0,"Validité carte grise")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`w-full border rounded-lg p-2 ${S.carteGriseValidity?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),S.carteGriseValidity&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.carteGriseValidity})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Documents"}),a.jsx(mt,{api_url:r,newFiles:l,onNewFilesChange:c,existingDocuments:(n==null?void 0:n.documents)||[],onRemoveExistingDocument:async()=>{}})]}),a.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:n?"Modifier":"Ajouter"})]})]})]})})},UA=({vehicle:e,onClose:t,editMode:n=!1,editedVehicle:r=null,onEdit:s=()=>{},onSave:i=()=>{},onCancel:o=()=>{},onInputChange:l=(m,h)=>{},onRemoveExistingDocument:c=async m=>Promise.resolve(),API_URL:u})=>{const[m,h]=E.useState([]),[f,b]=E.useState({});E.useEffect(()=>{n||(h([]),b({}))},[n]);const v=(p,y,w,S)=>{let j="";return w?typeof y=="string"&&y.trim()===""?j=`${S} ne peut pas être vide ou contenir uniquement des espaces.`:typeof y=="number"&&y<1?j=`${S} ne peut pas être inférieur à 1.`:y==null&&(j=`${S} est obligatoire.`):typeof y=="string"&&y.length>0&&y.trim()===""&&(j=`${S} ne peut pas contenir uniquement des espaces.`),b(F=>({...F,[p]:j})),j},D=()=>{if(!r)return;let p=!1;const y={};y.brand=v("brand",r.brand,!0,"Marque"),y.model=v("model",r.model,!0,"Modèle"),y.licensePlate=v("licensePlate",r.licensePlate,!0,"Matricule"),y.temporaryPlate=v("temporaryPlate",r.temporaryPlate,!1,"Matricule WW"),y.chassisNumber=v("chassisNumber",r.chassisNumber,!0,"Numéro de châssis"),y.color=v("color",r.color,!1,"Couleur"),y.colorCode=v("colorCode",r.colorCode,!1,"Code couleur"),y.observation=v("observation",r.observation,!1,"Observation"),y.nombreDePlaces=v("nombreDePlaces",r.nombreDePlaces,!1,"Nombre de places"),y.nombreDeVitesses=v("nombreDeVitesses",r.nombreDeVitesses,!1,"Nombre de vitesses"),y.mileage=v("mileage",r.mileage,!0,"Kilométrage"),y.rentalPrice=v("rentalPrice",r.rentalPrice,!0,"Prix location"),y.autorisationDate=v("autorisationDate",r.autorisationDate,!0,"Date autorisation (I/C)"),y.autorisationValidity=v("autorisationValidity",r.autorisationValidity,!0,"Validité autorisation"),y.carteGriseDate=v("carteGriseDate",r.carteGriseDate,!0,"Date carte grise"),y.carteGriseValidity=v("carteGriseValidity",r.carteGriseValidity,!0,"Validité carte grise");for(const w in y)if(y[w]){p=!0;break}if(b(y),p){le.error("Veuillez corriger les erreurs de validation.");return}i&&i(m)};return a.jsxs("div",{children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails du véhicule"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[n?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:D,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"}),a.jsx("button",{onClick:o,className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"})]}):a.jsx(tn,{onClick:s,withText:!0,className:"mr-2"}),a.jsx("button",{onClick:t,className:"p-2",children:a.jsx(kr,{size:20})})]})]}),a.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto max-h-[calc(100vh-150px)]",children:[a.jsx("div",{className:"mb-6 relative",children:(n?r!=null&&r.imageUrl:e.imageUrl)?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:n?r==null?void 0:r.imageUrl:e.imageUrl,alt:`${e.brand} ${e.model}`,className:"w-full h-48 object-cover rounded-lg"}),n&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-lg",children:a.jsxs("button",{type:"button",onClick:()=>{const p=document.createElement("input");p.type="file",p.accept="image/*",p.onchange=y=>{var S;const w=(S=y.target.files)==null?void 0:S[0];if(w){const j=new FileReader;j.onloadend=()=>{l("imageUrl",j.result)},j.readAsDataURL(w)}},p.click()},className:"px-4 py-2 bg-white text-gray-800 rounded-md shadow-sm hover:bg-gray-100 flex items-center",children:[a.jsx(Vf,{size:16,className:"mr-2"}),"Changer l'image"]})})]}):a.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:n?a.jsxs("button",{type:"button",onClick:()=>{const p=document.createElement("input");p.type="file",p.accept="image/*",p.onchange=y=>{var S;const w=(S=y.target.files)==null?void 0:S[0];if(w){const j=new FileReader;j.onloadend=()=>{l("imageUrl",j.result)},j.readAsDataURL(w)}},p.click()},className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 flex items-center",children:[a.jsx(Vf,{size:16,className:"mr-2"}),"Ajouter une image"]}):a.jsx(pt,{size:48,className:"text-gray-400"})})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informations générales"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Marque"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",className:`mt-1 w-full border rounded-lg p-2 ${f.brand?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.brand)||"",onChange:p=>{l("brand",p.target.value),v("brand",p.target.value,!0,"Marque")}}),f.brand&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.brand})]}):a.jsx("p",{className:"mt-1",children:e.brand})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Modèle"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",className:`mt-1 w-full border rounded-lg p-2 ${f.model?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.model)||"",onChange:p=>{l("model",p.target.value),v("model",p.target.value,!0,"Modèle")}}),f.model&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.model})]}):a.jsx("p",{className:"mt-1",children:e.model})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Matricule"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",className:`mt-1 w-full border rounded-lg p-2 ${f.licensePlate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.licensePlate)||"",onChange:p=>{l("licensePlate",p.target.value),v("licensePlate",p.target.value,!0,"Matricule")}}),f.licensePlate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.licensePlate})]}):a.jsx("p",{className:"mt-1",children:e.licensePlate})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Matricule WW"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",className:`mt-1 w-full border rounded-lg p-2 ${f.temporaryPlate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.temporaryPlate)||"",onChange:p=>{l("temporaryPlate",p.target.value),v("temporaryPlate",p.target.value,!1,"Matricule WW")}}),f.temporaryPlate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.temporaryPlate})]}):a.jsx("p",{className:"mt-1",children:e.temporaryPlate||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Numéro de châssis"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",className:`mt-1 w-full border rounded-lg p-2 ${f.chassisNumber?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.chassisNumber)||"",onChange:p=>{l("chassisNumber",p.target.value),v("chassisNumber",p.target.value,!0,"Numéro de châssis")}}),f.chassisNumber&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.chassisNumber})]}):a.jsx("p",{className:"mt-1",children:e.chassisNumber})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date mise en circulation"}),n?a.jsx(Me,{selected:r!=null&&r.circulationDate?new Date(r.circulationDate):null,onChange:p=>l("circulationDate",p?p.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1",children:mo(e.circulationDate)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Statut"}),n?a.jsxs("select",{className:"mt-1 w-full border rounded-lg p-2",value:(r==null?void 0:r.statut)||"En parc",onChange:p=>l("statut",p.target.value),children:[a.jsx("option",{value:"En parc",children:"En parc"}),a.jsx("option",{value:"En circulation",children:"En circulation"})]}):a.jsx("p",{className:"mt-1",children:e.statut||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Nombre de places"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",className:`mt-1 w-full border rounded-lg p-2 ${f.nombreDePlaces?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.nombreDePlaces)||0,onChange:p=>{l("nombreDePlaces",parseInt(p.target.value)),v("nombreDePlaces",Number(p.target.value),!1,"Nombre de places")}}),f.nombreDePlaces&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.nombreDePlaces})]}):a.jsx("p",{className:"mt-1",children:e.nombreDePlaces||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Nombre de vitesses"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",className:`mt-1 w-full border rounded-lg p-2 ${f.nombreDeVitesses?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.nombreDeVitesses)||0,onChange:p=>{l("nombreDeVitesses",parseInt(p.target.value)),v("nombreDeVitesses",Number(p.target.value),!1,"Nombre de vitesses")}}),f.nombreDeVitesses&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.nombreDeVitesses})]}):a.jsx("p",{className:"mt-1",children:e.nombreDeVitesses||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Transmission"}),n?a.jsxs("select",{className:"mt-1 w-full border rounded-lg p-2",value:(r==null?void 0:r.transmission)||"",onChange:p=>l("transmission",p.target.value),children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"Manuelle",children:"Manuelle"}),a.jsx("option",{value:"Automatique",children:"Automatique"})]}):a.jsx("p",{className:"mt-1",children:e.transmission||"-"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Kilométrage et carburant"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Kilométrage"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",className:`mt-1 w-full border rounded-lg p-2 ${f.mileage?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.mileage)||0,onChange:p=>{l("mileage",parseInt(p.target.value)),v("mileage",Number(p.target.value),!0,"Kilométrage")}}),f.mileage&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.mileage})]}):a.jsxs("p",{className:"mt-1",children:[e.mileage.toLocaleString()," km"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Type carburant"}),n?a.jsxs("select",{className:"mt-1 w-full border rounded-lg p-2",value:(r==null?void 0:r.fuelType)||"diesel",onChange:p=>l("fuelType",p.target.value),children:[a.jsx("option",{value:"diesel",children:"Diesel"}),a.jsx("option",{value:"essence",children:"Essence"}),a.jsx("option",{value:"electrique",children:"Électrique"}),a.jsx("option",{value:"hybride",children:"Hybride"})]}):a.jsx("p",{className:"mt-1",children:e.fuelType})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Niveau carburant"}),n?a.jsxs("select",{className:"mt-1 w-full border rounded-lg p-2",value:(r==null?void 0:r.fuelLevel)||"plein",onChange:p=>l("fuelLevel",p.target.value),children:[a.jsx("option",{value:"reserve",children:"Réserve"}),a.jsx("option",{value:"1/4",children:"1/4"}),a.jsx("option",{value:"1/2",children:"1/2"}),a.jsx("option",{value:"3/4",children:"3/4"}),a.jsx("option",{value:"plein",children:"Plein"})]}):a.jsx("p",{className:"mt-1",children:e.fuelLevel})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Apparence"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Couleur"}),n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",className:`mt-1 w-full border rounded-lg p-2 ${f.color?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.color)||"",onChange:p=>{l("color",p.target.value),v("color",p.target.value,!1,"Couleur")}}),f.color&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.color})]}):a.jsx("p",{className:"mt-1",children:e.color})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Code couleur"}),n?a.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[a.jsx("input",{type:"text",className:`w-full border rounded-lg p-2 ${f.colorCode?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.colorCode)||"",onChange:p=>{l("colorCode",p.target.value),v("colorCode",p.target.value,!1,"Code couleur")},placeholder:"#RRGGBB"}),(r==null?void 0:r.colorCode)&&a.jsx("div",{className:"w-6 h-6 border rounded flex-shrink-0",style:{backgroundColor:r.colorCode}}),f.colorCode&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.colorCode})]}):e.colorCode?a.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[a.jsx("span",{children:e.colorCode}),a.jsx("div",{className:"w-6 h-6 border rounded",style:{backgroundColor:e.colorCode}})]}):a.jsx("p",{className:"mt-1",children:"-"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Prix"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Prix de location"}),n?a.jsxs("div",{className:"mt-1 flex items-center",children:[a.jsx("input",{type:"number",className:`w-32 border rounded-lg p-2 ${f.rentalPrice?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.rentalPrice)||0,onChange:p=>{l("rentalPrice",Number(p.target.value)),v("rentalPrice",Number(p.target.value),!0,"Prix location")},min:"0",step:"10"}),a.jsx("span",{className:"ml-2 text-gray-500",children:"DH/jour"}),f.rentalPrice&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.rentalPrice})]}):a.jsxs("p",{className:"mt-1 text-lg font-semibold text-blue-600",children:[e.rentalPrice," DH",a.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/jour"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Équipements"}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:JN.map(p=>{var y,w;return a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:(n?(y=r==null?void 0:r.equipment)==null?void 0:y[p.id]:(w=e.equipment)==null?void 0:w[p.id])||!1,onChange:n?S=>l(`equipment.${p.id}`,S.target.checked):void 0,readOnly:!n,className:"h-4 w-4 text-blue-600 border-gray-300 rounded cursor-pointer"}),a.jsx("label",{className:`ml-2 block text-sm text-gray-900 ${n?"cursor-pointer":""}`,children:p.label})]},p.id)})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Papiers véhicule"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date autorisation (I/C)*"}),n?a.jsxs(a.Fragment,{children:[a.jsx(Me,{selected:r!=null&&r.autorisationDate?new Date(r.autorisationDate):null,onChange:p=>{l("autorisationDate",p?p.toISOString().split("T")[0]:""),v("autorisationDate",p,!0,"Date autorisation (I/C)")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`mt-1 w-full border rounded-lg p-2 ${f.autorisationDate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.autorisationDate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.autorisationDate})]}):a.jsx("p",{className:"mt-1",children:mo(e.autorisationDate)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Validité autorisation*"}),n?a.jsxs(a.Fragment,{children:[a.jsx(Me,{selected:r!=null&&r.autorisationValidity?new Date(r.autorisationValidity):null,onChange:p=>{l("autorisationValidity",p?p.toISOString().split("T")[0]:""),v("autorisationValidity",p,!0,"Validité autorisation")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`mt-1 w-full border rounded-lg p-2 ${f.autorisationValidity?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.autorisationValidity&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.autorisationValidity})]}):a.jsx("p",{className:"mt-1",children:mo(e.autorisationValidity)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date carte grise*"}),n?a.jsxs(a.Fragment,{children:[a.jsx(Me,{selected:r!=null&&r.carteGriseDate?new Date(r.carteGriseDate):null,onChange:p=>{l("carteGriseDate",p?p.toISOString().split("T")[0]:""),v("carteGriseDate",p,!0,"Date carte grise")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`mt-1 w-full border rounded-lg p-2 ${f.carteGriseDate?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.carteGriseDate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.carteGriseDate})]}):a.jsx("p",{className:"mt-1",children:mo(e.carteGriseDate)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Validité carte grise*"}),n?a.jsxs(a.Fragment,{children:[a.jsx(Me,{selected:r!=null&&r.carteGriseValidity?new Date(r.carteGriseValidity):null,onChange:p=>{l("carteGriseValidity",p?p.toISOString().split("T")[0]:""),v("carteGriseValidity",p,!0,"Validité carte grise")},dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:`mt-1 w-full border rounded-lg p-2 ${f.carteGriseValidity?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.carteGriseValidity&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.carteGriseValidity})]}):a.jsx("p",{className:"mt-1",children:mo(e.carteGriseValidity)})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(dl,{size:18,className:"mr-2 text-gray-500"}),"Observation"]})}),n?a.jsxs(a.Fragment,{children:[a.jsx("textarea",{className:`w-full border rounded-lg p-2 min-h-[100px] ${f.observation?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:(r==null?void 0:r.observation)||"",onChange:p=>{l("observation",p.target.value),v("observation",p.target.value,!1,"Observation")},placeholder:"Ajouter une observation..."}),f.observation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.observation})]}):e.observation&&a.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.observation})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(dl,{size:18,className:"mr-2 text-gray-500"}),"Documents"]})}),a.jsx(mt,{api_url:u,newFiles:m,onNewFilesChange:h,existingDocuments:n?(r==null?void 0:r.documents)||[]:e.documents||[],onRemoveExistingDocument:c,readOnly:!n,label:""})]})]})]})]})},WA=()=>{const[e,t]=E.useState([]),[n,r]=E.useState(""),[s,i]=E.useState("all"),[o,l]=E.useState(!1),[c,u]=E.useState(null),[m,h]=E.useState(null),[f,b]=E.useState(!1),[v,D]=E.useState(null),[p,y]=E.useState([]),[w,S]=E.useState(!0),[j,F]=E.useState(null),C="http://localhost:5000/api/vehicles",T=E.useCallback(async()=>{S(!0),F(null);try{const $=await we.get(C);console.log("Fetched vehicles:",$.data),t($.data),le.success("Vehicles loaded successfully!")}catch($){console.error("Error fetching vehicles:",$),F("Failed to load vehicles."),le.error("Failed to load vehicles.")}finally{S(!1)}},[]);E.useEffect(()=>{T()},[T]);const P=async($,H)=>{try{const Y=H.map(X=>({name:X.name,type:X.type,size:X.size,url:URL.createObjectURL(X)}));if(c){const X={...$,documents:[...c.documents||[],...Y]},J=await we.put(`${C}/${c._id}`,X);t(e.map(he=>he._id===c._id?J.data:he)),h(J.data),le.success("Vehicle updated successfully!")}else{const X={...$,documents:Y},J=await we.post(C,X);t([...e,J.data]),le.success("Vehicle added successfully!")}l(!1),u(null),y([])}catch(Y){console.error("Error submitting vehicle:",Y),le.error("Failed to save vehicle.")}},V=e.filter($=>{const H=$.brand.toLowerCase().includes(n.toLowerCase())||$.model.toLowerCase().includes(n.toLowerCase())||$.licensePlate.toLowerCase().includes(n.toLowerCase()),Y=s==="all"||$.statut===s;return H&&Y}),Q=()=>{m&&(D({...m}),b(!0),y([]))},ee=async $=>{var Y;if(!v)return;const H=[{name:"Marque",value:v.brand,required:!0},{name:"Modèle",value:v.model,required:!0},{name:"Matricule",value:v.licensePlate,required:!0},{name:"Matricule WW",value:v.temporaryPlate,required:!1},{name:"Numéro de châssis",value:v.chassisNumber,required:!0},{name:"Couleur",value:v.color,required:!1},{name:"Code couleur",value:v.colorCode,required:!1},{name:"Observation",value:v.observation,required:!1}];for(const X of H){if(X.required&&gv(X.value)){le.error(`${X.name} ne peut pas être vide ou contenir uniquement des espaces.`);return}if(!X.required&&X.value&&gv(X.value)){le.error(`${X.name} ne peut pas contenir uniquement des espaces.`);return}}if(v.nombreDePlaces!==void 0&&v.nombreDePlaces<1){le.error("Nombre de places ne peut pas être inférieur à 1.");return}if(v.nombreDeVitesses!==void 0&&v.nombreDeVitesses<1){le.error("Nombre de vitesses ne peut pas être inférieur à 1.");return}try{const X=((Y=v.documents)==null?void 0:Y.filter(se=>!se.url.startsWith("blob:")))||[],J=$.map(se=>({name:se.name,type:se.type,size:se.size,url:URL.createObjectURL(se)})),he={...v,documents:[...X,...J]},Se=await we.put(`${C}/${v._id}`,he);console.log("Backend response after update:",Se.data),t(e.map(se=>se._id===Se.data._id?Se.data:se)),h(Se.data),b(!1),D(null),y([]),le.success("Vehicle updated successfully!")}catch(X){console.error("Error saving vehicle edit:",X),le.error("Failed to save vehicle changes.")}},ce=()=>{b(!1),D(null),y([])},fe=($,H)=>{if(v){const Y={...v};if($.includes(".")){const[X,J]=$.split(".");X==="equipment"&&(Y.equipment={...Y.equipment,[J]:typeof H=="boolean"?H:H==="true"||H==="on"})}else Y[$]=H;D(Y)}},G=async $=>{var H;if(v)try{const Y=((H=v.documents)==null?void 0:H.filter(X=>X.url!==$.url))||[];D({...v,documents:Y}),console.log("Simulating document deletion for:",$.url),le.success("Document removed successfully (simulated)!"),t(X=>X.map(J=>J._id===v._id?{...J,documents:Y}:J)),h(X=>(X==null?void 0:X._id)===v._id?{...X,documents:Y}:X)}catch(Y){console.error("Error removing document:",Y),le.error("Failed to remove document."),D({...v})}},re=async $=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce véhicule ?"))try{await we.delete(`${C}/${$}`),t(e.filter(H=>H._id!==$)),(m==null?void 0:m._id)===$&&(h(null),b(!1),D(null)),le.success("Vehicle deleted successfully!")}catch(H){console.error("Error deleting vehicle:",H),le.error("Failed to delete vehicle.")}};return w?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading vehicles..."})}):j?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:j}),a.jsx("button",{onClick:T,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Véhicules"}),a.jsxs("button",{onClick:()=>{u(null),l(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Ajouter un véhicule"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Rechercher un véhicule...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:n,onChange:$=>r($.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"statut-filter",className:"sr-only",children:"Filtrer par statut"}),a.jsxs("select",{id:"statut-filter",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:s,onChange:$=>i($.target.value),children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"En parc",children:"En parc"}),a.jsx("option",{value:"En circulation",children:"En circulation"})]})]})]})}),a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Détails"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Carburant"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix/jour"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map($=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>h($),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[$.imageUrl?a.jsx("img",{src:$.imageUrl,alt:`${$.brand} ${$.model}`,className:"h-10 w-10 rounded-full object-cover"}):a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsx(pt,{size:20,className:"text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[$.brand," ",$.model]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[$.licensePlate,$.temporaryPlate&&` (WW: ${$.temporaryPlate})`]})]})]})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm text-gray-900",children:$.chassisNumber}),a.jsxs("div",{className:"text-sm text-gray-500",children:[$.mileage.toLocaleString()," km"]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${$.statut==="En parc"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:$.statut})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:$.fuelType}),a.jsx("div",{className:"text-sm text-gray-500",children:$.fuelLevel})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600",children:[$.rentalPrice," DH/jour"]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(tn,{onClick:H=>{H.stopPropagation(),h($),D({...$}),b(!0)},size:"md",className:"mr-3"}),a.jsx("button",{onClick:H=>{H.stopPropagation(),re($._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Ln,{size:18})})]})]},$._id))})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:m?a.jsx("div",{className:"bg-white shadow rounded-lg",children:a.jsx(UA,{vehicle:m,onClose:()=>h(null),editMode:f,editedVehicle:v,onEdit:Q,onSave:ee,onCancel:ce,onInputChange:fe,onRemoveExistingDocument:G,API_URL:C})}):a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-center h-full py-10",children:[a.jsx(pt,{size:64,className:"text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucun véhicule sélectionné"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Sélectionnez un véhicule pour voir ses détails"}),a.jsxs("button",{onClick:()=>{u(null),l(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Ajouter un véhicule"]})]})})})]}),o&&a.jsx(VA,{onSubmit:P,onClose:()=>{l(!1),u(null)},initialData:c,API_URL:C})]})},XN=[{code:"MA",name:"Maroc"},{code:"FR",name:"France"},{code:"ES",name:"Espagne"},{code:"IT",name:"Italie"},{code:"DE",name:"Allemagne"},{code:"UK",name:"Royaume-Uni"},{code:"US",name:"États-Unis"},{code:"CA",name:"Canada"},{code:"AL",name:"Algeria"},{code:"TN",name:"Tunisie"},{code:"DZ",name:"Algérie"},{code:"PT",name:"Portugal"},{code:"BE",name:"Belgique"},{code:"NL",name:"Pays-Bas"},{code:"CH",name:"Suisse"},{code:"AT",name:"Autriche"},{code:"NO",name:"Norvège"},{code:"SE",name:"Suède"},{code:"FI",name:"Finlande"},{code:"DK",name:"Danemark"},{code:"IE",name:"Irlande"},{code:"LU",name:"Luxembourg"},{code:"LI",name:"Liechtenstein"},{code:"IS",name:"Islande"},{code:"EE",name:"Estonie"},{code:"LT",name:"Lituanie"},{code:"LV",name:"Lettonie"},{code:"BG",name:"Bulgarie"},{code:"RO",name:"Roumanie"},{code:"SK",name:"Slovaquie"},{code:"CZ",name:"République tchèque"},{code:"HR",name:"Croatie"},{code:"SI",name:"Slovénie"},{code:"GR",name:"Grèce"},{code:"MD",name:"Moldavie"},{code:"UA",name:"Ukraine"},{code:"BY",name:"Biélorussie"},{code:"KZ",name:"Kazakhstan"},{code:"UZ",name:"Ouzbékistan"},{code:"KG",name:"Kirghizistan"},{code:"TJ",name:"Tadjikistan"},{code:"TM",name:"Turkménistan"},{code:"AZ",name:"Azerbaïdjan"},{code:"AM",name:"Arménie"},{code:"GE",name:"Géorgie"},{code:"AF",name:"Afghanistan"},{code:"PK",name:"Pakistan"},{code:"IN",name:"Inde"},{code:"BD",name:"Bangladesh"},{code:"LK",name:"Sri Lanka"},{code:"NP",name:"Népal"},{code:"BT",name:"Bhoutan"},{code:"MV",name:"Maldives"},{code:"TH",name:"Thaïlande"},{code:"VN",name:"Vietnam"},{code:"KH",name:"Cambodge"},{code:"LA",name:"Laos"},{code:"MY",name:"Malaisie"},{code:"SG",name:"Singapour"},{code:"PH",name:"Philippines"},{code:"ID",name:"Indonésie"},{code:"TL",name:"Timor oriental"},{code:"BN",name:"Brunéi"},{code:"MM",name:"Birmanie"},{code:"KH",name:"Cambodge"},{code:"MN",name:"Mongolie"},{code:"JP",name:"Japon"},{code:"KR",name:"Corée du Sud"},{code:"KP",name:"Corée du Nord"},{code:"CN",name:"Chine"},{code:"HK",name:"Hong Kong"},{code:"MO",name:"Macao"},{code:"MA",name:"Maroc"},{code:"FR",name:"France"},{code:"ES",name:"Espagne"},{code:"IT",name:"Italie"},{code:"DE",name:"Allemagne"},{code:"UK",name:"Royaume-Uni"},{code:"US",name:"États-Unis"}];kn("fr",Sn);const Tm=e=>typeof e=="string"&&e.trim().length===0,YA=({onSubmit:e,onClose:t,initialData:n,readOnly:r=!1,existingDocuments:s=[],onRemoveExistingDocument:i,api_url:o})=>{const[l,c]=E.useState([]),[u,m]=E.useState([]),[h,f]=E.useState({}),[b,v]=E.useState({civilite:(n==null?void 0:n.civilite)||"",nationalite:(n==null?void 0:n.nationalite)||"",type:(n==null?void 0:n.type)||"Particulier",listeNoire:(n==null?void 0:n.listeNoire)||!1,nomFr:(n==null?void 0:n.nomFr)||"",nomAr:(n==null?void 0:n.nomAr)||"",prenomFr:(n==null?void 0:n.prenomFr)||"",prenomAr:(n==null?void 0:n.prenomAr)||"",dateNaissance:(n==null?void 0:n.dateNaissance)||"",age:(n==null?void 0:n.age)||"",lieuNaissance:(n==null?void 0:n.lieuNaissance)||"",ice:(n==null?void 0:n.ice)||"",cin:(n==null?void 0:n.cin)||"",cinDelivreLe:(n==null?void 0:n.cinDelivreLe)||"",cinDelivreA:(n==null?void 0:n.cinDelivreA)||"",cinValidite:(n==null?void 0:n.cinValidite)||"",numeroPermis:(n==null?void 0:n.numeroPermis)||"",permisDelivreLe:(n==null?void 0:n.permisDelivreLe)||"",permisDelivreA:(n==null?void 0:n.permisDelivreA)||"",permisValidite:(n==null?void 0:n.permisValidite)||"",numeroPasseport:(n==null?void 0:n.numeroPasseport)||"",passportDelivreLe:(n==null?void 0:n.passportDelivreLe)||"",passportDelivreA:(n==null?void 0:n.passportDelivreA)||"",passportValidite:(n==null?void 0:n.passportValidite)||"",adresseFr:(n==null?void 0:n.adresseFr)||"",ville:(n==null?void 0:n.ville)||"",adresseAr:(n==null?void 0:n.adresseAr)||"",codePostal:(n==null?void 0:n.codePostal)||"",telephone:(n==null?void 0:n.telephone)||"",telephone2:(n==null?void 0:n.telephone2)||"",fix:(n==null?void 0:n.fix)||"",fax:(n==null?void 0:n.fax)||"",remarque:(n==null?void 0:n.remarque)||"",email:(n==null?void 0:n.email)||""});E.useEffect(()=>{if(b.dateNaissance){const S=new Date(b.dateNaissance),j=new Date;let F=j.getFullYear()-S.getFullYear();const C=j.getMonth()-S.getMonth();(C<0||C===0&&j.getDate()<S.getDate())&&F--,v(T=>({...T,age:F.toString()})),F<18?f(T=>({...T,dateNaissance:"Le client doit avoir au moins 18 ans."})):f(T=>{const P={...T};return delete P.dateNaissance,P})}else f(S=>{const j={...S};return delete j.dateNaissance,j})},[b.dateNaissance]);const D=S=>{c(S)},p=async S=>{i&&m(j=>[...j,S])},y=S=>{if(S.preventDefault(),r)return;let j={};j={...h};const F=["nomFr","nomAr","prenomFr","prenomAr","lieuNaissance","cin","cinDelivreA","numeroPermis","permisDelivreA","numeroPasseport","passportDelivreA","adresseFr","ville","adresseAr","codePostal","telephone","telephone2","fix","fax","remarque","email"],C=["civilite","nationalite","type","nomFr","prenomFr","dateNaissance","lieuNaissance","cin","cinDelivreLe","cinDelivreA","cinValidite","numeroPermis","permisDelivreLe","permisDelivreA","permisValidite"];if(b.permisDelivreLe){const T=new Date(b.permisDelivreLe),P=new Date;P.setFullYear(P.getFullYear()-2),T>P&&(j.permisDelivreLe="La date de délivrance du permis doit être supérieure à 2 ans.")}if(C.forEach(T=>{(!b[T]||typeof b[T]=="string"&&Tm(b[T]))&&(j[T]="Ce champ est obligatoire et ne peut pas contenir uniquement des espaces.")}),F.forEach(T=>{b[T]&&Tm(b[T])&&(j[T]="Ce champ ne peut pas contenir uniquement des espaces.")}),f(j),Object.keys(j).length>0){alert("Veuillez corriger les erreurs de validation.");return}e(b,l,u)},w=S=>{const{name:j,value:F,type:C}=S.target,T=C==="checkbox"?S.target.checked:void 0;if((C==="text"||C==="textarea"||C==="email"||C==="tel")&&(F.length>0&&Tm(F)?f(P=>({...P,[j]:"Ce champ ne peut pas contenir uniquement des espaces."})):f(P=>{const V={...P};return delete V[j],V})),v(P=>({...P,[j]:C==="checkbox"?T:F})),j==="permisDelivreLe"&&F){const P=new Date(F),V=new Date;V.setFullYear(V.getFullYear()-2),P>V?f(Q=>({...Q,permisDelivreLe:"La date de délivrance du permis doit être supérieure à 2 ans."})):f(Q=>{const ee={...Q};return delete ee.permisDelivreLe,ee})}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sr,{onClick:t}),a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h2",{className:"text-2xl font-bold",children:n?"Modifier le client":"Ajouter un client"})}),a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Conducteur"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Civilité (*)"}),a.jsxs("select",{name:"civilite",value:b.civilite,onChange:w,className:"w-full border rounded p-2",required:!0,disabled:r,children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"M.",children:"M."}),a.jsx("option",{value:"Mme",children:"Mme"}),a.jsx("option",{value:"Mlle",children:"Mlle"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Nationalité (*)"}),a.jsxs("select",{name:"nationalite",value:b.nationalite,onChange:w,className:"w-full border rounded p-2",required:!0,disabled:r,children:[a.jsx("option",{value:"",children:"Sélectionner"}),XN.map(S=>a.jsx("option",{value:S.name,children:S.name},S.code))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Type (*)"}),a.jsxs("select",{name:"type",value:b.type,onChange:w,className:"w-full border rounded p-2",required:!0,disabled:r,children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"Particulier",children:"Particulier"}),a.jsx("option",{value:"Professionel",children:"Professionel"})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",name:"listeNoire",checked:b.listeNoire,onChange:S=>w({target:{name:"listeNoire",type:"checkbox",checked:S.target.checked,value:S.target.checked.toString()}}),className:"mr-2",disabled:r}),a.jsx("label",{children:"Liste noire"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Nom français (*)"}),a.jsx("input",{type:"text",name:"nomFr",value:b.nomFr,onChange:w,className:`w-full border rounded p-2 ${h.nomFr?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.nomFr&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.nomFr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Nom arabe"}),a.jsx("input",{type:"text",name:"nomAr",value:b.nomAr,onChange:w,className:`w-full border rounded p-2 ${h.nomAr?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,dir:"rtl",readOnly:r}),h.nomAr&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.nomAr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Prénom français (*)"}),a.jsx("input",{type:"text",name:"prenomFr",value:b.prenomFr,onChange:w,className:`w-full border rounded p-2 ${h.prenomFr?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.prenomFr&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.prenomFr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Prénom arabe"}),a.jsx("input",{type:"text",name:"prenomAr",value:b.prenomAr,onChange:w,className:`w-full border rounded p-2 ${h.prenomAr?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,dir:"rtl",readOnly:r}),h.prenomAr&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.prenomAr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Date naissance (*)"}),a.jsx(Me,{selected:b.dateNaissance?new Date(b.dateNaissance):null,onChange:S=>w({target:{name:"dateNaissance",value:S?S.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:`w-full border rounded p-2 ${h.dateNaissance?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,disabled:r}),h.dateNaissance&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.dateNaissance})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Age"}),a.jsx("input",{type:"text",name:"age",value:b.age,className:"w-full border rounded p-2",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Lieu de naissance (*)"}),a.jsx("input",{type:"text",name:"lieuNaissance",value:b.lieuNaissance,onChange:w,className:`w-full border rounded p-2 ${h.lieuNaissance?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.lieuNaissance&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.lieuNaissance})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"ICE"}),a.jsx("input",{type:"text",name:"ice",value:b.ice,onChange:w,className:`w-full border rounded p-2 ${h.ice?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.ice&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.ice})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Pièce d'identité"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"C.I.N (*)"}),a.jsx("input",{type:"text",name:"cin",value:b.cin,onChange:w,className:`w-full border rounded p-2 ${h.cin?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.cin&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.cin})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Délivré le (*)"}),a.jsx(Me,{selected:b.cinDelivreLe?new Date(b.cinDelivreLe):null,onChange:S=>w({target:{name:"cinDelivreLe",value:S?S.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded p-2",required:!0,disabled:r})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Délivrée à (*)"}),a.jsx("input",{type:"text",name:"cinDelivreA",value:b.cinDelivreA,onChange:w,className:`w-full border rounded p-2 ${h.cinDelivreA?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.cinDelivreA&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.cinDelivreA})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Validité (*)"}),a.jsx(Me,{selected:b.cinValidite?new Date(b.cinValidite):null,onChange:S=>w({target:{name:"cinValidite",value:S?S.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded p-2",required:!0,disabled:r})]})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Numéro permis (*)"}),a.jsx("input",{type:"text",name:"numeroPermis",value:b.numeroPermis,onChange:w,className:`w-full border rounded p-2 ${h.numeroPermis?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.numeroPermis&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.numeroPermis})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Délivré le (*)"}),a.jsx(Me,{selected:b.permisDelivreLe?new Date(b.permisDelivreLe):null,onChange:S=>w({target:{name:"permisDelivreLe",value:S?S.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded p-2",required:!0,disabled:r}),h.permisDelivreLe&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.permisDelivreLe})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Délivrée à (*)"}),a.jsx("input",{type:"text",name:"permisDelivreA",value:b.permisDelivreA,onChange:w,className:`w-full border rounded p-2 ${h.permisDelivreA?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0,readOnly:r}),h.permisDelivreA&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.permisDelivreA})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Validité (*)"}),a.jsx(Me,{selected:b.permisValidite?new Date(b.permisValidite):null,onChange:S=>w({target:{name:"permisValidite",value:S?S.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded p-2",required:!0,disabled:r})]})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Numéro passeport"}),a.jsx("input",{type:"text",name:"numeroPasseport",value:b.numeroPasseport,onChange:w,className:`w-full border rounded p-2 ${h.numeroPasseport?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.numeroPasseport&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.numeroPasseport})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Délivré le"}),a.jsx(Me,{selected:b.passportDelivreLe?new Date(b.passportDelivreLe):null,onChange:S=>w({target:{name:"passportDelivreLe",value:S?S.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded p-2",disabled:r})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Délivrée à"}),a.jsx("input",{type:"text",name:"passportDelivreA",value:b.passportDelivreA,onChange:w,className:`w-full border rounded p-2 ${h.passportDelivreA?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.passportDelivreA&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.passportDelivreA})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Validité"}),a.jsx(Me,{selected:b.passportValidite?new Date(b.passportValidite):null,onChange:S=>w({target:{name:"passportValidite",value:S?S.toISOString().split("T")[0]:"",type:"text"}}),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded p-2",disabled:r})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Email"}),a.jsx("input",{type:"email",name:"email",value:b.email,onChange:w,className:`w-full border rounded p-2 ${h.email?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.email&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Adresse"}),a.jsx("input",{type:"text",name:"adresseFr",value:b.adresseFr,onChange:w,className:`w-full border rounded p-2 ${h.adresseFr?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.adresseFr&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.adresseFr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Ville"}),a.jsx("input",{type:"text",name:"ville",value:b.ville,onChange:w,className:`w-full border rounded p-2 ${h.ville?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.ville&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.ville})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Adresse au l'étranger"}),a.jsx("input",{type:"text",name:"adresseAr",value:b.adresseAr,onChange:w,className:`w-full border rounded p-2 ${h.adresseAr?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.adresseAr&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.adresseAr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Code postal"}),a.jsx("input",{type:"text",name:"codePostal",value:b.codePostal,onChange:w,className:`w-full border rounded p-2 ${h.codePostal?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.codePostal&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.codePostal})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Téléphone"}),a.jsx("input",{type:"tel",name:"telephone",value:b.telephone,onChange:w,className:`w-full border rounded p-2 ${h.telephone?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.telephone&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.telephone})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Téléphone 2"}),a.jsx("input",{type:"tel",name:"telephone2",value:b.telephone2,onChange:w,className:`w-full border rounded p-2 ${h.telephone2?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.telephone2&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.telephone2})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Fix"}),a.jsx("input",{type:"tel",name:"fix",value:b.fix,onChange:w,className:`w-full border rounded p-2 ${h.fix?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.fix&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.fix})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1",children:"Fax"}),a.jsx("input",{type:"tel",name:"fax",value:b.fax,onChange:w,className:`w-full border rounded p-2 ${h.fax?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.fax&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.fax})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block mb-1",children:"Remarque"}),a.jsx("textarea",{name:"remarque",value:b.remarque,onChange:w,className:`w-full border rounded p-2 h-24 ${h.remarque?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,readOnly:r}),h.remarque&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.remarque})]})]})]}),a.jsx(mt,{api_url:o,existingDocuments:s,newFiles:l,onNewFilesChange:D,onRemoveExistingDocument:p,label:"Documents",readOnly:r}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded hover:bg-gray-100",children:"Annuler"}),!r&&a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Enregistrer"})]})]})]})})};var ZN={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.106
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(e,t){(function(n,r){e.exports=r(E)})(ij,function(n){return function(){var r={442:function(l){l.exports=n},548:function(l){l.exports=function(){var c={34:function(_,O,d){var g=d(4901);_.exports=function(N){return typeof N=="object"?N!==null:g(N)}},81:function(_,O,d){var g=d(9565),N=d(9306),k=d(8551),x=d(6823),M=d(851),A=TypeError;_.exports=function(L,R){var B=arguments.length<2?M(L):R;if(N(B))return k(g(B,L));throw new A(x(L)+" is not iterable")}},235:function(_,O,d){var g=d(9213).forEach,N=d(4598)("forEach");_.exports=N?[].forEach:function(k){return g(this,k,arguments.length>1?arguments[1]:void 0)}},283:function(_,O,d){var g=d(9504),N=d(9039),k=d(4901),x=d(9297),M=d(3724),A=d(350).CONFIGURABLE,L=d(3706),R=d(1181),B=R.enforce,W=R.get,K=String,U=Object.defineProperty,ne=g("".slice),Z=g("".replace),oe=g([].join),ae=M&&!N(function(){return U(function(){},"length",{value:8}).length!==8}),ue=String(String).split("String"),te=_.exports=function(ie,me,pe){ne(K(me),0,7)==="Symbol("&&(me="["+Z(K(me),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),pe&&pe.getter&&(me="get "+me),pe&&pe.setter&&(me="set "+me),(!x(ie,"name")||A&&ie.name!==me)&&(M?U(ie,"name",{value:me,configurable:!0}):ie.name=me),ae&&pe&&x(pe,"arity")&&ie.length!==pe.arity&&U(ie,"length",{value:pe.arity});try{pe&&x(pe,"constructor")&&pe.constructor?M&&U(ie,"prototype",{writable:!1}):ie.prototype&&(ie.prototype=void 0)}catch{}var xe=B(ie);return x(xe,"source")||(xe.source=oe(ue,typeof me=="string"?me:"")),ie};Function.prototype.toString=te(function(){return k(this)&&W(this).source||L(this)},"toString")},298:function(_,O,d){var g=d(2195),N=d(5397),k=d(8480).f,x=d(7680),M=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];_.exports.f=function(A){return M&&g(A)==="Window"?function(L){try{return k(L)}catch{return x(M)}}(A):k(N(A))}},350:function(_,O,d){var g=d(3724),N=d(9297),k=Function.prototype,x=g&&Object.getOwnPropertyDescriptor,M=N(k,"name"),A=M&&(function(){}).name==="something",L=M&&(!g||g&&x(k,"name").configurable);_.exports={EXISTS:M,PROPER:A,CONFIGURABLE:L}},397:function(_,O,d){var g=d(7751);_.exports=g("document","documentElement")},421:function(_){_.exports={}},511:function(_,O,d){var g=d(9167),N=d(9297),k=d(1951),x=d(4913).f;_.exports=function(M){var A=g.Symbol||(g.Symbol={});N(A,M)||x(A,M,{value:k.f(M)})}},566:function(_,O,d){var g=d(9504),N=d(9306),k=d(34),x=d(9297),M=d(7680),A=d(616),L=Function,R=g([].concat),B=g([].join),W={};_.exports=A?L.bind:function(K){var U=N(this),ne=U.prototype,Z=M(arguments,1),oe=function(){var ae=R(Z,M(arguments));return this instanceof oe?function(ue,te,ie){if(!x(W,te)){for(var me=[],pe=0;pe<te;pe++)me[pe]="a["+pe+"]";W[te]=L("C,a","return new C("+B(me,",")+")")}return W[te](ue,ie)}(U,ae.length,ae):U.apply(K,ae)};return k(ne)&&(oe.prototype=ne),oe}},597:function(_,O,d){var g=d(9039),N=d(8227),k=d(9519),x=N("species");_.exports=function(M){return k>=51||!g(function(){var A=[];return(A.constructor={})[x]=function(){return{foo:1}},A[M](Boolean).foo!==1})}},616:function(_,O,d){var g=d(9039);_.exports=!g(function(){var N=(function(){}).bind();return typeof N!="function"||N.hasOwnProperty("prototype")})},655:function(_,O,d){var g=d(6955),N=String;_.exports=function(k){if(g(k)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return N(k)}},687:function(_,O,d){var g=d(4913).f,N=d(9297),k=d(8227)("toStringTag");_.exports=function(x,M,A){x&&!A&&(x=x.prototype),x&&!N(x,k)&&g(x,k,{configurable:!0,value:M})}},706:function(_,O,d){var g=d(350).PROPER,N=d(9039),k=d(7452);_.exports=function(x){return N(function(){return!!k[x]()||"​᠎"[x]()!=="​᠎"||g&&k[x].name!==x})}},739:function(_,O,d){var g=d(6518),N=d(9039),k=d(8981),x=d(2777);g({target:"Date",proto:!0,arity:1,forced:N(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1})},{toJSON:function(M){var A=k(this),L=x(A,"number");return typeof L!="number"||isFinite(L)?A.toISOString():null}})},741:function(_){var O=Math.ceil,d=Math.floor;_.exports=Math.trunc||function(g){var N=+g;return(N>0?d:O)(N)}},744:function(_,O,d){var g=d(9565),N=d(9504),k=d(9228),x=d(8551),M=d(34),A=d(7750),L=d(2293),R=d(7829),B=d(8014),W=d(655),K=d(5966),U=d(6682),ne=d(8429),Z=d(9039),oe=ne.UNSUPPORTED_Y,ae=Math.min,ue=N([].push),te=N("".slice),ie=!Z(function(){var pe=/(?:)/,xe=pe.exec;pe.exec=function(){return xe.apply(this,arguments)};var _e="ab".split(pe);return _e.length!==2||_e[0]!=="a"||_e[1]!=="b"}),me="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;k("split",function(pe,xe,_e){var Ce="0".split(void 0,0).length?function(ye,Le){return ye===void 0&&Le===0?[]:g(xe,this,ye,Le)}:xe;return[function(ye,Le){var je=A(this),Oe=M(ye)?K(ye,pe):void 0;return Oe?g(Oe,ye,je,Le):g(Ce,W(je),ye,Le)},function(ye,Le){var je=x(this),Oe=W(ye);if(!me){var We=_e(Ce,je,Oe,Le,Ce!==xe);if(We.done)return We.value}var ze=L(je,RegExp),Fe=je.unicode,Ve=(je.ignoreCase?"i":"")+(je.multiline?"m":"")+(je.unicode?"u":"")+(oe?"g":"y"),Be=new ze(oe?"^(?:"+je.source+")":je,Ve),qe=Le===void 0?4294967295:Le>>>0;if(qe===0)return[];if(Oe.length===0)return U(Be,Oe)===null?[Oe]:[];for(var Ke=0,Je=0,He=[];Je<Oe.length;){Be.lastIndex=oe?0:Je;var Ie,Ye=U(Be,oe?te(Oe,Je):Oe);if(Ye===null||(Ie=ae(B(Be.lastIndex+(oe?Je:0)),Oe.length))===Ke)Je=R(Oe,Je,Fe);else{if(ue(He,te(Oe,Ke,Je)),He.length===qe)return He;for(var et=1;et<=Ye.length-1;et++)if(ue(He,Ye[et]),He.length===qe)return He;Je=Ke=Ie}}return ue(He,te(Oe,Ke)),He}]},me||!ie,oe)},757:function(_,O,d){var g=d(7751),N=d(4901),k=d(1625),x=d(7040),M=Object;_.exports=x?function(A){return typeof A=="symbol"}:function(A){var L=g("Symbol");return N(L)&&k(L.prototype,M(A))}},788:function(_,O,d){var g=d(34),N=d(2195),k=d(8227)("match");_.exports=function(x){var M;return g(x)&&((M=x[k])!==void 0?!!M:N(x)==="RegExp")}},825:function(_,O,d){var g=d(6518),N=d(7751),k=d(8745),x=d(566),M=d(5548),A=d(8551),L=d(34),R=d(2360),B=d(9039),W=N("Reflect","construct"),K=Object.prototype,U=[].push,ne=B(function(){function ae(){}return!(W(function(){},[],ae)instanceof ae)}),Z=!B(function(){W(function(){})}),oe=ne||Z;g({target:"Reflect",stat:!0,forced:oe,sham:oe},{construct:function(ae,ue){M(ae),A(ue);var te=arguments.length<3?ae:M(arguments[2]);if(Z&&!ne)return W(ae,ue,te);if(ae===te){switch(ue.length){case 0:return new ae;case 1:return new ae(ue[0]);case 2:return new ae(ue[0],ue[1]);case 3:return new ae(ue[0],ue[1],ue[2]);case 4:return new ae(ue[0],ue[1],ue[2],ue[3])}var ie=[null];return k(U,ie,ue),new(k(x,ae,ie))}var me=te.prototype,pe=R(L(me)?me:K),xe=k(ae,pe,ue);return L(xe)?xe:pe}})},851:function(_,O,d){var g=d(6955),N=d(5966),k=d(4117),x=d(6269),M=d(8227)("iterator");_.exports=function(A){if(!k(A))return N(A,M)||N(A,"@@iterator")||x[g(A)]}},926:function(_,O,d){var g=d(9306),N=d(8981),k=d(7055),x=d(6198),M=TypeError,A="Reduce of empty array with no initial value",L=function(R){return function(B,W,K,U){var ne=N(B),Z=k(ne),oe=x(ne);if(g(W),oe===0&&K<2)throw new M(A);var ae=R?oe-1:0,ue=R?-1:1;if(K<2)for(;;){if(ae in Z){U=Z[ae],ae+=ue;break}if(ae+=ue,R?ae<0:oe<=ae)throw new M(A)}for(;R?ae>=0:oe>ae;ae+=ue)ae in Z&&(U=W(U,Z[ae],ae,ne));return U}};_.exports={left:L(!1),right:L(!0)}},1034:function(_,O,d){var g=d(9565),N=d(9297),k=d(1625),x=d(5213),M=d(7979),A=RegExp.prototype;_.exports=x.correct?function(L){return L.flags}:function(L){return x.correct||!k(A,L)||N(L,"flags")?L.flags:g(M,L)}},1056:function(_,O,d){var g=d(4913).f;_.exports=function(N,k,x){x in N||g(N,x,{configurable:!0,get:function(){return k[x]},set:function(M){k[x]=M}})}},1072:function(_,O,d){var g=d(1828),N=d(8727);_.exports=Object.keys||function(k){return g(k,N)}},1088:function(_,O,d){var g=d(6518),N=d(9565),k=d(6395),x=d(350),M=d(4901),A=d(3994),L=d(2787),R=d(2967),B=d(687),W=d(6699),K=d(6840),U=d(8227),ne=d(6269),Z=d(7657),oe=x.PROPER,ae=x.CONFIGURABLE,ue=Z.IteratorPrototype,te=Z.BUGGY_SAFARI_ITERATORS,ie=U("iterator"),me="keys",pe="values",xe="entries",_e=function(){return this};_.exports=function(Ce,ye,Le,je,Oe,We,ze){A(Le,ye,je);var Fe,Ve,Be,qe=function(it){if(it===Oe&&Ye)return Ye;if(!te&&it&&it in He)return He[it];switch(it){case me:case pe:case xe:return function(){return new Le(this,it)}}return function(){return new Le(this)}},Ke=ye+" Iterator",Je=!1,He=Ce.prototype,Ie=He[ie]||He["@@iterator"]||Oe&&He[Oe],Ye=!te&&Ie||qe(Oe),et=ye==="Array"&&He.entries||Ie;if(et&&(Fe=L(et.call(new Ce)))!==Object.prototype&&Fe.next&&(k||L(Fe)===ue||(R?R(Fe,ue):M(Fe[ie])||K(Fe,ie,_e)),B(Fe,Ke,!0,!0),k&&(ne[Ke]=_e)),oe&&Oe===pe&&Ie&&Ie.name!==pe&&(!k&&ae?W(He,"name",pe):(Je=!0,Ye=function(){return N(Ie,this)})),Oe)if(Ve={values:qe(pe),keys:We?Ye:qe(me),entries:qe(xe)},ze)for(Be in Ve)(te||Je||!(Be in He))&&K(He,Be,Ve[Be]);else g({target:ye,proto:!0,forced:te||Je},Ve);return k&&!ze||He[ie]===Ye||K(He,ie,Ye,{name:Oe}),ne[ye]=Ye,Ve}},1181:function(_,O,d){var g,N,k,x=d(8622),M=d(4576),A=d(34),L=d(6699),R=d(9297),B=d(7629),W=d(6119),K=d(421),U="Object already initialized",ne=M.TypeError,Z=M.WeakMap;if(x||B.state){var oe=B.state||(B.state=new Z);oe.get=oe.get,oe.has=oe.has,oe.set=oe.set,g=function(ue,te){if(oe.has(ue))throw new ne(U);return te.facade=ue,oe.set(ue,te),te},N=function(ue){return oe.get(ue)||{}},k=function(ue){return oe.has(ue)}}else{var ae=W("state");K[ae]=!0,g=function(ue,te){if(R(ue,ae))throw new ne(U);return te.facade=ue,L(ue,ae,te),te},N=function(ue){return R(ue,ae)?ue[ae]:{}},k=function(ue){return R(ue,ae)}}_.exports={set:g,get:N,has:k,enforce:function(ue){return k(ue)?N(ue):g(ue,{})},getterFor:function(ue){return function(te){var ie;if(!A(te)||(ie=N(te)).type!==ue)throw new ne("Incompatible receiver, "+ue+" required");return ie}}}},1240:function(_,O,d){var g=d(9504);_.exports=g(1.1.valueOf)},1278:function(_,O,d){var g=d(6518),N=d(3724),k=d(5031),x=d(5397),M=d(7347),A=d(4659);g({target:"Object",stat:!0,sham:!N},{getOwnPropertyDescriptors:function(L){for(var R,B,W=x(L),K=M.f,U=k(W),ne={},Z=0;U.length>Z;)(B=K(W,R=U[Z++]))!==void 0&&A(ne,R,B);return ne}})},1291:function(_,O,d){var g=d(741);_.exports=function(N){var k=+N;return k!=k||k===0?0:g(k)}},1296:function(_,O,d){var g=d(4495);_.exports=g&&!!Symbol.for&&!!Symbol.keyFor},1436:function(_,O,d){var g=d(8227)("match");_.exports=function(N){var k=/./;try{"/./"[N](k)}catch{try{return k[g]=!1,"/./"[N](k)}catch{}}return!1}},1469:function(_,O,d){var g=d(7433);_.exports=function(N,k){return new(g(N))(k===0?0:k)}},1480:function(_,O,d){var g=d(6518),N=d(9039),k=d(298).f;g({target:"Object",stat:!0,forced:N(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:k})},1510:function(_,O,d){var g=d(6518),N=d(7751),k=d(9297),x=d(655),M=d(5745),A=d(1296),L=M("string-to-symbol-registry"),R=M("symbol-to-string-registry");g({target:"Symbol",stat:!0,forced:!A},{for:function(B){var W=x(B);if(k(L,W))return L[W];var K=N("Symbol")(W);return L[W]=K,R[K]=W,K}})},1625:function(_,O,d){var g=d(9504);_.exports=g({}.isPrototypeOf)},1699:function(_,O,d){var g=d(6518),N=d(9504),k=d(5749),x=d(7750),M=d(655),A=d(1436),L=N("".indexOf);g({target:"String",proto:!0,forced:!A("includes")},{includes:function(R){return!!~L(M(x(this)),M(k(R)),arguments.length>1?arguments[1]:void 0)}})},1761:function(_,O,d){var g=d(9565),N=d(9504),k=d(9228),x=d(8551),M=d(34),A=d(8014),L=d(655),R=d(7750),B=d(5966),W=d(7829),K=d(1034),U=d(6682),ne=N("".indexOf);k("match",function(Z,oe,ae){return[function(ue){var te=R(this),ie=M(ue)?B(ue,Z):void 0;return ie?g(ie,ue,te):new RegExp(ue)[Z](L(te))},function(ue){var te=x(this),ie=L(ue),me=ae(oe,te,ie);if(me.done)return me.value;var pe=L(K(te));if(ne(pe,"g")===-1)return U(te,ie);var xe=ne(pe,"u")!==-1;te.lastIndex=0;for(var _e,Ce=[],ye=0;(_e=U(te,ie))!==null;){var Le=L(_e[0]);Ce[ye]=Le,Le===""&&(te.lastIndex=W(ie,A(te.lastIndex),xe)),ye++}return ye===0?null:Ce}]})},1828:function(_,O,d){var g=d(9504),N=d(9297),k=d(5397),x=d(9617).indexOf,M=d(421),A=g([].push);_.exports=function(L,R){var B,W=k(L),K=0,U=[];for(B in W)!N(M,B)&&N(W,B)&&A(U,B);for(;R.length>K;)N(W,B=R[K++])&&(~x(U,B)||A(U,B));return U}},1951:function(_,O,d){var g=d(8227);O.f=g},2008:function(_,O,d){var g=d(6518),N=d(9213).filter;g({target:"Array",proto:!0,forced:!d(597)("filter")},{filter:function(k){return N(this,k,arguments.length>1?arguments[1]:void 0)}})},2010:function(_,O,d){var g=d(3724),N=d(350).EXISTS,k=d(9504),x=d(2106),M=Function.prototype,A=k(M.toString),L=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,R=k(L.exec);g&&!N&&x(M,"name",{configurable:!0,get:function(){try{return R(L,A(this))[1]}catch{return""}}})},2062:function(_,O,d){var g=d(6518),N=d(9213).map;g({target:"Array",proto:!0,forced:!d(597)("map")},{map:function(k){return N(this,k,arguments.length>1?arguments[1]:void 0)}})},2087:function(_,O,d){var g=d(34),N=Math.floor;_.exports=Number.isInteger||function(k){return!g(k)&&isFinite(k)&&N(k)===k}},2106:function(_,O,d){var g=d(283),N=d(4913);_.exports=function(k,x,M){return M.get&&g(M.get,x,{getter:!0}),M.set&&g(M.set,x,{setter:!0}),N.f(k,x,M)}},2140:function(_,O,d){var g={};g[d(8227)("toStringTag")]="z",_.exports=String(g)==="[object z]"},2195:function(_,O,d){var g=d(9504),N=g({}.toString),k=g("".slice);_.exports=function(x){return k(N(x),8,-1)}},2211:function(_,O,d){var g=d(9039);_.exports=!g(function(){function N(){}return N.prototype.constructor=null,Object.getPrototypeOf(new N)!==N.prototype})},2259:function(_,O,d){d(511)("iterator")},2293:function(_,O,d){var g=d(8551),N=d(5548),k=d(4117),x=d(8227)("species");_.exports=function(M,A){var L,R=g(M).constructor;return R===void 0||k(L=g(R)[x])?A:N(L)}},2360:function(_,O,d){var g,N=d(8551),k=d(6801),x=d(8727),M=d(421),A=d(397),L=d(4055),R=d(6119),B="prototype",W="script",K=R("IE_PROTO"),U=function(){},ne=function(ae){return"<"+W+">"+ae+"</"+W+">"},Z=function(ae){ae.write(ne("")),ae.close();var ue=ae.parentWindow.Object;return ae=null,ue},oe=function(){try{g=new ActiveXObject("htmlfile")}catch{}var ae,ue,te;oe=typeof document<"u"?document.domain&&g?Z(g):(ue=L("iframe"),te="java"+W+":",ue.style.display="none",A.appendChild(ue),ue.src=String(te),(ae=ue.contentWindow.document).open(),ae.write(ne("document.F=Object")),ae.close(),ae.F):Z(g);for(var ie=x.length;ie--;)delete oe[B][x[ie]];return oe()};M[K]=!0,_.exports=Object.create||function(ae,ue){var te;return ae!==null?(U[B]=N(ae),te=new U,U[B]=null,te[K]=ae):te=oe(),ue===void 0?te:k.f(te,ue)}},2478:function(_,O,d){var g=d(9504),N=d(8981),k=Math.floor,x=g("".charAt),M=g("".replace),A=g("".slice),L=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,R=/\$([$&'`]|\d{1,2})/g;_.exports=function(B,W,K,U,ne,Z){var oe=K+B.length,ae=U.length,ue=R;return ne!==void 0&&(ne=N(ne),ue=L),M(Z,ue,function(te,ie){var me;switch(x(ie,0)){case"$":return"$";case"&":return B;case"`":return A(W,0,K);case"'":return A(W,oe);case"<":me=ne[A(ie,1,-1)];break;default:var pe=+ie;if(pe===0)return te;if(pe>ae){var xe=k(pe/10);return xe===0?te:xe<=ae?U[xe-1]===void 0?x(ie,1):U[xe-1]+x(ie,1):te}me=U[pe-1]}return me===void 0?"":me})}},2529:function(_){_.exports=function(O,d){return{value:O,done:d}}},2551:function(_,O,d){var g=d(6395),N=d(4576),k=d(9039),x=d(3607);_.exports=g||!k(function(){if(!(x&&x<535)){var M=Math.random();__defineSetter__.call(null,M,function(){}),delete N[M]}})},2637:function(_,O,d){d(6518)({target:"Number",stat:!0},{isInteger:d(2087)})},2675:function(_,O,d){d(6761),d(1510),d(7812),d(3110),d(9773)},2712:function(_,O,d){var g=d(6518),N=d(926).left,k=d(4598),x=d(9519);g({target:"Array",proto:!0,forced:!d(6193)&&x>79&&x<83||!k("reduce")},{reduce:function(M){var A=arguments.length;return N(this,M,A,A>1?arguments[1]:void 0)}})},2762:function(_,O,d){var g=d(6518),N=d(3802).trim;g({target:"String",proto:!0,forced:d(706)("trim")},{trim:function(){return N(this)}})},2777:function(_,O,d){var g=d(9565),N=d(34),k=d(757),x=d(5966),M=d(4270),A=d(8227),L=TypeError,R=A("toPrimitive");_.exports=function(B,W){if(!N(B)||k(B))return B;var K,U=x(B,R);if(U){if(W===void 0&&(W="default"),K=g(U,B,W),!N(K)||k(K))return K;throw new L("Can't convert object to primitive value")}return W===void 0&&(W="number"),M(B,W)}},2787:function(_,O,d){var g=d(9297),N=d(4901),k=d(8981),x=d(6119),M=d(2211),A=x("IE_PROTO"),L=Object,R=L.prototype;_.exports=M?L.getPrototypeOf:function(B){var W=k(B);if(g(W,A))return W[A];var K=W.constructor;return N(K)&&W instanceof K?K.prototype:W instanceof L?R:null}},2796:function(_,O,d){var g=d(9039),N=d(4901),k=/#|\.prototype\./,x=function(B,W){var K=A[M(B)];return K===R||K!==L&&(N(W)?g(W):!!W)},M=x.normalize=function(B){return String(B).replace(k,".").toLowerCase()},A=x.data={},L=x.NATIVE="N",R=x.POLYFILL="P";_.exports=x},2839:function(_,O,d){var g=d(4576).navigator,N=g&&g.userAgent;_.exports=N?String(N):""},2892:function(_,O,d){var g=d(6518),N=d(6395),k=d(3724),x=d(4576),M=d(9167),A=d(9504),L=d(2796),R=d(9297),B=d(3167),W=d(1625),K=d(757),U=d(2777),ne=d(9039),Z=d(8480).f,oe=d(7347).f,ae=d(4913).f,ue=d(1240),te=d(3802).trim,ie="Number",me=x[ie],pe=M[ie],xe=me.prototype,_e=x.TypeError,Ce=A("".slice),ye=A("".charCodeAt),Le=function(ze){var Fe,Ve,Be,qe,Ke,Je,He,Ie,Ye=U(ze,"number");if(K(Ye))throw new _e("Cannot convert a Symbol value to a number");if(typeof Ye=="string"&&Ye.length>2){if(Ye=te(Ye),(Fe=ye(Ye,0))===43||Fe===45){if((Ve=ye(Ye,2))===88||Ve===120)return NaN}else if(Fe===48){switch(ye(Ye,1)){case 66:case 98:Be=2,qe=49;break;case 79:case 111:Be=8,qe=55;break;default:return+Ye}for(Je=(Ke=Ce(Ye,2)).length,He=0;He<Je;He++)if((Ie=ye(Ke,He))<48||Ie>qe)return NaN;return parseInt(Ke,Be)}}return+Ye},je=L(ie,!me(" 0o1")||!me("0b1")||me("+0x1")),Oe=function(ze){var Fe,Ve=arguments.length<1?0:me(function(Be){var qe=U(Be,"number");return typeof qe=="bigint"?qe:Le(qe)}(ze));return W(xe,Fe=this)&&ne(function(){ue(Fe)})?B(Object(Ve),this,Oe):Ve};Oe.prototype=xe,je&&!N&&(xe.constructor=Oe),g({global:!0,constructor:!0,wrap:!0,forced:je},{Number:Oe});var We=function(ze,Fe){for(var Ve,Be=k?Z(Fe):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),qe=0;Be.length>qe;qe++)R(Fe,Ve=Be[qe])&&!R(ze,Ve)&&ae(ze,Ve,oe(Fe,Ve))};N&&pe&&We(M[ie],pe),(je||N)&&We(M[ie],me)},2953:function(_,O,d){var g=d(4576),N=d(7400),k=d(9296),x=d(3792),M=d(6699),A=d(687),L=d(8227)("iterator"),R=x.values,B=function(K,U){if(K){if(K[L]!==R)try{M(K,L,R)}catch{K[L]=R}if(A(K,U,!0),N[U]){for(var ne in x)if(K[ne]!==x[ne])try{M(K,ne,x[ne])}catch{K[ne]=x[ne]}}}};for(var W in N)B(g[W]&&g[W].prototype,W);B(k,"DOMTokenList")},2967:function(_,O,d){var g=d(6706),N=d(34),k=d(7750),x=d(3506);_.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var M,A=!1,L={};try{(M=g(Object.prototype,"__proto__","set"))(L,[]),A=L instanceof Array}catch{}return function(R,B){return k(R),x(B),N(R)&&(A?M(R,B):R.__proto__=B),R}}():void 0)},3110:function(_,O,d){var g=d(6518),N=d(7751),k=d(8745),x=d(9565),M=d(9504),A=d(9039),L=d(4901),R=d(757),B=d(7680),W=d(6933),K=d(4495),U=String,ne=N("JSON","stringify"),Z=M(/./.exec),oe=M("".charAt),ae=M("".charCodeAt),ue=M("".replace),te=M(1.1.toString),ie=/[\uD800-\uDFFF]/g,me=/^[\uD800-\uDBFF]$/,pe=/^[\uDC00-\uDFFF]$/,xe=!K||A(function(){var Le=N("Symbol")("stringify detection");return ne([Le])!=="[null]"||ne({a:Le})!=="{}"||ne(Object(Le))!=="{}"}),_e=A(function(){return ne("\uDF06\uD834")!=='"\\udf06\\ud834"'||ne("\uDEAD")!=='"\\udead"'}),Ce=function(Le,je){var Oe=B(arguments),We=W(je);if(L(We)||Le!==void 0&&!R(Le))return Oe[1]=function(ze,Fe){if(L(We)&&(Fe=x(We,this,U(ze),Fe)),!R(Fe))return Fe},k(ne,null,Oe)},ye=function(Le,je,Oe){var We=oe(Oe,je-1),ze=oe(Oe,je+1);return Z(me,Le)&&!Z(pe,ze)||Z(pe,Le)&&!Z(me,We)?"\\u"+te(ae(Le,0),16):Le};ne&&g({target:"JSON",stat:!0,arity:3,forced:xe||_e},{stringify:function(Le,je,Oe){var We=B(arguments),ze=k(xe?Ce:ne,null,We);return _e&&typeof ze=="string"?ue(ze,ie,ye):ze}})},3167:function(_,O,d){var g=d(4901),N=d(34),k=d(2967);_.exports=function(x,M,A){var L,R;return k&&g(L=M.constructor)&&L!==A&&N(R=L.prototype)&&R!==A.prototype&&k(x,R),x}},3179:function(_,O,d){var g=d(2140),N=d(6955);_.exports=g?{}.toString:function(){return"[object "+N(this)+"]"}},3392:function(_,O,d){var g=d(9504),N=0,k=Math.random(),x=g(1.1.toString);_.exports=function(M){return"Symbol("+(M===void 0?"":M)+")_"+x(++N+k,36)}},3418:function(_,O,d){var g=d(6518),N=d(7916);g({target:"Array",stat:!0,forced:!d(4428)(function(k){Array.from(k)})},{from:N})},3500:function(_,O,d){var g=d(4576),N=d(7400),k=d(9296),x=d(235),M=d(6699),A=function(R){if(R&&R.forEach!==x)try{M(R,"forEach",x)}catch{R.forEach=x}};for(var L in N)N[L]&&A(g[L]&&g[L].prototype);A(k)},3506:function(_,O,d){var g=d(3925),N=String,k=TypeError;_.exports=function(x){if(g(x))return x;throw new k("Can't set "+N(x)+" as a prototype")}},3517:function(_,O,d){var g=d(9504),N=d(9039),k=d(4901),x=d(6955),M=d(7751),A=d(3706),L=function(){},R=M("Reflect","construct"),B=/^\s*(?:class|function)\b/,W=g(B.exec),K=!B.test(L),U=function(Z){if(!k(Z))return!1;try{return R(L,[],Z),!0}catch{return!1}},ne=function(Z){if(!k(Z))return!1;switch(x(Z)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return K||!!W(B,A(Z))}catch{return!0}};ne.sham=!0,_.exports=!R||N(function(){var Z;return U(U.call)||!U(Object)||!U(function(){Z=!0})||Z})?ne:U},3607:function(_,O,d){var g=d(2839).match(/AppleWebKit\/(\d+)\./);_.exports=!!g&&+g[1]},3635:function(_,O,d){var g=d(9039),N=d(4576).RegExp;_.exports=g(function(){var k=N(".","s");return!(k.dotAll&&k.test(`
`)&&k.flags==="s")})},3640:function(_,O,d){var g=d(8551),N=d(4270),k=TypeError;_.exports=function(x){if(g(this),x==="string"||x==="default")x="string";else if(x!=="number")throw new k("Incorrect hint");return N(this,x)}},3706:function(_,O,d){var g=d(9504),N=d(4901),k=d(7629),x=g(Function.toString);N(k.inspectSource)||(k.inspectSource=function(M){return x(M)}),_.exports=k.inspectSource},3709:function(_,O,d){var g=d(2839).match(/firefox\/(\d+)/i);_.exports=!!g&&+g[1]},3717:function(_,O){O.f=Object.getOwnPropertySymbols},3724:function(_,O,d){var g=d(9039);_.exports=!g(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},3763:function(_,O,d){var g=d(2839);_.exports=/MSIE|Trident/.test(g)},3792:function(_,O,d){var g=d(5397),N=d(6469),k=d(6269),x=d(1181),M=d(4913).f,A=d(1088),L=d(2529),R=d(6395),B=d(3724),W="Array Iterator",K=x.set,U=x.getterFor(W);_.exports=A(Array,"Array",function(Z,oe){K(this,{type:W,target:g(Z),index:0,kind:oe})},function(){var Z=U(this),oe=Z.target,ae=Z.index++;if(!oe||ae>=oe.length)return Z.target=null,L(void 0,!0);switch(Z.kind){case"keys":return L(ae,!1);case"values":return L(oe[ae],!1)}return L([ae,oe[ae]],!1)},"values");var ne=k.Arguments=k.Array;if(N("keys"),N("values"),N("entries"),!R&&B&&ne.name!=="values")try{M(ne,"name",{value:"values"})}catch{}},3802:function(_,O,d){var g=d(9504),N=d(7750),k=d(655),x=d(7452),M=g("".replace),A=RegExp("^["+x+"]+"),L=RegExp("(^|[^"+x+"])["+x+"]+$"),R=function(B){return function(W){var K=k(N(W));return 1&B&&(K=M(K,A,"")),2&B&&(K=M(K,L,"$1")),K}};_.exports={start:R(1),end:R(2),trim:R(3)}},3851:function(_,O,d){var g=d(6518),N=d(9039),k=d(5397),x=d(7347).f,M=d(3724);g({target:"Object",stat:!0,forced:!M||N(function(){x(1)}),sham:!M},{getOwnPropertyDescriptor:function(A,L){return x(k(A),L)}})},3925:function(_,O,d){var g=d(34);_.exports=function(N){return g(N)||N===null}},3994:function(_,O,d){var g=d(7657).IteratorPrototype,N=d(2360),k=d(6980),x=d(687),M=d(6269),A=function(){return this};_.exports=function(L,R,B,W){var K=R+" Iterator";return L.prototype=N(g,{next:k(+!W,B)}),x(L,K,!1,!0),M[K]=A,L}},4055:function(_,O,d){var g=d(4576),N=d(34),k=g.document,x=N(k)&&N(k.createElement);_.exports=function(M){return x?k.createElement(M):{}}},4117:function(_){_.exports=function(O){return O==null}},4209:function(_,O,d){var g=d(8227),N=d(6269),k=g("iterator"),x=Array.prototype;_.exports=function(M){return M!==void 0&&(N.Array===M||x[k]===M)}},4213:function(_,O,d){var g=d(3724),N=d(9504),k=d(9565),x=d(9039),M=d(1072),A=d(3717),L=d(8773),R=d(8981),B=d(7055),W=Object.assign,K=Object.defineProperty,U=N([].concat);_.exports=!W||x(function(){if(g&&W({b:1},W(K({},"a",{enumerable:!0,get:function(){K(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var ne={},Z={},oe=Symbol("assign detection"),ae="abcdefghijklmnopqrst";return ne[oe]=7,ae.split("").forEach(function(ue){Z[ue]=ue}),W({},ne)[oe]!==7||M(W({},Z)).join("")!==ae})?function(ne,Z){for(var oe=R(ne),ae=arguments.length,ue=1,te=A.f,ie=L.f;ae>ue;)for(var me,pe=B(arguments[ue++]),xe=te?U(M(pe),te(pe)):M(pe),_e=xe.length,Ce=0;_e>Ce;)me=xe[Ce++],g&&!k(ie,pe,me)||(oe[me]=pe[me]);return oe}:W},4215:function(_,O,d){var g=d(4576),N=d(2839),k=d(2195),x=function(M){return N.slice(0,M.length)===M};_.exports=x("Bun/")?"BUN":x("Cloudflare-Workers")?"CLOUDFLARE":x("Deno/")?"DENO":x("Node.js/")?"NODE":g.Bun&&typeof Bun.version=="string"?"BUN":g.Deno&&typeof Deno.version=="object"?"DENO":k(g.process)==="process"?"NODE":g.window&&g.document?"BROWSER":"REST"},4270:function(_,O,d){var g=d(9565),N=d(4901),k=d(34),x=TypeError;_.exports=function(M,A){var L,R;if(A==="string"&&N(L=M.toString)&&!k(R=g(L,M))||N(L=M.valueOf)&&!k(R=g(L,M))||A!=="string"&&N(L=M.toString)&&!k(R=g(L,M)))return R;throw new x("Can't convert object to primitive value")}},4376:function(_,O,d){var g=d(2195);_.exports=Array.isArray||function(N){return g(N)==="Array"}},4423:function(_,O,d){var g=d(6518),N=d(9617).includes,k=d(9039),x=d(6469);g({target:"Array",proto:!0,forced:k(function(){return!Array(1).includes()})},{includes:function(M){return N(this,M,arguments.length>1?arguments[1]:void 0)}}),x("includes")},4428:function(_,O,d){var g=d(8227)("iterator"),N=!1;try{var k=0,x={next:function(){return{done:!!k++}},return:function(){N=!0}};x[g]=function(){return this},Array.from(x,function(){throw 2})}catch{}_.exports=function(M,A){try{if(!A&&!N)return!1}catch{return!1}var L=!1;try{var R={};R[g]=function(){return{next:function(){return{done:L=!0}}}},M(R)}catch{}return L}},4488:function(_,O,d){var g=d(7680),N=Math.floor,k=function(x,M){var A=x.length;if(A<8)for(var L,R,B=1;B<A;){for(R=B,L=x[B];R&&M(x[R-1],L)>0;)x[R]=x[--R];R!==B++&&(x[R]=L)}else for(var W=N(A/2),K=k(g(x,0,W),M),U=k(g(x,W),M),ne=K.length,Z=U.length,oe=0,ae=0;oe<ne||ae<Z;)x[oe+ae]=oe<ne&&ae<Z?M(K[oe],U[ae])<=0?K[oe++]:U[ae++]:oe<ne?K[oe++]:U[ae++];return x};_.exports=k},4495:function(_,O,d){var g=d(9519),N=d(9039),k=d(4576).String;_.exports=!!Object.getOwnPropertySymbols&&!N(function(){var x=Symbol("symbol detection");return!k(x)||!(Object(x)instanceof Symbol)||!Symbol.sham&&g&&g<41})},4527:function(_,O,d){var g=d(3724),N=d(4376),k=TypeError,x=Object.getOwnPropertyDescriptor,M=g&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(A){return A instanceof TypeError}}();_.exports=M?function(A,L){if(N(A)&&!x(A,"length").writable)throw new k("Cannot set read only .length");return A.length=L}:function(A,L){return A.length=L}},4554:function(_,O,d){var g=d(6518),N=d(8981),k=d(5610),x=d(1291),M=d(6198),A=d(4527),L=d(6837),R=d(1469),B=d(4659),W=d(4606),K=d(597)("splice"),U=Math.max,ne=Math.min;g({target:"Array",proto:!0,forced:!K},{splice:function(Z,oe){var ae,ue,te,ie,me,pe,xe=N(this),_e=M(xe),Ce=k(Z,_e),ye=arguments.length;for(ye===0?ae=ue=0:ye===1?(ae=0,ue=_e-Ce):(ae=ye-2,ue=ne(U(x(oe),0),_e-Ce)),L(_e+ae-ue),te=R(xe,ue),ie=0;ie<ue;ie++)(me=Ce+ie)in xe&&B(te,ie,xe[me]);if(te.length=ue,ae<ue){for(ie=Ce;ie<_e-ue;ie++)pe=ie+ae,(me=ie+ue)in xe?xe[pe]=xe[me]:W(xe,pe);for(ie=_e;ie>_e-ue+ae;ie--)W(xe,ie-1)}else if(ae>ue)for(ie=_e-ue;ie>Ce;ie--)pe=ie+ae-1,(me=ie+ue-1)in xe?xe[pe]=xe[me]:W(xe,pe);for(ie=0;ie<ae;ie++)xe[ie+Ce]=arguments[ie+2];return A(xe,_e-ue+ae),te}})},4576:function(_,O,d){var g=function(N){return N&&N.Math===Math&&N};_.exports=g(typeof globalThis=="object"&&globalThis)||g(typeof window=="object"&&window)||g(typeof self=="object"&&self)||g(typeof d.g=="object"&&d.g)||g(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},4598:function(_,O,d){var g=d(9039);_.exports=function(N,k){var x=[][N];return!!x&&g(function(){x.call(null,k||function(){return 1},1)})}},4606:function(_,O,d){var g=d(6823),N=TypeError;_.exports=function(k,x){if(!delete k[x])throw new N("Cannot delete property "+g(x)+" of "+g(k))}},4659:function(_,O,d){var g=d(3724),N=d(4913),k=d(6980);_.exports=function(x,M,A){g?N.f(x,M,k(0,A)):x[M]=A}},4782:function(_,O,d){var g=d(6518),N=d(4376),k=d(3517),x=d(34),M=d(5610),A=d(6198),L=d(5397),R=d(4659),B=d(8227),W=d(597),K=d(7680),U=W("slice"),ne=B("species"),Z=Array,oe=Math.max;g({target:"Array",proto:!0,forced:!U},{slice:function(ae,ue){var te,ie,me,pe=L(this),xe=A(pe),_e=M(ae,xe),Ce=M(ue===void 0?xe:ue,xe);if(N(pe)&&(te=pe.constructor,(k(te)&&(te===Z||N(te.prototype))||x(te)&&(te=te[ne])===null)&&(te=void 0),te===Z||te===void 0))return K(pe,_e,Ce);for(ie=new(te===void 0?Z:te)(oe(Ce-_e,0)),me=0;_e<Ce;_e++,me++)_e in pe&&R(ie,me,pe[_e]);return ie.length=me,ie}})},4864:function(_,O,d){var g=d(3724),N=d(4576),k=d(9504),x=d(2796),M=d(3167),A=d(6699),L=d(2360),R=d(8480).f,B=d(1625),W=d(788),K=d(655),U=d(1034),ne=d(8429),Z=d(1056),oe=d(6840),ae=d(9039),ue=d(9297),te=d(1181).enforce,ie=d(7633),me=d(8227),pe=d(3635),xe=d(8814),_e=me("match"),Ce=N.RegExp,ye=Ce.prototype,Le=N.SyntaxError,je=k(ye.exec),Oe=k("".charAt),We=k("".replace),ze=k("".indexOf),Fe=k("".slice),Ve=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Be=/a/g,qe=/a/g,Ke=new Ce(Be)!==Be,Je=ne.MISSED_STICKY,He=ne.UNSUPPORTED_Y;if(x("RegExp",g&&(!Ke||Je||pe||xe||ae(function(){return qe[_e]=!1,Ce(Be)!==Be||Ce(qe)===qe||String(Ce(Be,"i"))!=="/a/i"})))){for(var Ie=function(it,gt){var At,Wt,xn,Yn,Rn,Qt,qn=B(ye,this),rn=W(it),Kn=gt===void 0,Gn=[],z=it;if(!qn&&rn&&Kn&&it.constructor===Ie)return it;if((rn||B(ye,it))&&(it=it.source,Kn&&(gt=U(z))),it=it===void 0?"":K(it),gt=gt===void 0?"":K(gt),z=it,pe&&"dotAll"in Be&&(Wt=!!gt&&ze(gt,"s")>-1)&&(gt=We(gt,/s/g,"")),At=gt,Je&&"sticky"in Be&&(xn=!!gt&&ze(gt,"y")>-1)&&He&&(gt=We(gt,/y/g,"")),xe&&(Yn=function(de){for(var Ne,Pe=de.length,be=0,De="",Te=[],Ge=L(null),Bt=!1,Qn=!1,Yt=0,Ue="";be<=Pe;be++){if((Ne=Oe(de,be))==="\\")Ne+=Oe(de,++be);else if(Ne==="]")Bt=!1;else if(!Bt)switch(!0){case Ne==="[":Bt=!0;break;case Ne==="(":if(De+=Ne,Fe(de,be+1,be+3)==="?:")continue;je(Ve,Fe(de,be+1))&&(be+=2,Qn=!0),Yt++;continue;case(Ne===">"&&Qn):if(Ue===""||ue(Ge,Ue))throw new Le("Invalid capture group name");Ge[Ue]=!0,Te[Te.length]=[Ue,Yt],Qn=!1,Ue="";continue}Qn?Ue+=Ne:De+=Ne}return[De,Te]}(it),it=Yn[0],Gn=Yn[1]),Rn=M(Ce(it,gt),qn?this:ye,Ie),(Wt||xn||Gn.length)&&(Qt=te(Rn),Wt&&(Qt.dotAll=!0,Qt.raw=Ie(function(de){for(var Ne,Pe=de.length,be=0,De="",Te=!1;be<=Pe;be++)(Ne=Oe(de,be))!=="\\"?Te||Ne!=="."?(Ne==="["?Te=!0:Ne==="]"&&(Te=!1),De+=Ne):De+="[\\s\\S]":De+=Ne+Oe(de,++be);return De}(it),At)),xn&&(Qt.sticky=!0),Gn.length&&(Qt.groups=Gn)),it!==z)try{A(Rn,"source",z===""?"(?:)":z)}catch{}return Rn},Ye=R(Ce),et=0;Ye.length>et;)Z(Ie,Ce,Ye[et++]);ye.constructor=Ie,Ie.prototype=ye,oe(N,"RegExp",Ie,{constructor:!0})}ie("RegExp")},4901:function(_){var O=typeof document=="object"&&document.all;_.exports=O===void 0&&O!==void 0?function(d){return typeof d=="function"||d===O}:function(d){return typeof d=="function"}},4913:function(_,O,d){var g=d(3724),N=d(5917),k=d(8686),x=d(8551),M=d(6969),A=TypeError,L=Object.defineProperty,R=Object.getOwnPropertyDescriptor,B="enumerable",W="configurable",K="writable";O.f=g?k?function(U,ne,Z){if(x(U),ne=M(ne),x(Z),typeof U=="function"&&ne==="prototype"&&"value"in Z&&K in Z&&!Z[K]){var oe=R(U,ne);oe&&oe[K]&&(U[ne]=Z.value,Z={configurable:W in Z?Z[W]:oe[W],enumerable:B in Z?Z[B]:oe[B],writable:!1})}return L(U,ne,Z)}:L:function(U,ne,Z){if(x(U),ne=M(ne),x(Z),N)try{return L(U,ne,Z)}catch{}if("get"in Z||"set"in Z)throw new A("Accessors not supported");return"value"in Z&&(U[ne]=Z.value),U}},5031:function(_,O,d){var g=d(7751),N=d(9504),k=d(8480),x=d(3717),M=d(8551),A=N([].concat);_.exports=g("Reflect","ownKeys")||function(L){var R=k.f(M(L)),B=x.f;return B?A(R,B(L)):R}},5213:function(_,O,d){var g=d(4576),N=d(9039),k=g.RegExp,x=!N(function(){var M=!0;try{k(".","d")}catch{M=!1}var A={},L="",R=M?"dgimsy":"gimsy",B=function(U,ne){Object.defineProperty(A,U,{get:function(){return L+=ne,!0}})},W={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var K in M&&(W.hasIndices="d"),W)B(K,W[K]);return Object.getOwnPropertyDescriptor(k.prototype,"flags").get.call(A)!==R||L!==R});_.exports={correct:x}},5276:function(_,O,d){var g=d(6518),N=d(7476),k=d(9617).indexOf,x=d(4598),M=N([].indexOf),A=!!M&&1/M([1],1,-0)<0;g({target:"Array",proto:!0,forced:A||!x("indexOf")},{indexOf:function(L){var R=arguments.length>1?arguments[1]:void 0;return A?M(this,L,R)||0:k(this,L,R)}})},5397:function(_,O,d){var g=d(7055),N=d(7750);_.exports=function(k){return g(N(k))}},5440:function(_,O,d){var g=d(8745),N=d(9565),k=d(9504),x=d(9228),M=d(9039),A=d(8551),L=d(4901),R=d(34),B=d(1291),W=d(8014),K=d(655),U=d(7750),ne=d(7829),Z=d(5966),oe=d(2478),ae=d(1034),ue=d(6682),te=d(8227)("replace"),ie=Math.max,me=Math.min,pe=k([].concat),xe=k([].push),_e=k("".indexOf),Ce=k("".slice),ye="a".replace(/./,"$0")==="$0",Le=!!/./[te]&&/./[te]("a","$0")==="";x("replace",function(je,Oe,We){var ze=Le?"$":"$0";return[function(Fe,Ve){var Be=U(this),qe=R(Fe)?Z(Fe,te):void 0;return qe?N(qe,Fe,Be,Ve):N(Oe,K(Be),Fe,Ve)},function(Fe,Ve){var Be=A(this),qe=K(Fe);if(typeof Ve=="string"&&_e(Ve,ze)===-1&&_e(Ve,"$<")===-1){var Ke=We(Oe,Be,qe,Ve);if(Ke.done)return Ke.value}var Je=L(Ve);Je||(Ve=K(Ve));var He,Ie=K(ae(Be)),Ye=_e(Ie,"g")!==-1;Ye&&(He=_e(Ie,"u")!==-1,Be.lastIndex=0);for(var et,it=[];(et=ue(Be,qe))!==null&&(xe(it,et),Ye);)K(et[0])===""&&(Be.lastIndex=ne(qe,W(Be.lastIndex),He));for(var gt,At="",Wt=0,xn=0;xn<it.length;xn++){for(var Yn,Rn=K((et=it[xn])[0]),Qt=ie(me(B(et.index),qe.length),0),qn=[],rn=1;rn<et.length;rn++)xe(qn,(gt=et[rn])===void 0?gt:String(gt));var Kn=et.groups;if(Je){var Gn=pe([Rn],qn,Qt,qe);Kn!==void 0&&xe(Gn,Kn),Yn=K(g(Ve,void 0,Gn))}else Yn=oe(Rn,qe,Qt,qn,Kn,Ve);Qt>=Wt&&(At+=Ce(qe,Wt,Qt)+Yn,Wt=Qt+Rn.length)}return At+Ce(qe,Wt)}]},!!M(function(){var je=/./;return je.exec=function(){var Oe=[];return Oe.groups={a:"7"},Oe},"".replace(je,"$<a>")!=="7"})||!ye||Le)},5548:function(_,O,d){var g=d(3517),N=d(6823),k=TypeError;_.exports=function(x){if(g(x))return x;throw new k(N(x)+" is not a constructor")}},5610:function(_,O,d){var g=d(1291),N=Math.max,k=Math.min;_.exports=function(x,M){var A=g(x);return A<0?N(A+M,0):k(A,M)}},5700:function(_,O,d){var g=d(511),N=d(8242);g("toPrimitive"),N()},5745:function(_,O,d){var g=d(7629);_.exports=function(N,k){return g[N]||(g[N]=k||{})}},5749:function(_,O,d){var g=d(788),N=TypeError;_.exports=function(k){if(g(k))throw new N("The method doesn't accept regular expressions");return k}},5917:function(_,O,d){var g=d(3724),N=d(9039),k=d(4055);_.exports=!g&&!N(function(){return Object.defineProperty(k("div"),"a",{get:function(){return 7}}).a!==7})},5966:function(_,O,d){var g=d(9306),N=d(4117);_.exports=function(k,x){var M=k[x];return N(M)?void 0:g(M)}},6080:function(_,O,d){var g=d(7476),N=d(9306),k=d(616),x=g(g.bind);_.exports=function(M,A){return N(M),A===void 0?M:k?x(M,A):function(){return M.apply(A,arguments)}}},6099:function(_,O,d){var g=d(2140),N=d(6840),k=d(3179);g||N(Object.prototype,"toString",k,{unsafe:!0})},6119:function(_,O,d){var g=d(5745),N=d(3392),k=g("keys");_.exports=function(x){return k[x]||(k[x]=N(x))}},6193:function(_,O,d){var g=d(4215);_.exports=g==="NODE"},6198:function(_,O,d){var g=d(8014);_.exports=function(N){return g(N.length)}},6269:function(_){_.exports={}},6319:function(_,O,d){var g=d(8551),N=d(9539);_.exports=function(k,x,M,A){try{return A?x(g(M)[0],M[1]):x(M)}catch(L){N(k,"throw",L)}}},6395:function(_){_.exports=!1},6469:function(_,O,d){var g=d(8227),N=d(2360),k=d(4913).f,x=g("unscopables"),M=Array.prototype;M[x]===void 0&&k(M,x,{configurable:!0,value:N(null)}),_.exports=function(A){M[x][A]=!0}},6518:function(_,O,d){var g=d(4576),N=d(7347).f,k=d(6699),x=d(6840),M=d(9433),A=d(7740),L=d(2796);_.exports=function(R,B){var W,K,U,ne,Z,oe=R.target,ae=R.global,ue=R.stat;if(W=ae?g:ue?g[oe]||M(oe,{}):g[oe]&&g[oe].prototype)for(K in B){if(ne=B[K],U=R.dontCallGetSet?(Z=N(W,K))&&Z.value:W[K],!L(ae?K:oe+(ue?".":"#")+K,R.forced)&&U!==void 0){if(typeof ne==typeof U)continue;A(ne,U)}(R.sham||U&&U.sham)&&k(ne,"sham",!0),x(W,K,ne,R)}}},6682:function(_,O,d){var g=d(9565),N=d(8551),k=d(4901),x=d(2195),M=d(7323),A=TypeError;_.exports=function(L,R){var B=L.exec;if(k(B)){var W=g(B,L,R);return W!==null&&N(W),W}if(x(L)==="RegExp")return g(M,L,R);throw new A("RegExp#exec called on incompatible receiver")}},6699:function(_,O,d){var g=d(3724),N=d(4913),k=d(6980);_.exports=g?function(x,M,A){return N.f(x,M,k(1,A))}:function(x,M,A){return x[M]=A,x}},6706:function(_,O,d){var g=d(9504),N=d(9306);_.exports=function(k,x,M){try{return g(N(Object.getOwnPropertyDescriptor(k,x)[M]))}catch{}}},6761:function(_,O,d){var g=d(6518),N=d(4576),k=d(9565),x=d(9504),M=d(6395),A=d(3724),L=d(4495),R=d(9039),B=d(9297),W=d(1625),K=d(8551),U=d(5397),ne=d(6969),Z=d(655),oe=d(6980),ae=d(2360),ue=d(1072),te=d(8480),ie=d(298),me=d(3717),pe=d(7347),xe=d(4913),_e=d(6801),Ce=d(8773),ye=d(6840),Le=d(2106),je=d(5745),Oe=d(6119),We=d(421),ze=d(3392),Fe=d(8227),Ve=d(1951),Be=d(511),qe=d(8242),Ke=d(687),Je=d(1181),He=d(9213).forEach,Ie=Oe("hidden"),Ye="Symbol",et="prototype",it=Je.set,gt=Je.getterFor(Ye),At=Object[et],Wt=N.Symbol,xn=Wt&&Wt[et],Yn=N.RangeError,Rn=N.TypeError,Qt=N.QObject,qn=pe.f,rn=xe.f,Kn=ie.f,Gn=Ce.f,z=x([].push),de=je("symbols"),Ne=je("op-symbols"),Pe=je("wks"),be=!Qt||!Qt[et]||!Qt[et].findChild,De=function(Qe,tt,Ze){var nt=qn(At,tt);nt&&delete At[tt],rn(Qe,tt,Ze),nt&&Qe!==At&&rn(At,tt,nt)},Te=A&&R(function(){return ae(rn({},"a",{get:function(){return rn(this,"a",{value:7}).a}})).a!==7})?De:rn,Ge=function(Qe,tt){var Ze=de[Qe]=ae(xn);return it(Ze,{type:Ye,tag:Qe,description:tt}),A||(Ze.description=tt),Ze},Bt=function(Qe,tt,Ze){Qe===At&&Bt(Ne,tt,Ze),K(Qe);var nt=ne(tt);return K(Ze),B(de,nt)?(Ze.enumerable?(B(Qe,Ie)&&Qe[Ie][nt]&&(Qe[Ie][nt]=!1),Ze=ae(Ze,{enumerable:oe(0,!1)})):(B(Qe,Ie)||rn(Qe,Ie,oe(1,ae(null))),Qe[Ie][nt]=!0),Te(Qe,nt,Ze)):rn(Qe,nt,Ze)},Qn=function(Qe,tt){K(Qe);var Ze=U(tt),nt=ue(Ze).concat(Al(Ze));return He(nt,function(qt){A&&!k(Yt,Ze,qt)||Bt(Qe,qt,Ze[qt])}),Qe},Yt=function(Qe){var tt=ne(Qe),Ze=k(Gn,this,tt);return!(this===At&&B(de,tt)&&!B(Ne,tt))&&(!(Ze||!B(this,tt)||!B(de,tt)||B(this,Ie)&&this[Ie][tt])||Ze)},Ue=function(Qe,tt){var Ze=U(Qe),nt=ne(tt);if(Ze!==At||!B(de,nt)||B(Ne,nt)){var qt=qn(Ze,nt);return!qt||!B(de,nt)||B(Ze,Ie)&&Ze[Ie][nt]||(qt.enumerable=!0),qt}},Lt=function(Qe){var tt=Kn(U(Qe)),Ze=[];return He(tt,function(nt){B(de,nt)||B(We,nt)||z(Ze,nt)}),Ze},Al=function(Qe){var tt=Qe===At,Ze=Kn(tt?Ne:U(Qe)),nt=[];return He(Ze,function(qt){!B(de,qt)||tt&&!B(At,qt)||z(nt,de[qt])}),nt};L||(Wt=function(){if(W(xn,this))throw new Rn("Symbol is not a constructor");var Qe=arguments.length&&arguments[0]!==void 0?Z(arguments[0]):void 0,tt=ze(Qe),Ze=function(nt){var qt=this===void 0?N:this;qt===At&&k(Ze,Ne,nt),B(qt,Ie)&&B(qt[Ie],tt)&&(qt[Ie][tt]=!1);var Hp=oe(1,nt);try{Te(qt,tt,Hp)}catch(Bp){if(!(Bp instanceof Yn))throw Bp;De(qt,tt,Hp)}};return A&&be&&Te(At,tt,{configurable:!0,set:Ze}),Ge(tt,Qe)},ye(xn=Wt[et],"toString",function(){return gt(this).tag}),ye(Wt,"withoutSetter",function(Qe){return Ge(ze(Qe),Qe)}),Ce.f=Yt,xe.f=Bt,_e.f=Qn,pe.f=Ue,te.f=ie.f=Lt,me.f=Al,Ve.f=function(Qe){return Ge(Fe(Qe),Qe)},A&&(Le(xn,"description",{configurable:!0,get:function(){return gt(this).description}}),M||ye(At,"propertyIsEnumerable",Yt,{unsafe:!0}))),g({global:!0,constructor:!0,wrap:!0,forced:!L,sham:!L},{Symbol:Wt}),He(ue(Pe),function(Qe){Be(Qe)}),g({target:Ye,stat:!0,forced:!L},{useSetter:function(){be=!0},useSimple:function(){be=!1}}),g({target:"Object",stat:!0,forced:!L,sham:!A},{create:function(Qe,tt){return tt===void 0?ae(Qe):Qn(ae(Qe),tt)},defineProperty:Bt,defineProperties:Qn,getOwnPropertyDescriptor:Ue}),g({target:"Object",stat:!0,forced:!L},{getOwnPropertyNames:Lt}),qe(),Ke(Wt,Ye),We[Ie]=!0},6801:function(_,O,d){var g=d(3724),N=d(8686),k=d(4913),x=d(8551),M=d(5397),A=d(1072);O.f=g&&!N?Object.defineProperties:function(L,R){x(L);for(var B,W=M(R),K=A(R),U=K.length,ne=0;U>ne;)k.f(L,B=K[ne++],W[B]);return L}},6823:function(_){var O=String;_.exports=function(d){try{return O(d)}catch{return"Object"}}},6837:function(_){var O=TypeError;_.exports=function(d){if(d>9007199254740991)throw O("Maximum allowed index exceeded");return d}},6840:function(_,O,d){var g=d(4901),N=d(4913),k=d(283),x=d(9433);_.exports=function(M,A,L,R){R||(R={});var B=R.enumerable,W=R.name!==void 0?R.name:A;if(g(L)&&k(L,W,R),R.global)B?M[A]=L:x(A,L);else{try{R.unsafe?M[A]&&(B=!0):delete M[A]}catch{}B?M[A]=L:N.f(M,A,{value:L,enumerable:!1,configurable:!R.nonConfigurable,writable:!R.nonWritable})}return M}},6910:function(_,O,d){var g=d(6518),N=d(9504),k=d(9306),x=d(8981),M=d(6198),A=d(4606),L=d(655),R=d(9039),B=d(4488),W=d(4598),K=d(3709),U=d(3763),ne=d(9519),Z=d(3607),oe=[],ae=N(oe.sort),ue=N(oe.push),te=R(function(){oe.sort(void 0)}),ie=R(function(){oe.sort(null)}),me=W("sort"),pe=!R(function(){if(ne)return ne<70;if(!(K&&K>3)){if(U)return!0;if(Z)return Z<603;var xe,_e,Ce,ye,Le="";for(xe=65;xe<76;xe++){switch(_e=String.fromCharCode(xe),xe){case 66:case 69:case 70:case 72:Ce=3;break;case 68:case 71:Ce=4;break;default:Ce=2}for(ye=0;ye<47;ye++)oe.push({k:_e+ye,v:Ce})}for(oe.sort(function(je,Oe){return Oe.v-je.v}),ye=0;ye<oe.length;ye++)_e=oe[ye].k.charAt(0),Le.charAt(Le.length-1)!==_e&&(Le+=_e);return Le!=="DGBEFHACIJK"}});g({target:"Array",proto:!0,forced:te||!ie||!me||!pe},{sort:function(xe){xe!==void 0&&k(xe);var _e=x(this);if(pe)return xe===void 0?ae(_e):ae(_e,xe);var Ce,ye,Le=[],je=M(_e);for(ye=0;ye<je;ye++)ye in _e&&ue(Le,_e[ye]);for(B(Le,function(Oe){return function(We,ze){return ze===void 0?-1:We===void 0?1:Oe!==void 0?+Oe(We,ze)||0:L(We)>L(ze)?1:-1}}(xe)),Ce=M(Le),ye=0;ye<Ce;)_e[ye]=Le[ye++];for(;ye<je;)A(_e,ye++);return _e}})},6933:function(_,O,d){var g=d(9504),N=d(4376),k=d(4901),x=d(2195),M=d(655),A=g([].push);_.exports=function(L){if(k(L))return L;if(N(L)){for(var R=L.length,B=[],W=0;W<R;W++){var K=L[W];typeof K=="string"?A(B,K):typeof K!="number"&&x(K)!=="Number"&&x(K)!=="String"||A(B,M(K))}var U=B.length,ne=!0;return function(Z,oe){if(ne)return ne=!1,oe;if(N(this))return oe;for(var ae=0;ae<U;ae++)if(B[ae]===Z)return oe}}}},6955:function(_,O,d){var g=d(2140),N=d(4901),k=d(2195),x=d(8227)("toStringTag"),M=Object,A=k(function(){return arguments}())==="Arguments";_.exports=g?k:function(L){var R,B,W;return L===void 0?"Undefined":L===null?"Null":typeof(B=function(K,U){try{return K[U]}catch{}}(R=M(L),x))=="string"?B:A?k(R):(W=k(R))==="Object"&&N(R.callee)?"Arguments":W}},6969:function(_,O,d){var g=d(2777),N=d(757);_.exports=function(k){var x=g(k,"string");return N(x)?x:x+""}},6980:function(_){_.exports=function(O,d){return{enumerable:!(1&O),configurable:!(2&O),writable:!(4&O),value:d}}},7040:function(_,O,d){var g=d(4495);_.exports=g&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7055:function(_,O,d){var g=d(9504),N=d(9039),k=d(2195),x=Object,M=g("".split);_.exports=N(function(){return!x("z").propertyIsEnumerable(0)})?function(A){return k(A)==="String"?M(A,""):x(A)}:x},7323:function(_,O,d){var g,N,k=d(9565),x=d(9504),M=d(655),A=d(7979),L=d(8429),R=d(5745),B=d(2360),W=d(1181).get,K=d(3635),U=d(8814),ne=R("native-string-replace",String.prototype.replace),Z=RegExp.prototype.exec,oe=Z,ae=x("".charAt),ue=x("".indexOf),te=x("".replace),ie=x("".slice),me=(N=/b*/g,k(Z,g=/a/,"a"),k(Z,N,"a"),g.lastIndex!==0||N.lastIndex!==0),pe=L.BROKEN_CARET,xe=/()??/.exec("")[1]!==void 0;(me||xe||pe||K||U)&&(oe=function(_e){var Ce,ye,Le,je,Oe,We,ze,Fe=this,Ve=W(Fe),Be=M(_e),qe=Ve.raw;if(qe)return qe.lastIndex=Fe.lastIndex,Ce=k(oe,qe,Be),Fe.lastIndex=qe.lastIndex,Ce;var Ke=Ve.groups,Je=pe&&Fe.sticky,He=k(A,Fe),Ie=Fe.source,Ye=0,et=Be;if(Je&&(He=te(He,"y",""),ue(He,"g")===-1&&(He+="g"),et=ie(Be,Fe.lastIndex),Fe.lastIndex>0&&(!Fe.multiline||Fe.multiline&&ae(Be,Fe.lastIndex-1)!==`
`)&&(Ie="(?: "+Ie+")",et=" "+et,Ye++),ye=new RegExp("^(?:"+Ie+")",He)),xe&&(ye=new RegExp("^"+Ie+"$(?!\\s)",He)),me&&(Le=Fe.lastIndex),je=k(Z,Je?ye:Fe,et),Je?je?(je.input=ie(je.input,Ye),je[0]=ie(je[0],Ye),je.index=Fe.lastIndex,Fe.lastIndex+=je[0].length):Fe.lastIndex=0:me&&je&&(Fe.lastIndex=Fe.global?je.index+je[0].length:Le),xe&&je&&je.length>1&&k(ne,je[0],ye,function(){for(Oe=1;Oe<arguments.length-2;Oe++)arguments[Oe]===void 0&&(je[Oe]=void 0)}),je&&Ke)for(je.groups=We=B(null),Oe=0;Oe<Ke.length;Oe++)We[(ze=Ke[Oe])[0]]=je[ze[1]];return je}),_.exports=oe},7347:function(_,O,d){var g=d(3724),N=d(9565),k=d(8773),x=d(6980),M=d(5397),A=d(6969),L=d(9297),R=d(5917),B=Object.getOwnPropertyDescriptor;O.f=g?B:function(W,K){if(W=M(W),K=A(K),R)try{return B(W,K)}catch{}if(L(W,K))return x(!N(k.f,W,K),W[K])}},7400:function(_){_.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},7427:function(_,O,d){var g=d(6518),N=d(3724),k=d(2551),x=d(9306),M=d(8981),A=d(4913);N&&g({target:"Object",proto:!0,forced:k},{__defineGetter__:function(L,R){A.f(M(this),L,{get:x(R),enumerable:!0,configurable:!0})}})},7433:function(_,O,d){var g=d(4376),N=d(3517),k=d(34),x=d(8227)("species"),M=Array;_.exports=function(A){var L;return g(A)&&(L=A.constructor,(N(L)&&(L===M||g(L.prototype))||k(L)&&(L=L[x])===null)&&(L=void 0)),L===void 0?M:L}},7452:function(_){_.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},7476:function(_,O,d){var g=d(2195),N=d(9504);_.exports=function(k){if(g(k)==="Function")return N(k)}},7495:function(_,O,d){var g=d(6518),N=d(7323);g({target:"RegExp",proto:!0,forced:/./.exec!==N},{exec:N})},7629:function(_,O,d){var g=d(6395),N=d(4576),k=d(9433),x="__core-js_shared__",M=_.exports=N[x]||k(x,{});(M.versions||(M.versions=[])).push({version:"3.45.0",mode:g?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7633:function(_,O,d){var g=d(7751),N=d(2106),k=d(8227),x=d(3724),M=k("species");_.exports=function(A){var L=g(A);x&&L&&!L[M]&&N(L,M,{configurable:!0,get:function(){return this}})}},7657:function(_,O,d){var g,N,k,x=d(9039),M=d(4901),A=d(34),L=d(2360),R=d(2787),B=d(6840),W=d(8227),K=d(6395),U=W("iterator"),ne=!1;[].keys&&("next"in(k=[].keys())?(N=R(R(k)))!==Object.prototype&&(g=N):ne=!0),!A(g)||x(function(){var Z={};return g[U].call(Z)!==Z})?g={}:K&&(g=L(g)),M(g[U])||B(g,U,function(){return this}),_.exports={IteratorPrototype:g,BUGGY_SAFARI_ITERATORS:ne}},7680:function(_,O,d){var g=d(9504);_.exports=g([].slice)},7740:function(_,O,d){var g=d(9297),N=d(5031),k=d(7347),x=d(4913);_.exports=function(M,A,L){for(var R=N(A),B=x.f,W=k.f,K=0;K<R.length;K++){var U=R[K];g(M,U)||L&&g(L,U)||B(M,U,W(A,U))}}},7750:function(_,O,d){var g=d(4117),N=TypeError;_.exports=function(k){if(g(k))throw new N("Can't call method on "+k);return k}},7751:function(_,O,d){var g=d(4576),N=d(4901);_.exports=function(k,x){return arguments.length<2?(M=g[k],N(M)?M:void 0):g[k]&&g[k][x];var M}},7764:function(_,O,d){var g=d(8183).charAt,N=d(655),k=d(1181),x=d(1088),M=d(2529),A="String Iterator",L=k.set,R=k.getterFor(A);x(String,"String",function(B){L(this,{type:A,string:N(B),index:0})},function(){var B,W=R(this),K=W.string,U=W.index;return U>=K.length?M(void 0,!0):(B=g(K,U),W.index+=B.length,M(B,!1))})},7812:function(_,O,d){var g=d(6518),N=d(9297),k=d(757),x=d(6823),M=d(5745),A=d(1296),L=M("symbol-to-string-registry");g({target:"Symbol",stat:!0,forced:!A},{keyFor:function(R){if(!k(R))throw new TypeError(x(R)+" is not a symbol");if(N(L,R))return L[R]}})},7829:function(_,O,d){var g=d(8183).charAt;_.exports=function(N,k,x){return k+(x?g(N,k).length:1)}},7916:function(_,O,d){var g=d(6080),N=d(9565),k=d(8981),x=d(6319),M=d(4209),A=d(3517),L=d(6198),R=d(4659),B=d(81),W=d(851),K=Array;_.exports=function(U){var ne=k(U),Z=A(this),oe=arguments.length,ae=oe>1?arguments[1]:void 0,ue=ae!==void 0;ue&&(ae=g(ae,oe>2?arguments[2]:void 0));var te,ie,me,pe,xe,_e,Ce=W(ne),ye=0;if(!Ce||this===K&&M(Ce))for(te=L(ne),ie=Z?new this(te):K(te);te>ye;ye++)_e=ue?ae(ne[ye],ye):ne[ye],R(ie,ye,_e);else for(ie=Z?new this:[],xe=(pe=B(ne,Ce)).next;!(me=N(xe,pe)).done;ye++)_e=ue?x(pe,ae,[me.value,ye],!0):me.value,R(ie,ye,_e);return ie.length=ye,ie}},7979:function(_,O,d){var g=d(8551);_.exports=function(){var N=g(this),k="";return N.hasIndices&&(k+="d"),N.global&&(k+="g"),N.ignoreCase&&(k+="i"),N.multiline&&(k+="m"),N.dotAll&&(k+="s"),N.unicode&&(k+="u"),N.unicodeSets&&(k+="v"),N.sticky&&(k+="y"),k}},8014:function(_,O,d){var g=d(1291),N=Math.min;_.exports=function(k){var x=g(k);return x>0?N(x,9007199254740991):0}},8183:function(_,O,d){var g=d(9504),N=d(1291),k=d(655),x=d(7750),M=g("".charAt),A=g("".charCodeAt),L=g("".slice),R=function(B){return function(W,K){var U,ne,Z=k(x(W)),oe=N(K),ae=Z.length;return oe<0||oe>=ae?B?"":void 0:(U=A(Z,oe))<55296||U>56319||oe+1===ae||(ne=A(Z,oe+1))<56320||ne>57343?B?M(Z,oe):U:B?L(Z,oe,oe+2):ne-56320+(U-55296<<10)+65536}};_.exports={codeAt:R(!1),charAt:R(!0)}},8227:function(_,O,d){var g=d(4576),N=d(5745),k=d(9297),x=d(3392),M=d(4495),A=d(7040),L=g.Symbol,R=N("wks"),B=A?L.for||L:L&&L.withoutSetter||x;_.exports=function(W){return k(R,W)||(R[W]=M&&k(L,W)?L[W]:B("Symbol."+W)),R[W]}},8242:function(_,O,d){var g=d(9565),N=d(7751),k=d(8227),x=d(6840);_.exports=function(){var M=N("Symbol"),A=M&&M.prototype,L=A&&A.valueOf,R=k("toPrimitive");A&&!A[R]&&x(A,R,function(B){return g(L,this)},{arity:1})}},8344:function(_,O,d){d(8543)},8429:function(_,O,d){var g=d(9039),N=d(4576).RegExp,k=g(function(){var A=N("a","y");return A.lastIndex=2,A.exec("abcd")!==null}),x=k||g(function(){return!N("a","y").sticky}),M=k||g(function(){var A=N("^r","gy");return A.lastIndex=2,A.exec("str")!==null});_.exports={BROKEN_CARET:M,MISSED_STICKY:x,UNSUPPORTED_Y:k}},8480:function(_,O,d){var g=d(1828),N=d(8727).concat("length","prototype");O.f=Object.getOwnPropertyNames||function(k){return g(k,N)}},8543:function(_,O,d){var g=d(6518),N=d(9565),k=d(7476),x=d(3994),M=d(2529),A=d(7750),L=d(8014),R=d(655),B=d(8551),W=d(34),K=d(2195),U=d(788),ne=d(1034),Z=d(5966),oe=d(6840),ae=d(9039),ue=d(8227),te=d(2293),ie=d(7829),me=d(6682),pe=d(1181),xe=d(6395),_e=ue("matchAll"),Ce="RegExp String",ye=Ce+" Iterator",Le=pe.set,je=pe.getterFor(ye),Oe=RegExp.prototype,We=TypeError,ze=k("".indexOf),Fe=k("".matchAll),Ve=!!Fe&&!ae(function(){Fe("a",/./)}),Be=x(function(Ke,Je,He,Ie){Le(this,{type:ye,regexp:Ke,string:Je,global:He,unicode:Ie,done:!1})},Ce,function(){var Ke=je(this);if(Ke.done)return M(void 0,!0);var Je=Ke.regexp,He=Ke.string,Ie=me(Je,He);return Ie===null?(Ke.done=!0,M(void 0,!0)):Ke.global?(R(Ie[0])===""&&(Je.lastIndex=ie(He,L(Je.lastIndex),Ke.unicode)),M(Ie,!1)):(Ke.done=!0,M(Ie,!1))}),qe=function(Ke){var Je,He,Ie,Ye=B(this),et=R(Ke),it=te(Ye,RegExp),gt=R(ne(Ye));return Je=new it(it===RegExp?Ye.source:Ye,gt),He=!!~ze(gt,"g"),Ie=!!~ze(gt,"u"),Je.lastIndex=L(Ye.lastIndex),new Be(Je,et,He,Ie)};g({target:"String",proto:!0,forced:Ve},{matchAll:function(Ke){var Je,He,Ie,Ye,et=A(this);if(W(Ke)){if(U(Ke)&&(Je=R(A(ne(Ke))),!~ze(Je,"g")))throw new We("`.matchAll` does not allow non-global regexes");if(Ve)return Fe(et,Ke);if((Ie=Z(Ke,_e))===void 0&&xe&&K(Ke)==="RegExp"&&(Ie=qe),Ie)return N(Ie,Ke,et)}else if(Ve)return Fe(et,Ke);return He=R(et),Ye=new RegExp(Ke,"g"),xe?N(qe,Ye,He):Ye[_e](He)}}),xe||_e in Oe||oe(Oe,_e,qe)},8551:function(_,O,d){var g=d(34),N=String,k=TypeError;_.exports=function(x){if(g(x))return x;throw new k(N(x)+" is not an object")}},8598:function(_,O,d){var g=d(6518),N=d(9504),k=d(7055),x=d(5397),M=d(4598),A=N([].join);g({target:"Array",proto:!0,forced:k!==Object||!M("join",",")},{join:function(L){return A(x(this),L===void 0?",":L)}})},8622:function(_,O,d){var g=d(4576),N=d(4901),k=g.WeakMap;_.exports=N(k)&&/native code/.test(String(k))},8686:function(_,O,d){var g=d(3724),N=d(9039);_.exports=g&&N(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},8706:function(_,O,d){var g=d(6518),N=d(9039),k=d(4376),x=d(34),M=d(8981),A=d(6198),L=d(6837),R=d(4659),B=d(1469),W=d(597),K=d(8227),U=d(9519),ne=K("isConcatSpreadable"),Z=U>=51||!N(function(){var ae=[];return ae[ne]=!1,ae.concat()[0]!==ae}),oe=function(ae){if(!x(ae))return!1;var ue=ae[ne];return ue!==void 0?!!ue:k(ae)};g({target:"Array",proto:!0,arity:1,forced:!Z||!W("concat")},{concat:function(ae){var ue,te,ie,me,pe,xe=M(this),_e=B(xe,0),Ce=0;for(ue=-1,ie=arguments.length;ue<ie;ue++)if(oe(pe=ue===-1?xe:arguments[ue]))for(me=A(pe),L(Ce+me),te=0;te<me;te++,Ce++)te in pe&&R(_e,Ce,pe[te]);else L(Ce+1),R(_e,Ce++,pe);return _e.length=Ce,_e}})},8727:function(_){_.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:function(_,O,d){var g=d(616),N=Function.prototype,k=N.apply,x=N.call;_.exports=typeof Reflect=="object"&&Reflect.apply||(g?x.bind(k):function(){return x.apply(k,arguments)})},8773:function(_,O){var d={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,N=g&&!d.call({1:2},1);O.f=N?function(k){var x=g(this,k);return!!x&&x.enumerable}:d},8781:function(_,O,d){var g=d(350).PROPER,N=d(6840),k=d(8551),x=d(655),M=d(9039),A=d(1034),L="toString",R=RegExp.prototype,B=R[L],W=M(function(){return B.call({source:"a",flags:"b"})!=="/a/b"}),K=g&&B.name!==L;(W||K)&&N(R,L,function(){var U=k(this);return"/"+x(U.source)+"/"+x(A(U))},{unsafe:!0})},8814:function(_,O,d){var g=d(9039),N=d(4576).RegExp;_.exports=g(function(){var k=N("(?<a>b)","g");return k.exec("b").groups.a!=="b"||"b".replace(k,"$<a>c")!=="bc"})},8981:function(_,O,d){var g=d(7750),N=Object;_.exports=function(k){return N(g(k))}},9039:function(_){_.exports=function(O){try{return!!O()}catch{return!0}}},9085:function(_,O,d){var g=d(6518),N=d(4213);g({target:"Object",stat:!0,arity:2,forced:Object.assign!==N},{assign:N})},9167:function(_,O,d){var g=d(4576);_.exports=g},9213:function(_,O,d){var g=d(6080),N=d(9504),k=d(7055),x=d(8981),M=d(6198),A=d(1469),L=N([].push),R=function(B){var W=B===1,K=B===2,U=B===3,ne=B===4,Z=B===6,oe=B===7,ae=B===5||Z;return function(ue,te,ie,me){for(var pe,xe,_e=x(ue),Ce=k(_e),ye=M(Ce),Le=g(te,ie),je=0,Oe=me||A,We=W?Oe(ue,ye):K||oe?Oe(ue,0):void 0;ye>je;je++)if((ae||je in Ce)&&(xe=Le(pe=Ce[je],je,_e),B))if(W)We[je]=xe;else if(xe)switch(B){case 3:return!0;case 5:return pe;case 6:return je;case 2:L(We,pe)}else switch(B){case 4:return!1;case 7:L(We,pe)}return Z?-1:U||ne?ne:We}};_.exports={forEach:R(0),map:R(1),filter:R(2),some:R(3),every:R(4),find:R(5),findIndex:R(6),filterReject:R(7)}},9228:function(_,O,d){d(7495);var g=d(9565),N=d(6840),k=d(7323),x=d(9039),M=d(8227),A=d(6699),L=M("species"),R=RegExp.prototype;_.exports=function(B,W,K,U){var ne=M(B),Z=!x(function(){var te={};return te[ne]=function(){return 7},""[B](te)!==7}),oe=Z&&!x(function(){var te=!1,ie=/a/;return B==="split"&&((ie={}).constructor={},ie.constructor[L]=function(){return ie},ie.flags="",ie[ne]=/./[ne]),ie.exec=function(){return te=!0,null},ie[ne](""),!te});if(!Z||!oe||K){var ae=/./[ne],ue=W(ne,""[B],function(te,ie,me,pe,xe){var _e=ie.exec;return _e===k||_e===R.exec?Z&&!xe?{done:!0,value:g(ae,ie,me,pe)}:{done:!0,value:g(te,me,ie,pe)}:{done:!1}});N(String.prototype,B,ue[0]),N(R,ne,ue[1])}U&&A(R[ne],"sham",!0)}},9296:function(_,O,d){var g=d(4055)("span").classList,N=g&&g.constructor&&g.constructor.prototype;_.exports=N===Object.prototype?void 0:N},9297:function(_,O,d){var g=d(9504),N=d(8981),k=g({}.hasOwnProperty);_.exports=Object.hasOwn||function(x,M){return k(N(x),M)}},9306:function(_,O,d){var g=d(4901),N=d(6823),k=TypeError;_.exports=function(x){if(g(x))return x;throw new k(N(x)+" is not a function")}},9432:function(_,O,d){var g=d(6518),N=d(8981),k=d(1072);g({target:"Object",stat:!0,forced:d(9039)(function(){k(1)})},{keys:function(x){return k(N(x))}})},9433:function(_,O,d){var g=d(4576),N=Object.defineProperty;_.exports=function(k,x){try{N(g,k,{value:x,configurable:!0,writable:!0})}catch{g[k]=x}return x}},9463:function(_,O,d){var g=d(6518),N=d(3724),k=d(4576),x=d(9504),M=d(9297),A=d(4901),L=d(1625),R=d(655),B=d(2106),W=d(7740),K=k.Symbol,U=K&&K.prototype;if(N&&A(K)&&(!("description"in U)||K().description!==void 0)){var ne={},Z=function(){var pe=arguments.length<1||arguments[0]===void 0?void 0:R(arguments[0]),xe=L(U,this)?new K(pe):pe===void 0?K():K(pe);return pe===""&&(ne[xe]=!0),xe};W(Z,K),Z.prototype=U,U.constructor=Z;var oe=String(K("description detection"))==="Symbol(description detection)",ae=x(U.valueOf),ue=x(U.toString),te=/^Symbol\((.*)\)[^)]+$/,ie=x("".replace),me=x("".slice);B(U,"description",{configurable:!0,get:function(){var pe=ae(this);if(M(ne,pe))return"";var xe=ue(pe),_e=oe?me(xe,7,-1):ie(xe,te,"$1");return _e===""?void 0:_e}}),g({global:!0,constructor:!0,forced:!0},{Symbol:Z})}},9504:function(_,O,d){var g=d(616),N=Function.prototype,k=N.call,x=g&&N.bind.bind(k,k);_.exports=g?x:function(M){return function(){return k.apply(M,arguments)}}},9519:function(_,O,d){var g,N,k=d(4576),x=d(2839),M=k.process,A=k.Deno,L=M&&M.versions||A&&A.version,R=L&&L.v8;R&&(N=(g=R.split("."))[0]>0&&g[0]<4?1:+(g[0]+g[1])),!N&&x&&(!(g=x.match(/Edge\/(\d+)/))||g[1]>=74)&&(g=x.match(/Chrome\/(\d+)/))&&(N=+g[1]),_.exports=N},9539:function(_,O,d){var g=d(9565),N=d(8551),k=d(5966);_.exports=function(x,M,A){var L,R;N(x);try{if(!(L=k(x,"return"))){if(M==="throw")throw A;return A}L=g(L,x)}catch(B){R=!0,L=B}if(M==="throw")throw A;if(R)throw L;return N(L),A}},9565:function(_,O,d){var g=d(616),N=Function.prototype.call;_.exports=g?N.bind(N):function(){return N.apply(N,arguments)}},9572:function(_,O,d){var g=d(9297),N=d(6840),k=d(3640),x=d(8227)("toPrimitive"),M=Date.prototype;g(M,x)||N(M,x,k)},9617:function(_,O,d){var g=d(5397),N=d(5610),k=d(6198),x=function(M){return function(A,L,R){var B=g(A),W=k(B);if(W===0)return!M&&-1;var K,U=N(R,W);if(M&&L!=L){for(;W>U;)if((K=B[U++])!=K)return!0}else for(;W>U;U++)if((M||U in B)&&B[U]===L)return M||U||0;return!M&&-1}};_.exports={includes:x(!0),indexOf:x(!1)}},9773:function(_,O,d){var g=d(6518),N=d(4495),k=d(9039),x=d(3717),M=d(8981);g({target:"Object",stat:!0,forced:!N||k(function(){x.f(1)})},{getOwnPropertySymbols:function(A){var L=x.f;return L?L(M(A)):[]}})}},u={};function m(_){var O=u[_];if(O!==void 0)return O.exports;var d=u[_]={exports:{}};return c[_].call(d.exports,d,d.exports,m),d.exports}m.d=function(_,O){for(var d in O)m.o(O,d)&&!m.o(_,d)&&Object.defineProperty(_,d,{enumerable:!0,get:O[d]})},m.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),m.o=function(_,O){return Object.prototype.hasOwnProperty.call(_,O)},m.r=function(_){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})};var h={};function f(_){return function(O){if(Array.isArray(O))return v(O)}(_)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(_)||b(_)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function b(_,O){if(_){if(typeof _=="string")return v(_,O);var d={}.toString.call(_).slice(8,-1);return d==="Object"&&_.constructor&&(d=_.constructor.name),d==="Map"||d==="Set"?Array.from(_):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?v(_,O):void 0}}function v(_,O){(O==null||O>_.length)&&(O=_.length);for(var d=0,g=Array(O);d<O;d++)g[d]=_[d];return g}function D(_){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},D(_)}function p(_,O){for(var d=0;d<O.length;d++){var g=O[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(_,w(g.key),g)}}function y(_,O,d){return(O=w(O))in _?Object.defineProperty(_,O,{value:d,enumerable:!0,configurable:!0,writable:!0}):_[O]=d,_}function w(_){var O=function(d,g){if(D(d)!="object"||!d)return d;var N=d[Symbol.toPrimitive];if(N!==void 0){var k=N.call(d,g);if(D(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(d)}(_,"string");return D(O)=="symbol"?O:O+""}m.r(h),m.d(h,{SimpleKeyboard:function(){return I},default:function(){return q}}),m(5276),m(8598),m(4782),m(4554),m(2010),m(7427),m(6099),m(7495),m(8781),m(5440),m(744),m(2762),typeof Element>"u"||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof self<"u"&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(_){if("Element"in _){var O="classList",d="prototype",g=_.Element[d],N=Object,k=String[d].trim||function(){return this.replace(/^\s+|\s+$/g,"")},x=Array[d].indexOf||function(K){for(var U=0,ne=this.length;U<ne;U++)if(U in this&&this[U]===K)return U;return-1},M=function(K,U){this.name=K,this.code=DOMException[K],this.message=U},A=function(K,U){if(U==="")throw new M("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(U))throw new M("INVALID_CHARACTER_ERR","The token must not contain space characters.");return x.call(K,U)},L=function(K){for(var U=k.call(K.getAttribute("class")||""),ne=U?U.split(/\s+/):[],Z=0,oe=ne.length;Z<oe;Z++)this.push(ne[Z]);this._updateClassName=function(){K.setAttribute("class",this.toString())}},R=L[d]=[],B=function(){return new L(this)};if(M[d]=Error[d],R.item=function(K){return this[K]||null},R.contains=function(K){return~A(this,K+"")},R.add=function(){var K,U=arguments,ne=0,Z=U.length,oe=!1;do~A(this,K=U[ne]+"")||(this.push(K),oe=!0);while(++ne<Z);oe&&this._updateClassName()},R.remove=function(){var K,U,ne=arguments,Z=0,oe=ne.length,ae=!1;do for(U=A(this,K=ne[Z]+"");~U;)this.splice(U,1),ae=!0,U=A(this,K);while(++Z<oe);ae&&this._updateClassName()},R.toggle=function(K,U){var ne=this.contains(K),Z=ne?U!==!0&&"remove":U!==!1&&"add";return Z&&this[Z](K),U===!0||U===!1?U:!ne},R.replace=function(K,U){var ne=A(K+"");~ne&&(this.splice(ne,1,U),this._updateClassName())},R.toString=function(){return this.join(" ")},N.defineProperty){var W={get:B,enumerable:!0,configurable:!0};try{N.defineProperty(g,O,W)}catch(K){K.number!==void 0&&K.number!==-2146823252||(W.enumerable=!1,N.defineProperty(g,O,W))}}else N[d].__defineGetter__&&g.__defineGetter__(O,B)}}(self),function(){var _=document.createElement("_");if(_.classList.add("c1","c2"),!_.classList.contains("c2")){var O=function(g){var N=DOMTokenList.prototype[g];DOMTokenList.prototype[g]=function(k){var x,M=arguments.length;for(x=0;x<M;x++)k=arguments[x],N.call(this,k)}};O("add"),O("remove")}if(_.classList.toggle("c3",!1),_.classList.contains("c3")){var d=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(g,N){return 1 in arguments&&!this.contains(g)==!N?N:d.call(this,g)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(g,N){var k=this.toString().split(" "),x=k.indexOf(g+"");~x&&(k=k.slice(x),this.remove.apply(this,k),this.add(N),this.add.apply(this,k.slice(1)))}),_=null}()),m(2675),m(9463),m(2259),m(5700),m(8706),m(2008),m(3418),m(4423),m(3792),m(2062),m(6910),m(739),m(9572),m(2892),m(9085),m(3851),m(1278),m(9432),m(4864),m(1699),m(7764),m(8344),m(3500),m(2953),m(2712),m(2637),m(1480),m(825),m(1761);var S=function(){return _=function g(N){var k=N.getOptions,x=N.getCaretPosition,M=N.getCaretPositionEnd,A=N.dispatch;(function(L,R){if(!(L instanceof R))throw new TypeError("Cannot call a class as a function")})(this,g),y(this,"getOptions",void 0),y(this,"getCaretPosition",void 0),y(this,"getCaretPositionEnd",void 0),y(this,"dispatch",void 0),y(this,"maxLengthReached",void 0),y(this,"isStandardButton",function(L){return L&&!(L[0]==="{"&&L[L.length-1]==="}")}),this.getOptions=k,this.getCaretPosition=x,this.getCaretPositionEnd=M,this.dispatch=A,g.bindMethods(g,this)},O=[{key:"getButtonType",value:function(g){return g.includes("{")&&g.includes("}")&&g!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(g){var N=this.getButtonType(g),k=g.replace("{","").replace("}",""),x="";return N!=="standardBtn"&&(x=" hg-button-".concat(k)),"hg-".concat(N).concat(x)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(g,N){return(N=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),N):N||this.getDefaultDiplay())[g]||g}},{key:"getUpdatedInput",value:function(g,N,k){var x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,M=arguments.length>4&&arguments[4]!==void 0&&arguments[4],A=this.getOptions(),L=[k,x,M],R=N;return(g==="{bksp}"||g==="{backspace}")&&R.length>0?R=this.removeAt.apply(this,[R].concat(L)):(g==="{delete}"||g==="{forwarddelete}")&&R.length>0?R=this.removeForwardsAt.apply(this,[R].concat(L)):g==="{space}"?R=this.addStringAt.apply(this,[R," "].concat(L)):g!=="{tab}"||typeof A.tabCharOnTab=="boolean"&&A.tabCharOnTab===!1?g!=="{enter}"&&g!=="{numpadenter}"||!A.newLineOnEnter?g.includes("numpad")&&Number.isInteger(Number(g[g.length-2]))?R=this.addStringAt.apply(this,[R,g[g.length-2]].concat(L)):g==="{numpaddivide}"?R=this.addStringAt.apply(this,[R,"/"].concat(L)):g==="{numpadmultiply}"?R=this.addStringAt.apply(this,[R,"*"].concat(L)):g==="{numpadsubtract}"?R=this.addStringAt.apply(this,[R,"-"].concat(L)):g==="{numpadadd}"?R=this.addStringAt.apply(this,[R,"+"].concat(L)):g==="{numpaddecimal}"?R=this.addStringAt.apply(this,[R,"."].concat(L)):g==="{"||g==="}"?R=this.addStringAt.apply(this,[R,g].concat(L)):g.includes("{")||g.includes("}")||(R=this.addStringAt.apply(this,[R,g].concat(L))):R=this.addStringAt.apply(this,[R,`
`].concat(L)):R=this.addStringAt.apply(this,[R,"	"].concat(L)),A.debug&&console.log("Input will be: "+R),R}},{key:"updateCaretPos",value:function(g){var N=arguments.length>1&&arguments[1]!==void 0&&arguments[1],k=this.updateCaretPosAction(g,N);this.dispatch(function(x){x.setCaretPosition(k)})}},{key:"updateCaretPosAction",value:function(g){var N=arguments.length>1&&arguments[1]!==void 0&&arguments[1],k=this.getOptions(),x=this.getCaretPosition();return x!=null&&(N?x>0&&(x-=g):x+=g),k.debug&&console.log("Caret at:",x),x}},{key:"addStringAt",value:function(g,N){var k,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.length,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:g.length,A=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return x||x===0?(k=[g.slice(0,x),N,g.slice(M)].join(""),this.isMaxLengthReached()||A&&this.updateCaretPos(N.length)):k=g+N,k}},{key:"removeAt",value:function(g){var N,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.length,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.length,M=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(k===0&&x===0)return g;if(k===x){var A=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;k&&k>=0?g.substring(k-2,k).match(A)?(N=g.substr(0,k-2)+g.substr(k),M&&this.updateCaretPos(2,!0)):(N=g.substr(0,k-1)+g.substr(k),M&&this.updateCaretPos(1,!0)):g.slice(-2).match(A)?(N=g.slice(0,-2),M&&this.updateCaretPos(2,!0)):(N=g.slice(0,-1),M&&this.updateCaretPos(1,!0))}else N=g.slice(0,k)+g.slice(x),M&&this.dispatch(function(L){L.setCaretPosition(k)});return N}},{key:"removeForwardsAt",value:function(g){var N,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.length,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.length,M=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return g!=null&&g.length&&k!==null?(k===x?N=g.substring(k,k+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?g.substr(0,k)+g.substr(k+2):g.substr(0,k)+g.substr(k+1):(N=g.slice(0,k)+g.slice(x),M&&this.dispatch(function(A){A.setCaretPosition(k)})),N):g}},{key:"handleMaxLength",value:function(g,N){var k=this.getOptions(),x=k.maxLength,M=g[k.inputName||"default"],A=N.length-1>=x;if(N.length<=M.length)return!1;if(Number.isInteger(x))return k.debug&&console.log("maxLength (num) reached:",A),A?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(D(x)==="object"){var L=N.length-1>=x[k.inputName||"default"];return k.debug&&console.log("maxLength (obj) reached:",L),L?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(g){return g?g.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(N,k){return k.length?N+k[0].toUpperCase()+k.slice(1):N}):""}},{key:"chunkArray",value:function(g,N){return f(Array(Math.ceil(g.length/N))).map(function(k,x){return g.slice(N*x,N+N*x)})}},{key:"escapeRegex",value:function(g){return g.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(g,N){var k=g,x=N.indexOf("‫");return x<g&&x!=-1&&k--,N.indexOf("‬")<g&&x!=-1&&k--,k<0?0:k}},{key:"isConstructor",value:function(g){try{Reflect.construct(String,[],g)}catch{return!1}return!0}}],d=[{key:"bindMethods",value:function(g,N){var k,x=function(A,L){var R=typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(!R){if(Array.isArray(A)||(R=b(A))||L){R&&(A=R);var B=0,W=function(){};return{s:W,n:function(){return B>=A.length?{done:!0}:{done:!1,value:A[B++]}},e:function(Z){throw Z},f:W}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var K,U=!0,ne=!1;return{s:function(){R=R.call(A)},n:function(){var Z=R.next();return U=Z.done,Z},e:function(Z){ne=!0,K=Z},f:function(){try{U||R.return==null||R.return()}finally{if(ne)throw K}}}}(Object.getOwnPropertyNames(g.prototype));try{for(x.s();!(k=x.n()).done;){var M=k.value;M==="constructor"||M==="bindMethods"||(N[M]=N[M].bind(N))}}catch(A){x.e(A)}finally{x.f()}}}],O&&p(_.prototype,O),d&&p(_,d),Object.defineProperty(_,"prototype",{writable:!1}),_;var _,O,d}();y(S,"noop",function(){});var j=S;function F(_){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},F(_)}function C(_,O){for(var d=0;d<O.length;d++){var g=O[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(_,P(g.key),g)}}function T(_,O,d){return(O=P(O))in _?Object.defineProperty(_,O,{value:d,enumerable:!0,configurable:!0,writable:!0}):_[O]=d,_}function P(_){var O=function(d,g){if(F(d)!="object"||!d)return d;var N=d[Symbol.toPrimitive];if(N!==void 0){var k=N.call(d,g);if(F(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(d)}(_,"string");return F(O)=="symbol"?O:O+""}var V=function(){return _=function g(N){var k=this,x=N.dispatch,M=N.getOptions;(function(A,L){if(!(A instanceof L))throw new TypeError("Cannot call a class as a function")})(this,g),T(this,"getOptions",void 0),T(this,"dispatch",void 0),T(this,"isModifierKey",function(A){return A.altKey||A.ctrlKey||A.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(A.code||A.key||k.keyCodeToKey(A==null?void 0:A.keyCode))}),this.dispatch=x,this.getOptions=M,j.bindMethods(g,this)},O=[{key:"handleHighlightKeyDown",value:function(g){var N=this.getOptions();N.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(g)&&(g.preventDefault(),g.stopImmediatePropagation());var k=this.getSimpleKeyboardLayoutKey(g);this.dispatch(function(x){var M,A,L=x.getButtonElement(k),R=x.getButtonElement("{".concat(k,"}"));if(L)M=L,A=k;else{if(!R)return;M=R,A="{".concat(k,"}")}var B,W,K,U,ne=function(oe){oe.style.background=N.physicalKeyboardHighlightBgColor||"#dadce4",oe.style.color=N.physicalKeyboardHighlightTextColor||"black"};if(M)if(Array.isArray(M)){if(M.forEach(function(oe){return ne(oe)}),N.physicalKeyboardHighlightPress)if(N.physicalKeyboardHighlightPressUsePointerEvents)(B=M[0])===null||B===void 0||(W=B.onpointerdown)===null||W===void 0||W.call(B,g);else if(N.physicalKeyboardHighlightPressUseClick){var Z;(Z=M[0])===null||Z===void 0||Z.click()}else x.handleButtonClicked(A,g)}else ne(M),N.physicalKeyboardHighlightPress&&(N.physicalKeyboardHighlightPressUsePointerEvents?(K=M)===null||K===void 0||(U=K.onpointerdown)===null||U===void 0||U.call(K,g):N.physicalKeyboardHighlightPressUseClick?M.click():x.handleButtonClicked(A,g))})}},{key:"handleHighlightKeyUp",value:function(g){var N=this.getOptions();N.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(g)&&(g.preventDefault(),g.stopImmediatePropagation());var k=this.getSimpleKeyboardLayoutKey(g);this.dispatch(function(x){var M,A,L,R=x.getButtonElement(k)||x.getButtonElement("{".concat(k,"}")),B=function(W){W.removeAttribute&&W.removeAttribute("style")};R&&(Array.isArray(R)?(R.forEach(function(W){return B(W)}),N.physicalKeyboardHighlightPressUsePointerEvents&&((M=R[0])===null||M===void 0||(A=M.onpointerup)===null||A===void 0||A.call(M,g))):(B(R),N.physicalKeyboardHighlightPressUsePointerEvents&&(R==null||(L=R.onpointerup)===null||L===void 0||L.call(R,g))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(g){var N,k="",x=g.code||g.key||this.keyCodeToKey(g==null?void 0:g.keyCode);return(k=x!=null&&x.includes("Numpad")||x!=null&&x.includes("Shift")||x!=null&&x.includes("Space")||x!=null&&x.includes("Backspace")||x!=null&&x.includes("Control")||x!=null&&x.includes("Alt")||x!=null&&x.includes("Meta")?g.code||"":g.key||this.keyCodeToKey(g==null?void 0:g.keyCode)||"").length>1?(N=k)===null||N===void 0?void 0:N.toLowerCase():k}},{key:"keyCodeToKey",value:function(g){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[g]||""}}],O&&C(_.prototype,O),d&&C(_,d),Object.defineProperty(_,"prototype",{writable:!1}),_;var _,O,d}();function Q(_){return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Q(_)}function ee(_,O){for(var d=0;d<O.length;d++){var g=O[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(_,fe(g.key),g)}}function ce(_,O,d){return(O=fe(O))in _?Object.defineProperty(_,O,{value:d,enumerable:!0,configurable:!0,writable:!0}):_[O]=d,_}function fe(_){var O=function(d,g){if(Q(d)!="object"||!d)return d;var N=d[Symbol.toPrimitive];if(N!==void 0){var k=N.call(d,g);if(Q(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(d)}(_,"string");return Q(O)=="symbol"?O:O+""}var G=function(){return _=function g(N){var k=N.utilities,x=N.options;(function(M,A){if(!(M instanceof A))throw new TypeError("Cannot call a class as a function")})(this,g),ce(this,"utilities",void 0),ce(this,"options",void 0),ce(this,"candidateBoxElement",void 0),ce(this,"pageIndex",0),ce(this,"pageSize",void 0),this.utilities=k,this.options=x,j.bindMethods(g,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},O=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(g){var N=this,k=g.candidateValue,x=g.targetElement,M=g.onSelect;if(k&&k.length){var A=this.utilities.chunkArray(k.split(" "),this.pageSize);this.renderPage({candidateListPages:A,targetElement:x,pageIndex:this.pageIndex,nbPages:A.length,onItemSelected:function(L,R){M(L,R),N.destroy()}})}}},{key:"renderPage",value:function(g){var N,k=this,x=g.candidateListPages,M=g.targetElement,A=g.pageIndex,L=g.nbPages,R=g.onItemSelected;(N=this.candidateBoxElement)===null||N===void 0||N.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var B=document.createElement("ul");B.className="hg-candidate-box-list",x[A].forEach(function(ae){var ue,te=document.createElement("li"),ie=function(){var me=new(k.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(me,"target",{value:te}),me};te.className="hg-candidate-box-list-item",te.innerHTML=((ue=k.options.display)===null||ue===void 0?void 0:ue[ae])||ae,k.options.useTouchEvents?te.ontouchstart=function(me){return R(ae,me||ie())}:te.onclick=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ie();return R(ae,me)},B.appendChild(te)});var W=A>0,K=document.createElement("div");K.classList.add("hg-candidate-box-prev"),W&&K.classList.add("hg-candidate-box-btn-active");var U=function(){W&&k.renderPage({candidateListPages:x,targetElement:M,pageIndex:A-1,nbPages:L,onItemSelected:R})};this.options.useTouchEvents?K.ontouchstart=U:K.onclick=U,this.candidateBoxElement.appendChild(K),this.candidateBoxElement.appendChild(B);var ne=A<L-1,Z=document.createElement("div");Z.classList.add("hg-candidate-box-next"),ne&&Z.classList.add("hg-candidate-box-btn-active");var oe=function(){ne&&k.renderPage({candidateListPages:x,targetElement:M,pageIndex:A+1,nbPages:L,onItemSelected:R})};this.options.useTouchEvents?Z.ontouchstart=oe:Z.onclick=oe,this.candidateBoxElement.appendChild(Z),M.prepend(this.candidateBoxElement)}}],O&&ee(_.prototype,O),d&&ee(_,d),Object.defineProperty(_,"prototype",{writable:!1}),_;var _,O,d}(),re=G;function $(_){return function(O){if(Array.isArray(O))return H(O)}(_)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(_)||function(O,d){if(O){if(typeof O=="string")return H(O,d);var g={}.toString.call(O).slice(8,-1);return g==="Object"&&O.constructor&&(g=O.constructor.name),g==="Map"||g==="Set"?Array.from(O):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?H(O,d):void 0}}(_)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function H(_,O){(O==null||O>_.length)&&(O=_.length);for(var d=0,g=Array(O);d<O;d++)g[d]=_[d];return g}function Y(_){return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},Y(_)}function X(_,O){var d=Object.keys(_);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(_);O&&(g=g.filter(function(N){return Object.getOwnPropertyDescriptor(_,N).enumerable})),d.push.apply(d,g)}return d}function J(_,O){for(var d=0;d<O.length;d++){var g=O[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(_,Se(g.key),g)}}function he(_,O,d){return(O=Se(O))in _?Object.defineProperty(_,O,{value:d,enumerable:!0,configurable:!0,writable:!0}):_[O]=d,_}function Se(_){var O=function(d,g){if(Y(d)!="object"||!d)return d;var N=d[Symbol.toPrimitive];if(N!==void 0){var k=N.call(d,g);if(Y(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(d)}(_,"string");return Y(O)=="symbol"?O:O+""}var se=function(){return _=function g(N,k){var x=this;if(function(U,ne){if(!(U instanceof ne))throw new TypeError("Cannot call a class as a function")}(this,g),he(this,"input",void 0),he(this,"options",void 0),he(this,"utilities",void 0),he(this,"caretPosition",void 0),he(this,"caretPositionEnd",void 0),he(this,"keyboardDOM",void 0),he(this,"keyboardPluginClasses",void 0),he(this,"keyboardDOMClass",void 0),he(this,"buttonElements",void 0),he(this,"currentInstanceName",void 0),he(this,"allKeyboardInstances",void 0),he(this,"keyboardInstanceNames",void 0),he(this,"isFirstKeyboardInstance",void 0),he(this,"physicalKeyboard",void 0),he(this,"modules",void 0),he(this,"activeButtonClass",void 0),he(this,"holdInteractionTimeout",void 0),he(this,"holdTimeout",void 0),he(this,"isMouseHold",void 0),he(this,"initialized",void 0),he(this,"candidateBox",void 0),he(this,"keyboardRowsDOM",void 0),he(this,"defaultName","default"),he(this,"activeInputElement",null),he(this,"handleParams",function(U,ne){var Z,oe,ae;if(typeof U=="string")Z=U.split(".").join(""),oe=document.querySelector(".".concat(Z)),ae=ne;else if(U instanceof HTMLDivElement){if(!U.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");Z=U.className.split(" ")[0],oe=U,ae=ne}else Z="simple-keyboard",oe=document.querySelector(".".concat(Z)),ae=U;return{keyboardDOMClass:Z,keyboardDOM:oe,options:ae}}),he(this,"getOptions",function(){return x.options}),he(this,"getCaretPosition",function(){return x.caretPosition}),he(this,"getCaretPositionEnd",function(){return x.caretPositionEnd}),he(this,"registerModule",function(U,ne){x.modules[U]||(x.modules[U]={}),ne(x.modules[U])}),he(this,"getKeyboardClassString",function(){for(var U=arguments.length,ne=new Array(U),Z=0;Z<U;Z++)ne[Z]=arguments[Z];return[x.keyboardDOMClass].concat(ne).filter(function(oe){return!!oe}).join(" ")}),typeof window<"u"){var M=this.handleParams(N,k),A=M.keyboardDOMClass,L=M.keyboardDOM,R=M.options,B=R===void 0?{}:R;this.utilities=new j({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=L,this.options=function(U){for(var ne=1;ne<arguments.length;ne++){var Z=arguments[ne]!=null?arguments[ne]:{};ne%2?X(Object(Z),!0).forEach(function(oe){he(U,oe,Z[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(Z)):X(Object(Z)).forEach(function(oe){Object.defineProperty(U,oe,Object.getOwnPropertyDescriptor(Z,oe))})}return U}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},B),this.keyboardPluginClasses="",j.bindMethods(g,this);var W=this.options.inputName,K=W===void 0?this.defaultName:W;if(this.input={},this.input[K]="",this.keyboardDOMClass=A,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new V({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new re({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(A,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},O=[{key:"setCaretPosition",value:function(g){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;this.caretPosition=g,this.caretPositionEnd=N}},{key:"getInputCandidates",value:function(g){var N=this,k=this.options,x=k.layoutCandidates,M=k.layoutCandidatesCaseSensitiveMatch;if(!x||Y(x)!=="object")return{};var A=Object.keys(x).filter(function(B){var W=g.substring(0,N.getCaretPositionEnd()||0)||g,K=new RegExp("".concat(N.utilities.escapeRegex(B),"$"),M?"g":"gi");return!!$(W.matchAll(K)).length});if(A.length>1){var L=A.sort(function(B,W){return W.length-B.length})[0];return{candidateKey:L,candidateValue:x[L]}}if(A.length){var R=A[0];return{candidateKey:R,candidateValue:x[R]}}return{}}},{key:"showCandidatesBox",value:function(g,N,k){var x=this;this.candidateBox&&this.candidateBox.show({candidateValue:N,targetElement:k,onSelect:function(M,A){var L=x.options,R=L.layoutCandidatesCaseSensitiveMatch,B=L.disableCandidateNormalization,W=L.enableLayoutCandidatesKeyPress,K=M;B||(K=M.normalize("NFD")),typeof x.options.beforeInputUpdate=="function"&&x.options.beforeInputUpdate(x);var U=x.getInput(x.options.inputName,!0),ne=x.getCaretPositionEnd()||0,Z=U.substring(0,ne||0)||U,oe=new RegExp("".concat(x.utilities.escapeRegex(g),"$"),R?"g":"gi"),ae=Z.replace(oe,K),ue=U.replace(Z,ae),te=ae.length-Z.length,ie=(ne||U.length)+te;ie<0&&(ie=0),x.setInput(ue,x.options.inputName,!0),x.setCaretPosition(ie),W&&typeof x.options.onKeyPress=="function"&&x.options.onKeyPress(M,A),typeof x.options.onChange=="function"&&x.options.onChange(x.getInput(x.options.inputName,!0),A),typeof x.options.onChangeAll=="function"&&x.options.onChangeAll(x.getAllInputs(),A)}})}},{key:"handleButtonClicked",value:function(g,N){var k=this.options,x=k.inputName,M=x===void 0?this.defaultName:x,A=k.debug;if(g!=="{//}"){this.input[M]||(this.input[M]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var L=this.utilities.getUpdatedInput(g,this.input[M],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(g)&&this.activeInputElement&&this.input[M]&&this.input[M]===L&&this.caretPosition===0&&this.caretPositionEnd===L.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(g,N);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(g,N),this.input[M]!==L&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(L))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,L))return;var R=this.utilities.getUpdatedInput(g,this.input[M],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(R,this.options.inputName,!0),A&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),N==null?void 0:N.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),N),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),N),N!=null&&N.target&&this.options.enableLayoutCandidates){var B,W=this.getInputCandidates(L),K=W.candidateKey,U=W.candidateValue;K&&U?this.showCandidatesBox(K,U,this.keyboardDOM):(B=this.candidateBox)===null||B===void 0||B.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),A&&console.log("Key pressed:",g)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(g){this.options.syncInstanceInputs?this.dispatch(function(N){N.isMouseHold=g}):this.isMouseHold=g}},{key:"handleButtonMouseDown",value:function(g,N){var k=this;N&&(this.options.preventMouseDownDefault&&N.preventDefault(),this.options.stopMouseDownPropagation&&N.stopPropagation(),N.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(k.getMouseHold()&&(!g.includes("{")&&!g.includes("}")||g==="{delete}"||g==="{backspace}"||g==="{bksp}"||g==="{space}"||g==="{tab}")||g==="{arrowright}"||g==="{arrowleft}"||g==="{arrowup}"||g==="{arrowdown}")&&(k.options.debug&&console.log("Button held:",g),k.handleButtonHold(g)),clearTimeout(k.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(g,N){var k=this;N&&(this.options.preventMouseUpDefault&&N.preventDefault&&N.preventDefault(),this.options.stopMouseUpPropagation&&N.stopPropagation&&N.stopPropagation(),!(N.target===this.keyboardDOM||N.target&&this.keyboardDOM.contains(N.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(N.target===this.candidateBox.candidateBoxElement||N.target&&this.candidateBox.candidateBoxElement.contains(N.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(x){x.classList.remove(k.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),g&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(g,N)}},{key:"handleKeyboardContainerMouseDown",value:function(g){this.options.preventMouseDownDefault&&g.preventDefault()}},{key:"handleButtonHold",value:function(g){var N=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){N.getMouseHold()?(N.handleButtonClicked(g),N.handleButtonHold(g)):clearTimeout(N.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var g=this;this.dispatch(function(N){N.replaceInput(g.input),N.setCaretPosition(g.caretPosition,g.caretPositionEnd)})}},{key:"clearInput",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[g]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,N=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!N&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[g].replace("‫","").replace("‬","")+"‬":this.input[g]}},{key:"getAllInputs",value:function(){var g=this,N={};return Object.keys(this.input).forEach(function(k){N[k]=g.getInput(k,!0)}),N}},{key:"setInput",value:function(g){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,k=arguments.length>2?arguments[2]:void 0;this.input[N]=g,!k&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(g){this.input=g}},{key:"setOptions",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=this.changedOptions(g);this.options=Object.assign(this.options,g),N.length&&(this.options.debug&&console.log("changedOptions",N),this.onSetOptions(N),this.render())}},{key:"changedOptions",value:function(g){var N=this;return Object.keys(g).filter(function(k){return JSON.stringify(g[k])!==JSON.stringify(N.options[k])})}},{key:"onSetOptions",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];g.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(g.includes("layoutCandidatesPageSize")||g.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new re({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(g){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(N){g(window.SimpleKeyboardInstances[N],N)})}},{key:"addButtonTheme",value:function(g,N){var k=this;N&&g&&(g.split(" ").forEach(function(x){N.split(" ").forEach(function(M){k.options.buttonTheme||(k.options.buttonTheme=[]);var A=!1;k.options.buttonTheme.map(function(L){if(L!=null&&L.class.split(" ").includes(M)){A=!0;var R=L.buttons.split(" ");R.includes(x)||(A=!0,R.push(x),L.buttons=R.join(" "))}return L}),A||k.options.buttonTheme.push({class:M,buttons:g})})}),this.render())}},{key:"removeButtonTheme",value:function(g,N){var k=this;if(!g&&!N)return this.options.buttonTheme=[],void this.render();g&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(g.split(" ").forEach(function(x){var M;(M=k.options)===null||M===void 0||(M=M.buttonTheme)===null||M===void 0||M.map(function(A,L){if(A&&N&&N.includes(A.class)||!N){var R,B,W=(R=A)===null||R===void 0?void 0:R.buttons.split(" ").filter(function(K){return K!==x});A&&W!=null&&W.length?A.buttons=W.join(" "):((B=k.options.buttonTheme)===null||B===void 0||B.splice(L,1),A=null)}return A})}),this.render())}},{key:"getButtonElement",value:function(g){var N,k=this.buttonElements[g];return k&&(N=k.length>1?k:k[0]),N}},{key:"inputPatternIsValid",value:function(g){var N,k=this.options.inputPattern;if((N=k instanceof RegExp?k:k[this.options.inputName||this.defaultName])&&g){var x=N.test(g);return this.options.debug&&console.log('inputPattern ("'.concat(N,'"): ').concat(x?"passed":"did not pass!")),x}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var g=this.options.physicalKeyboardHighlightPreventDefault,N=g!==void 0&&g;document.addEventListener("keyup",this.handleKeyUp,N),document.addEventListener("keydown",this.handleKeyDown,N),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(g){this.caretEventHandler(g),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(g)}},{key:"handleKeyDown",value:function(g){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(g)}},{key:"handleMouseUp",value:function(g){this.caretEventHandler(g)}},{key:"handleTouchEnd",value:function(g){this.caretEventHandler(g)}},{key:"handleSelect",value:function(g){this.caretEventHandler(g)}},{key:"handleSelectionChange",value:function(g){navigator.userAgent.includes("Firefox")||this.caretEventHandler(g)}},{key:"caretEventHandler",value:function(g){var N,k=this;g.target.tagName&&(N=g.target.tagName.toLowerCase()),this.dispatch(function(x){var M=g.target===x.keyboardDOM||g.target&&x.keyboardDOM.contains(g.target);if(k.options.syncInstanceInputs&&Array.isArray(g.path)&&(M=g.path.some(function(R){var B;return R==null||(B=R.hasAttribute)===null||B===void 0?void 0:B.call(R,"data-skInstance")})),(N==="textarea"||N==="input"&&["text","search","url","tel","password"].includes(g.target.type))&&!x.options.disableCaretPositioning){var A=g.target.selectionStart,L=g.target.selectionEnd;x.options.rtl&&(A=x.utilities.getRtlOffset(A,x.getInput()),L=x.utilities.getRtlOffset(L,x.getInput())),x.setCaretPosition(A,L),x.activeInputElement=g.target,x.options.debug&&console.log("Caret at: ",x.getCaretPosition(),x.getCaretPositionEnd(),g&&g.target.tagName.toLowerCase(),"(".concat(x.keyboardDOMClass,")"),g==null?void 0:g.type)}else!x.options.disableCaretPositioning&&M||(g==null?void 0:g.type)==="selectionchange"||(x.setCaretPosition(null),x.activeInputElement=null,x.options.debug&&console.log('Caret position reset due to "'.concat(g==null?void 0:g.type,'" event'),g))})}},{key:"recurseButtons",value:function(g){var N=this;g&&Object.keys(this.buttonElements).forEach(function(k){return N.buttonElements[k].forEach(g)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var g=this.options.physicalKeyboardHighlightPreventDefault,N=g!==void 0&&g;document.removeEventListener("keyup",this.handleKeyUp,N),document.removeEventListener("keydown",this.handleKeyDown,N),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(k){k&&(k.onpointerdown=null,k.onpointerup=null,k.onpointercancel=null,k.ontouchstart=null,k.ontouchend=null,k.ontouchcancel=null,k.onclick=null,k.onmousedown=null,k.onmouseup=null,k.remove(),k=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(g){var N=this.options.buttonTheme,k=[];return Array.isArray(N)&&N.forEach(function(x){if(x&&x.class&&typeof x.class=="string"&&x.buttons&&typeof x.buttons=="string"){var M=x.class.split(" ");x.buttons.split(" ").includes(g)&&(k=[].concat($(k),$(M)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',x)}),k}},{key:"setDOMButtonAttributes",value:function(g,N){var k=this.options.buttonAttributes;Array.isArray(k)&&k.forEach(function(x){x.attribute&&typeof x.attribute=="string"&&x.value&&typeof x.value=="string"?x.buttons&&typeof x.buttons=="string"?x.buttons.split(" ").includes(g)&&N(x.attribute,x.value):N(x.attribute,x.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',x)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(g){var N;if((N=g.target.classList)!==null&&N!==void 0&&N.contains("hg-button"))return g.preventDefault(),g.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var g=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(N){var k=g.utilities.isConstructor(N)?new N(g):N(g);k.init&&k.init(g)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(g,N){return!!this.modules[g]&&this.modules[g][N]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(g,N,k,x){var M=this,A=Array.from(g.children),L=0;return A.length&&k.forEach(function(R,B){var W=x[B];if(!(W&&W>R))return!1;var K=R-L,U=W-L,ne=document.createElement("div");ne.className+="hg-button-container";var Z="".concat(M.options.layoutName,"-r").concat(N,"c").concat(B);ne.setAttribute("data-skUID",Z);var oe=A.splice(K,U-K+1);L+=U-K,oe.forEach(function(ae){return ne.appendChild(ae)}),A.splice(K,0,ne),g.innerHTML="",A.forEach(function(ae){return g.appendChild(ae)}),M.options.debug&&console.log("rowDOMContainer",oe,K,U,L+1)}),g}},{key:"render",value:function(){var g=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var N="hg-layout-".concat(this.options.layoutName),k=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},x=this.options.useTouchEvents||!1,M=x?"hg-touch-events":"",A=this.options.useMouseEvents||!1,L=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,N,this.keyboardPluginClasses,M),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",k[this.options.layoutName||this.defaultName].forEach(function(R,B){var W=R.split(" ");g.options.excludeFromLayout&&g.options.excludeFromLayout[g.options.layoutName||g.defaultName]&&(W=W.filter(function(Z){return g.options.excludeFromLayout&&!g.options.excludeFromLayout[g.options.layoutName||g.defaultName].includes(Z)}));var K=document.createElement("div");K.className+="hg-row";var U=[],ne=[];W.forEach(function(Z,oe){var ae,ue=!L&&typeof Z=="string"&&Z.length>1&&Z.indexOf("[")===0,te=!L&&typeof Z=="string"&&Z.length>1&&Z.indexOf("]")===Z.length-1;ue&&(U.push(oe),Z=Z.replace(/\[/g,"")),te&&(ne.push(oe),Z=Z.replace(/\]/g,""));var ie=g.utilities.getButtonClass(Z),me=g.utilities.getButtonDisplayName(Z,g.options.display,g.options.mergeDisplay),pe=g.options.useButtonTag?"button":"div",xe=document.createElement(pe);xe.className+="hg-button ".concat(ie),(ae=xe.classList).add.apply(ae,$(g.getButtonThemeClasses(Z))),g.setDOMButtonAttributes(Z,function(ye,Le){xe.setAttribute(ye,Le)}),g.activeButtonClass="hg-activeButton",!g.utilities.pointerEventsSupported()||x||A?x?(xe.ontouchstart=function(ye){g.handleButtonClicked(Z,ye),g.handleButtonMouseDown(Z,ye)},xe.ontouchend=function(ye){g.handleButtonMouseUp(Z,ye)},xe.ontouchcancel=function(ye){g.handleButtonMouseUp(Z,ye)}):(xe.onclick=function(ye){g.setMouseHold(!1),typeof g.options.onKeyReleased=="function"||g.options.useMouseEvents&&g.options.clickOnMouseDown||g.handleButtonClicked(Z,ye)},xe.onmousedown=function(ye){(typeof g.options.onKeyReleased=="function"||g.options.useMouseEvents&&g.options.clickOnMouseDown)&&!g.isMouseHold&&g.handleButtonClicked(Z,ye),g.handleButtonMouseDown(Z,ye)},xe.onmouseup=function(ye){g.handleButtonMouseUp(Z,ye)}):(xe.onpointerdown=function(ye){g.handleButtonClicked(Z,ye),g.handleButtonMouseDown(Z,ye)},xe.onpointerup=function(ye){g.handleButtonMouseUp(Z,ye)},xe.onpointercancel=function(ye){g.handleButtonMouseUp(Z,ye)}),xe.setAttribute("data-skBtn",Z);var _e="".concat(g.options.layoutName,"-r").concat(B,"b").concat(oe);xe.setAttribute("data-skBtnUID",_e);var Ce=document.createElement("span");Ce.innerHTML=me,xe.appendChild(Ce),g.buttonElements[Z]||(g.buttonElements[Z]=[]),g.buttonElements[Z].push(xe),K.appendChild(xe)}),K=g.parseRowDOMContainers(K,B,U,ne),g.keyboardRowsDOM.appendChild(K)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||x||A?x?(document.ontouchend=function(R){return g.handleButtonMouseUp(void 0,R)},document.ontouchcancel=function(R){return g.handleButtonMouseUp(void 0,R)},this.keyboardDOM.ontouchstart=function(R){return g.handleKeyboardContainerMouseDown(R)}):x||(document.onmouseup=function(R){return g.handleButtonMouseUp(void 0,R)},this.keyboardDOM.onmousedown=function(R){return g.handleKeyboardContainerMouseDown(R)}):(document.onpointerup=function(R){return g.handleButtonMouseUp(void 0,R)},this.keyboardDOM.onpointerdown=function(R){return g.handleKeyboardContainerMouseDown(R)}),this.onInit())}}],O&&J(_.prototype,O),d&&J(_,d),Object.defineProperty(_,"prototype",{writable:!1}),_;var _,O,d}(),I=se,q=I;return h}()},981:function(){typeof Element>"u"||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof self<"u"&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(l){if("Element"in l){var c="classList",u="prototype",m=l.Element[u],h=Object,f=String[u].trim||function(){return this.replace(/^\s+|\s+$/g,"")},b=Array[u].indexOf||function(j){for(var F=0,C=this.length;F<C;F++)if(F in this&&this[F]===j)return F;return-1},v=function(j,F){this.name=j,this.code=DOMException[j],this.message=F},D=function(j,F){if(F==="")throw new v("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(F))throw new v("INVALID_CHARACTER_ERR","The token must not contain space characters.");return b.call(j,F)},p=function(j){for(var F=f.call(j.getAttribute("class")||""),C=F?F.split(/\s+/):[],T=0,P=C.length;T<P;T++)this.push(C[T]);this._updateClassName=function(){j.setAttribute("class",this.toString())}},y=p[u]=[],w=function(){return new p(this)};if(v[u]=Error[u],y.item=function(j){return this[j]||null},y.contains=function(j){return~D(this,j+"")},y.add=function(){var j,F=arguments,C=0,T=F.length,P=!1;do~D(this,j=F[C]+"")||(this.push(j),P=!0);while(++C<T);P&&this._updateClassName()},y.remove=function(){var j,F,C=arguments,T=0,P=C.length,V=!1;do for(F=D(this,j=C[T]+"");~F;)this.splice(F,1),V=!0,F=D(this,j);while(++T<P);V&&this._updateClassName()},y.toggle=function(j,F){var C=this.contains(j),T=C?F!==!0&&"remove":F!==!1&&"add";return T&&this[T](j),F===!0||F===!1?F:!C},y.replace=function(j,F){var C=D(j+"");~C&&(this.splice(C,1,F),this._updateClassName())},y.toString=function(){return this.join(" ")},h.defineProperty){var S={get:w,enumerable:!0,configurable:!0};try{h.defineProperty(m,c,S)}catch(j){j.number!==void 0&&j.number!==-2146823252||(S.enumerable=!1,h.defineProperty(m,c,S))}}else h[u].__defineGetter__&&m.__defineGetter__(c,w)}}(self),function(){var l=document.createElement("_");if(l.classList.add("c1","c2"),!l.classList.contains("c2")){var c=function(m){var h=DOMTokenList.prototype[m];DOMTokenList.prototype[m]=function(f){var b,v=arguments.length;for(b=0;b<v;b++)f=arguments[b],h.call(this,f)}};c("add"),c("remove")}if(l.classList.toggle("c3",!1),l.classList.contains("c3")){var u=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(m,h){return 1 in arguments&&!this.contains(m)==!h?h:u.call(this,m)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(m,h){var f=this.toString().split(" "),b=f.indexOf(m+"");~b&&(f=f.slice(b),this.remove.apply(this,f),this.add(h),this.add.apply(this,f.slice(1)))}),l=null}())}},s={};function i(l){var c=s[l];if(c!==void 0)return c.exports;var u=s[l]={exports:{}};return r[l].call(u.exports,u,u.exports,i),u.exports}i.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(c,{a:c}),c},i.d=function(l,c){for(var u in c)i.o(c,u)&&!i.o(l,u)&&Object.defineProperty(l,u,{enumerable:!0,get:c[u]})},i.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},i.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})};var o={};return function(){i.r(o),i.d(o,{KeyboardReact:function(){return D},default:function(){return p}}),i(981);var l=i(442),c=i(548),u=i.n(c);function m(y){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},m(y)}function h(y,w){var S=Object.keys(y);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(y);w&&(j=j.filter(function(F){return Object.getOwnPropertyDescriptor(y,F).enumerable})),S.push.apply(S,j)}return S}function f(y){for(var w=1;w<arguments.length;w++){var S=arguments[w]!=null?arguments[w]:{};w%2?h(Object(S),!0).forEach(function(j){b(y,j,S[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(S)):h(Object(S)).forEach(function(j){Object.defineProperty(y,j,Object.getOwnPropertyDescriptor(S,j))})}return y}function b(y,w,S){return(w=function(j){var F=function(C,T){if(m(C)!="object"||!C)return C;var P=C[Symbol.toPrimitive];if(P!==void 0){var V=P.call(C,T);if(m(V)!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(C)}(j,"string");return m(F)=="symbol"?F:F+""}(w))in y?Object.defineProperty(y,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[w]=S,y}var v=function(y){return f(f({},y),{},{keyboardRef:null})},D=function(y){var w=y.baseClass||"react-simple-keyboard",S=l.useRef(null),j=l.useRef(null),F=l.useRef(null),C=l.useRef(y);return l.useEffect(function(){return function(){F.current&&F.current.destroy(),S.current=!1}},[]),l.useEffect(function(){var T=function(ce){return f(f({},ce),{},{theme:"simple-keyboard ".concat(ce.theme||"hg-theme-default")})}(y);if(!S.current){S.current=!0,T.debug&&console.log("ReactSimpleKeyboard: Init");var P=j.current,V=".".concat(w);F.current=new(u())(P||V,T),T.keyboardRef&&T.keyboardRef(F.current)}var Q=function(ce,fe){var G=v(fe),re=v(ce);return Object.keys(G).filter(function($){return G[$]!==re[$]})}(C.current,T);if(Q.length){var ee=F.current;C.current=T,ee==null||ee.setOptions(T),T.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",Q)}},[S,w,C,y]),l.createElement("div",{className:w,ref:j})},p=D}(),o}()})})(ZN);var qA=ZN.exports;const KA=lh(qA),ej=({isOpen:e,onClose:t,onInput:n,initialValue:r})=>{const[s,i]=E.useState("default"),[o,l]=E.useState(r||"");E.useEffect(()=>{l(r||"")},[r,e]);const c=m=>{m==="{shift}"||m==="{lock}"?i(s==="default"?"shift":"default"):m==="{enter}"&&t()},u=m=>{l(m),n(m)};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg w-full max-w-3xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Clavier Arabe"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("input",{type:"text",value:o,onChange:m=>u(m.target.value),className:"w-full p-2 border rounded mb-4 text-right",dir:"rtl"}),a.jsx("div",{dir:"ltr",children:a.jsx(KA,{layoutName:s,onChange:u,onKeyPress:c,inputName:"arabicInput",layout:{default:["ذ 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} ض ص ث ق ف غ ع ه خ ح ج د \\","{lock} ش س ي ب ل ا ت ن م ك ط {enter}","{shift} ئ ء ؤ ر ى ة و ز ظ {shift}","{space} @ .com"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{space} @ .com"]},display:{"{bksp}":"⌫","{enter}":"Terminé","{shift}":"⇧","{lock}":"⇪","{tab}":"⇥","{space}":" "},input:o})})]})}):null};kn("fr",Sn);const Om=e=>{var n;switch((n=e.split(".").pop())==null?void 0:n.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"webp":return"image/webp";case"pdf":return"application/pdf";default:return"application/octet-stream"}},Wa=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},GA=()=>{const[e,t]=E.useState([]),[n,r]=E.useState(!1),[s,i]=E.useState(""),[o,l]=E.useState(null),[c,u]=E.useState(!0),[m,h]=E.useState(null),[f,b]=E.useState(!1),[v,D]=E.useState(null),[p,y]=E.useState([]),[w,S]=E.useState([]),[j,F]=E.useState(!1),[C,T]=E.useState(null),P="http://localhost:5000",V=`${P}/api/customers`,Q=E.useCallback(async()=>{u(!0),h(null);try{const se=await we.get(V);t(se.data),le.success("Customers loaded successfully!")}catch(se){console.error("Error fetching customers:",se),h("Failed to load customers."),le.error("Failed to load customers.")}finally{u(!1)}},[]);E.useEffect(()=>{Q()},[Q]);const ee=e.filter(se=>`${se.prenomFr} ${se.nomFr}`.toLowerCase().includes(s.toLowerCase())||se.email.toLowerCase().includes(s.toLowerCase())||se.telephone&&se.telephone.includes(s)),ce=async(se,I,q)=>{try{const _=new FormData;Object.keys(se).forEach(d=>{_.append(d,se[d])}),I.forEach(d=>{_.append("documents",d)});const O=await we.post(V,_,{headers:{"Content-Type":"multipart/form-data"}});t(d=>[...d,O.data]),r(!1),le.success("Customer added successfully!")}catch(_){console.error("Error adding customer:",_),le.error("Failed to add customer.")}},fe=async se=>{v&&(S(I=>[...I,se]),D(I=>({...I,documents:I.documents.filter(q=>q.url!==se.url)})),le.success(`Document ${se.name} marked for deletion.`))},G=se=>{y(se)},re=async()=>{if(v)try{const se=new FormData;Object.keys(v).forEach(q=>{q!=="documents"&&se.append(q,v[q])}),p.forEach(q=>{se.append("documents",q)}),se.append("documentsToDelete",JSON.stringify(w.map(q=>q.url)));const I=await we.put(`${V}/${v._id}`,se,{headers:{"Content-Type":"multipart/form-data"}});t(e.map(q=>q._id===v._id?I.data:q)),l(I.data),b(!1),D(null),y([]),S([]),le.success("Customer updated successfully!")}catch(se){console.error("Error saving edit:",se),le.error("Failed to save changes.")}},$=()=>{b(!1),D(null),y([]),S([]),F(!1)},H=async se=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce client ?"))try{await we.delete(`${V}/${se}`),t(e.filter(I=>I._id!==se)),(o==null?void 0:o._id)===se&&(l(null),b(!1),D(null)),le.success("Customer deleted successfully!")}catch(I){console.error("Error deleting customer:",I),le.error("Failed to delete customer.")}},Y=()=>{if(o){const se=(o.documents||[]).map(I=>({...I,type:Om(I.name),isNew:!1}));D({...o,documents:se}),y([]),S([]),b(!0)}},X=se=>{if(f){if(confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")){const I=(se.documents||[]).map(q=>({...q,type:Om(q.name),isNew:!1}));l({...se,documents:I}),b(!1),D(null),y([]),S([])}}else{const I=(se.documents||[]).map(q=>({...q,type:Om(q.name),isNew:!1}));l({...se,documents:I})}},J=(se,I)=>{v&&D(q=>q?{...q,[se]:I}:null)},he=se=>{T(se),F(!0)},Se=se=>{C&&v&&J(C,se)};return c?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading customers..."})}):m?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:m}),a.jsx("button",{onClick:Q,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Gestion des Clients ",a.jsxs("span",{className:"text-blue-600",children:["(",e.length,")"]})]}),a.jsxs("button",{onClick:()=>{l(null),r(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Ajouter un client"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Rechercher un client...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:s,onChange:se=>{f?confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")&&(i(se.target.value),b(!1),D(null),y([]),S([])):i(se.target.value)}})]})}),a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut du client"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.map(se=>a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(o==null?void 0:o._id)===se._id?f?"bg-blue-100":"bg-blue-50":""}`,onClick:()=>X(se),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"md:block overflow-x-auto md:overflow-visible",children:a.jsxs("div",{className:"flex items-center min-w-[220px] md:min-w-0",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx(fm,{size:24,className:"text-gray-500"})}),a.jsxs("div",{className:"ml-4 flex-shrink-0",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:`${se.prenomFr} ${se.nomFr}`}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Client depuis ",Wa(se.createdAt)]})]})]})})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[a.jsx($D,{size:14,className:"mr-1 text-gray-500"})," ",se.email]}),a.jsxs("div",{className:"text-sm text-gray-500 mt-1 flex items-center",children:[a.jsx(KD,{size:14,className:"mr-1 text-gray-500"})," ",se.telephone]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${se.status==="Actif"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:se.status})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(tn,{onClick:I=>{I.stopPropagation(),l(se),Y()},size:"md",className:"mr-3"}),a.jsx("button",{onClick:I=>{I.stopPropagation(),H(se._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Ln,{size:18})})]})]},se._id))})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:o?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails du client"}),f?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:$,className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:re,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:Y,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"h-16 w-16 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx(fm,{size:32,className:"text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-lg font-bold",children:`${o.prenomFr} ${o.nomFr}`}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Client depuis ",Wa(o.createdAt)]})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium mb-2",children:"Conducteur"}),f&&v?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Civilité"}),a.jsxs("select",{className:"w-full border rounded-lg p-2 mt-1",value:v.civilite||"",onChange:se=>J("civilite",se.target.value),children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"M.",children:"M."}),a.jsx("option",{value:"Mme",children:"Mme"}),a.jsx("option",{value:"Mlle",children:"Mlle"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Type"}),a.jsxs("select",{className:"w-full border rounded-lg p-2 mt-1",value:v.type||"",onChange:se=>J("type",se.target.value),children:[a.jsx("option",{value:"Particulier",children:"Particulier"}),a.jsx("option",{value:"Professionnel",children:"Professionnel"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nom (FR)"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.nomFr||"",onChange:se=>J("nomFr",se.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Prénom (FR)"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.prenomFr||"",onChange:se=>J("prenomFr",se.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nom (AR)"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.nomAr||"",onFocus:()=>he("nomAr"),onChange:se=>J("nomAr",se.target.value),dir:"rtl"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Prénom (AR)"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.prenomAr||"",onFocus:()=>he("prenomAr"),onChange:se=>J("prenomAr",se.target.value),dir:"rtl"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nationalité"}),a.jsxs("select",{className:"w-full border rounded-lg p-2 mt-1",value:v.nationalite||"",onChange:se=>J("nationalite",se.target.value),children:[a.jsx("option",{value:"",children:"Sélectionner"}),XN.map(se=>a.jsx("option",{value:se.name,children:se.name},se.code))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Date de naissance"}),a.jsx(Me,{selected:v.dateNaissance?new Date(v.dateNaissance):null,onChange:se=>J("dateNaissance",se?se.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"jj/mm/aaaa",className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Lieu de naissance"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.lieuNaissance||"",onChange:se=>J("lieuNaissance",se.target.value)})]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"ICE"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.ice||"",onChange:se=>J("ice",se.target.value)})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"listeNoire",checked:v.listeNoire||!1,onChange:se=>J("listeNoire",se.target.checked),className:"mr-2"}),a.jsx("label",{htmlFor:"listeNoire",className:"text-sm",children:"Liste noire"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Type"}),a.jsx("p",{className:"text-sm",children:o.type})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Civilité"}),a.jsx("p",{className:"text-sm",children:o.civilite})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nom (FR)"}),a.jsx("p",{className:"text-sm",children:o.nomFr})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Prénom (FR)"}),a.jsx("p",{className:"text-sm",children:o.prenomFr})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nom (AR)"}),a.jsx("p",{className:"text-sm",dir:"rtl",children:o.nomAr})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Prénom (AR)"}),a.jsx("p",{className:"text-sm",dir:"rtl",children:o.prenomAr})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nationalité"}),a.jsx("p",{className:"text-sm",children:o.nationalite})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Date de naissance"}),a.jsx("p",{className:"text-sm",children:Wa(o.dateNaissance)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Lieu de naissance"}),a.jsx("p",{className:"text-sm",children:o.lieuNaissance})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"ICE"}),a.jsx("p",{className:"text-sm",children:o.ice||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Liste noire"}),a.jsx("p",{className:"text-sm",children:o.listeNoire?"Oui":"Non"})]})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium mb-2",children:"Pièce d'identité"}),f&&v?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"C.I.N"}),a.jsxs("div",{className:"space-y-3 mt-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Numéro"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.cin||"",onChange:se=>J("cin",se.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Délivré à"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.cinDelivreA||"",onChange:se=>J("cinDelivreA",se.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Délivré le"}),a.jsx(Me,{selected:v.cinDelivreLe?new Date(v.cinDelivreLe):null,onChange:se=>J("cinDelivreLe",se?se.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Validité"}),a.jsx(Me,{selected:v.cinValidite?new Date(v.cinValidite):null,onChange:se=>J("cinValidite",se?se.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Permis de conduire"}),a.jsxs("div",{className:"space-y-3 mt-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Numéro"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.numeroPermis||"",onChange:se=>J("numeroPermis",se.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Délivré à"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.permisDelivreA||"",onChange:se=>J("permisDelivreA",se.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Délivré le"}),a.jsx(Me,{selected:v.permisDelivreLe?new Date(v.permisDelivreLe):null,onChange:se=>J("permisDelivreLe",se?se.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Validité"}),a.jsx(Me,{selected:v.permisValidite?new Date(v.permisValidite):null,onChange:se=>J("permisValidite",se?se.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Passeport"}),a.jsxs("div",{className:"space-y-3 mt-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Numéro"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.numeroPasseport||"",onChange:se=>J("numeroPasseport",se.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Délivré à"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.passportDelivreA||"",onChange:se=>J("passportDelivreA",se.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Délivré le"}),a.jsx(Me,{selected:v.passportDelivreLe?new Date(v.passportDelivreLe):null,onChange:se=>J("passportDelivreLe",se?se.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Validité"}),a.jsx(Me,{selected:v.passportValidite?new Date(v.passportValidite):null,onChange:se=>J("passportValidite",se?se.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]})]})]})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"C.I.N"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Numéro"}),a.jsx("p",{className:"text-sm",children:o.cin||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Validité"}),a.jsx("p",{className:"text-sm",children:Wa(o.cinValidite)||"-"})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Permis de conduire"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Numéro"}),a.jsx("p",{className:"text-sm",children:o.numeroPermis||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Validité"}),a.jsx("p",{className:"text-sm",children:Wa(o.permisValidite)||"-"})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Passeport"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Numéro"}),a.jsx("p",{className:"text-sm",children:o.numeroPasseport||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Validité"}),a.jsx("p",{className:"text-sm",children:Wa(o.passportValidite)||"-"})]})]})]})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium mb-2",children:"Contact"}),f&&v?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),a.jsx("input",{type:"email",className:"w-full border rounded-lg p-2 mt-1",value:v.email||"",onChange:se=>J("email",se.target.value)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Téléphone"}),a.jsx("input",{type:"tel",className:"w-full border rounded-lg p-2 mt-1",value:v.telephone||"",onChange:se=>J("telephone",se.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Téléphone 2"}),a.jsx("input",{type:"tel",className:"w-full border rounded-lg p-2 mt-1",value:v.telephone2||"",onChange:se=>J("telephone2",se.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Fix"}),a.jsx("input",{type:"tel",className:"w-full border rounded-lg p-2 mt-1",value:v.fix||"",onChange:se=>J("fix",se.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Fax"}),a.jsx("input",{type:"tel",className:"w-full border rounded-lg p-2 mt-1",value:v.fax||"",onChange:se=>J("fax",se.target.value)})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Adresse (FR)"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.adresseFr||"",onChange:se=>J("adresseFr",se.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Adresse (AR)"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.adresseAr||"",onFocus:()=>he("adresseAr"),onChange:se=>J("adresseAr",se.target.value),dir:"rtl"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Ville"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.ville||"",onChange:se=>J("ville",se.target.value)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Code Postal"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:v.codePostal||"",onChange:se=>J("codePostal",se.target.value)})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Remarque"}),a.jsx("textarea",{className:"w-full border rounded-lg p-2 mt-1",value:v.remarque||"",onChange:se=>J("remarque",se.target.value)})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),a.jsx("p",{className:"text-sm",children:o.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Téléphone"}),a.jsx("p",{className:"text-sm",children:o.telephone})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Adresse"}),a.jsxs("p",{className:"text-sm",children:[o.adresseFr,", ",o.ville," ",o.codePostal]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Remarque"}),a.jsx("p",{className:"text-sm",children:o.remarque||"-"})]})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4",children:[a.jsx("div",{className:"flex justify-between items-center mb-2",children:a.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium",children:"Documents"})}),f&&v?a.jsx(mt,{api_url:P,existingDocuments:v.documents,newFiles:p,onNewFilesChange:G,onRemoveExistingDocument:fe,label:"Documents"}):o.documents&&o.documents.length>0?a.jsx(mt,{api_url:P,existingDocuments:o.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:fe,label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun document"})]}),a.jsxs("div",{className:"mt-6 border-t pt-4",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase font-medium mb-2",children:"Statut du client"}),f&&v?a.jsxs("select",{className:"w-full border rounded-lg p-2 mt-1",value:v.status||"Actif",onChange:se=>J("status",se.target.value),children:[a.jsx("option",{value:"Actif",children:"Actif"}),a.jsx("option",{value:"Inactif",children:"Inactif"})]}):a.jsx("div",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${o.status==="Actif"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:o.status})]})]})]}):a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-center h-full py-10",children:[a.jsx(fm,{size:64,className:"text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucun client sélectionné"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Sélectionnez un client pour voir ses détails"}),a.jsxs("button",{onClick:()=>{l(null),r(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Ajouter un client"]})]})})})]}),n&&a.jsx(YA,{onSubmit:ce,onClose:()=>r(!1),api_url:P}),a.jsx(ej,{isOpen:j,onClose:()=>F(!1),onInput:Se,initialValue:C&&v?String(v[C]):""})]})},QA=()=>{const{user:e,changePassword:t,updateUsername:n}=Ui(),[r,s]=E.useState(""),[i,o]=E.useState(""),[l,c]=E.useState(""),[u,m]=E.useState(""),[h,f]=E.useState(!1),[b,v]=E.useState(!1);E.useEffect(()=>{e&&m(e.username)},[e]);const D=async y=>{if(y.preventDefault(),i!==l){le.error("Les nouveaux mots de passe ne correspondent pas.");return}if(i.length<6){le.error("Le nouveau mot de passe doit contenir au moins 6 caractères.");return}try{f(!0),await t(r,i),le.success("Mot de passe mis à jour avec succès."),s(""),o(""),c("")}catch(w){console.error("Password change error:",w),le.error(w.message||"Erreur lors de la mise à jour du mot de passe.")}finally{f(!1)}},p=async y=>{y.preventDefault();try{v(!0),await n(u),le.success("Nom d'utilisateur mis à jour avec succès.")}catch(w){console.error("Username update error:",w),le.error(w.message||"Erreur lors de la mise à jour du nom d'utilisateur.")}finally{v(!1)}};return a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Paramètres"}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("form",{onSubmit:p,className:"space-y-6 mb-8",children:[a.jsxs("section",{children:[a.jsx("h2",{className:"text-lg font-medium mb-4",children:"Changer le nom d'utilisateur"}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom d'utilisateur"}),a.jsx("input",{type:"text",value:u,onChange:y=>m(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{type:"submit",disabled:b,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${b?"opacity-70 cursor-not-allowed":""}`,children:b?"Mise à jour...":"Changer le nom d'utilisateur"})})]}),a.jsxs("form",{onSubmit:D,className:"space-y-6",children:[a.jsxs("section",{children:[a.jsx("h2",{className:"text-lg font-medium mb-4",children:"Changer le mot de passe"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ancien mot de passe"}),a.jsx("input",{type:"password",value:r,onChange:y=>s(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nouveau mot de passe"}),a.jsx("input",{type:"password",value:i,onChange:y=>o(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le nouveau mot de passe"}),a.jsx("input",{type:"password",value:l,onChange:y=>c(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{type:"submit",disabled:h,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${h?"opacity-70 cursor-not-allowed":""}`,children:h?"Mise à jour...":"Changer le mot de passe"})})]})]})]})},JA=()=>{const[e,t]=E.useState(""),[n,r]=E.useState(""),[s,i]=E.useState(!1),o=fd(),{login:l,user:c}=Ui();E.useEffect(()=>{if(c){const m=localStorage.getItem("lastPath")||"/";o(m)}},[c,o]);const u=async m=>{m.preventDefault();try{i(!0),await l(e,n)}catch(h){console.error("Login error:",h),le.error("Échec de la connexion. Veuillez vérifier vos identifiants.")}finally{i(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("img",{src:"/media/ChatGPT Image Sep 4, 2025, 06_32_30 PM.png",alt:"Logo",className:"h-32 w-auto"})}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Système d'administration de location de voitures"})]}),a.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:a.jsxs("form",{className:"space-y-6",onSubmit:u,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Nom d'utilisateur"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:e,onChange:m=>t(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"admin"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:m=>r(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"••••••••"})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Se souvenir de moi"})]}),a.jsx("div",{className:"text-sm",children:a.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oublié?"})})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:s,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${s?"opacity-70 cursor-not-allowed":""}`,children:s?"Connexion...":"Se connecter"})})]})})})]})};kn("fr",Sn);const Fm=[{id:"pneuDeSecours",label:"PNEU DE SECOURS"},{id:"posteRadio",label:"POSTE RADIO"},{id:"cricManivelle",label:"CRIC MANIVELLE"},{id:"allumeCigare",label:"ALLUME CIGARE"},{id:"jeuDe4Tapis",label:"JEU DE 4 TAPIS"},{id:"vetDeSecurite",label:"VÊT.DE SÉCURITÉ"}],fr=e=>typeof e=="string"&&e.trim().length===0,XA=()=>{var ue,te,ie,me,pe,xe,_e,Ce,ye,Le,je,Oe,We,ze,Fe,Ve,Be,qe,Ke,Je,He,Ie,Ye,et,it,gt,At,Wt,xn,Yn,Rn,Qt,qn,rn,Kn,Gn;const[e,t]=E.useState([]),[n,r]=E.useState(!1),[s,i]=E.useState([]),[o,l]=E.useState([]),[c,u]=E.useState(""),[m,h]=E.useState("all"),[f,b]=E.useState(null),[v,D]=E.useState(null),[p,y]=E.useState(null),[w,S]=E.useState(!1),[j,F]=E.useState(null),[C,T]=E.useState([]),[P,V]=E.useState([]),[Q,ee]=E.useState(!0),[ce,fe]=E.useState(null),[G,re]=E.useState({}),$="http://localhost:5000",H=`${$}/api/contracts`,Y=`${$}/api/customers`,X=`${$}/api/vehicles`,[J,he]=E.useState({client:{_id:""},contractNumber:"",contractDate:new Date().toISOString().split("T")[0],departureDate:new Date().toISOString().split("T")[0],departureTime:"09:00",returnDate:new Date().toISOString().split("T")[0],contractLocation:"",duration:1,pickupLocation:"",returnLocation:"",matricule:"",vehicle:{_id:"",chassisNumber:"",licensePlate:"",brand:"",model:"",circulationDate:"",fuelType:"essence",fuelLevel:"plein",mileage:0,color:"",rentalPrice:0,statut:"En parc",equipment:{pneuDeSecours:!1,posteRadio:!1,cricManivelle:!1,allumeCigare:!1,jeuDe4Tapis:!1,vetDeSecurite:!1},createdAt:"",updatedAt:""},pricePerDay:0,startingKm:0,discount:0,fuelLevel:"plein",total:0,guarantee:5e3,paymentType:"espece",advance:0,remaining:0,status:"en_cours",secondDriver:void 0,equipment:{pneuDeSecours:!1,posteRadio:!1,cricManivelle:!1,allumeCigare:!1,jeuDe4Tapis:!1,vetDeSecurite:!1},piecesJointes:[]}),[Se,se]=E.useState(""),[I,q]=E.useState(""),_=E.useCallback(async()=>{ee(!0),fe(null);try{const de=(await we.get(H)).data,Ne=`${$}/api/vehicleinsurances`,[Pe,be,De]=await Promise.all([we.get(Y),we.get(X),we.get(Ne)]),Te=Pe.data,Ge=be.data,Bt=De.data;l(Te),i(Ge);const Qn=de.map(Yt=>{var tt;const Ue=Te.find(Ze=>{var nt;return Ze._id===((nt=Yt.client)==null?void 0:nt._id)}),Lt=Ge.find(Ze=>{var nt;return Ze._id===((nt=Yt.vehicle)==null?void 0:nt._id)||Ze._id===Yt.vehicle}),Al=(Lt==null?void 0:Lt._id)||(typeof Yt.vehicle=="string"?Yt.vehicle:(tt=Yt.vehicle)==null?void 0:tt._id),Qe=Bt.find(Ze=>{const nt=Ze.vehicle;return(typeof nt=="object"&&nt?nt._id:nt)===Al});return{...Yt,client:Ue?{_id:Ue._id,prenomFr:Ue.prenomFr,nomFr:Ue.nomFr,nationalite:Ue.nationalite,dateNaissance:Ue.dateNaissance,cin:Ue.cin,cinDelivreLe:Ue.cinDelivreLe,cinDelivreA:Ue.cinDelivreA,cinValidite:Ue.cinValidite,numeroPermis:Ue.numeroPermis,permisValidite:Ue.permisValidite,adresseFr:Ue.adresseFr,adresseAr:Ue.adresseAr,adresseEtranger:Ue.adresseAr,telephone:Ue.telephone,telephone2:Ue.telephone2,ville:Ue.ville,codePostal:Ue.codePostal}:void 0,vehicle:Lt?{...Lt,insurance:Qe}:Yt.vehicle,returnLocation:Yt.returnLocation}});t(Qn),le.success("Contracts loaded successfully!")}catch(z){console.error("Error fetching contracts:",z),fe("Failed to load contracts."),le.error("Failed to load contracts.")}finally{ee(!1)}},[]);E.useEffect(()=>{_()},[_]);const O=e.filter(z=>{var Te,Ge;const de=`${((Te=z.client)==null?void 0:Te.prenomFr)||""} ${((Ge=z.client)==null?void 0:Ge.nomFr)||""}`.toLowerCase().includes(c.toLowerCase())||z.contractNumber.toLowerCase().includes(c.toLowerCase())||z.vehicle.model.toLowerCase().includes(c.toLowerCase()),Ne=m==="all"||z.status===m,Pe=new Date(z.contractDate),be=f?Pe>=f:!0,De=v?Pe<=v:!0;return de&&Ne&&be&&De}),d=z=>({reserve:"text-red-500","1/4":"text-yellow-500","1/2":"text-blue-500","3/4":"text-green-300",plein:"text-green-500"})[z],g=z=>z==="en_cours"?"text-blue-500":"text-green-500",N=(z,de,Ne)=>z*de-Ne,k=(z,de)=>{de.stopPropagation(),y(z),F({...z}),S(!0),V([])},x=async()=>{var z;if(j){if(fr(j.contractLocation)){le.error('Le champ "Lieu de Contrat" ne peut pas contenir uniquement des espaces.');return}if(fr(j.pickupLocation)){le.error('Le champ "Lieu Livraison" ne peut pas contenir uniquement des espaces.');return}if(j.advance!==void 0&&j.advance<0){le.error("L'avance ne peut pas être une valeur négative.");return}if(j.pricePerDay!==void 0&&j.pricePerDay<0){le.error("Le prix par jour ne peut pas être une valeur négative.");return}if(j.guarantee!==void 0&&j.guarantee<0){le.error("La garantie ne peut pas être une valeur négative.");return}if(j.total!==void 0&&j.total<0){le.error("Le total ne peut pas être une valeur négative. Veuillez ajuster le prix par jour, la durée ou la remise.");return}if(j.remaining!==void 0&&j.remaining<0){le.error("Le reste à payer ne peut pas être une valeur négative. Veuillez ajuster l'avance.");return}if(j.secondDriver){const de=j.secondDriver,Ne=["nom","nationalite","adresse","telephone","adresseEtranger","permisNumero","passeportCin"];let Pe=!1;if(Ne.forEach(be=>{const De=de[be];De!==void 0&&De.length>0&&fr(De)?(re(Te=>({...Te,[`secondDriver.${be}`]:`Le champ "${be}" ne peut pas contenir uniquement des espaces.`})),Pe=!0):re(Te=>{const Ge={...Te};return delete Ge[`secondDriver.${be}`],Ge})}),de.permisDelivreLe){const be=new Date(de.permisDelivreLe),De=new Date;De.setFullYear(De.getFullYear()-2),be>De?(re(Te=>({...Te,"secondDriver.permisDelivreLe":"La date de délivrance du permis doit être supérieure à 2 ans."})),Pe=!0):re(Te=>{const Ge={...Te};return delete Ge["secondDriver.permisDelivreLe"],Ge})}if(Pe){le.error("Veuillez corriger les erreurs du deuxième conducteur.");return}}try{const de=new FormData;for(const Te in j)if(Object.prototype.hasOwnProperty.call(j,Te)){const Ge=j[Te];if(Te==="piecesJointes"||Te==="client"||Te==="vehicle"||Te==="equipment")continue;Te==="returnLocation"?de.append(Te,String(Ge||"")):Te!=="piecesJointes"&&Te!=="client"&&Te!=="vehicle"&&Te!=="equipment"&&(typeof Ge=="object"&&Ge!==null?de.append(Te,JSON.stringify(Ge)):Ge!==void 0&&de.append(Te,String(Ge)))}(z=j.client)!=null&&z._id&&de.append("client",j.client._id),j.secondDriver&&de.append("secondDriver",JSON.stringify(j.secondDriver)),j.vehicle&&de.append("vehicle",JSON.stringify(j.vehicle)),j.equipment&&de.append("equipment",JSON.stringify(j.equipment)),j.piecesJointes&&j.piecesJointes.forEach(Te=>{Te.isNew||de.append("existingDocuments",JSON.stringify({name:Te.name,url:Te.url,type:Te.type,size:Te.size}))}),P.forEach(Te=>{de.append("documents",Te)});for(let[Te,Ge]of de.entries())console.log(`${Te}: ${Ge}`);console.log("Sending PUT request for contract ID:",j._id);const Pe=(await we.put(`${H}/${j._id}`,de,{headers:{"Content-Type":"multipart/form-data"}})).data,be=s.find(Te=>{var Ge;return Te._id===((Ge=Pe.vehicle)==null?void 0:Ge._id)||Te._id===Pe.vehicle}),De={...Pe,vehicle:be||Pe.vehicle};t(e.map(Te=>Te._id===j._id?De:Te)),y(De),S(!1),F(null),V([]),le.success("Contract updated successfully!")}catch(de){console.error("Error saving contract edit:",de),le.error("Failed to save contract changes.")}}},M=()=>{S(!1),F(null),V([])},A=z=>{se(z);const de=o.find(Ne=>Ne._id===z);de&&he(Ne=>({...Ne,client:{_id:de._id,prenomFr:de.prenomFr,nomFr:de.nomFr,numeroPermis:de.numeroPermis,permisValidite:de.permisValidite}}))},L=z=>{const de=o.find(Ne=>Ne._id===z);de&&j&&F(Ne=>{const Pe={...Ne};return Pe.client||(Pe.client={_id:""}),{...Pe,client:{...Pe.client,_id:de._id,prenomFr:de.prenomFr,nomFr:de.nomFr,numeroPermis:de.numeroPermis,permisValidite:de.permisValidite}}})},R=z=>{q(z);const de=s.find(Ne=>Ne._id===z);de&&he(Ne=>({...Ne,matricule:de.licensePlate,vehicle:de,pricePerDay:de.rentalPrice,startingKm:de.mileage,total:N(de.rentalPrice,Ne.duration||1,Ne.discount||0)}))},B=z=>{const de=s.find(Ne=>Ne._id===z);if(de&&j){const Ne=de.rentalPrice,Pe=N(Ne,j.duration,j.discount);F({...j,matricule:de.licensePlate,vehicle:de,pricePerDay:Ne,startingKm:de.mileage,total:Pe,remaining:Pe-j.advance})}},W=(z,de)=>{he(Ne=>{const Pe={...Ne};if(z==="contractLocation"&&(fr(de)?re(be=>({...be,contractLocation:'Le champ "Lieu de Contrat" ne peut pas contenir uniquement des espaces.'})):re(be=>{const De={...be};return delete De.contractLocation,De})),z==="pickupLocation"&&(fr(de)?re(be=>({...be,pickupLocation:'Le champ "Lieu Livraison" ne peut pas contenir uniquement des espaces.'})):re(be=>{const De={...be};return delete De.pickupLocation,De})),z==="returnLocation"&&(typeof de=="string"&&de.trim().length===0&&de.length>0?re(be=>({...be,returnLocation:'Le champ "Lieu Récupération" ne peut pas contenir uniquement des espaces.'})):re(be=>{const De={...be};return delete De.returnLocation,De})),z.includes(".")){const[be,De]=z.split(".");be==="secondDriver"?(fr(de)?re(Te=>({...Te,[z]:`Le champ "${De}" ne peut pas contenir uniquement des espaces.`})):re(Te=>{const Ge={...Te};return delete Ge[z],Ge}),Pe[be]={...Pe[be],[De]:de}):Pe[be]={...Pe[be],[De]:de}}else Pe[z]=de;if(z==="departureDate"||z==="returnDate"){const be=z==="departureDate"?new Date(de):new Date(Pe.departureDate),De=z==="returnDate"?new Date(de):new Date(Pe.returnDate);if(be&&De&&be<=De){const Te=Math.abs(De.getTime()-be.getTime()),Ge=Math.ceil(Te/(1e3*60*60*24));Pe.duration=Ge}else be&&De&&be>De?(Pe.duration=0,re(Te=>({...Te,returnDate:"La date de retour ne peut pas être antérieure à la date de départ."}))):Pe.duration=1}if((z==="pricePerDay"||z==="duration"||z==="discount"||z==="departureDate"||z==="returnDate"||z==="departureTime")&&(Pe.total=N(Pe.pricePerDay||0,Pe.duration||1,Pe.discount||0),Pe.remaining=(Pe.total||0)-(Pe.advance||0)),z==="advance"){const be=Number(de);isNaN(be)||be<0?re(De=>({...De,advance:"L'avance ne peut pas être une valeur négative."})):re(De=>{const Te={...De};return delete Te.advance,Te}),Pe.remaining=(Pe.total||0)-(be||0)}if(z==="pricePerDay"||z==="guarantee"){const be=Number(de);isNaN(be)||be<0?re(De=>({...De,[z]:"La valeur ne peut pas être négative."})):re(De=>{const Te={...De};return delete Te[z],Te})}if(z==="extension.duration"||z==="extension.pricePerDay"){const be=Number(de);isNaN(be)||be<1?re(De=>({...De,[z]:"La valeur ne peut pas être inférieure à 1."})):re(De=>{const Te={...De};return delete Te[z],Te})}return Pe})},K=async z=>{var Ne,Pe,be;if(z.preventDefault(),fr(J.contractLocation)){le.error('Le champ "Lieu de Contrat" ne peut pas contenir uniquement des espaces.');return}if(fr(J.pickupLocation)){le.error('Le champ "Lieu Livraison" ne peut pas contenir uniquement des espaces.');return}if(Object.keys(G).length>0){le.error("Veuillez corriger les erreurs de validation.");return}if(!Se||!I){le.error("Please select a client and a vehicle.");return}const de=["_id","chassisNumber","model","licensePlate","brand"];for(const De of de)if(!J.vehicle||!J.vehicle[De]){le.error(`Missing required vehicle field: ${De}. Please ensure the selected vehicle has all necessary data.`),console.error(`Missing required vehicle field: ${De}`,J.vehicle);return}if(J.advance!==void 0&&J.advance<0){le.error("L'avance ne peut pas être une valeur négative.");return}if(J.pricePerDay!==void 0&&J.pricePerDay<0){le.error("Le prix par jour ne peut pas être une valeur négative.");return}if(J.guarantee!==void 0&&J.guarantee<0){le.error("La garantie ne peut pas être une valeur négative.");return}if(J.total!==void 0&&J.total<0){le.error("Le total ne peut pas être une valeur négative. Veuillez ajuster le prix par jour, la durée ou la remise.");return}if(J.remaining!==void 0&&J.remaining<0){le.error("Le reste à payer ne peut pas être une valeur négative. Veuillez ajuster l'avance.");return}if(((Ne=J.extension)==null?void 0:Ne.duration)!==void 0&&J.extension.duration<1){le.error("La durée de prolongation ne peut pas être inférieure à 1.");return}if(((Pe=J.extension)==null?void 0:Pe.pricePerDay)!==void 0&&J.extension.pricePerDay<1){le.error("Le prix par jour de prolongation ne peut pas être inférieur à 1.");return}try{const De=new FormData;for(const Ue in J)if(Object.prototype.hasOwnProperty.call(J,Ue)){const Lt=J[Ue];if(Ue==="piecesJointes"||Ue==="client"||Ue==="vehicle"||Ue==="secondDriver")continue;Ue==="returnLocation"?De.append(Ue,String(Lt||"")):Ue!=="piecesJointes"&&Ue!=="client"&&Ue!=="vehicle"&&Ue!=="secondDriver"&&(typeof Lt=="object"&&Lt!==null?De.append(Ue,JSON.stringify(Lt)):Lt!==void 0&&De.append(Ue,String(Lt)))}if((be=J.client)!=null&&be._id&&De.append("client",J.client._id),J.vehicle){const Ue={...J.vehicle,id:J.vehicle._id};De.append("vehicle",JSON.stringify(Ue))}J.secondDriver&&De.append("secondDriver",JSON.stringify(J.secondDriver)),C.forEach(Ue=>{De.append("documents",Ue)});const Ge=(await we.post(H,De,{headers:{"Content-Type":"multipart/form-data"}})).data,Bt=o.find(Ue=>{var Lt;return Ue._id===((Lt=Ge.client)==null?void 0:Lt._id)}),Qn=s.find(Ue=>{var Lt;return Ue._id===((Lt=Ge.vehicle)==null?void 0:Lt._id)||Ue._id===Ge.vehicle}),Yt={...Ge,client:Bt?{_id:Bt._id,prenomFr:Bt.prenomFr,nomFr:Bt.nomFr,numeroPermis:Bt.numeroPermis,permisValidite:Bt.permisValidite}:void 0,vehicle:Qn||Ge.vehicle,returnLocation:Ge.returnLocation};t([...e,Yt]),y(Yt),le.success("Contract created successfully!"),r(!1),T([]),he({client:{_id:"",prenomFr:"",nomFr:"",numeroPermis:"",permisValidite:""},contractNumber:"",contractDate:new Date().toISOString().split("T")[0],departureDate:new Date().toISOString().split("T")[0],departureTime:"09:00",returnDate:new Date().toISOString().split("T")[0],contractLocation:"",duration:1,pickupLocation:"",matricule:"",vehicle:{_id:"",chassisNumber:"",licensePlate:"",brand:"",model:"",circulationDate:"",fuelType:"essence",fuelLevel:"plein",mileage:0,color:"",rentalPrice:0,statut:"En parc",equipment:{pneuDeSecours:!1,posteRadio:!1,cricManivelle:!1,allumeCigare:!1,jeuDe4Tapis:!1,vetDeSecurite:!1},createdAt:"",updatedAt:""},pricePerDay:0,startingKm:0,discount:0,fuelLevel:"plein",total:0,guarantee:5e3,paymentType:"espece",advance:0,remaining:0,status:"en_cours",secondDriver:void 0,equipment:{pneuDeSecours:!1,posteRadio:!1,cricManivelle:!1,allumeCigare:!1,jeuDe4Tapis:!1,vetDeSecurite:!1},piecesJointes:[]}),se(""),q("")}catch(De){console.error("Error adding contract:",De),we.isAxiosError(De)&&De.response?(console.error("Backend error response:",De.response.data),le.error(`Failed to create contract: ${De.response.data.message||De.message}`)):le.error("Failed to create contract. Please check console for details.")}},U=(z,de)=>{if(j){const Ne={...j};if(z==="contractLocation"&&(fr(de)?re(Pe=>({...Pe,contractLocation:'Le champ "Lieu de Contrat" ne peut pas contenir uniquement des espaces.'})):re(Pe=>{const be={...Pe};return delete be.contractLocation,be})),z==="pickupLocation"&&(fr(de)?re(Pe=>({...Pe,pickupLocation:'Le champ "Lieu Livraison" ne peut pas contenir uniquement des espaces.'})):re(Pe=>{const be={...Pe};return delete be.pickupLocation,be})),z==="returnLocation"&&(typeof de=="string"&&de.trim().length===0&&de.length>0?re(Pe=>({...Pe,returnLocation:'Le champ "Lieu Récupération" ne peut pas contenir uniquement des espaces.'})):re(Pe=>{const be={...Pe};return delete be.returnLocation,be})),z==="departureDate"||z==="returnDate"){const Pe=z==="departureDate"?new Date(de):new Date(Ne.departureDate),be=z==="returnDate"?new Date(de):new Date(Ne.returnDate);if(Pe&&be&&Pe<=be){const De=Math.abs(be.getTime()-Pe.getTime()),Te=Math.ceil(De/(1e3*60*60*24));Ne.duration=Te,re(Ge=>{const Bt={...Ge};return delete Bt.returnDate,Bt})}else Pe&&be&&Pe>be?(Ne.duration=0,re(De=>({...De,returnDate:"La date de retour ne peut pas être antérieure à la date de départ."}))):Ne.duration=1}if(z==="pricePerDay"||z==="duration"||z==="discount"||z==="departureDate"||z==="returnDate"||z==="departureTime"){const Pe=Ne.pricePerDay,be=Ne.duration,De=Ne.discount;Ne.total=N(Pe,be,De),Ne.remaining=(Ne.total||0)-(Ne.advance||0)}if(z==="advance"){const Pe=Number(de);isNaN(Pe)||Pe<0?re(be=>({...be,advance:"L'avance ne peut pas être une valeur négative."})):re(be=>{const De={...be};return delete De.advance,De}),Ne.advance=Pe,Ne.remaining=(Ne.total||0)-Pe}if(z==="pricePerDay"||z==="guarantee"){const Pe=Number(de);isNaN(Pe)||Pe<0?re(be=>({...be,[z]:"La valeur ne peut pas être négative."})):re(be=>{const De={...be};return delete De[z],De})}if(z==="extension.duration"||z==="extension.pricePerDay"){const Pe=Number(de);isNaN(Pe)||Pe<1?re(be=>({...be,[z]:"La valeur ne peut pas être inférieure à 1."})):re(be=>{const De={...be};return delete De[z],De})}if(z.includes(".")){const[Pe,be]=z.split(".");Pe==="client"?(Ne.client||(Ne.client={_id:""}),Ne.client={...Ne.client,[be]:de}):Pe==="secondDriver"&&Ne.secondDriver?(fr(de)?re(De=>({...De,[z]:`Le champ "${be}" ne peut pas contenir uniquement des espaces.`})):re(De=>{const Te={...De};return delete Te[z],Te}),Ne.secondDriver={...Ne.secondDriver,[be]:de}):Pe==="vehicle"?Ne.vehicle={...Ne.vehicle,[be]:de}:Pe==="equipment"?Ne.equipment={...Ne.equipment,[be]:de}:Pe==="extension"&&(Ne.extension||(Ne.extension={duration:0,pricePerDay:0}),Ne.extension={...Ne.extension,[be]:Number(de)})}else Ne[z]=de;F(Ne)}},ne=async(z,de)=>{if(de&&de.stopPropagation(),confirm("Êtes-vous sûr de vouloir supprimer ce contrat ?"))try{await we.delete(`${H}/${z}`),t(e.filter(Ne=>Ne._id!==z)),(p==null?void 0:p._id)===z&&y(null),le.success("Contract deleted successfully!")}catch(Ne){console.error("Error deleting contract:",Ne),le.error("Failed to delete contract.")}},Z=async z=>{if(p)try{await we.delete(`${H}/${p._id}/documents`,{data:{documentUrl:z.url}}),y(de=>{var Ne;return de?{...de,piecesJointes:(Ne=de.piecesJointes)==null?void 0:Ne.filter(Pe=>Pe.url!==z.url)}:null}),le.success("Document supprimé avec succès.")}catch(de){console.error("Erreur lors de la suppression du document:",de),le.error("Échec de la suppression du document.")}},oe=z=>{z.vehicle,z.client,z.secondDriver,z.equipment,z.extension;const de={espece:"Espèce",cheque:"Chèque",carte_bancaire:"Carte Bancaire",virement:"Virement"};return`<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contrat de location - NetCar</title>
  <style>
    :root{--accent:#f2c200;--black:#111;--muted:#666}
    body{font-family: 'Segoe UI', Arial, sans-serif;color:var(--black);margin:18px;background:#fff}
    /* make the contract span the available page width */
    .container{max-width:100%;width:100%;margin:0;padding:0}
    body{font-size:10px;margin:5mm;line-height:1.2}
    header{display:flex;gap:10px;align-items:flex-start;margin-bottom:5px}
    .logo-wrap{display:flex;flex-direction:column;align-items:flex-start;gap:3px}
    .logo{width:150px;height:100px;object-fit:contain;display:block}
    .title h1{margin:0;font-size:18px}
    .title{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%}
    .subtitle{color:var(--muted);font-size:12px;margin-top:3px}
    .contact{border:1px solid var(--accent);border-radius:6px;padding:8px;font-size:10px;width:250px;margin-left:auto;text-align:left;direction:ltr}
    .contact small{display:block;line-height:1.2}
    .contact strong{color:var(--accent)}
    .logo img{max-width:150px;height:auto}

    .yellow-box{border:1px solid var(--accent);border-radius:6px;padding:8px;margin-top:5px}
    .row{display:flex;gap:8px}
    .col{flex:1}
    .fields{display:grid;grid-template-columns:1fr 1fr;gap:4px}
    .field{font-size:10px}
      input.box-field,
      input.line,
      textarea.box-field,
      textarea.line {
        display:block;
        box-sizing:border-box;
        width:100%;
        min-height:40px; /* Increased min-height */
        height:auto;
        border:1px solid #444;
        border-radius:3px;
        background:#fff;
        padding:3px 5px;
        font-size:10px;
        margin:3px 0;
        resize:vertical; /* Allow vertical resize for user, but auto-resize should handle it */
        overflow: hidden; /* Hide scrollbar initially, let JS handle height */
      }

    .access-grid{display:grid;grid-template-columns:1fr 1fr;gap:3px;align-items:start;margin-top:5px}
    .access-item{display:flex;justify-content:space-between;align-items:center;padding:3px 2px;font-size:10px}
    .access-label{color:var(--black);}
    input.checkbox{width:12px;height:12px;-webkit-appearance:none;appearance:none;border:1px solid var(--black);border-radius:2px;background:#fff}
    input.checkbox:checked{background:var(--black)}

    .conducteurs{display:grid;grid-template-columns:1fr 1fr 180px;gap:10px;align-items:stretch;margin-top:8px}
    .conducteur{border:1px solid #eee;padding:6px;border-radius:4px;display:flex;flex-direction:column;flex:1}
    .conducteur h3{margin:0 0 4px;font-size:11px}
    .small{font-size:9px;color:var(--muted);margin-bottom:2px;}

    .diagram{width:180px;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:flex-start}
    .car-img{width:120px;height:auto;display:block;margin:4px 0}
    .conducteur input.box-field,
    .conducteur input.line,
    .conducteur textarea.box-field,
    .conducteur textarea.line{
      width:100%;
      margin:3px 0;
      min-height:40px; /* Increased min-height */
      padding:3px 5px;
      height:auto;
      overflow: hidden; /* Hide scrollbar initially, let JS handle height */
    }
    .diagram-label{font-size:10px;color:var(--muted);text-align:center;margin-top:2px}

    .footer-note{
      font-size:12px;
      color:var(--black);
      margin-top:10px;
      font-weight:600;
      text-align:center;
      padding:6px 8px;
      border:1px solid rgba(0,0,0,0.06);
      border-radius:4px;
      background:rgba(242,194,0,0.08);
    }

    .yellow-box .row{gap:10px}
    .yellow-box .col{padding-right:3px}
    .yellow-box input.line{margin:6px 0;background:#fff}

    .signatures{display:flex;gap:100px;padding:10px;margin:15px auto 0;justify-content:center;align-items:stretch;max-width:600px}
    .sig{flex:0 0 auto;border:1px solid #000;height:100px;max-width:200px;min-width:180px;display:flex;align-items:center;justify-content:center;padding:4px}
    .sig small{display:block;text-align:center;color:var(--muted);opacity:0.45}

    @media print{
      body{margin:5mm;font-size:9px;line-height:1.1}
      .container{max-width:100%;padding:0}
      header{gap:8px;margin-bottom:4px}
      .logo{width:120px;height:80px}
      .title h1{font-size:16px}
      .subtitle{font-size:10px}
      .contact{padding:6px;font-size:9px;width:200px}
      .yellow-box{padding:6px;margin-top:4px}
      .row{gap:6px}
      .fields{gap:3px}
      .field{font-size:9px}
      input.box-field, input.line, textarea.box-field, textarea.line{min-height:18px;padding:2px 4px;font-size:9px;margin:2px 0}
      .access-grid{gap:2px;margin-top:3px}
      .access-item{padding:2px;font-size:9px}
      input.checkbox{width:10px;height:10px}
      .conducteurs{gap:8px;margin-top:6px;grid-template-columns:1fr 1fr 150px;}
      .conducteur{padding:4px}
      .conducteur h3{font-size:10px}
      .small{font-size:8px;margin-bottom:1px}
      .car-img{width:100px;margin:3px 0}
      .diagram-label{font-size:9px}
      .footer-note{font-size:10px;margin-top:8px;padding:4px 6px}
      .signatures{gap:80px;padding:8px;margin:12px auto 0;max-width:500px}
      .sig{height:80px;max-width:180px;min-width:150px;padding:3px}
    }
  </style>
</head>
<body>
  <!-- SECTION: Container -->
  <div class="container">
    <header>
    <!-- SECTION: Header (Logo & Contact) -->
    <div class="logo-wrap">
        <img src="media/netcar.png" alt="NetCar" class="logo">
        <div class="title">
          <h1>LOCATION DE VOITURE</h1>
          <div class="subtitle">Courte et Longue Durée</div>
        </div>
      </div>
      <div class="contact">
        <strong>Adresse:</strong> N° 24, 1er étage Angle Rue Oussama Ibnou Zaid (ex. Jura) & Rue Ahmed Joumari (ex Rue D’auvergne) Casablanca.<br>
        <small><strong>FIX:</strong> 05 22 23 58 66</small>
        <small><strong>GSM:</strong> 06 61 09 57 41 - 06 63 72 10 40</small>
        <small><strong>E-mail:</strong> support@mednetcar.ma</small>
      </div>
    </header>

    <div class="yellow-box">
    <!-- SECTION: Car Details & Accessories -->
    <div class="row">
        <div class="col">
          <div class="fields">
            <div class="field"><strong>Marque:</strong> <textarea class="box-field" name="marque"></textarea></div>
            <div class="field"><strong>Date et lieu de livraison:</strong> <textarea class="box-field" name="date_lieu_livraison"></textarea></div>
            <div class="field"><strong>Immat:</strong> <textarea class="box-field" name="immatriculation"></textarea></div>
            <div class="field"><strong>Date et lieu de reprise:</strong> <textarea class="box-field" name="date_lieu_reprise"></textarea></div>
            <div class="field"><strong>Kilométrage Dép:</strong> <textarea class="box-field" name="kilometrage_dep"></textarea></div>
            <div class="field"><strong>Prolonger jusqu'au:</strong> <textarea class="box-field" name="prolonger_jusqua"></textarea></div>
            <div class="field"><strong>Nombre de jours:</strong> <textarea class="box-field" name="nombre_de_jours"></textarea></div>
            <div class="field"><strong>Heure de départ:</strong> <textarea class="box-field" name="heure_de_depart"></textarea></div>
            <div class="field"><strong>Carburant:</strong> <textarea class="box-field" name="carburant"></textarea></div>
            <div class="field"><strong>Transmission:</strong> <textarea class="box-field" name="transmission"></textarea></div>
            <div class="field"><strong>Franchise d’assurance:</strong> <textarea class="box-field" name="franchise_assurance"></textarea></div>
          </div>
        </div>

        <div class="col">
          <div class="access-grid">
            <div class="access-item"><span class="access-label">PNEU DE SECOURS:</span><input type="checkbox" class="checkbox" name="pneu_de_secours"/></div>
            <div class="access-item"><span class="access-label">ALLUME CIGARE:</span><input type="checkbox" class="checkbox" name="allume_cigare"/></div>

            <div class="access-item"><span class="access-label">POSTE RADIO:</span><input type="checkbox" class="checkbox" name="poste_radio"/></div>
            <div class="access-item"><span class="access-label">JEU DE 4 TAPIS:</span><input type="checkbox" class="checkbox" name="jeu_de_4_tapis"/></div>

            <div class="access-item"><span class="access-label">CRIC MANIVELLE:</span><input type="checkbox" class="checkbox" name="cric_manivelle"/></div>
            <div class="access-item"><span class="access-label">VÊT.DE SÉCURITÉ:</span><input type="checkbox" class="checkbox" name="vet_de_securite"/></div>
          </div>
        </div>
      </div>
    </div>

    <div class="conducteurs">
    <!-- SECTION: Conducteurs (Drivers) & Car Condition -->
    <div class="conducteur">
        <h3>CONDUCTEUR (1)</h3>
  <div class="small">Nom:</div><textarea class="line" name="conducteur1_nom"></textarea>
  <div class="small">Nationalité:</div><textarea class="line" name="conducteur1_nationalite"></textarea>
  <div class="small">Né (e) le:</div><textarea class="line" name="conducteur1_ne_le"></textarea>
  <div class="small">Adresse:</div><textarea class="line" name="conducteur1_adresse"></textarea>
  <div class="small">Téléphone:</div><textarea class="line" name="conducteur1_telephone"></textarea>
  <div class="small">Adresse à l'étranger:</div><textarea class="line" name="conducteur1_adresse_etranger"></textarea>
  <div class="small">Permis de conduite N°:</div><textarea class="line" name="conducteur1_permis_num"></textarea>
  <div class="small">Délivré le:</div><textarea class="line" name="conducteur1_delivre_le"></textarea>
  <div class="small">Passeport N° ou CIN:</div><textarea class="line" name="conducteur1_passeport_num"></textarea>
  <div class="small">Délivré le:</div><textarea class="line" name="conducteur1_passeport_delivre_le"></textarea>
      </div>

      <div class="conducteur">
        <h3>CONDUCTEUR (2)</h3>
  <div class="small">Nom:</div><textarea class="line" name="conducteur2_nom"></textarea>
  <div class="small">Nationalité:</div><textarea class="line" name="conducteur2_nationalite"></textarea>
  <div class="small">Né (e) le:</div><textarea class="line" name="conducteur2_ne_le"></textarea>
  <div class="small">Adresse:</div><textarea class="line" name="conducteur2_adresse"></textarea>
  <div class="small">Téléphone:</div><textarea class="line" name="conducteur2_telephone"></textarea>
  <div class="small">Adresse à l'étranger:</div><textarea class="line" name="conducteur2_adresse_etranger"></textarea>
  <div class="small">Permis de conduite N°:</div><textarea class="line" name="conducteur2_permis_num"></textarea>
  <div class="small">Délivré le:</div><textarea class="line" name="conducteur2_delivre_le"></textarea>
  <div class="small">Passeport N° ou CIN:</div><textarea class="line" name="conducteur2_passeport_num"></textarea>
  <div class="small">Délivré le:</div><textarea class="line" name="conducteur2_passeport_delivre_le"></textarea>
      </div>

      <div class="diagram">
        <!-- replaced SVG with two car images for Départ et Retour -->
        <img src="media/caretat.jpg" alt="Départ" class="car-img">
        <div class="diagram-label">Départ</div>
        <img src="media/caretat.jpg" alt="Retour" class="car-img">
        <div class="diagram-label">Retour</div>
      </div>
    </div>

    <div class="yellow-box" style="margin-top:5px">
    <!-- SECTION: Pricing & Payment -->
    <div class="row">
        <div class="col">
          <div class="small">Prix unitaire:</div><textarea class="line" name="prix_unitaire"></textarea>
          <div class="small">Total T.T.C:</div><textarea class="line" name="total_ttc"></textarea>
        </div>
        <div class="col">
          <div class="small">Avance:</div><textarea class="line" name="avance"></textarea>
          <div class="small">Reste:</div><textarea class="line" name="reste"></textarea>
          <div class="small">Mode de paiement:</div><textarea class="line" name="mode_de_paiement"></textarea>
        </div>
      </div>
    </div>

    <div class="footer-note">Je reconnais avoir pris connaissance des conditions générales de location.</div>
    <!-- SECTION: Footer Note -->

    <div class="signatures">
    <!-- SECTION: Signatures -->
    <div class="signatures">
      <div class="sig"><small>Signature conducteur</small></div>
      <div class="sig"><small>Signature conducteur</small></div>
    </div>
  </div>

  <script>
    // auto-resize textareas to fit their content
    (function(){
      function resize(el){
        el.style.height = 'auto';
        el.style.height = (el.scrollHeight) + 'px';
      }
      var areas = document.querySelectorAll('textarea.box-field, textarea.line');
      areas.forEach(function(a){
        // initialize height based on current content
        resize(a);
        a.addEventListener('input', function(){ resize(a); });
      });
      window.addEventListener('load', function(){ areas.forEach(function(a){ resize(a); }); });
    })();
  <\/script>
  <script>
    (function(){
      const c = JSON.parse('${JSON.stringify(z).replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/`/g,"\\`").replace(/\$/g,"\\$")}');
      const v = c.vehicle || {};
      const client = c.client || {};
      const second = c.secondDriver || null;
      const eq = c.equipment || {};
      const extension = c.extension || null;

      const setVal = (name, value) => {
        const el = document.querySelector('[name="'+name+'"]');
        if(!el) return;
        if(el.type === 'checkbox') {
          el.checked = !!value;
          return;
        }
        el.value = value === null || value === undefined ? '' : value;
        try {
          if (el.tagName === 'TEXTAREA') {
            el.style.height = 'auto';
            const h = el.scrollHeight || 40; // Use 40 as a new base height
            el.style.height = Math.max(h, 40) + 'px';
          }
        } catch (e) {}
      };

      const expandAllTextareas = () => {
        document.querySelectorAll('textarea').forEach(t => {
          try {
            t.style.height = 'auto';
            const h = t.scrollHeight || 40; // Use 40 as a new base height
            t.style.height = Math.max(h, 40) + 'px';
          } catch (e) {}
        });
      };

      setVal('marque', v.brand || v.model || '');
      setVal('date_lieu_livraison', (c.pickupLocation ? c.pickupLocation + ' - ' : '') + (c.departureDate ? new Date(c.departureDate).toLocaleDateString('fr-FR') : ''));
      setVal('immatriculation', v.licensePlate || c.matricule || '');
      setVal('date_lieu_reprise', (c.returnLocation ? c.returnLocation + ' - ' : '') + (c.returnDate ? new Date(c.returnDate).toLocaleDateString('fr-FR') : ''));
      setVal('kilometrage_dep', c.startingKm || '');
      setVal('prolonger_jusqua', extension ? (extension.duration + ' jours') : '');
      setVal('nombre_de_jours', c.duration || '');
      setVal('heure_de_depart', c.departureTime || '');
      setVal('carburant', v.fuelType || '');
      setVal('transmission', v.transmission || v.gearbox || '');
      setVal('franchise_assurance', (v.insurance && v.insurance.company) || v.insuranceCompany || v.compagnie || c.insuranceCompany || '');

      setVal('pneu_de_secours', eq.pneuDeSecours);
      setVal('allume_cigare', eq.allumeCigare);
      setVal('poste_radio', eq.posteRadio);
      setVal('jeu_de_4_tapis', eq.jeuDe4Tapis);
      setVal('cric_manivelle', eq.cricManivelle);
      setVal('vet_de_securite', eq.vetDeSecurite);

      setVal('conducteur1_nom', ((client.prenomFr || '') + ' ' + (client.nomFr || '')).trim());
      setVal('conducteur1_nationalite', client.nationalite || client.nationality || '');
      setVal('conducteur1_ne_le', client.dateNaissance || client.birthDate || '');
      const adresse1 = client.adresseFr ? (client.adresseFr + (client.ville ? (', ' + client.ville) : '') + (client.codePostal ? (' ' + client.codePostal) : '')) : (client.adresseAr || client.adresse || client.address || '');
      setVal('conducteur1_adresse', adresse1);
      setVal('conducteur1_telephone', client.telephone || client.telephone2 || client.phone || client.gsm || '');
      setVal('conducteur1_adresse_etranger', client.adresseAr || client.adresseEtranger || client.addressAbroad || '');
      setVal('conducteur1_permis_num', client.numeroPermis || client.numero_permis || '');
      setVal('conducteur1_delivre_le', client.permisValidite || client.permis_delivre_le || client.permisValidite || '');
      setVal('conducteur1_passeport_num', client.cin || client.cinNumber || client.passport || '');
      setVal('conducteur1_passeport_delivre_le', client.cinDelivreLe || client.passportIssuedDate || client.cinDelivreLe || '');

      if (c.secondDriver) {
        const fullName2 = (((second.prenomFr || second.prenom || '') + ' ' + (second.nomFr || second.nom || '')).trim());
        setVal('conducteur2_nom', fullName2);
        setVal('conducteur2_nationalite', second.nationalite || second.nationality || '');
        setVal('conducteur2_ne_le', second.dateNaissance || second.dateOfBirth || second.birthDate || '');
        const adresse2 = second.adresseFr ? (second.adresseFr + (second.ville ? (', ' + second.ville) : '') + (second.codePostal ? (' ' + second.codePostal) : '')) : (second.adresse || second.adresseAr || second.address || '');
        setVal('conducteur2_adresse', adresse2);
        setVal('conducteur2_telephone', second.telephone || second.telephone2 || second.phone || second.gsm || '');
        setVal('conducteur2_adresse_etranger', second.adresseEtranger || second.adresseAr || second.addressAbroad || '');
        setVal('conducteur2_permis_num', second.permisNumero || second.numeroPermis || second.numero_permis || second.permisNum || '');
        setVal('conducteur2_delivre_le', second.permisDelivreLe || second.permisValidite || second.permis_delivre_le || '');
        setVal('conducteur2_passeport_num', second.passeportCin || second.cin || second.cinNumber || second.passport || '');
        setVal('conducteur2_passeport_delivre_le', second.passeportDelivreLe || second.cinDelivreLe || second.passportIssuedDate || '');
      } else {
        setVal('conducteur2_nom', '');
        setVal('conducteur2_nationalite', '');
        setVal('conducteur2_ne_le', '');
        setVal('conducteur2_adresse', '');
        setVal('conducteur2_telephone', '');
        setVal('conducteur2_adresse_etranger', '');
        setVal('conducteur2_permis_num', '');
        setVal('conducteur2_delivre_le', '');
        setVal('conducteur2_passeport_num', '');
        setVal('conducteur2_passeport_delivre_le', '');
      }

      setVal('prix_unitaire', c.pricePerDay != null ? c.pricePerDay + ' DH' : '');
      setVal('total_ttc', c.total != null ? c.total + ' DH' : '');
      setVal('avance', c.advance != null ? c.advance + ' DH' : '');
      setVal('reste', c.remaining != null ? c.remaining + ' DH' : '');
      setVal('mode_de_paiement', ${JSON.stringify(de)}[c.paymentType] || c.paymentType || '');

      expandAllTextareas();

    })();
  <\/script>
</body>
</html>`},ae=z=>{try{const de=oe(z),Ne=window.open("","_blank","width=900,height=700");if(!Ne){le.error("Impossible d'ouvrir la fenêtre d'impression. Vérifiez le bloqueur de fenêtres popup.");return}Ne.document.open(),Ne.document.write(de),Ne.document.close(),Ne.focus(),setTimeout(()=>{Ne.print()},500)}catch(de){console.error("Erreur lors de la génération du contrat pour impression:",de),le.error("Erreur lors de la génération du contrat pour impression.")}};return Q?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading contracts..."})}):ce?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:ce}),a.jsx("button",{onClick:_,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Contrats"}),a.jsxs("button",{onClick:()=>{r(!0),re({})},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Nouveau Contrat"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-contract",type:"text",placeholder:"Rechercher un contrat...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:c,onChange:z=>u(z.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status-filter",className:"sr-only",children:"Filtrer par statut"}),a.jsxs("select",{id:"status-filter",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:m,onChange:z=>h(z.target.value),children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"en_cours",children:"En cours"}),a.jsx("option",{value:"retournee",children:"Retournée"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"start-date-filter",className:"sr-only",children:"Date de début"}),a.jsx(Me,{id:"start-date-filter",selected:f,onChange:z=>b(z),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"Date de début",className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"end-date-filter",className:"sr-only",children:"Date de fin"}),a.jsx(Me,{id:"end-date-filter",selected:v,onChange:z=>D(z),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"Date de fin",className:"w-full border rounded-lg p-2"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contrat"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[O.map(z=>{var Ne,Pe;const de=typeof z.vehicle=="object"?z.vehicle:s.find(be=>be._id===z.vehicle);return a.jsxs("tr",{onClick:()=>{const be=e.find(De=>De._id===z._id);if(be)y(be);else{const De=s.find(Te=>{var Ge;return Te._id===((Ge=z.vehicle)==null?void 0:Ge._id)||Te._id===z.vehicle});y({...z,vehicle:De||z.vehicle})}},className:`hover:bg-gray-50 cursor-pointer ${(p==null?void 0:p._id)===z._id?"bg-blue-50":""}`,children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"md:block overflow-x-auto md:overflow-visible",children:a.jsxs("div",{className:"flex items-center min-w-[220px] md:min-w-0",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:de!=null&&de.imageUrl?a.jsx("img",{src:de.imageUrl.startsWith("data:")?de.imageUrl:`${$}/${de.imageUrl.replace(/\\/g,"/").replace(/^\//,"")}`,alt:`${de.brand||"N/A"} ${de.model||"N/A"}`,className:"w-10 h-10 object-cover rounded-full"}):a.jsx(pt,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:z.contractNumber||"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:`${((Ne=z.client)==null?void 0:Ne.prenomFr)||""} ${((Pe=z.client)==null?void 0:Pe.nomFr)||""}`.trim()||"N/A"})]})]})})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium",children:(de==null?void 0:de.model)||"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:(de==null?void 0:de.licensePlate)||"N/A"})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:new Date(z.departureDate).toLocaleDateString("fr-FR")}),a.jsx("div",{className:"text-sm text-gray-500",children:z.contractLocation})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[z.total.toLocaleString("fr-FR")," DH"]}),a.jsx("div",{className:`text-xs ${z.remaining>0?"text-amber-600":"text-green-600"}`,children:z.remaining>0?`Reste: ${z.remaining.toLocaleString("fr-FR")} DH`:"Payé"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${z.status==="en_cours"?"bg-blue-100":"bg-green-100"} ${g(z.status)}`,children:z.status==="en_cours"?"En cours":"Retournée"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(tn,{onClick:be=>k(z,be),size:"md",className:"mr-3"}),a.jsx("button",{onClick:be=>{be.stopPropagation(),ne(z._id,be)},className:"text-red-600 hover:text-red-900",children:a.jsx(Ln,{size:18})})]})]},z._id)}),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Aucun contrat trouvé."})})]})]})})}),a.jsx("div",{className:"lg:col-span-1",children:p?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails du contrat"}),w?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:M,className:"px-4 py-2 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:z=>k(p,z),className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsxs("div",{className:"p-4 space-y-4",children:[p.vehicle&&typeof p.vehicle=="object"?a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[p.vehicle.imageUrl?a.jsx("img",{src:p.vehicle.imageUrl.startsWith("data:")?p.vehicle.imageUrl:`${$}/${p.vehicle.imageUrl.replace(/\\/g,"/").replace(/^\//,"")}`,alt:`${p.vehicle.brand||"N/A"} ${p.vehicle.model||"N/A"}`,className:"w-24 h-24 object-cover rounded-lg shadow"}):a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(pt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-lg",children:[p.vehicle.brand||"N/A"," ",p.vehicle.model||"N/A"]}),a.jsx("p",{className:"text-sm text-gray-600",children:p.vehicle.licensePlate||"N/A"})]})]})]}):a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(pt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg",children:"N/A"}),a.jsx("p",{className:"text-sm text-gray-600",children:"N/A"})]})]})]}),p.client&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Client"}),w&&j?a.jsxs(a.Fragment,{children:[a.jsxs("select",{name:"client",onChange:z=>L(z.target.value),value:((ue=j.client)==null?void 0:ue._id)||"",className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),o.map(z=>a.jsxs("option",{value:z._id,children:[z.prenomFr," ",z.nomFr]},z._id))]}),j.client&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prénom"}),a.jsx("input",{type:"text",name:"client.prenomFr",value:j.client.prenomFr||"",onChange:z=>U("client.prenomFr",z.target.value),className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),a.jsx("input",{type:"text",name:"client.nomFr",value:j.client.nomFr||"",onChange:z=>U("client.nomFr",z.target.value),className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N° Permis"}),a.jsx("input",{type:"text",name:"client.numeroPermis",value:j.client.numeroPermis||"",onChange:z=>U("client.numeroPermis",z.target.value),className:"w-full border rounded-lg p-2 mt-1"})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Validité Permis"}),a.jsx(Me,{selected:j.client.permisValidite?new Date(j.client.permisValidite):null,onChange:z=>U("client.permisValidite",z?z.toISOString():""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"})]})]})]}):a.jsxs("p",{className:"font-medium",children:[`${p.client.prenomFr||""} ${p.client.nomFr||""}`.trim()||"N/A"," ",a.jsx("br",{}),a.jsxs("span",{className:"text-sm text-gray-500",children:["N° Permis: ",p.client.numeroPermis||"N/A"]})," ",a.jsx("br",{}),a.jsxs("span",{className:"text-sm text-gray-500",children:["Validité Permis: ",p.client.permisValidite?new Date(p.client.permisValidite).toLocaleDateString("fr-FR"):"N/A"]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Véhicule"}),w&&j?a.jsxs(a.Fragment,{children:[a.jsxs("select",{className:"w-full border rounded-lg p-2 mt-1",onChange:z=>B(z.target.value),value:((te=j==null?void 0:j.vehicle)==null?void 0:te._id)||"",children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),s.filter(z=>z.statut==="En parc").map(z=>a.jsxs("option",{value:z._id,children:[z.licensePlate," - ",z.brand," ",z.model]},z._id))]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modèle"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:((ie=j==null?void 0:j.vehicle)==null?void 0:ie.model)||"",readOnly:!0})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Immatriculation"}),a.jsx("input",{type:"text",className:"w-full border rounded-lg p-2 mt-1",value:((me=j==null?void 0:j.vehicle)==null?void 0:me.licensePlate)||"",readOnly:!0})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Km départ"}),a.jsx("input",{type:"number",className:"w-full border rounded-lg p-2 mt-1",value:(j==null?void 0:j.startingKm)||"",onChange:z=>U("startingKm",Number(z.target.value))})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau carburant"}),a.jsxs("select",{className:"w-full border rounded-lg p-2 mt-1",value:j==null?void 0:j.fuelLevel,onChange:z=>U("fuelLevel",z.target.value),children:[a.jsx("option",{value:"reserve",className:"text-red-500",children:"Réserve"}),a.jsx("option",{value:"1/4",className:"text-yellow-500",children:"1/4"}),a.jsx("option",{value:"1/2",className:"text-blue-500",children:"1/2"}),a.jsx("option",{value:"3/4",className:"text-green-300",children:"3/4"}),a.jsx("option",{value:"plein",className:"text-green-500",children:"Plein"})]})]})]}):a.jsxs("p",{className:"font-medium",children:[((pe=p.vehicle)==null?void 0:pe.model)||"N/A"," ",(xe=p.vehicle)!=null&&xe.licensePlate?`(${p.vehicle.licensePlate})`:""," ",a.jsx("br",{}),a.jsxs("span",{className:"text-sm text-gray-500",children:["Km départ: ",p.startingKm||"N/A"]})," ",a.jsx("br",{}),a.jsxs("span",{className:"text-sm text-gray-500",children:["Niveau carburant: ",a.jsx("span",{className:d(p.fuelLevel),children:p.fuelLevel==="reserve"?"Réserve":p.fuelLevel==="plein"?"Plein":p.fuelLevel||"N/A"})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de contrat"}),w&&j?a.jsx(Me,{selected:j.contractDate?new Date(j.contractDate):null,onChange:z=>U("contractDate",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:new Date(p.contractDate).toLocaleDateString("fr-FR")||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de départ"}),w&&j?a.jsx(Me,{selected:j.departureDate?new Date(j.departureDate):null,onChange:z=>U("departureDate",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:new Date(p.departureDate).toLocaleDateString("fr-FR")||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Heure de départ"}),w&&j?a.jsx("input",{type:"time",name:"departureTime",value:j.departureTime||"",onChange:z=>U("departureTime",z.target.value),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:p.departureTime||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de retour"}),w&&j?a.jsx(Me,{selected:j.returnDate?new Date(j.returnDate):null,onChange:z=>U("returnDate",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:new Date(p.returnDate).toLocaleDateString("fr-FR")||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Durée"}),w&&j?a.jsx("input",{type:"number",name:"duration",value:j.duration||"",readOnly:!0,className:"w-full border rounded-lg p-2 mt-1 bg-gray-100"}):a.jsx("p",{className:"font-medium",children:p.duration?`${p.duration} jours`:"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Lieu de contrat"}),w&&j?a.jsx("input",{type:"text",name:"contractLocation",value:j.contractLocation||"",onChange:z=>U("contractLocation",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G.contractLocation?"border-red-500":""}`}):a.jsx("p",{className:"font-medium",children:p.contractLocation||"-"}),w&&G.contractLocation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.contractLocation})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Lieu de livraison"}),w&&j?a.jsx("input",{type:"text",name:"pickupLocation",value:j.pickupLocation||"",onChange:z=>U("pickupLocation",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G.pickupLocation?"border-red-500":""}`}):a.jsx("p",{className:"font-medium",children:p.pickupLocation||"-"}),w&&G.pickupLocation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.pickupLocation})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Lieu Récupération"}),w&&j?a.jsx("input",{type:"text",name:"returnLocation",value:j.returnLocation||"",onChange:z=>U("returnLocation",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G.returnLocation?"border-red-500":""}`}):a.jsx("p",{className:"font-medium",children:p.returnLocation||"N/A"}),w&&G.returnLocation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.returnLocation})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Prolongation"}),w&&j?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("input",{type:"checkbox",className:"mr-2",checked:!!j.extension,onChange:z=>F(de=>({...de,extension:z.target.checked?{duration:0,pricePerDay:0}:void 0}))}),a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ajouter une prolongation"})]}),j.extension&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durée (jours)"}),a.jsx("input",{type:"number",className:`w-full border rounded-lg p-2 mt-1 ${G["extension.duration"]?"border-red-500":""}`,value:j.extension.duration||"",onChange:z=>U("extension.duration",Number(z.target.value)),min:"1"}),G["extension.duration"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["extension.duration"]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix prolongation/jour"}),a.jsx("input",{type:"number",className:`w-full border rounded-lg p-2 mt-1 ${G["extension.pricePerDay"]?"border-red-500":""}`,value:j.extension.pricePerDay||"",onChange:z=>U("extension.pricePerDay",Number(z.target.value)),min:"1"}),G["extension.pricePerDay"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["extension.pricePerDay"]})]})]})]}):p.extension?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"font-medium",children:[p.extension.duration||"-"," jours"]}),a.jsxs("p",{className:"font-medium",children:[p.extension.pricePerDay||"-"," DH/jour"]})]}):a.jsx("p",{className:"font-medium text-gray-500",children:"Aucune prolongation"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Prix par jour"}),w&&j?a.jsx("input",{type:"number",name:"pricePerDay",value:j.pricePerDay||0,onChange:z=>U("pricePerDay",Number(z.target.value)),className:`w-full border rounded-lg p-2 mt-1 ${G.pricePerDay?"border-red-500":""}`,min:"0"}):a.jsxs("p",{className:"font-medium",children:[((_e=p.pricePerDay)==null?void 0:_e.toLocaleString("fr-FR"))||"N/A"," DH"]}),w&&G.pricePerDay&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.pricePerDay})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Remise"}),w&&j?a.jsx("input",{type:"number",name:"discount",value:j.discount||0,onChange:z=>U("discount",Number(z.target.value)),className:"w-full border rounded-lg p-2 mt-1",min:"0"}):a.jsxs("p",{className:"font-medium",children:[((Ce=p.discount)==null?void 0:Ce.toLocaleString("fr-FR"))||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),w&&j?a.jsx("input",{type:"number",name:"total",value:j.total||0,readOnly:!0,className:`w-full border rounded-lg p-2 mt-1 bg-gray-100 ${j.total<0?"border-red-500":""}`,min:"0"}):a.jsxs("p",{className:"font-medium",children:[((ye=p.total)==null?void 0:ye.toLocaleString("fr-FR"))||"N/A"," DH"]}),w&&j&&j.total<0&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Le total ne peut pas être négatif."})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Garantie"}),w&&j?a.jsx("input",{type:"number",name:"guarantee",value:j.guarantee||0,onChange:z=>U("guarantee",Number(z.target.value)),className:"w-full border rounded-lg p-2 mt-1",min:"0"}):a.jsxs("p",{className:"font-medium",children:[((Le=p.guarantee)==null?void 0:Le.toLocaleString("fr-FR"))||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Type de paiement"}),w&&j?a.jsxs("select",{name:"paymentType",value:j.paymentType||"",onChange:z=>U("paymentType",z.target.value),className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"espece",children:"Espèce"}),a.jsx("option",{value:"cheque",children:"Chèque"}),a.jsx("option",{value:"carte_bancaire",children:"Carte Bancaire"}),a.jsx("option",{value:"virement",children:"Virement"})]}):a.jsx("p",{className:"font-medium",children:p.paymentType||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Avance"}),w&&j?a.jsx("input",{type:"number",name:"advance",value:j.advance||0,onChange:z=>U("advance",Number(z.target.value)),className:"w-full border rounded-lg p-2 mt-1",min:"0"}):a.jsxs("p",{className:"font-medium",children:[((je=p.advance)==null?void 0:je.toLocaleString("fr-FR"))||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Reste à payer"}),w&&j?a.jsx("input",{type:"number",name:"remaining",value:j.remaining||0,readOnly:!0,className:`w-full border rounded-lg p-2 mt-1 bg-gray-100 ${j.remaining<0?"border-red-500":""}`,min:"0"}):a.jsxs("p",{className:"font-medium",children:[((Oe=p.remaining)==null?void 0:Oe.toLocaleString("fr-FR"))||"N/A"," DH"]}),w&&j&&j.remaining<0&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Le reste à payer ne peut pas être négatif."})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Statut"}),w&&j?a.jsxs("select",{name:"status",value:j.status||"",onChange:z=>U("status",z.target.value),className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"en_cours",children:"En cours"}),a.jsx("option",{value:"retournee",children:"Retournée"})]}):a.jsx("p",{className:"font-medium",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="en_cours"?"bg-blue-100":"bg-green-100"} ${g(p.status)}`,children:p.status==="en_cours"?"En cours":"Retournée"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Deuxième Conducteur"}),w&&j?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("input",{type:"checkbox",className:"mr-2",checked:!!j.secondDriver,onChange:z=>F(de=>({...de,secondDriver:z.target.checked?{nom:"",nationalite:"",dateNaissance:"",adresse:"",telephone:"",adresseEtranger:"",permisNumero:"",permisDelivreLe:"",passeportCin:"",passeportDelivreLe:""}:void 0}))}),a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ajouter un deuxième conducteur"})]}),j.secondDriver&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverNom",className:"block text-sm font-medium text-gray-700",children:"Nom"}),a.jsx("input",{type:"text",id:"editSecondDriverNom",value:((We=j.secondDriver)==null?void 0:We.nom)||"",onChange:z=>U("secondDriver.nom",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G["secondDriver.nom"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.nom"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.nom"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverNationalite",className:"block text-sm font-medium text-gray-700",children:"Nationalité"}),a.jsx("input",{type:"text",id:"editSecondDriverNationalite",value:((ze=j.secondDriver)==null?void 0:ze.nationalite)||"",onChange:z=>U("secondDriver.nationalite",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G["secondDriver.nationalite"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.nationalite"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.nationalite"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverDateNaissance",className:"block text-sm font-medium text-gray-700",children:"Né (e) le"}),a.jsx(Me,{selected:(Fe=j.secondDriver)!=null&&Fe.dateNaissance?new Date(j.secondDriver.dateNaissance):null,onChange:z=>U("secondDriver.dateNaissance",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:`w-full border rounded-lg p-2 mt-1 ${G["secondDriver.dateNaissance"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.dateNaissance"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.dateNaissance"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverAdresse",className:"block text-sm font-medium text-gray-700",children:"Adresse"}),a.jsx("input",{type:"text",id:"editSecondDriverAdresse",value:((Ve=j.secondDriver)==null?void 0:Ve.adresse)||"",onChange:z=>U("secondDriver.adresse",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G["secondDriver.adresse"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.adresse"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.adresse"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverTelephone",className:"block text-sm font-medium text-gray-700",children:"Téléphone"}),a.jsx("input",{type:"text",id:"editSecondDriverTelephone",value:((Be=j.secondDriver)==null?void 0:Be.telephone)||"",onChange:z=>U("secondDriver.telephone",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G["secondDriver.telephone"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.telephone"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.telephone"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverAdresseEtranger",className:"block text-sm font-medium text-gray-700",children:"Adresse à l'étranger"}),a.jsx("input",{type:"text",id:"editSecondDriverAdresseEtranger",value:((qe=j.secondDriver)==null?void 0:qe.adresseEtranger)||"",onChange:z=>U("secondDriver.adresseEtranger",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G["secondDriver.adresseEtranger"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.adresseEtranger"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.adresseEtranger"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverPermisNumero",className:"block text-sm font-medium text-gray-700",children:"Permis de conduite N°"}),a.jsx("input",{type:"text",id:"editSecondDriverPermisNumero",value:((Ke=j.secondDriver)==null?void 0:Ke.permisNumero)||"",onChange:z=>U("secondDriver.permisNumero",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G["secondDriver.permisNumero"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.permisNumero"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.permisNumero"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverPermisDelivreLe",className:"block text-sm font-medium text-gray-700",children:"Délivré le"}),a.jsx(Me,{selected:(Je=j.secondDriver)!=null&&Je.permisDelivreLe?new Date(j.secondDriver.permisDelivreLe):null,onChange:z=>U("secondDriver.permisDelivreLe",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:`w-full border rounded-lg p-2 mt-1 ${G["secondDriver.permisDelivreLe"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.permisDelivreLe"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.permisDelivreLe"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverPasseportCin",className:"block text-sm font-medium text-gray-700",children:"Passeport N° ou CIN"}),a.jsx("input",{type:"text",id:"editSecondDriverPasseportCin",value:((He=j.secondDriver)==null?void 0:He.passeportCin)||"",onChange:z=>U("secondDriver.passeportCin",z.target.value),className:`w-full border rounded-lg p-2 mt-1 ${G["secondDriver.passeportCin"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.passeportCin"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.passeportCin"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"editSecondDriverPasseportDelivreLe",className:"block text-sm font-medium text-gray-700",children:"Délivré le"}),a.jsx(Me,{selected:(Ie=j.secondDriver)!=null&&Ie.passeportDelivreLe?new Date(j.secondDriver.passeportDelivreLe):null,onChange:z=>U("secondDriver.passeportDelivreLe",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:`w-full border rounded-lg p-2 mt-1 ${G["secondDriver.passeportDelivreLe"]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),G["secondDriver.passeportDelivreLe"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["secondDriver.passeportDelivreLe"]})]})]})]}):p.secondDriver?a.jsxs("div",{className:"font-medium",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Nom:"})," ",p.secondDriver.nom||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Nationalité:"})," ",p.secondDriver.nationalite||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Né (e) le:"})," ",p.secondDriver.dateNaissance?new Date(p.secondDriver.dateNaissance).toLocaleDateString("fr-FR"):"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Adresse:"})," ",p.secondDriver.adresse||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Téléphone:"})," ",p.secondDriver.telephone||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Adresse à l'étranger:"})," ",p.secondDriver.adresseEtranger||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Permis de conduite N°:"})," ",p.secondDriver.permisNumero||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Délivré le:"})," ",p.secondDriver.permisDelivreLe?new Date(p.secondDriver.permisDelivreLe).toLocaleDateString("fr-FR"):"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Passeport N° ou CIN:"})," ",p.secondDriver.passeportCin||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Délivré le:"})," ",p.secondDriver.passeportDelivreLe?new Date(p.secondDriver.passeportDelivreLe).toLocaleDateString("fr-FR"):"N/A"]})]}):a.jsx("p",{className:"font-medium text-gray-500",children:"Aucun deuxième conducteur"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Équipements"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 mt-1",children:w&&j?Fm.map(z=>{var de;return a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:((de=j.equipment)==null?void 0:de[z.id])||!1,onChange:Ne=>U(`equipment.${z.id}`,Ne.target.checked),className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-600",children:z.label})]},z.id)}):Fm.map(z=>{var de;return a.jsxs("div",{className:"flex items-center",children:[a.jsx(jD,{size:16,className:(de=p.equipment)!=null&&de[z.id]?"text-green-500":"text-gray-300"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:z.label})]},z.id)})})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"text-lg font-medium mb-2",children:"Pièces Jointes:"}),w&&j?a.jsx(mt,{api_url:$,existingDocuments:j.piecesJointes||[],newFiles:P,onNewFilesChange:V,onRemoveExistingDocument:Z}):p.piecesJointes&&p.piecesJointes.length>0?a.jsx(mt,{api_url:$,existingDocuments:p.piecesJointes,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:Z,label:"",readOnly:!0}):a.jsxs("div",{className:"bg-gray-50 p-4 rounded-md flex flex-col items-center justify-center text-center",children:[a.jsx(Nr,{size:24,className:"text-gray-400 mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document associé."})]})]}),!w&&a.jsx("div",{className:"pt-4 border-t",children:a.jsx("div",{className:"flex space-x-3",children:a.jsx("button",{onClick:()=>p&&ae(p),disabled:!p,className:"flex-1 border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Imprimer"})})})]})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(Nr,{size:64,className:"mx-auto mb-4 text-gray-300"}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucun contrat sélectionné"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Sélectionnez un contrat pour voir ses détails"}),a.jsxs("button",{onClick:()=>{r(!0),re({})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center mx-auto",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Nouveau Contrat"]})]})})]}),n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sr,{onClick:()=>r(!1)}),a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Nouveau Contrat"}),a.jsxs("form",{className:"space-y-6",onSubmit:K,children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Information Client"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex flex-col col-span-3 mb-4",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Sélectionner un client"}),a.jsxs("select",{className:"w-full border rounded-lg p-2",value:Se,onChange:z=>A(z.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),o.map(z=>a.jsxs("option",{value:z._id,children:[z.prenomFr||""," ",z.nomFr||""," - ",z.numeroPermis]},z._id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Prénom"}),a.jsx("input",{type:"text",placeholder:"Prénom",className:"w-full border rounded-lg p-2",value:((Ye=J.client)==null?void 0:Ye.prenomFr)||"",onChange:z=>W("client.prenomFr",z.target.value),required:!0,readOnly:!!Se})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Nom"}),a.jsx("input",{type:"text",placeholder:"Nom",className:"w-full border rounded-lg p-2",value:((et=J.client)==null?void 0:et.nomFr)||"",onChange:z=>W("client.nomFr",z.target.value),required:!0,readOnly:!!Se})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"N° Permis"}),a.jsx("input",{type:"text",placeholder:"N° Permis",className:"w-full border rounded-lg p-2",value:((it=J.client)==null?void 0:it.numeroPermis)||"",onChange:z=>W("client.numeroPermis",z.target.value),required:!0,readOnly:!!Se})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Validité Permis"}),a.jsx(Me,{selected:(gt=J.client)!=null&&gt.permisValidite?new Date(J.client.permisValidite):null,onChange:z=>W("client.permisValidite",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded-lg p-2",required:!0,readOnly:!!Se})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Information Contrat"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Date de Contrat"}),a.jsx(Me,{selected:J.contractDate?new Date(J.contractDate):null,onChange:z=>W("contractDate",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Date de Sortie"}),a.jsx(Me,{selected:J.departureDate?new Date(J.departureDate):null,onChange:z=>W("departureDate",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Heure de départ"}),a.jsx("input",{type:"time",name:"departureTime",placeholder:"HH:MM",className:"w-full border rounded-lg p-2",value:J.departureTime||"",onChange:z=>W("departureTime",z.target.value),required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Date de Retour"}),a.jsx(Me,{selected:J.returnDate?new Date(J.returnDate):null,onChange:z=>W("returnDate",z?z.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"w-full border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Lieu de Contrat"}),a.jsx("input",{type:"text",name:"contractLocation",placeholder:"Lieu de Contrat",className:`w-full border rounded-lg p-2 ${G.contractLocation?"border-red-500":""}`,value:J.contractLocation||"",onChange:z=>W("contractLocation",z.target.value),required:!0}),G.contractLocation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.contractLocation})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Durée (jours)"}),a.jsx("input",{type:"number",name:"duration",placeholder:"Durée (jours)",className:"w-full border rounded-lg p-2 bg-gray-100",value:J.duration,readOnly:!0,required:!0,min:"1"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Lieu Livraison"}),a.jsx("input",{type:"text",name:"pickupLocation",placeholder:"Lieu Livraison",className:`w-full border rounded-lg p-2 ${G.pickupLocation?"border-red-500":""}`,value:J.pickupLocation||"",onChange:z=>W("pickupLocation",z.target.value),required:!0}),G.pickupLocation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.pickupLocation})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Lieu Récupération"}),a.jsx("input",{type:"text",name:"returnLocation",placeholder:"Lieu Récupération",className:`w-full border rounded-lg p-2 ${G.returnLocation?"border-red-500":""}`,value:J.returnLocation||"",onChange:z=>W("returnLocation",z.target.value)}),G.returnLocation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.returnLocation})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{className:"w-full border rounded-lg p-2",value:I,onChange:z=>R(z.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner Véhicule"}),s.filter(z=>z.statut==="En parc").map(z=>a.jsxs("option",{value:z._id,children:[z.licensePlate," - ",z.brand," ",z.model]},z._id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Prix par Jour"}),a.jsx("input",{type:"number",name:"pricePerDay",placeholder:"Prix par Jour",className:"w-full border rounded-lg p-2",value:J.pricePerDay||"",onChange:z=>W("pricePerDay",Number(z.target.value)),required:!0,readOnly:!!I,min:"0"}),G.pricePerDay&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.pricePerDay})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Km Départ"}),a.jsx("input",{type:"number",name:"startingKm",placeholder:"Km Départ",value:J.startingKm||"",onChange:z=>W("startingKm",Number(z.target.value)),required:!0,readOnly:!!I,className:"w-full border rounded-lg p-2",min:"0"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Remise (DH)"}),a.jsx("input",{type:"number",name:"discount",placeholder:"Remise (DH)",className:"w-full border rounded-lg p-2",value:J.discount||"",onChange:z=>W("discount",Number(z.target.value)),min:"0"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Carburant Départ"}),a.jsxs("select",{name:"fuelLevel",className:"w-full border rounded-lg p-2",value:J.fuelLevel,onChange:z=>W("fuelLevel",z.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"reserve",className:"text-red-500",children:"Réserve"}),a.jsx("option",{value:"1/4",className:"text-yellow-500",children:"1/4"}),a.jsx("option",{value:"1/2",className:"text-blue-500",children:"1/2"}),a.jsx("option",{value:"3/4",className:"text-green-300",children:"3/4"}),a.jsx("option",{value:"plein",className:"text-green-500",children:"Plein"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Total"}),a.jsx("input",{type:"number",name:"total",placeholder:"Total",className:"w-full border rounded-lg p-2",value:J.total||"",readOnly:!0,min:"0"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Garantie"}),a.jsx("input",{type:"number",name:"guarantee",placeholder:"Garantie",className:"w-full border rounded-lg p-2",value:J.guarantee||"",onChange:z=>W("guarantee",Number(z.target.value)),min:"0"}),G.guarantee&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.guarantee})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Type Paiement"}),a.jsxs("select",{name:"paymentType",className:"w-full border rounded-lg p-2",value:J.paymentType,onChange:z=>W("paymentType",z.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner"}),a.jsx("option",{value:"espece",children:"Espèce"}),a.jsx("option",{value:"cheque",children:"Chèque"}),a.jsx("option",{value:"carte_bancaire",children:"Carte Bancaire"}),a.jsx("option",{value:"virement",children:"Virement"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Avance"}),a.jsx("input",{type:"number",name:"advance",placeholder:"Avance",className:"w-full border rounded-lg p-2",value:J.advance||"",onChange:z=>W("advance",Number(z.target.value)),min:"0"}),G.advance&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G.advance})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Reste"}),a.jsx("input",{type:"number",name:"remaining",placeholder:"Reste",className:"w-full border rounded-lg p-2",value:J.remaining||"",readOnly:!0,min:"0"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Statut"}),a.jsxs("select",{name:"status",value:J.status||"",onChange:z=>W("status",z.target.value),className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"en_cours",children:"En cours"}),a.jsx("option",{value:"retournee",children:"Retournée"})]})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Deuxième Conducteur"}),a.jsx("input",{type:"checkbox",className:"ml-2",checked:!!J.secondDriver,onChange:z=>he(de=>({...de,secondDriver:z.target.checked?{nom:"",nationalite:"",dateNaissance:"",adresse:"",telephone:"",adresseEtranger:"",permisNumero:"",permisDelivreLe:"",passeportCin:"",passeportDelivreLe:""}:void 0}))})]}),J.secondDriver&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverNom",className:"block text-sm font-medium text-gray-700",children:"Nom"}),a.jsx("input",{type:"text",id:"secondDriverNom",value:((At=J.secondDriver)==null?void 0:At.nom)||"",onChange:z=>W("secondDriver.nom",z.target.value),className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverNationalite",className:"block text-sm font-medium text-gray-700",children:"Nationalité"}),a.jsx("input",{type:"text",id:"secondDriverNationalite",value:((Wt=J.secondDriver)==null?void 0:Wt.nationalite)||"",onChange:z=>W("secondDriver.nationalite",z.target.value),className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverDateNaissance",className:"block text-sm font-medium text-gray-700",children:"Né (e) le"}),a.jsx(Me,{selected:(xn=J.secondDriver)!=null&&xn.dateNaissance?new Date(J.secondDriver.dateNaissance):null,onChange:z=>W("secondDriver.dateNaissance",z?z.toISOString().split("T")[0]:""),dateFormat:"yyyy-MM-dd",className:"w-full border rounded-lg p-2",locale:"fr"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverAdresse",className:"block text-sm font-medium text-gray-700",children:"Adresse"}),a.jsx("input",{type:"text",id:"secondDriverAdresse",value:((Yn=J.secondDriver)==null?void 0:Yn.adresse)||"",onChange:z=>W("secondDriver.adresse",z.target.value),className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverTelephone",className:"block text-sm font-medium text-gray-700",children:"Téléphone"}),a.jsx("input",{type:"text",id:"secondDriverTelephone",value:((Rn=J.secondDriver)==null?void 0:Rn.telephone)||"",onChange:z=>W("secondDriver.telephone",z.target.value),className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverAdresseEtranger",className:"block text-sm font-medium text-gray-700",children:"Adresse à l'étranger"}),a.jsx("input",{type:"text",id:"secondDriverAdresseEtranger",value:((Qt=J.secondDriver)==null?void 0:Qt.adresseEtranger)||"",onChange:z=>W("secondDriver.adresseEtranger",z.target.value),className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverPermisNumero",className:"block text-sm font-medium text-gray-700",children:"Permis de conduite N°"}),a.jsx("input",{type:"text",id:"secondDriverPermisNumero",value:((qn=J.secondDriver)==null?void 0:qn.permisNumero)||"",onChange:z=>W("secondDriver.permisNumero",z.target.value),className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverPermisDelivreLe",className:"block text-sm font-medium text-gray-700",children:"Délivré le"}),a.jsx(Me,{selected:(rn=J.secondDriver)!=null&&rn.permisDelivreLe?new Date(J.secondDriver.permisDelivreLe):null,onChange:z=>W("secondDriver.permisDelivreLe",z?z.toISOString().split("T")[0]:""),dateFormat:"yyyy-MM-dd",className:"w-full border rounded-lg p-2",locale:"fr"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverPasseportCin",className:"block text-sm font-medium text-gray-700",children:"Passeport N° ou CIN"}),a.jsx("input",{type:"text",id:"secondDriverPasseportCin",value:((Kn=J.secondDriver)==null?void 0:Kn.passeportCin)||"",onChange:z=>W("secondDriver.passeportCin",z.target.value),className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"secondDriverPasseportDelivreLe",className:"block text-sm font-medium text-gray-700",children:"Délivré le"}),a.jsx(Me,{selected:(Gn=J.secondDriver)!=null&&Gn.passeportDelivreLe?new Date(J.secondDriver.passeportDelivreLe):null,onChange:z=>W("secondDriver.passeportDelivreLe",z?z.toISOString().split("T")[0]:""),dateFormat:"yyyy-MM-dd",className:"w-full border rounded-lg p-2",locale:"fr"})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Équipements/Accessoires"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Fm.map(z=>{var de;return a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",name:z.id,className:"mr-2",checked:((de=J.equipment)==null?void 0:de[z.id])||!1,onChange:Ne=>W(`equipment.${z.id}`,Ne.target.checked)}),z.label]},z.id)})})]}),a.jsxs("section",{children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Prolongation"}),a.jsx("input",{type:"checkbox",className:"ml-2",checked:!!J.extension,onChange:z=>he(de=>({...de,extension:z.target.checked?{duration:0,pricePerDay:0}:void 0}))})]}),J.extension&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durée (jours)"}),a.jsx("input",{type:"number",placeholder:"Durée (jours)",className:`w-full border rounded-lg p-2 ${G["extension.duration"]?"border-red-500":""}`,value:J.extension.duration||"",onChange:z=>W("extension.duration",Number(z.target.value)),min:"1"}),G["extension.duration"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["extension.duration"]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix par Jour"}),a.jsx("input",{type:"number",placeholder:"Prix par Jour",className:`w-full border rounded-lg p-2 ${G["extension.pricePerDay"]?"border-red-500":""}`,value:J.extension.pricePerDay||"",onChange:z=>W("extension.pricePerDay",Number(z.target.value)),min:"1"}),G["extension.pricePerDay"]&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:G["extension.pricePerDay"]})]})]})]}),a.jsxs("section",{className:"border-b pb-4 mb-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Pièces Jointes"}),a.jsx(mt,{api_url:$,existingDocuments:[],newFiles:C,onNewFilesChange:T,onRemoveExistingDocument:()=>Promise.resolve()})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg",disabled:!Se||!I,children:"Créer Contrat"})]})]})]})})]})};kn("fr",Sn);const Wu=e=>typeof e=="string"&&e.trim().length===0,ZA=()=>{var g,N,k;const[e,t]=E.useState([]),[n,r]=E.useState(!0),[s,i]=E.useState(null),[o,l]=E.useState(""),[c,u]=E.useState("all"),[m,h]=E.useState(null),[f,b]=E.useState(null),[v,D]=E.useState(!1),[p,y]=E.useState(null),[w,S]=E.useState(!1),[j,F]=E.useState(null),[C,T]=E.useState({}),P="http://localhost:5000",V=`${P}/api/factures`,Q=`${P}/api/customers`,ee=`${P}/api/contracts`,[ce,fe]=E.useState([]),[G,re]=E.useState([]),$=E.useCallback(async()=>{r(!0),i(null);try{const[x,M,A]=await Promise.all([we.get(`${V}?populate=client`),we.get(Q),we.get(ee)]);return t(x.data),fe(M.data),re(A.data),{invoices:x.data,customers:M.data,contracts:A.data}}catch(x){return console.error("Error fetching data:",x),i("Failed to load data."),le.error("Failed to load data."),{invoices:[],customers:[],contracts:[]}}finally{r(!1)}},[]);E.useEffect(()=>{$()},[$]);const H=e.filter(x=>{var W,K;const M=`${((W=x.client)==null?void 0:W.prenomFr)||""} ${((K=x.client)==null?void 0:K.nomFr)||""}`.toLowerCase().includes(o.toLowerCase())||x.invoiceNumber.toLowerCase().includes(o.toLowerCase()),A=c==="all"||c==="paid"&&x.amountPaid>=x.totalTTC||c==="unpaid"&&x.amountPaid<x.totalTTC,L=new Date(x.invoiceDate),R=m?L>=m:!0,B=f?L<=f:!0;return M&&A&&R&&B}),Y=x=>x.amountPaid>=x.totalTTC?"text-green-500":"text-red-500",X=async x=>{var M,A;try{const L={client:(M=x.client)==null?void 0:M._id,contract:(A=x.contract)==null?void 0:A._id,invoiceDate:x.invoiceDate,dueDate:x.dueDate,totalTTC:x.totalTTC,invoiceNumber:x.invoiceNumber,location:x.location,type:x.type,montantHT:x.montantHT,tvaAmount:x.tvaAmount,tvaPercentage:x.tvaPercentage,paymentType:x.paymentType,amountPaid:x.amountPaid},R=await we.post(V,L);await $(),D(!1),le.success("Invoice added successfully.")}catch(L){console.error("Error adding invoice:",L),le.error("Failed to add invoice.")}},J=async()=>{var x,M;if(!(!j||!p)){if(Wu(j.location)){le.error('Le champ "Lieu" ne peut pas être vide ou contenir uniquement des espaces.');return}try{const A={client:(x=j.client)==null?void 0:x._id,contract:(M=j.contract)==null?void 0:M._id,invoiceDate:j.invoiceDate,dueDate:j.dueDate,totalTTC:j.totalTTC,invoiceNumber:j.invoiceNumber,location:j.location,type:j.type,montantHT:j.montantHT,tvaAmount:j.tvaAmount,tvaPercentage:j.tvaPercentage,paymentType:j.paymentType,amountPaid:j.amountPaid},L=await we.put(`${V}/${p._id}`,A);await $();const R=e.find(B=>B._id===L.data._id);y(R||L.data),S(!1),F(null),le.success("Invoice updated successfully.")}catch(A){console.error("Error updating invoice:",A),le.error("Failed to update invoice.")}}},he=async x=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette facture ?"))try{await we.delete(`${V}/${x}`),t(e.filter(M=>M._id!==x)),y(null),S(!1),F(null),le.success("Invoice deleted successfully.")}catch(M){console.error("Error deleting invoice:",M),le.error("Failed to delete invoice.")}},Se=()=>{p&&(F({...p}),S(!0))},se=()=>{S(!1),F(null),T({})},I=(x,M)=>{j&&F(A=>{if(!A)return null;let L={...A,[x]:M};if(x==="location"&&(Wu(M)?T(R=>({...R,[x]:'Le champ "Lieu" ne peut pas contenir uniquement des espaces.'})):T(R=>{const B={...R};return delete B[x],B})),x==="montantHT"||x==="tvaPercentage"||x==="tvaAmount"){const R=L.montantHT||0,B=L.tvaPercentage||0;if(L.tvaAmount,x==="montantHT"||x==="tvaPercentage"){const W=x==="montantHT"?M:R,U=W*((x==="tvaPercentage"?M:B)/100),ne=W+U;L={...L,tvaAmount:U,totalTTC:ne}}else if(x==="tvaAmount"){const W=M,K=R+W,U=R!==0?W/R*100:0;L={...L,totalTTC:K,tvaPercentage:U}}}else if(x==="contract"){const R=G.find(B=>B._id===M);if(L={...L,contract:R},R&&R.total!==void 0){const B=R.total,W=L.tvaPercentage||0;let K=0,U=0;W!==0?(K=B/(1+W/100),U=B-K):(K=B,U=0),L={...L,totalTTC:B,montantHT:K,tvaAmount:U}}else L={...L,totalTTC:0,montantHT:0,tvaAmount:0,tvaPercentage:0}}else if(x==="client"){const R=ce.find(B=>B._id===M);L={...L,client:R}}return L})},q=(x,M)=>{j&&F(A=>({...A,[M]:x?x.toISOString().split("T")[0]:""}))},_=x=>(x??0).toLocaleString("fr-FR")+" DH",O=x=>{var me;const M=x.contract&&typeof x.contract=="object"?x.contract:G.find(pe=>pe._id===x.contract),A=M==null?void 0:M.vehicle,L=A?`${A.brand||""} ${A.model||""} ${A.licensePlate?`(${A.licensePlate})`:""}`.trim():"N/A",R=(M==null?void 0:M.duration)??(typeof x.contract=="object"?x.contract.duration:void 0)??"N/A",B=x.client?`${x.client.prenomFr||""} ${x.client.nomFr||""}`.trim():"N/A",W=((me=x.client)==null?void 0:me.ice)||"",K=x.invoiceDate?new Date(x.invoiceDate).toLocaleDateString("fr-FR"):"",U=typeof window<"u"?window.location.origin:"",ne=`${U}/media/netcar.png`,Z=`${U}/media/net.png`,oe=pe=>{if(pe===0)return"zéro";const xe=["zéro","un","deux","trois","quatre","cinq","six","sept","huit","neuf","dix","onze","douze","treize","quatorze","quinze","seize"],_e=["","dix","vingt","trente","quarante","cinquante","soixante","soixante-dix","quatre-vingt","quatre-vingt-dix"],Ce=ze=>{if(ze<17)return xe[ze];if(ze<20)return"dix-"+xe[ze-10];if(ze<70){const Fe=Math.floor(ze/10),Ve=ze%10;return Ve===0?_e[Fe]:_e[Fe]+(Ve===1&&(Fe===1||Fe===7||Fe===9)?"-et-un":"-"+xe[Ve]).replace("-un","-un")}return ze<80?"soixante-"+Ce(ze-60):ze<100?ze===80?"quatre-vingts":"quatre-vingt-"+Ce(ze-80):""},ye=ze=>{const Fe=Math.floor(ze/100),Ve=ze%100;let Be="";return Fe>0&&(Fe===1?Be="cent":Be=xe[Fe]+" cent",Ve===0&&Fe>1&&(Be+="s")),Ve>0&&(Be&&(Be+=" "),Be+=Ce(Ve)),Be},Le=[],je=Math.floor(pe/1e9);je&&(Le.push(je===1?"milliard":oe(je)+" milliards"),pe-=je*1e9);const Oe=Math.floor(pe/1e6);Oe&&(Le.push(Oe===1?"un million":oe(Oe)+" millions"),pe-=Oe*1e6);const We=Math.floor(pe/1e3);return We&&(Le.push(We===1?"mille":oe(We)+" mille"),pe-=We*1e3),pe>0&&Le.push(ye(pe)),Le.join(" ").replace(/\s+/g," ").trim()},ae=Math.round(((x.totalTTC??0)+Number.EPSILON)*100)/100,ue=Math.floor(ae),te=Math.round((ae-ue)*100),ie=`${oe(ue)} dirhams${te>0?" et "+oe(te)+" centimes":""}`;return`<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Facture ${x.invoiceNumber||""}</title>
  <style>
    :root{ --bg:#f6f7fb; --card:#ffffff; --muted:#6b7280; --accent:#0f62fe; --border:#e6e9ef; --table-head:#f3f5f9; --success:#e6fff4; }
    body{ margin:0; padding:28px; background:var(--bg); font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; color:#111827; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
    .invoice-container{ max-width:920px; margin:0 auto; background:var(--card); padding:36px; border-radius:12px; box-shadow:0 8px 30px rgba(15,23,42,0.08); border:1px solid var(--border); }
    .header{ display:flex; justify-content:space-between; align-items:center; gap:20px; margin-bottom:28px; padding-bottom:8px; border-bottom:1px solid var(--border); }
    .logo-left, .logo-right{ height:110px; object-fit:contain; display:block; }
    .logo-left{ max-width:420px; } .logo-right{ max-width:420px; }
    .invoice-info{ display:grid; grid-template-columns: 1fr 240px; gap:18px; align-items:start; margin-top:18px; margin-bottom:18px; }
    .left-info{ padding:14px 18px; border-radius:8px; background:#fbfdff; border:1px dashed var(--border); }
    .left-info p{ margin:6px 0; color:var(--muted); } .left-info p strong{ color:#111827; font-weight:600; }
    .right-info{ text-align:right; color:var(--muted); } .right-info p{ margin:6px 0; }
    table{ width:100%; border-collapse:separate; border-spacing:0; margin-top:8px; overflow:hidden; border-radius:8px; }
    thead th{ background:var(--table-head); color:#111827; font-weight:700; text-transform:uppercase; font-size:13px; padding:14px 18px; border-bottom:1px solid var(--border); text-align:left; letter-spacing:0.6px; }
    tbody td{ background:#fff; padding:14px 18px; border-bottom:1px solid var(--border); vertical-align:middle; }
    tbody td:nth-child(2){ text-align:right; color:#0b1226; font-variant-numeric:proportional-nums; }
    tbody tr:nth-child(even) td{ background:#fbfbfc; }
    tbody > tr:first-child td{ padding:28px 20px; font-size:1.04rem; min-height:110px; background:linear-gradient(180deg,#fff,#fbfdff); }
    tbody > tr:last-child td{ font-weight:800; background:var(--success); font-size:1.02rem; }
  .amount-row{ display:flex; gap:12px; align-items:center; margin-top:18px; }
  /* Make amount in words larger and allow wrapping/multi-line */
  .Amount.in.words{ flex:1; padding:14px 16px; border-bottom:2px dashed var(--border); min-height:80px; color:#111827; font-style:italic; font-size:1.05rem; line-height:1.35; white-space:normal; word-break:break-word; }
    @media print{ body{ background:#fff; padding:0; } .invoice-container{ box-shadow:none; border:none; } .header, .invoice-info{ border-color:#ddd; } }
    @media (max-width:720px){ .invoice-container{ padding:20px; } .invoice-info{ grid-template-columns: 1fr; } .right-info{ text-align:left; } .logo-left, .logo-right{ height:90px; max-width:320px; } tbody > tr:first-child td{ min-height:80px; padding:18px; } }
    .invoice-footer{ margin-top:26px; padding-top:12px; border-top:1px solid var(--border); text-align:center; color:var(--muted); font-size:13px; line-height:1.4; }
    .signatures{ display:flex; gap:24px; margin-top:22px; align-items:flex-end; justify-content:space-between; }
    .sign-box{ flex:1; min-height:120px; border:1px dashed var(--border); border-radius:8px; background:#fff; padding:14px; display:flex; flex-direction:column; justify-content:flex-end; }
    .sign-box.small{ max-width:55%; min-height:160px; } .sign-label{ font-size:13px; color:var(--muted); margin-bottom:6px; } .sign-line{ height:2px; background:transparent; border-bottom:1px solid #111827; width:70%; }
  </style>
</head>
<body>
  <div class="invoice-container">
    <div class="header">
    <img src="${ne}" alt="Logo Left" class="logo-left">
    <img src="${Z}" alt="Logo Right" class="logo-right">
  </div>

  <div class="invoice-info">
    <div class="left-info">
      <p><strong>Facture:</strong> ${x.invoiceNumber||""}</p>
      <p><strong>Client:</strong> ${B}</p>
      <p><strong>ICE:</strong> ${W}</p>
    </div>
    <div class="right-info">
      <p><strong>Date:</strong> ${K}</p>
      <p><strong>Lieu:</strong> ${x.location||""}</p>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>DÉSIGNATION</th>
        <th>MONTANT</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="the car rented">${L}</td>
        <td class="day rented">${R}</td>
      </tr>
      <tr>
        <td>HT</td>
        <td class="HT price">${_(x.montantHT)}</td>
      </tr>
      <tr>
        <td>TVA</td>
        <td class="TVA price">${_(x.tvaAmount)}</td>
      </tr>
      <tr>
        <td>TTC</td>
        <td class="TTC price">${_(x.totalTTC)}</td>
      </tr>
    </tbody>
  </table>

  <div class="amount-row" style="margin-top:18px;">
    <div style="font-weight:600;">Arreté la facture à la somme de :</div>
    <div class="Amount in words" style="flex:1; margin-left:12px; min-height:34px; border-bottom:1px solid #000;">${ie}</div>
</div>

  <div class="signatures">
    <div class="sign-box small">
      <div class="sign-label">Cachet</div>
      <div class="sign-line"></div>
    </div>
    <div class="sign-box">
      <div class="sign-label">Signature</div>
      <div class="sign-line"></div>
    </div>
  </div>

  <div class="invoice-footer">N° 24, 1* Étage Angle Rue Oussama Ibnou Zaid (ex. Jura) &amp; Rue Ahmed Joumari (ex rue d'auvergne) - Casablanca<br>
  Tél: 05 20 72 67 32 - GSM: 0661 09 57 41 - 06 63 72 10 40<br>
  E-mail: <a href="mailto:Mednetcar23@gmail.com">contact@mednetcar.ma</a></div>

</div>

</body>
</html>`},d=x=>{if(!x)return;const M=O(x),A=window.open("","_blank","width=900,height=800");if(!A){le.error("Impossible d'ouvrir la fenêtre d'impression.");return}A.document.open(),A.document.write(M),A.document.close(),setTimeout(()=>{A.focus(),A.print(),A.close()},500)};return n?a.jsx("p",{children:"Loading..."}):s?a.jsx("p",{children:s}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Factures"}),a.jsxs("button",{onClick:()=>{y(null),D(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Nouvelle Facture"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-invoice",type:"text",placeholder:"Rechercher une facture...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:o,onChange:x=>l(x.target.value)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{htmlFor:"status-filter",className:"sr-only",children:"Filtrer par statut"}),a.jsxs("select",{id:"status-filter",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",value:c,onChange:x=>u(x.target.value),children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"paid",children:"Payée"}),a.jsx("option",{value:"unpaid",children:"Non payée"})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{htmlFor:"start-date-filter",className:"sr-only",children:"Date de début"}),a.jsx(Me,{id:"start-date-filter",selected:m,onChange:x=>h(x),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"Date de début",className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{htmlFor:"end-date-filter",className:"sr-only",children:"Date de fin"}),a.jsx(Me,{id:"end-date-filter",selected:f,onChange:x=>b(x),dateFormat:"dd/MM/yyyy",locale:"fr",placeholderText:"Date de fin",className:"w-full border rounded-lg p-2"})]})]})]})}),a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N° Facture"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant TTC"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[H.map(x=>{var M,A;return a.jsxs("tr",{onClick:()=>{y(x)},className:`hover:bg-gray-50 cursor-pointer ${(p==null?void 0:p._id)===x._id?"bg-blue-50":""}`,children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.invoiceNumber})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:`${((M=x.client)==null?void 0:M.prenomFr)||""} ${((A=x.client)==null?void 0:A.nomFr)||""}`.trim()||"N/A"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:new Date(x.invoiceDate).toLocaleDateString("fr-FR")}),a.jsx("div",{className:"text-sm text-gray-500",children:x.location})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[x.totalTTC.toLocaleString("fr-FR")," DH"]}),a.jsx("div",{className:`text-xs ${Y(x)}`,children:x.amountPaid>=x.totalTTC?"Payée":`Reste: ${(x.totalTTC-x.amountPaid).toLocaleString("fr-FR")} DH`})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(tn,{onClick:L=>{L.stopPropagation(),y(x),Se()},size:"md",className:"mr-3"}),a.jsx("button",{onClick:L=>{L.stopPropagation(),he(x._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Ln,{size:18})})]})]},x._id)}),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Aucune facture trouvée."})})]})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:p?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de la facture"}),w?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:se,className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:J,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:Se,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsx("div",{className:"p-4 space-y-4",children:w&&j?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"invoiceNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"N° Facture (*)"}),a.jsx("input",{type:"text",name:"invoiceNumber",id:"invoiceNumber",value:j.invoiceNumber||"",onChange:x=>I("invoiceNumber",x.target.value),className:"w-full border rounded-lg p-2 mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"invoiceDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Facture (*)"}),a.jsx(Me,{selected:j.invoiceDate?new Date(j.invoiceDate):null,onChange:x=>q(x,"invoiceDate"),locale:"fr",dateFormat:"dd/MM/yyyy",className:"w-full border rounded-lg p-2 mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d'échéance (*)"}),a.jsx(Me,{selected:j.dueDate?new Date(j.dueDate):null,onChange:x=>q(x,"dueDate"),locale:"fr",dateFormat:"dd/MM/yyyy",className:"w-full border rounded-lg p-2 mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"client",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client (*)"}),a.jsxs("select",{name:"client",id:"client",value:((g=j.client)==null?void 0:g._id)||"",onChange:x=>I("client",x.target.value),className:"w-full border rounded-lg p-2 mt-1",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),ce.map(x=>a.jsxs("option",{value:x._id,children:[x.prenomFr," ",x.nomFr]},x._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"contract",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrat (*)"}),a.jsxs("select",{name:"contract",id:"contract",value:((N=j.contract)==null?void 0:N._id)||"",onChange:x=>I("contract",x.target.value),className:"w-full border rounded-lg p-2 mt-1",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un contrat"}),G.map(x=>a.jsx("option",{value:x._id,children:x.contractNumber},x._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Lieu (*)"}),a.jsx("input",{type:"text",name:"location",id:"location",value:j.location||"",onChange:x=>I("location",x.target.value),className:`w-full border rounded-lg p-2 mt-1 ${C.location?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),C.location&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:C.location})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type (*)"}),a.jsxs("select",{name:"type",id:"type",value:j.type||"Particulier",onChange:x=>I("type",x.target.value),className:"w-full border rounded-lg p-2 mt-1",required:!0,children:[a.jsx("option",{value:"Professionel",children:"Professionel"}),a.jsx("option",{value:"Particulier",children:"Particulier"})]})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4 space-y-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Montants"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"montantHT",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant HT (*)"}),a.jsx("input",{type:"number",name:"montantHT",id:"montantHT",value:j.montantHT||0,onChange:x=>I("montantHT",parseFloat(x.target.value)||0),className:"w-full border rounded-lg p-2 mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"tvaPercentage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pourcentage TVA (%) (*)"}),a.jsx("input",{type:"number",name:"tvaPercentage",id:"tvaPercentage",value:j.tvaPercentage||0,onChange:x=>I("tvaPercentage",parseFloat(x.target.value)||0),className:"w-full border rounded-lg p-2 mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"tvaAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant TVA (*)"}),a.jsx("input",{type:"number",name:"tvaAmount",id:"tvaAmount",value:j.tvaAmount||0,onChange:x=>I("tvaAmount",parseFloat(x.target.value)||0),className:"w-full border rounded-lg p-2 mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"totalTTC",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant TTC (*)"}),a.jsx("input",{type:"number",name:"totalTTC",id:"totalTTC",value:j.totalTTC||0,onChange:x=>I("totalTTC",parseFloat(x.target.value)||0),className:"w-full border rounded-lg p-2 mt-1 bg-gray-100",required:!0,readOnly:!0})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4 space-y-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Paiement"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Paiement (*)"}),a.jsxs("select",{name:"paymentType",id:"paymentType",value:j.paymentType||"espèce",onChange:x=>I("paymentType",x.target.value),className:"w-full border rounded-lg p-2 mt-1",required:!0,children:[a.jsx("option",{value:"espèce",children:"Espèce"}),a.jsx("option",{value:"chèque",children:"Chèque"}),a.jsx("option",{value:"carte bancaire",children:"Carte Bancaire"}),a.jsx("option",{value:"virement",children:"Virement"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"amountPaid",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant Payé (*)"}),a.jsx("input",{type:"number",name:"amountPaid",id:"amountPaid",value:j.amountPaid||0,onChange:x=>I("amountPaid",parseFloat(x.target.value)||0),className:"w-full border rounded-lg p-2 mt-1",required:!0})]})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"N° Facture"}),a.jsx("p",{className:"font-medium",children:p.invoiceNumber})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date Facture"}),a.jsx("p",{className:"font-medium",children:new Date(p.invoiceDate).toLocaleDateString("fr-FR")})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date d'échéance"}),a.jsx("p",{className:"font-medium",children:new Date(p.dueDate).toLocaleDateString("fr-FR")})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Client"}),a.jsx("p",{className:"font-medium",children:p.client?`${p.client.prenomFr} ${p.client.nomFr}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Contrat"}),a.jsx("p",{className:"font-medium",children:((k=p.contract)==null?void 0:k.contractNumber)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Lieu"}),a.jsx("p",{className:"font-medium",children:p.location})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Type"}),a.jsx("p",{className:"font-medium",children:p.type})]}),a.jsxs("div",{className:"mt-6 border-t pt-4 space-y-2",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Montants"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant HT"}),a.jsxs("p",{className:"font-medium",children:[p.montantHT.toLocaleString("fr-FR")," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Pourcentage TVA"}),a.jsxs("p",{className:"font-medium",children:[p.tvaPercentage,"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant TVA"}),a.jsxs("p",{className:"font-medium",children:[p.tvaAmount.toLocaleString("fr-FR")," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant TTC"}),a.jsxs("p",{className:"font-bold",children:[p.totalTTC.toLocaleString("fr-FR")," DH"]})]})]}),a.jsxs("div",{className:"mt-6 border-t pt-4 space-y-2",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Paiement"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Type de Paiement"}),a.jsx("p",{className:"font-medium",children:p.paymentType})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant Payé"}),a.jsxs("p",{className:"font-medium",children:[p.amountPaid.toLocaleString("fr-FR")," DH"]})]})]}),a.jsx("div",{className:"pt-4 border-t",children:a.jsx("div",{className:"flex space-x-3",children:a.jsx("button",{onClick:()=>d(p),className:"flex-1 border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Imprimer"})})})]})})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(Nr,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune facture sélectionnée"})]})})]}),v&&a.jsx(eL,{onSubmit:X,onClose:()=>D(!1),initialData:null,API_URL:P})]})},eL=({onSubmit:e,onClose:t,initialData:n,API_URL:r})=>{var V,Q;const[s,i]=E.useState(n||{invoiceNumber:"",invoiceDate:new Date().toISOString().split("T")[0],dueDate:new Date().toISOString().split("T")[0],client:void 0,contract:void 0,location:"",type:"Particulier",montantHT:0,tvaAmount:0,tvaPercentage:20,totalTTC:0,paymentType:"espèce",amountPaid:0}),[o,l]=E.useState([]),[c,u]=E.useState([]),m=`${r}/api/customers`,h=`${r}/api/contracts`,[f,b]=E.useState(!1),[v,D]=E.useState(null),[p,y]=E.useState({});E.useEffect(()=>{(async()=>{try{const[ce,fe]=await Promise.all([we.get(m),we.get(h)]);l(ce.data),u(fe.data)}catch(ce){console.error("Error fetching data:",ce),le.error("Failed to load customers or contracts for the form.")}})()},[m,h]),E.useEffect(()=>{i(n?{...n,invoiceDate:n.invoiceDate.split("T")[0],dueDate:n.dueDate.split("T")[0]}:{invoiceNumber:"",invoiceDate:new Date().toISOString().split("T")[0],dueDate:new Date().toISOString().split("T")[0],client:void 0,contract:void 0,location:"",type:"Particulier",montantHT:0,tvaAmount:0,tvaPercentage:20,totalTTC:0,paymentType:"espèce",amountPaid:0})},[n]);const w=ee=>{const{name:ce,value:fe}=ee.target;ce==="location"&&(Wu(fe)?y(G=>({...G,[ce]:'Le champ "Lieu" ne peut pas contenir uniquement des espaces.'})):y(G=>{const re={...G};return delete re[ce],re})),i(G=>({...G,[ce]:fe}))},S=ee=>{const{name:ce,value:fe}=ee.target,G=parseFloat(fe)||0;i(re=>{let $={...re,[ce]:G};const H=$.montantHT||0,Y=$.tvaPercentage||0;if($.tvaAmount,ce==="montantHT"||ce==="tvaPercentage"){const X=ce==="montantHT"?G:H,he=X*((ce==="tvaPercentage"?G:Y)/100),Se=X+he;$={...$,tvaAmount:he,totalTTC:Se}}else if(ce==="tvaAmount"){const X=G,J=H+X,he=H!==0?X/H*100:0;$={...$,totalTTC:J,tvaPercentage:he}}return $})},j=(ee,ce)=>{i(fe=>({...fe,[ce]:ee?ee.toISOString().split("T")[0]:""}))},F=ee=>{const ce=ee.target.value,fe=o.find(G=>G._id===ce);i(G=>({...G,client:fe}))},C=ee=>{const ce=ee.target.value,fe=c.find(G=>G._id===ce);i(G=>{let re={...G,contract:fe};if(fe&&fe.total!==void 0){const $=fe.total,H=re.tvaPercentage||0;let Y=0,X=0;H!==0?(Y=$/(1+H/100),X=$-Y):(Y=$,X=0),re={...re,totalTTC:$,montantHT:Y,tvaAmount:X}}else re={...re,totalTTC:0,montantHT:0,tvaAmount:0,tvaPercentage:0};return re})},T=ee=>{ee.preventDefault();const ce=n?["invoiceNumber","invoiceDate","dueDate","client","contract","location","type","montantHT","tvaAmount","tvaPercentage","totalTTC","paymentType","amountPaid"]:["invoiceDate","dueDate","client","contract","location","type","montantHT","tvaAmount","tvaPercentage","totalTTC","paymentType","amountPaid"],fe={};if(ce.forEach(G=>{s[G]||(fe[G]="Ce champ est obligatoire.")}),Wu(s.location)&&(fe.location='Le champ "Lieu" ne peut pas être vide ou contenir uniquement des espaces.'),y(fe),Object.keys(fe).length>0){le.error("Veuillez corriger les erreurs de validation.");return}e(s)},P=ee=>{v&&i(ce=>({...ce,[v]:ee}))};return a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sr,{onClick:t}),a.jsx("h2",{className:"text-xl font-bold mb-4",children:n?"Modifier la Facture":"Nouvelle Facture"}),a.jsxs("form",{onSubmit:T,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Détails de la Facture"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"invoiceNumber",className:"text-sm font-medium text-gray-700 mb-1",children:"N° Facture (*)"}),a.jsx("input",{type:"text",name:"invoiceNumber",id:"invoiceNumber",value:s.invoiceNumber||"",onChange:w,className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"invoiceDate",className:"text-sm font-medium text-gray-700 mb-1",children:"Date Facture (*)"}),a.jsx(Me,{selected:s.invoiceDate?new Date(s.invoiceDate):null,onChange:ee=>j(ee,"invoiceDate"),locale:"fr",dateFormat:"dd/MM/yyyy",className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"dueDate",className:"text-sm font-medium text-gray-700 mb-1",children:"Date d'échéance (*)"}),a.jsx(Me,{selected:s.dueDate?new Date(s.dueDate):null,onChange:ee=>j(ee,"dueDate"),locale:"fr",dateFormat:"dd/MM/yyyy",className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"client",className:"text-sm font-medium text-gray-700 mb-1",children:"Client (*)"}),a.jsxs("select",{name:"client",id:"client",value:((V=s.client)==null?void 0:V._id)||"",onChange:F,className:"border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),o.map(ee=>a.jsxs("option",{value:ee._id,children:[ee.prenomFr," ",ee.nomFr]},ee._id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"contract",className:"text-sm font-medium text-gray-700 mb-1",children:"Contrat (*)"}),a.jsxs("select",{name:"contract",id:"contract",value:((Q=s.contract)==null?void 0:Q._id)||"",onChange:C,className:"border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un contrat"}),c.map(ee=>a.jsx("option",{value:ee._id,children:ee.contractNumber},ee._id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"location",className:"text-sm font-medium text-gray-700 mb-1",children:"Lieu (*)"}),a.jsx("input",{type:"text",name:"location",id:"location",value:s.location||"",onChange:w,className:`border rounded-lg p-2 ${p.location?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),p.location&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:p.location})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"type",className:"text-sm font-medium text-gray-700 mb-1",children:"Type (*)"}),a.jsxs("select",{name:"type",id:"type",value:s.type||"Particulier",onChange:w,className:"border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"Professionel",children:"Professionel"}),a.jsx("option",{value:"Particulier",children:"Particulier"})]})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Montants"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"montantHT",className:"text-sm font-medium text-gray-700 mb-1",children:"Montant HT (*)"}),a.jsx("input",{type:"number",name:"montantHT",id:"montantHT",value:s.montantHT||0,onChange:S,className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"tvaPercentage",className:"text-sm font-medium text-gray-700 mb-1",children:"Pourcentage TVA (%) (*)"}),a.jsx("input",{type:"number",name:"tvaPercentage",id:"tvaPercentage",value:s.tvaPercentage||0,onChange:S,className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"tvaAmount",className:"text-sm font-medium text-gray-700 mb-1",children:"Montant TVA (*)"}),a.jsx("input",{type:"number",name:"tvaAmount",id:"tvaAmount",value:s.tvaAmount||0,onChange:S,className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"totalTTC",className:"text-sm font-medium text-gray-700 mb-1",children:"Montant TTC (*)"}),a.jsx("input",{type:"number",name:"totalTTC",id:"totalTTC",value:s.totalTTC||0,onChange:S,className:"border rounded-lg p-2 bg-gray-100",required:!0,readOnly:!0})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Paiement"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"paymentType",className:"text-sm font-medium text-gray-700 mb-1",children:"Type de Paiement (*)"}),a.jsxs("select",{name:"paymentType",id:"paymentType",value:s.paymentType||"espèce",onChange:w,className:"border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"espèce",children:"Espèce"}),a.jsx("option",{value:"chèque",children:"Chèque"}),a.jsx("option",{value:"carte bancaire",children:"Carte Bancaire"}),a.jsx("option",{value:"virement",children:"Virement"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"amountPaid",className:"text-sm font-medium text-gray-700 mb-1",children:"Montant Payé (*)"}),a.jsx("input",{type:"number",name:"amountPaid",id:"amountPaid",value:s.amountPaid||0,onChange:S,className:"border rounded-lg p-2",required:!0})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[n?"Modifier":"Ajouter"," Facture"]})]})]})]}),a.jsx(ej,{isOpen:f,onClose:()=>b(!1),onInput:P,initialValue:v?String(s[v]):""})]})};kn("fr",Sn);const tL=e=>{var n;switch((n=e.split(".").pop())==null?void 0:n.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"webp":return"image/webp";case"pdf":return"application/pdf";default:return"application/octet-stream"}},xv=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},Vo=e=>typeof e=="string"&&e.trim().length===0,wc="http://localhost:5000",nL=()=>{var $;const[e,t]=E.useState([]),[n,r]=E.useState(!0),[s,i]=E.useState(null),[o,l]=E.useState(""),[c,u]=E.useState(null),[m,h]=E.useState(null),[f,b]=E.useState(!1),[v,D]=E.useState(null),[p,y]=E.useState(!1),[w,S]=E.useState(null),[j,F]=E.useState([]),C=`${wc}/api/charges`,T=E.useCallback(async()=>{r(!0),i(null);try{const H=await we.get(C);t(H.data)}catch(H){console.error("Error fetching data:",H),i("Failed to load data."),le.error("Failed to load data.")}finally{r(!1)}},[]);E.useEffect(()=>{T()},[T]),E.useEffect(()=>{if(v&&!p){const H=[];v.attachments&&Array.isArray(v.attachments)&&v.attachments.forEach(Y=>{const X=Y.split(/-(.+)/)[1];H.push({name:X,url:Y,type:tL(X),size:0})}),JSON.stringify(v.documents)!==JSON.stringify(H)&&D(Y=>({...Y,documents:H}))}},[v,p]);const P=e.filter(H=>{const Y=H.motif.toLowerCase().includes(o.toLowerCase())||H.observation.toLowerCase().includes(o.toLowerCase()),X=new Date(H.date),J=c?X>=c:!0,he=m?X>=m:!0;return Y&&J&&he}),V=async H=>{const Y=new FormData;for(const X in H)if(Object.prototype.hasOwnProperty.call(H,X)){const J=H[X];X!=="_id"&&X!=="documents"&&X!=="attachments"&&J!==null&&J!==void 0&&Y.append(X,J)}j.length>0&&j.forEach(X=>{Y.append("attachments",X)});try{const J=(await we.post(C,Y,{headers:{"Content-Type":"multipart/form-data"}})).data;t([...e,J]),b(!1),le.success("Charge added successfully."),F([]),window.dispatchEvent(new Event("chargeUpdated"))}catch(X){console.error("Error adding charge:",X),le.error("Failed to add charge.")}},Q=async H=>{var J;if(!v||!w)return;if(Vo(w.motif)){le.error("Le motif ne peut pas contenir uniquement des espaces.");return}if(w.observation&&Vo(w.observation)){le.error("L'observation ne peut pas contenir uniquement des espaces.");return}if(w.montant!==void 0&&w.montant<0){le.error("Le montant ne peut pas être inférieur à 0.");return}const Y=new FormData;for(const he in H)if(Object.prototype.hasOwnProperty.call(H,he)){const Se=H[he];he!=="_id"&&he!=="documents"&&he!=="attachments"&&Se!==null&&Se!==void 0&&Y.append(he,Se)}const X=((J=w==null?void 0:w.documents)==null?void 0:J.filter(he=>!he.isNew))||[];Y.append("existingDocuments",JSON.stringify(X)),j.length>0&&j.forEach(he=>{Y.append("attachments",he)});try{const Se=(await we.put(`${C}/${v._id}`,Y,{headers:{"Content-Type":"multipart/form-data"}})).data;t(e.map(se=>se._id===Se._id?Se:se)),D(Se),y(!1),le.success("Charge updated successfully."),F([]),window.dispatchEvent(new Event("chargeUpdated"))}catch(he){console.error("Error updating charge:",he),le.error("Failed to update charge.")}},[ee,ce]=E.useState(!1),fe=H=>{D(e.find(Y=>Y._id===H)||null),ce(!0)},G=async()=>{if(v)try{await we.delete(`${C}/${v._id}`),t(e.filter(H=>H._id!==v._id)),D(null),ce(!1),le.success("Charge deleted successfully.")}catch(H){console.error("Error deleting charge:",H),le.error("Failed to delete charge.")}},re=async H=>{if(v)try{await we.delete(`${C}/${v._id}/documents`,{data:{documentName:H.name}}),D(Y=>{var X,J;return Y?{...Y,documents:(X=Y.documents)==null?void 0:X.filter(he=>he.url!==H.url),attachments:(J=Y.attachments)==null?void 0:J.filter(he=>he!==H.name)}:null}),le.success("Document supprimé avec succès.")}catch(Y){console.error("Erreur lors de la suppression du document:",Y),le.error("Échec de la suppression du document.")}};return n?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading charges..."})}):s?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:s}),a.jsx("button",{onClick:T,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Charges"}),a.jsxs("button",{onClick:()=>{D(null),b(!0),F([])},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Nouvelle Charge"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-charge",type:"text",placeholder:"Rechercher une charge...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:o,onChange:H=>l(H.target.value)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{htmlFor:"start-date-filter",className:"sr-only",children:"Date de début"}),a.jsx(Me,{id:"start-date-filter",selected:c,onChange:H=>u(H),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"Date de début",className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{htmlFor:"end-date-filter",className:"sr-only",children:"Date de fin"}),a.jsx(Me,{id:"end-date-filter",selected:m,onChange:H=>h(H),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"Date de fin",className:"border rounded-lg p-2 w-full"})]})]})]})}),a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Charge"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[P.map(H=>a.jsxs("tr",{onClick:()=>D(H),className:`hover:bg-gray-50 cursor-pointer ${(v==null?void 0:v._id)===H._id?"bg-blue-50":""}`,children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx(pt,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.motif}),a.jsx("div",{className:"text-xs text-gray-500",children:H.observation||"Aucune observation"})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm font-medium",children:xv(H.date)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[H.montant.toLocaleString("fr-FR")," DH"]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(tn,{onClick:Y=>{Y.stopPropagation(),D(H),y(!0);const X=(H.attachments||[]).map(J=>({name:J.split(/-(.+)/)[1],url:J,type:"",size:0,isNew:!1}));S({...H,documents:X}),F([])},size:"md",className:"mr-3"}),a.jsx("button",{onClick:Y=>{Y.stopPropagation(),fe(H._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Ln,{size:18})})]})]},H._id)),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Aucune charge trouvée."})})]})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:v?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de la charge"}),p?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:()=>{w&&Q(w)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:()=>{y(!0);const H=(v.attachments||[]).map(Y=>({name:Y.split(/-(.+)/)[1],url:Y,type:"",size:0,isNew:!1}));S({...v,documents:H}),F([])},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Motif"}),p&&w?a.jsx("input",{type:"text",name:"motif",value:w.motif||"",onChange:H=>S({...w,motif:H.target.value}),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:v.motif||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date"}),p&&w?a.jsx(Me,{selected:w.date?new Date(w.date):null,onChange:H=>S({...w,date:H?H.toISOString().split("T")[0]:""}),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:xv(v.date)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant"}),p&&w?a.jsx("input",{type:"number",name:"montant",value:w.montant||0,onChange:H=>S({...w,montant:Number(H.target.value)}),className:"w-full border rounded-lg p-2 mt-1"}):a.jsxs("p",{className:"font-medium",children:[(($=v.montant)==null?void 0:$.toLocaleString("fr-FR"))||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Observation"}),p&&w?a.jsx("textarea",{name:"observation",value:w.observation||"",onChange:H=>S({...w,observation:H.target.value}),rows:3,className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:v.observation||"Aucune observation"})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"text-lg font-medium mb-2",children:"Pièces Jointes:"}),p&&w?a.jsx(mt,{api_url:wc,existingDocuments:w.documents||[],newFiles:j,onNewFilesChange:F,onRemoveExistingDocument:re}):v.documents&&v.documents.length>0?a.jsx(mt,{api_url:wc,existingDocuments:v.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:re,label:"",readOnly:!0}):a.jsxs("div",{className:"bg-gray-50 p-4 rounded-md flex flex-col items-center justify-center text-center",children:[a.jsx(Nr,{size:24,className:"text-gray-400 mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document associé."})]})]}),!p&&a.jsx("div",{className:"pt-4 border-t",children:a.jsx("div",{className:"flex space-x-3",children:a.jsx("button",{className:"flex-1 border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Imprimer"})})})]})]}):a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-center h-full py-10",children:[a.jsx(Nr,{size:64,className:"text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucune charge sélectionnée"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Sélectionnez une charge pour voir ses détails"}),a.jsxs("button",{onClick:()=>{D(null),b(!0),F([])},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Nouvelle Charge"]})]})})})]}),f&&a.jsx(rL,{onSubmit:V,onClose:()=>b(!1),initialData:null,newAttachmentFiles:j,setNewAttachmentFiles:F,API_URL:wc,handleRemoveExistingDocument:re}),ee&&v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirmer la suppression"}),a.jsxs("p",{children:['Êtes-vous sûr de vouloir supprimer la charge "',v.motif,'" ?']}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>ce(!1),className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:G,className:"px-3 py-1 bg-red-600 text-white rounded-lg text-sm",children:"Supprimer"})]})]})})]})},rL=({onSubmit:e,onClose:t,initialData:n,newAttachmentFiles:r,setNewAttachmentFiles:s,API_URL:i,handleRemoveExistingDocument:o})=>{const[l,c]=E.useState(()=>n?{...n,date:n.date?new Date(n.date).toISOString().split("T")[0]:"",documents:n.documents||[]}:{motif:"",date:new Date().toISOString().split("T")[0],montant:0,observation:"",attachments:[],documents:[]}),[u,m]=E.useState({}),h=v=>{const{name:D,value:p}=v.target;if(["motif","observation"].includes(D))Vo(p)?m(y=>({...y,[D]:"Ce champ ne peut pas contenir uniquement des espaces."})):m(y=>{const w={...y};return delete w[D],w});else if(D==="montant"){const y=parseFloat(p);isNaN(y)||y<0?m(w=>({...w,[D]:"La valeur ne peut pas être inférieure à 0."})):m(w=>{const S={...w};return delete S[D],S})}c(y=>({...y,[D]:D==="montant"?parseFloat(p):p}))},f=(v,D)=>{c(p=>({...p,[D]:v?v.toISOString().split("T")[0]:""}))},b=v=>{v.preventDefault();const D={};if(Vo(l.motif)&&(D.motif="Le motif ne peut pas contenir uniquement des espaces."),l.observation&&Vo(l.observation)&&(D.observation="L'observation ne peut pas contenir uniquement des espaces."),l.montant!==void 0&&l.montant<0&&(D.montant="Le montant ne peut pas être inférieur à 0."),m(D),Object.keys(D).length>0){le.error("Veuillez corriger les erreurs de validation.");return}e(l)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold",children:[n?"Modifier":"Nouvelle"," Charge"]}),a.jsx("button",{onClick:t,children:a.jsx(kr,{size:24})})]}),a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations sur la Charge"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"motif",className:"block text-sm font-medium text-gray-700 mb-1",children:"Motif"}),a.jsx("input",{type:"text",id:"motif",name:"motif",value:l.motif||"",onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Motif de la charge",required:!0}),u.motif&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.motif})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),a.jsx(Me,{id:"date",selected:l.date?new Date(l.date):null,onChange:v=>f(v,"date"),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholderText:"Sélectionner une date",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"montant",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant (DH)"}),a.jsx("input",{type:"number",id:"montant",name:"montant",value:l.montant||"",onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0}),u.montant&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.montant})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"observation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Observation"}),a.jsx("textarea",{id:"observation",name:"observation",value:l.observation||"",onChange:h,rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Notes ou observations supplémentaires"}),u.observation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.observation})]})]})]}),a.jsx(mt,{api_url:i,existingDocuments:l.documents||[],newFiles:r,onNewFilesChange:s,onRemoveExistingDocument:o}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:n?"Mettre à jour":"Ajouter"})]})]})]})})};kn("fr",Sn);const sL=({initialData:e,customers:t,contracts:n,factures:r,accidents:s,onSubmit:i,onClose:o,isEditMode:l,newAttachmentFiles:c,setNewAttachmentFiles:u,handleRemoveAttachment:m})=>{var S,j,F,C;const[h,f]=E.useState(()=>{var T,P,V;return e?{...e,paymentDate:e.paymentDate?new Date(e.paymentDate).toISOString().split("T")[0]:"",documents:e.documents||[],contractId:((T=e.contract)==null?void 0:T._id)||"",factureId:((P=e.facture)==null?void 0:P._id)||"",accidentId:((V=e.accident)==null?void 0:V._id)||""}:{paymentNumber:"",paymentDate:new Date().toISOString().split("T")[0],paymentFor:"",clientId:"",clientName:"",contractId:"",factureId:"",accidentId:"",remainingAmount:0,paymentType:"",amountPaid:0,documents:[]}}),[b,v]=E.useState({});E.useEffect(()=>{var T,P,V;e?(f({...e,paymentDate:e.paymentDate?new Date(e.paymentDate).toISOString().split("T")[0]:"",documents:e.documents||[],contractId:((T=e.contract)==null?void 0:T._id)||"",factureId:((P=e.facture)==null?void 0:P._id)||"",accidentId:((V=e.accident)==null?void 0:V._id)||""}),u([])):(f({paymentNumber:"",paymentDate:new Date().toISOString().split("T")[0],paymentFor:"",clientId:"",clientName:"",contractId:"",factureId:"",accidentId:"",remainingAmount:0,paymentType:"",amountPaid:0,documents:[]}),u([]))},[e]);const D=(T,P)=>{let V={...b};if(T==="amountPaid"){const Q=parseFloat(P);isNaN(Q)||Q<0?V.amountPaid="Le montant payé ne peut pas être inférieur à 0.":delete V.amountPaid}v(V),f(Q=>{if(T==="clientId"){const ee=t.find(ce=>ce._id===P);return{...Q,client:ee,clientId:(ee==null?void 0:ee._id)||"",clientName:ee?`${ee.prenomFr} ${ee.nomFr}`:""}}if(T==="contractId"){const ee=n.find(ce=>ce._id===P);return{...Q,contract:ee,contractId:(ee==null?void 0:ee._id)||""}}if(T==="factureId"){const ee=r.find(ce=>ce._id===P);return{...Q,facture:ee,factureId:(ee==null?void 0:ee._id)||""}}if(T==="accidentId"){const ee=s.find(ce=>ce._id===P);return{...Q,accident:ee,accidentId:(ee==null?void 0:ee._id)||""}}return{...Q,[T]:P}})},p=T=>{u(T),f(P=>{var V;return{...P,documents:[...((V=P==null?void 0:P.documents)==null?void 0:V.filter(Q=>!Q.isNew))||[],...T.map(Q=>({name:Q.name,type:Q.type,size:Q.size,url:URL.createObjectURL(Q),isNew:!0}))]}})},y=async T=>{T.isNew?(u(P=>P.filter(V=>URL.createObjectURL(V)!==T.url)),f(P=>{var V;return{...P,documents:((V=P==null?void 0:P.documents)==null?void 0:V.filter(Q=>Q.url!==T.url))||[]}})):(await m(T),f(P=>{var V;return{...P,documents:((V=P==null?void 0:P.documents)==null?void 0:V.filter(Q=>Q.url!==T.url))||[]}}))},w=async T=>{T.preventDefault();const P={};if(h.amountPaid!==void 0&&h.amountPaid<0&&(P.amountPaid="Le montant payé ne peut pas être inférieur à 0."),v(P),Object.keys(P).length>0){le.error("Veuillez corriger les erreurs de validation.");return}await i(h,c)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:e?"Modifier Réglement":"Nouveau Réglement"}),a.jsx("button",{onClick:o,children:a.jsx(kr,{size:24})})]}),a.jsxs("form",{onSubmit:w,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations du Réglement"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l?a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"N° Réglement"}),a.jsx("input",{type:"text",id:"paymentNumber",name:"paymentNumber",value:h.paymentNumber||"",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",readOnly:!0})]}):null,a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Réglement"}),a.jsx(Me,{id:"paymentDate",selected:h.paymentDate?new Date(h.paymentDate):null,onChange:T=>D("paymentDate",T?T.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholderText:"Sélectionner une date",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentFor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Régler pour"}),a.jsxs("select",{id:"paymentFor",name:"paymentFor",value:h.paymentFor||"",onChange:T=>D("paymentFor",T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner le type"}),a.jsx("option",{value:"contract",children:"Contrat"}),a.jsx("option",{value:"facture",children:"Facture"}),a.jsx("option",{value:"accident",children:"Accident"})]})]}),h.paymentFor==="contract"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"contractId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrat"}),a.jsxs("select",{id:"contractId",name:"contractId",value:((S=h.contract)==null?void 0:S._id)||h.contractId||"",onChange:T=>D("contractId",T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un contrat"}),n.map(T=>a.jsxs("option",{value:T._id,children:[T.contractNumber," - ",T.client?`${T.client.prenomFr} ${T.client.nomFr}`:"N/A"]},T._id))]})]}),h.paymentFor==="facture"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"factureId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Facture"}),a.jsxs("select",{id:"factureId",name:"factureId",value:((j=h.facture)==null?void 0:j._id)||h.factureId||"",onChange:T=>D("factureId",T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner une facture"}),r.map(T=>a.jsxs("option",{value:T._id,children:[T.invoiceNumber," - ",T.totalTTC.toLocaleString("fr-FR")," DH"]},T._id))]})]}),h.paymentFor==="accident"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"accidentId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Accident"}),a.jsxs("select",{id:"accidentId",name:"accidentId",value:((F=h.accident)==null?void 0:F._id)||h.accidentId||"",onChange:T=>D("accidentId",T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un accident"}),s.map(T=>a.jsxs("option",{value:T._id,children:[T.numeroContrat," - ",T.clientNom," - ",new Date(T.dateAccident).toLocaleDateString("fr-FR")]},T._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),a.jsxs("select",{id:"clientId",name:"clientId",value:((C=h.client)==null?void 0:C._id)||h.clientId||"",onChange:T=>D("clientId",T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),t.filter(T=>T.status==="Actif").map(T=>a.jsx("option",{value:T._id,children:`${T.prenomFr} ${T.nomFr}`},T._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"amountPaid",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant Payé"}),a.jsx("input",{type:"number",id:"amountPaid",name:"amountPaid",value:h.amountPaid||0,onChange:T=>D("amountPaid",parseFloat(T.target.value)),className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none ${b.amountPaid?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"} sm:text-sm`,required:!0}),b.amountPaid&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:b.amountPaid})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"remainingAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant Restant"}),a.jsx("input",{type:"number",id:"remainingAmount",name:"remainingAmount",value:h.remainingAmount||0,onChange:T=>D("remainingAmount",parseFloat(T.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Paiement"}),a.jsxs("select",{id:"paymentType",name:"paymentType",value:h.paymentType||"",onChange:T=>D("paymentType",T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner le type"}),a.jsx("option",{value:"espèce",children:"Espèce"}),a.jsx("option",{value:"chèque",children:"Chèque"}),a.jsx("option",{value:"carte bancaire",children:"Carte Bancaire"}),a.jsx("option",{value:"virement",children:"Virement"})]})]})]})]}),a.jsx(mt,{api_url:"http://localhost:5000",existingDocuments:h.documents||[],newFiles:c,onNewFilesChange:p,onRemoveExistingDocument:y,label:"Documents Associés",multiple:!0}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:o,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-3 py-1 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:e?"Mettre à jour":"Ajouter"})]})]})]})})};kn("fr",Sn);const vv=()=>{var d,g,N,k;const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState([]),[o,l]=E.useState([]),[c,u]=E.useState([]),[m,h]=E.useState(!0),[f,b]=E.useState(null),[v,D]=E.useState(""),[p,y]=E.useState(null),[w,S]=E.useState(!1),[j,F]=E.useState(!1),[C,T]=E.useState(null),[P,V]=E.useState([]),Q="http://localhost:5000",ee=`${Q}/api/clientpayments`,ce="http://localhost:5000/api/customers",fe="http://localhost:5000/api/contracts",G="http://localhost:5000/api/factures",re="http://localhost:5000/api/accidents",$=E.useCallback(async()=>{h(!0),b(null);try{const x=await we.get(ee);t(x.data)}catch(x){console.error("Error fetching payments:",x),b("Failed to load payments. Please ensure the backend is running and the endpoint is correct."),le.error("Failed to load payments."),t([])}finally{h(!1)}},[]),H=E.useCallback(async()=>{try{const x=await we.get(ce);r(x.data)}catch(x){console.error("Error fetching customers:",x),le.error("Failed to load customers.")}},[]),Y=E.useCallback(async()=>{try{const x=await we.get(fe);i(x.data)}catch(x){console.error("Error fetching contracts:",x),le.error("Failed to load contracts.")}},[]),X=E.useCallback(async()=>{try{const x=await we.get(G);l(x.data)}catch(x){console.error("Error fetching factures:",x),le.error("Failed to load factures.")}},[]),J=E.useCallback(async()=>{try{const x=await we.get(re);u(x.data)}catch(x){console.error("Error fetching accidents:",x),le.error("Failed to load accidents.")}},[]);E.useEffect(()=>{$(),H(),Y(),X(),J()},[$,H,Y,X,J]);const he=e.filter(x=>{const M=v.toLowerCase(),A=x.client?`${x.client.prenomFr} ${x.client.nomFr}`.toLowerCase():"";return x.paymentNumber.toLowerCase().includes(M)||A.includes(M)}),Se=async x=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce réglement ?"))try{await we.delete(`${ee}/${x}`),t(e.filter(M=>M._id!==x)),y(null),le.success("Payment deleted successfully.")}catch(M){console.error("Error deleting payment:",M),le.error("Failed to delete payment.")}},se=x=>{y(x);const M=(x.documents||[]).map(A=>({name:A.name,url:A.url,type:A.type,size:A.size,isNew:!1}));T({...x,documents:M}),F(!0),S(!1),V([])},I=()=>{y(null),T(null),F(!1),S(!0),V([])},q=async(x,M)=>{var R;const A=new FormData;for(const B in x)if(Object.prototype.hasOwnProperty.call(x,B)){const W=x[B];B==="client"&&typeof W=="object"&&W!==null&&"_id"in W&&typeof W._id=="string"?A.append("client",W._id):B==="contract"&&typeof W=="object"&&W!==null&&"_id"in W&&typeof W._id=="string"?A.append("contract",W._id):B==="facture"&&typeof W=="object"&&W!==null&&"_id"in W&&typeof W._id=="string"?A.append("facture",W._id):B==="accident"&&typeof W=="object"&&W!==null&&"_id"in W&&typeof W._id=="string"?A.append("accident",W._id):B!=="_id"&&B!=="createdAt"&&B!=="updatedAt"&&B!=="documents"&&W!==null&&W!==void 0&&A.append(B,W)}const L=((R=x.documents)==null?void 0:R.filter(B=>!B.isNew))||[];A.append("existingDocuments",JSON.stringify(L)),M.length>0&&M.forEach(B=>{A.append("documents",B)});try{let B;if(p&&p._id){B=(await we.put(`${ee}/${p._id}`,A,{headers:{"Content-Type":"multipart/form-data"}})).data;const K={...B,client:n.find(U=>U._id===B.client)||B.client,contract:B.contract,facture:B.facture,accident:B.accident};t(e.map(U=>U._id===K._id?K:U)),y(K),le.success("Payment updated successfully.")}else{B=(await we.post(ee,A,{headers:{"Content-Type":"multipart/form-data"}})).data;const K={...B,client:n.find(U=>U._id===B.client)||B.client,contract:B.contract,facture:B.facture,accident:B.accident};t([...e,K]),y(K),le.success("Payment created successfully.")}S(!1),F(!1),T(null),V([])}catch(B){console.error(`Error ${p?"updating":"creating"} payment:`,B),le.error(`Failed to ${p?"update":"create"} payment.`)}},_=(x,M)=>{T(A=>{if(!A)return null;if(x==="clientId"){const L=n.find(R=>R._id===M);return{...A,client:L,clientId:(L==null?void 0:L._id)||"",clientName:L?`${L.prenomFr} ${L.nomFr}`:""}}if(x==="contractId"){const L=s.find(R=>R._id===M);return{...A,contract:L,contractId:(L==null?void 0:L._id)||""}}if(x==="factureId"){const L=o.find(R=>R._id===M);return{...A,facture:L,factureId:(L==null?void 0:L._id)||""}}if(x==="accidentId"){const L=c.find(R=>R._id===M);return{...A,accident:L,accidentId:(L==null?void 0:L._id)||""}}return{...A,[x]:M}})},O=async x=>{if(p){if(x.isNew){V(M=>M.filter(A=>URL.createObjectURL(A)!==x.url)),T(M=>{var A;return{...M,documents:((A=M==null?void 0:M.documents)==null?void 0:A.filter(L=>L.url!==x.url))||[]}}),le.success("Document supprimé (localement). Enregistrez pour confirmer.");return}try{await we.delete(`${ee}/${p._id}/documents`,{data:{documentUrl:x.url}}),y(M=>{var A;return M?{...M,documents:(A=M.documents)==null?void 0:A.filter(L=>L.url!==x.url)}:null}),T(M=>{var A;return{...M,documents:((A=M==null?void 0:M.documents)==null?void 0:A.filter(L=>L.url!==x.url))||[]}}),le.success("Document supprimé avec succès.")}catch(M){console.error("Erreur lors de la suppression du document:",M),le.error("Échec de la suppression du document.")}}};return m?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{children:"Loading..."})}):f?a.jsx("div",{className:"flex justify-center items-center h-screen text-red-500",children:a.jsx("p",{children:f})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Liste des Réglements"}),a.jsxs("button",{onClick:I,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Nouveau Réglement"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Rechercher un réglement...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:v,onChange:x=>{j?confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")&&(D(x.target.value),F(!1),T(null),V([])):D(x.target.value)}})]})}),a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N° Réglement"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Réglé pour"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:he.map(x=>a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(p==null?void 0:p._id)===x._id?"bg-blue-50":""}`,onClick:()=>y(x),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx(Bf,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsx("div",{className:"ml-4",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.paymentNumber})})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${x.paymentFor==="contract"?"bg-blue-100 text-blue-800":x.paymentFor==="facture"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.paymentFor==="contract"?"Contrat":x.paymentFor==="facture"?"Facture":"Accident"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:x.client?`${x.client.prenomFr} ${x.client.nomFr}`:"N/A"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm text-gray-900",children:[x.amountPaid.toLocaleString("fr-FR")," DH"]}),x.remainingAmount>0&&a.jsxs("div",{className:"text-xs text-amber-600",children:["Reste: ",x.remainingAmount.toLocaleString("fr-FR")," DH"]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:new Date(x.paymentDate).toLocaleDateString("fr-FR")})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(tn,{onClick:M=>{M.stopPropagation(),se(x)},size:"md",className:"mr-3"}),a.jsx("button",{onClick:M=>{M.stopPropagation(),Se(x._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Ln,{size:18})})]})]},x._id))})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:p?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails du réglement"}),j?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{confirm("Êtes-vous sûr de vouloir annuler les modifications ?")&&(F(!1),T(null),y(null),V([]))},className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:()=>{C&&q(C,P)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:()=>se(p),className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"}),a.jsx("button",{onClick:()=>y(null),className:"p-2",children:a.jsx(kr,{size:20})})]}),a.jsx("div",{className:"p-4",children:j&&C?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"N° Réglement"}),a.jsx("input",{type:"text",id:"paymentNumber",name:"paymentNumber",value:C.paymentNumber||"",onChange:x=>_("paymentNumber",x.target.value),className:"mt-1 block w-full border rounded-lg p-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Réglement"}),a.jsx(Me,{id:"paymentDate",selected:C.paymentDate?new Date(C.paymentDate):null,onChange:x=>_("paymentDate",x?x.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 block w-full border rounded-lg p-2",placeholderText:"Sélectionner une date",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentFor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Régler pour"}),a.jsxs("select",{id:"paymentFor",name:"paymentFor",value:C.paymentFor||"",onChange:x=>_("paymentFor",x.target.value),className:"mt-1 block w-full border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner le type"}),a.jsx("option",{value:"contract",children:"Contrat"}),a.jsx("option",{value:"facture",children:"Facture"}),a.jsx("option",{value:"accident",children:"Accident"})]})]}),C.paymentFor==="contract"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"contractId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrat"}),a.jsxs("select",{id:"contractId",name:"contractId",value:((d=C.contract)==null?void 0:d._id)||"",onChange:x=>_("contractId",x.target.value),className:"mt-1 block w-full border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un contrat"}),s.map(x=>a.jsxs("option",{value:x._id,children:[x.contractNumber," - ",x.client?`${x.client.prenomFr} ${x.client.nomFr}`:"N/A"]},x._id))]})]}),C.paymentFor==="facture"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"factureId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Facture"}),a.jsxs("select",{id:"factureId",name:"factureId",value:((g=C.facture)==null?void 0:g._id)||"",onChange:x=>_("factureId",x.target.value),className:"mt-1 block w-full border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner une facture"}),o.map(x=>a.jsxs("option",{value:x._id,children:[x.totalTTC," DH - ",x.client?`${x.client.prenomFr} ${x.client.nomFr}`:"N/A"]},x._id))]})]}),C.paymentFor==="accident"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"accidentId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Accident"}),a.jsxs("select",{id:"accidentId",name:"accidentId",value:((N=C.accident)==null?void 0:N._id)||"",onChange:x=>_("accidentId",x.target.value),className:"mt-1 block w-full border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un accident"}),c.map(x=>a.jsxs("option",{value:x._id,children:[x.numeroContrat," - ",x.clientNom," - ",new Date(x.dateAccident).toLocaleDateString("fr-FR")]},x._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),a.jsxs("select",{id:"clientId",name:"clientId",value:((k=C.client)==null?void 0:k._id)||"",onChange:x=>_("clientId",x.target.value),className:"mt-1 block w-full border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),n.filter(x=>x.status==="Actif").map(x=>a.jsx("option",{value:x._id,children:`${x.prenomFr} ${x.nomFr}`},x._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"amountPaid",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant Payé"}),a.jsx("input",{type:"number",id:"amountPaid",name:"amountPaid",value:C.amountPaid||0,onChange:x=>_("amountPaid",parseFloat(x.target.value)),className:"mt-1 block w-full border rounded-lg p-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"remainingAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant Restant"}),a.jsx("input",{type:"number",id:"remainingAmount",name:"remainingAmount",value:C.remainingAmount||0,onChange:x=>_("remainingAmount",parseFloat(x.target.value)),className:"mt-1 block w-full border rounded-lg p-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Paiement"}),a.jsxs("select",{id:"paymentType",name:"paymentType",value:C.paymentType||"",onChange:x=>_("paymentType",x.target.value),className:"mt-1 block w-full border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner le type"}),a.jsx("option",{value:"espèce",children:"Espèce"}),a.jsx("option",{value:"chèque",children:"Chèque"}),a.jsx("option",{value:"carte bancaire",children:"Carte Bancaire"}),a.jsx("option",{value:"virement",children:"Virement"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"text-lg font-medium mb-2",children:"Documents Associés:"}),a.jsx(mt,{api_url:Q,existingDocuments:C.documents||[],newFiles:P,onNewFilesChange:V,onRemoveExistingDocument:O,label:"",multiple:!0})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:"N° Réglement"}),a.jsx("p",{children:p.paymentNumber})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:"Date de Réglement"}),a.jsx("p",{children:new Date(p.paymentDate).toLocaleDateString("fr-FR")})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:"Régler pour"}),a.jsx("p",{children:p.paymentFor})]}),p.paymentFor==="contract"&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:"Contrat"}),a.jsx("p",{children:p.contract?`${p.contract.contractNumber} - ${p.contract.client?`${p.contract.client.prenomFr} ${p.contract.client.nomFr}`:"N/A"}`:"N/A"})]}),p.paymentFor==="facture"&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:"Facture"}),a.jsx("p",{children:p.facture?`${p.facture.totalTTC} DH - ${p.facture.client?`${p.facture.client.prenomFr} ${p.facture.client.nomFr}`:"N/A"}`:"N/A"})]}),p.paymentFor==="accident"&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:"Accident"}),a.jsx("p",{children:p.accident?`${p.accident.numeroContrat} - ${p.accident.clientNom} - ${new Date(p.accident.dateAccident).toLocaleDateString("fr-FR")}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:"Client"}),a.jsx("p",{children:p.client?`${p.client.prenomFr} ${p.client.nomFr}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:"Montant Payé"}),a.jsxs("p",{children:[p.amountPaid.toLocaleString("fr-FR")," DH"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:"Montant Restant"}),a.jsxs("p",{children:[p.remainingAmount.toLocaleString("fr-FR")," DH"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:"Type de Paiement"}),a.jsx("p",{children:p.paymentType})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"text-lg font-medium mb-2",children:"Documents Associés:"}),p!=null&&p.documents&&p.documents.length>0?a.jsx(mt,{api_url:Q,existingDocuments:p.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:O,label:"",readOnly:!0,multiple:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]})]})})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(Bf,{size:64,className:"mx-auto mb-4 text-gray-300"}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucun réglement sélectionné"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Sélectionnez un réglement pour voir ses détails ou créez-en un nouveau."})]})})]}),w&&a.jsx(sL,{initialData:j?p:null,customers:n,contracts:s,factures:o,accidents:c,onSubmit:q,onClose:()=>S(!1),isEditMode:j,newAttachmentFiles:P,setNewAttachmentFiles:V,handleRemoveAttachment:O})]})};kn("fr",Sn);const fo=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},yv=e=>typeof e=="string"&&e.trim().length===0,Ya="http://localhost:5000",aL=()=>{var fe,G,re;const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,l]=E.useState(null),[c,u]=E.useState(""),[m,h]=E.useState(!1),[f,b]=E.useState(null),[v,D]=E.useState(!1),[p,y]=E.useState(null),[w,S]=E.useState([]),j=`${Ya}/api/vehicleinspections`,F=`${Ya}/api/vehicles`,C=E.useCallback(async()=>{i(!0),l(null);try{const[$,H]=await Promise.all([we.get(j),we.get(F)]),Y=$.data.map(X=>{const J=H.data.find(he=>he._id===X.vehicle);return{...X,vehicle:J||X.vehicle}});t(Y),r(H.data)}catch($){console.error("Error fetching data:",$),l("Failed to load data."),le.error("Failed to load data.")}finally{i(!1)}},[]);E.useEffect(()=>{C()},[C]);const T=e.filter($=>{const H=c.toLowerCase(),Y=typeof $.vehicle=="object"&&$.vehicle&&$.vehicle.licensePlate?$.vehicle.licensePlate:"";return $.center&&$.center.toLowerCase().includes(H)||$.controlId&&$.controlId.toLowerCase().includes(H)||Y.toLowerCase().includes(H)}),P=$=>{if(v&&(f==null?void 0:f._id)!==$._id){if(confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")){const H=typeof $.vehicle=="object"&&$.vehicle?$.vehicle._id:$.vehicle,Y=n.find(J=>J._id===H),X=($.documents||[]).map(J=>({name:J.name,url:J.url,type:J.type,size:J.size,isNew:!1}));b({...$,vehicle:Y||$.vehicle,documents:X}),D(!1),y(null),S([])}}else if(!v){const H=typeof $.vehicle=="object"&&$.vehicle?$.vehicle._id:$.vehicle,Y=n.find(J=>J._id===H),X=($.documents||[]).map(J=>({name:J.name,url:J.url,type:J.type,size:J.size,isNew:!1}));b({...$,vehicle:Y||$.vehicle,documents:X})}},V=async $=>{const H=new FormData;for(const Y in $)if(Object.prototype.hasOwnProperty.call($,Y)){const X=$[Y];Y==="vehicle"&&X?H.append("vehicle",typeof X=="string"?X:X._id):Y!=="_id"&&Y!=="documents"&&Y!=="attachments"&&Y!=="vehicle"&&X!==null&&X!==void 0&&H.append(Y,X)}w.length>0&&w.forEach(Y=>{H.append("documents",Y)});try{const X=(await we.post(j,H,{headers:{"Content-Type":"multipart/form-data"}})).data,J=n.find(Se=>Se._id===X.vehicle),he={...X,vehicle:J||X.vehicle};t([...e,he]),b(he),h(!1),le.success("Inspection added successfully."),S([])}catch(Y){console.error("Error adding inspection:",Y),le.error("Failed to add inspection.")}},Q=async $=>{var he;const H=$._id||(f?f._id:null);if(!H||!p){le.error("No inspection ID or edited inspection data found for update.");return}const Y=[{name:"Centre",value:p.center,required:!0},{name:"ID de contrôle",value:p.controlId,required:!1},{name:"Numéro d'autorisation",value:p.authorizationNumber,required:!1},{name:"Contact du centre",value:p.centerContact,required:!1},{name:"Nom de l'inspecteur",value:p.inspectorName,required:!0},{name:"Résultats",value:p.results,required:!0},{name:"Observation",value:p.observation,required:!1}];for(const Se of Y){if(Se.required&&yv(Se.value)){le.error(`${Se.name} ne peut pas être vide ou contenir uniquement des espaces.`);return}if(!Se.required&&Se.value&&yv(Se.value)){le.error(`${Se.name} ne peut pas contenir uniquement des espaces.`);return}}if(p.duration!==void 0&&p.duration<1){le.error("Durée (mois) ne peut pas être inférieure à 1.");return}if(p.price!==void 0&&p.price<1){le.error("Prix (DH) ne peut pas être inférieur à 1.");return}const X=new FormData;for(const Se in $)if(Object.prototype.hasOwnProperty.call($,Se)){const se=$[Se];Se==="vehicle"&&se?X.append("vehicle",typeof se=="string"?se:se._id):Se!=="_id"&&Se!=="documents"&&Se!=="attachments"&&Se!=="vehicle"&&se!==null&&se!==void 0&&X.append(Se,se)}const J=((he=p.documents)==null?void 0:he.filter(Se=>!Se.isNew))||[];X.append("existingDocuments",JSON.stringify(J)),w.length>0&&w.forEach(Se=>{X.append("documents",Se)});try{const se=(await we.put(`${j}/${H}`,X,{headers:{"Content-Type":"multipart/form-data"}})).data,I=n.find(_=>_._id===se.vehicle),q={...se,vehicle:I||se.vehicle};t(e.map(_=>_._id===q._id?q:_)),b(q),h(!1),D(!1),y(null),le.success("Inspection updated successfully."),S([])}catch(Se){console.error("Error updating inspection:",Se),le.error("Failed to update inspection.")}},ee=async $=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette visite technique ?"))try{await we.delete(`${j}/${$}`),t(e.filter(H=>H._id!==$)),b(null),le.success("Inspection deleted successfully.")}catch(H){console.error("Error deleting inspection:",H),le.error("Failed to delete inspection.")}},ce=async $=>{if(f)try{await we.delete(`${j}/${f._id}/documents`,{data:{documentUrl:$.url}}),b(H=>{var Y;return H?{...H,documents:(Y=H.documents)==null?void 0:Y.filter(X=>X.url!==$.url)}:null}),le.success("Document supprimé avec succès.")}catch(H){console.error("Erreur lors de la suppression du document:",H),le.error("Échec de la suppression du document.")}};return s?a.jsx("p",{children:"Loading..."}):o?a.jsx("p",{children:o}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Visites Techniques"}),a.jsxs("button",{onClick:()=>{b(null),h(!0),S([])},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Ajouter une Visite"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Rechercher une visite technique...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:c,onChange:$=>{v?confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")&&(u($.target.value),D(!1),y(null),S([])):u($.target.value)}})]})}),a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Centre"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map($=>{var H;return a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(f==null?void 0:f._id)===$._id?v?"bg-blue-100":"bg-blue-50":""}`,onClick:()=>P($),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"md:block overflow-x-auto md:overflow-visible",children:a.jsxs("div",{className:"flex items-center min-w-[220px] md:min-w-0",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx(pt,{size:20,className:"text-gray-500"})}),a.jsxs("div",{className:"ml-4 flex-shrink-0",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:typeof $.vehicle=="object"&&$.vehicle?$.vehicle.model:"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:typeof $.vehicle=="object"&&$.vehicle?$.vehicle.licensePlate:"N/A"})]})]})})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm text-gray-900",children:$.center}),a.jsx("div",{className:"text-sm text-gray-500",children:$.controlId})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:fo($.inspectionDate)}),a.jsx("div",{className:"text-sm text-gray-500",children:fo($.endDate)})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600",children:[((H=$.price)==null?void 0:H.toLocaleString("fr-FR"))||"N/A"," DH"]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(tn,{onClick:Y=>{Y.stopPropagation(),b($);const X=($.documents||[]).map(J=>({name:J.name,url:J.url,type:J.type,size:J.size,isNew:!1}));y({...$,documents:X}),S([]),D(!0)},size:"md",className:"mr-3"}),a.jsx("button",{onClick:Y=>{Y.stopPropagation(),ee($._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Ln,{size:18})})]})]},$._id)})})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:f?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de la visite"}),v?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{confirm("Êtes-vous sûr de vouloir annuler les modifications ?")&&(D(!1),y(null),S([]))},className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:()=>{p&&Q(p)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx(tn,{onClick:()=>{const $=(f.documents||[]).map(H=>({name:H.name,url:H.url,type:H.type,size:H.size,isNew:!1}));y({...f,documents:$}),S([]),D(!0)},withText:!0,className:"mr-2"}),a.jsx(Sr,{onClick:()=>b(null)})]}),a.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto max-h-[calc(100vh-150px)]",children:[typeof f.vehicle=="object"&&f.vehicle&&a.jsx("div",{className:"mb-6 relative",children:f.vehicle.imageUrl?a.jsx("div",{className:"relative",children:a.jsx("img",{src:(fe=f.vehicle.imageUrl)!=null&&fe.startsWith("data:")?f.vehicle.imageUrl:`${Ya}/${(G=f.vehicle.imageUrl)==null?void 0:G.replace(/\\/g,"/")}`,alt:`${f.vehicle.brand} ${f.vehicle.model}`,className:"w-full h-48 object-cover rounded-lg"})}):a.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:a.jsx(pt,{size:48,className:"text-gray-400"})})}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informations Générales"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Véhicule"}),v&&p?a.jsxs("select",{name:"vehicle",onChange:$=>{const H=$.target.value;y(Y=>Y?{...Y,vehicle:H}:null)},value:p!=null&&p.vehicle?typeof p.vehicle=="object"?p.vehicle._id:p.vehicle:"",className:"mt-1 w-full border rounded-lg p-2",children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),n.map($=>a.jsxs("option",{value:$._id,children:[$.licensePlate," - ",$.model]},$._id))]}):a.jsx("p",{className:"mt-1 font-medium",children:typeof f.vehicle=="object"&&f.vehicle?`${f.vehicle.model} (${f.vehicle.licensePlate})`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Centre"}),v&&p?a.jsx("input",{type:"text",name:"center",value:p.center||"",onChange:$=>y(H=>H?{...H,center:$.target.value}:null),className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:f.center||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"ID de contrôle"}),v&&p?a.jsx("input",{type:"text",name:"controlId",value:p.controlId||"",onChange:$=>y(H=>H?{...H,controlId:$.target.value}:null),className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:f.controlId||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Numéro d'autorisation"}),v&&p?a.jsx("input",{type:"text",name:"authorizationNumber",value:p.authorizationNumber||"",onChange:$=>y(H=>H?{...H,authorizationNumber:$.target.value}:null),className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:f.authorizationNumber||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date d'inspection"}),v&&p?a.jsx(Me,{selected:p.inspectionDate?new Date(p.inspectionDate):null,onChange:$=>y(H=>H?{...H,inspectionDate:$?$.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:fo(f.inspectionDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Durée"}),v&&p?a.jsx("input",{type:"number",name:"duration",value:p.duration||0,onChange:$=>y(H=>H?{...H,duration:Number($.target.value)}:null),className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:f.duration?`${f.duration} mois`:"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date de fin"}),v&&p?a.jsx(Me,{selected:p.endDate?new Date(p.endDate):null,onChange:$=>y(H=>H?{...H,endDate:$?$.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:fo(f.endDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Prix"}),v&&p?a.jsx("input",{type:"number",name:"price",value:p.price||0,onChange:$=>y(H=>H?{...H,price:Number($.target.value)}:null),className:"mt-1 w-full border rounded-lg p-2"}):a.jsxs("p",{className:"mt-1 font-medium",children:[((re=f.price)==null?void 0:re.toLocaleString("fr-FR"))||"N/A"," DH"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Contact du centre"}),v&&p?a.jsx("input",{type:"text",name:"centerContact",value:p.centerContact||"",onChange:$=>y(H=>H?{...H,centerContact:$.target.value}:null),className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:f.centerContact||"-"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Détails de l'inspection"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Nom de l'inspecteur"}),v&&p?a.jsx("input",{type:"text",name:"inspectorName",value:p.inspectorName||"",onChange:$=>y(H=>H?{...H,inspectorName:$.target.value}:null),className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:f.inspectorName||"-"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Résultats"}),v&&p?a.jsx("textarea",{name:"results",value:p.results||"",onChange:$=>y(H=>H?{...H,results:$.target.value}:null),rows:3,className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:f.results||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Prochaine date d'inspection"}),v&&p?a.jsx(Me,{selected:p.nextInspectionDate?new Date(p.nextInspectionDate):null,onChange:$=>y(H=>H?{...H,nextInspectionDate:$?$.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:fo(f.nextInspectionDate)||"-"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Observation"}),v&&p?a.jsx("textarea",{name:"observation",value:p.observation||"",onChange:$=>y(H=>H?{...H,observation:$.target.value}:null),rows:3,className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:f.observation||"-"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Documents Associés"}),v&&p?a.jsx(mt,{api_url:Ya,existingDocuments:p.documents||[],newFiles:w,onNewFilesChange:S,onRemoveExistingDocument:ce}):f!=null&&f.documents&&f.documents.length>0?a.jsx(mt,{api_url:Ya,existingDocuments:f.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:ce,label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]})]})]}):a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-center h-full py-10",children:[a.jsx(pt,{size:64,className:"text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucune visite technique sélectionnée"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Sélectionnez une visite technique pour voir ses détails"}),a.jsxs("button",{onClick:()=>{b(null),h(!0),S([])},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Ajouter une Visite"]})]})})})]}),m&&a.jsx(iL,{onSubmit:V,onClose:()=>h(!1),initialData:null,vehicles:n,selectedInspection:f,setSelectedInspection:b,setEditedInspection:y,newAttachmentFiles:w,setNewAttachmentFiles:S,API_URL_INSPECTIONS:j,API_URL:Ya,handleRemoveExistingDocument:ce})]})},iL=({onSubmit:e,onClose:t,initialData:n,vehicles:r,selectedInspection:s,setSelectedInspection:i,setEditedInspection:o,newAttachmentFiles:l,setNewAttachmentFiles:c,API_URL_INSPECTIONS:u,API_URL:m,handleRemoveExistingDocument:h})=>{const[f,b]=E.useState(()=>{if(n){const j=typeof n.vehicle=="object"&&n.vehicle!==null?n.vehicle._id:n.vehicle;return{...n,inspectionDate:n.inspectionDate?new Date(n.inspectionDate).toISOString().split("T")[0]:"",endDate:n.endDate?new Date(n.endDate).toISOString().split("T")[0]:"",nextInspectionDate:n.nextInspectionDate?new Date(n.nextInspectionDate).toISOString().split("T")[0]:"",vehicle:j,documents:n.documents||[],duration:n.duration&&n.duration>=1?n.duration:1,price:n.price&&n.price>=1?n.price:1}}return{center:"",controlId:"",authorizationNumber:"",inspectionDate:new Date().toISOString().split("T")[0],duration:1,endDate:"",price:1,centerContact:"",observation:"",vehicle:void 0,inspectorName:"",results:"",nextInspectionDate:"",documents:[]}}),[v,D]=E.useState({});E.useEffect(()=>{if(f.inspectionDate&&f.duration&&f.duration>=1){const j=new Date(f.inspectionDate);j.setMonth(j.getMonth()+f.duration),b(F=>({...F,endDate:j.toISOString().split("T")[0]}))}else f.duration&&f.duration<1&&b(j=>({...j,endDate:""}))},[f.inspectionDate,f.duration]);const p=j=>{const{name:F,value:C}=j.target;if(["center","controlId","authorizationNumber","centerContact","inspectorName","results","observation"].includes(F))C.trim()===""&&(j.target.required||["center","inspectorName","results"].includes(F))?D(T=>({...T,[F]:"Ce champ ne peut pas contenir uniquement des espaces."})):C.trim()===""&&!j.target.required&&C.length>0?D(T=>({...T,[F]:"Ce champ ne peut pas contenir uniquement des espaces."})):D(T=>{const P={...T};return delete P[F],P});else if(F==="duration"||F==="price"){const T=parseFloat(C);isNaN(T)||T<1?D(P=>({...P,[F]:"La valeur ne peut pas être inférieure à 1."})):D(P=>{const V={...P};return delete V[F],V})}b(T=>F==="duration"||F==="price"?{...T,[F]:parseFloat(C)||0}:{...T,[F]:C})},y=(j,F)=>{b(C=>({...C,[F]:j?j.toISOString().split("T")[0]:""}))},w=async j=>{if(s){if(j.isNew){b(F=>{var C;return{...F,documents:(C=F.documents)==null?void 0:C.filter(T=>T.url!==j.url)}}),c(F=>F.filter(C=>URL.createObjectURL(C)!==j.url));return}await h(j)}},S=j=>{var C,T,P;j.preventDefault();const F={};if(((C=f.center)==null?void 0:C.trim())===""&&(F.center="Le centre ne peut pas être vide."),f.controlId&&f.controlId.trim()===""&&(F.controlId="L'ID de contrôle ne peut pas être vide."),f.authorizationNumber&&f.authorizationNumber.trim()===""&&(F.authorizationNumber="Le numéro d'autorisation ne peut pas être vide."),f.centerContact&&f.centerContact.trim()===""&&(F.centerContact="Le contact du centre ne peut pas être vide."),((T=f.inspectorName)==null?void 0:T.trim())===""&&(F.inspectorName="Le nom de l'inspecteur ne peut pas être vide."),((P=f.results)==null?void 0:P.trim())===""&&(F.results="Les résultats ne peuvent pas être vides."),f.observation&&f.observation.trim()===""&&(F.observation="L'observation ne peut pas être vide."),f.duration!==void 0&&f.duration<1&&(F.duration="La durée ne peut pas être inférieure à 1."),f.price!==void 0&&f.price<1&&(F.price="Le prix ne peut pas être inférieur à 1."),D(F),Object.keys(F).length>0){le.error("Veuillez corriger les erreurs de validation.");return}e({...f,vehicle:f.vehicle})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sr,{onClick:t}),a.jsxs("h2",{className:"text-xl font-bold mb-4",children:[n?"Modifier":"Nouvelle"," Visite"]}),a.jsxs("form",{onSubmit:S,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations Générales"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",onChange:p,value:f.vehicle||"",className:"w-full border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),r.map(j=>a.jsxs("option",{value:j._id,children:[j.licensePlate," - ",j.model]},j._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"center",className:"block text-sm font-medium text-gray-700 mb-1",children:"Centre"}),a.jsx("input",{type:"text",id:"center",name:"center",value:f.center||"",onChange:p,placeholder:"Nom du centre",className:`w-full border rounded-lg p-2 ${v.center?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),v.center&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.center})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"controlId",className:"block text-sm font-medium text-gray-700 mb-1",children:"ID de contrôle"}),a.jsx("input",{type:"text",id:"controlId",name:"controlId",value:f.controlId||"",onChange:p,placeholder:"ID de contrôle",className:`w-full border rounded-lg p-2 ${v.controlId?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.controlId&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.controlId})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"authorizationNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro d'autorisation"}),a.jsx("input",{type:"text",id:"authorizationNumber",name:"authorizationNumber",value:f.authorizationNumber||"",onChange:p,placeholder:"Numéro d'autorisation",className:`w-full border rounded-lg p-2 ${v.authorizationNumber?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.authorizationNumber&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.authorizationNumber})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"inspectionDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d'inspection"}),a.jsx(Me,{id:"inspectionDate",selected:f.inspectionDate?new Date(f.inspectionDate):null,onChange:j=>y(j,"inspectionDate"),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Durée (mois)"}),a.jsx("input",{type:"number",id:"duration",name:"duration",value:f.duration||0,onChange:p,placeholder:"Durée en mois",className:`w-full border rounded-lg p-2 ${v.duration?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.duration&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.duration})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de fin"}),a.jsx("input",{type:"date",id:"endDate",name:"endDate",value:f.endDate||"",onChange:p,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-gray-100",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (DH)"}),a.jsx("input",{type:"number",id:"price",name:"price",value:f.price||0,onChange:p,placeholder:"Prix",className:`w-full border rounded-lg p-2 ${v.price?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.price&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.price})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"centerContact",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact du centre"}),a.jsx("input",{type:"text",id:"centerContact",name:"centerContact",value:f.centerContact||"",onChange:p,placeholder:"Contact du centre",className:`w-full border rounded-lg p-2 ${v.centerContact?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.centerContact&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.centerContact})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Détails de l'inspection"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"inspectorName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'inspecteur"}),a.jsx("input",{type:"text",id:"inspectorName",name:"inspectorName",value:f.inspectorName||"",onChange:p,placeholder:"Nom de l'inspecteur",className:`w-full border rounded-lg p-2 ${v.inspectorName?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),v.inspectorName&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.inspectorName})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"results",className:"block text-sm font-medium text-gray-700 mb-1",children:"Résultats"}),a.jsx("textarea",{id:"results",name:"results",value:f.results||"",onChange:p,placeholder:"Résultats de l'inspection",rows:3,className:`w-full border rounded-lg p-2 ${v.results?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),v.results&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.results})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"nextInspectionDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prochaine date d'inspection"}),a.jsx(Me,{id:"nextInspectionDate",selected:f.nextInspectionDate?new Date(f.nextInspectionDate):null,onChange:j=>y(j,"nextInspectionDate"),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"observation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Observation"}),a.jsx("textarea",{id:"observation",name:"observation",value:f.observation||"",onChange:p,placeholder:"Observations supplémentaires",rows:3,className:`w-full border rounded-lg p-2 ${v.observation?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.observation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.observation})]})]})]}),a.jsx(mt,{api_url:m,existingDocuments:f.documents||[],newFiles:l,onNewFilesChange:c,onRemoveExistingDocument:w}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),a.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n?"Mettre à jour":"Ajouter"," Visite"]})]})]})]})})};kn("fr",Sn);const oL=e=>{var n;switch((n=e.split(".").pop())==null?void 0:n.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"webp":return"image/webp";case"pdf":return"application/pdf";default:return"application/octet-stream"}},ho=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},qa="http://localhost:5000",lL=()=>{var G,re;const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,l]=E.useState(null),[c,u]=E.useState(""),[m,h]=E.useState(!1),[f,b]=E.useState(null),[v,D]=E.useState(!1),[p,y]=E.useState(null),[w,S]=E.useState([]),j=`${qa}/api/vehicleinsurances`,F=`${qa}/api/vehicles`,C=E.useCallback(async()=>{i(!0),l(null);try{const[$,H]=await Promise.all([we.get(j),we.get(F)]),Y=$.data.map(X=>{const J=H.data.find(he=>he._id===X.vehicle);return{...X,vehicle:J||X.vehicle}});t(Y),r(H.data)}catch($){console.error("Error fetching data:",$),l("Failed to load data."),le.error("Failed to load data.")}finally{i(!1)}},[]);E.useEffect(()=>{C()},[C]),E.useEffect(()=>{if(f&&!v){const $=[];f.attachments&&Array.isArray(f.attachments)&&f.attachments.forEach(H=>{const Y=H.split(/-(.+)/)[1];$.push({name:Y,url:H,type:oL(Y),size:0})}),JSON.stringify(f.documents)!==JSON.stringify($)&&b(H=>({...H,documents:$}))}},[f,v]);const T=e.filter($=>{const H=c.toLowerCase(),Y=typeof $.vehicle=="object"&&$.vehicle&&$.vehicle.licensePlate?$.vehicle.licensePlate:"";return $.company.toLowerCase().includes(H)||$.policyNumber.toLowerCase().includes(H)||Y.toLowerCase().includes(H)}),P=async $=>{const H=new FormData;for(const Y in $)if(Object.prototype.hasOwnProperty.call($,Y)){const X=$[Y];Y==="vehicle"&&X?H.append("vehicle",typeof X=="string"?X:X._id):Y!=="_id"&&Y!=="documents"&&Y!=="attachments"&&Y!=="vehicle"&&X!==null&&X!==void 0&&H.append(Y,X)}w.length>0&&w.forEach(Y=>{H.append("attachments",Y)});try{const X=(await we.post(j,H,{headers:{"Content-Type":"multipart/form-data"}})).data,J=n.find(Se=>Se._id===X.vehicle),he={...X,vehicle:J||X.vehicle};t([...e,he]),h(!1),le.success("Insurance added successfully."),S([])}catch(Y){console.error("Error adding insurance:",Y),le.error("Failed to add insurance.")}},[V,Q]=E.useState(!1),ee=$=>{b(e.find(H=>H._id===$)||null),Q(!0)},ce=async()=>{if(f)try{await we.delete(`${j}/${f._id}`),t(e.filter($=>$._id!==f._id)),b(null),Q(!1),le.success("Insurance deleted successfully.")}catch($){console.error("Error deleting insurance:",$),le.error("Failed to delete insurance.")}},fe=async $=>{if(f)try{await we.delete(`${j}/${f._id}/documents`,{data:{documentName:$.name}}),b(H=>{var Y,X;return H?{...H,documents:(Y=H.documents)==null?void 0:Y.filter(J=>J.url!==$.url),attachments:(X=H.attachments)==null?void 0:X.filter(J=>J!==$.name)}:null}),le.success("Document supprimé avec succès.")}catch(H){console.error("Erreur lors de la suppression du document:",H),le.error("Échec de la suppression du document.")}};return s?a.jsx("p",{children:"Loading..."}):o?a.jsx("p",{children:o}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Assurances"}),a.jsxs("button",{onClick:()=>{b(null),h(!0),S([])},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Ajouter une Assurance"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Rechercher une assurance...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:c,onChange:$=>u($.target.value)})]})}),a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assurance"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map($=>a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(f==null?void 0:f._id)===$._id?"bg-blue-50":""}`,onClick:()=>{const H=typeof $.vehicle=="object"&&$.vehicle?$.vehicle._id:$.vehicle,Y=n.find(X=>X._id===H);b({...$,vehicle:Y||$.vehicle})},children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"md:block overflow-x-auto md:overflow-visible",children:a.jsxs("div",{className:"flex items-center min-w-[220px] md:min-w-0",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx(pt,{size:20,className:"text-gray-500"})}),a.jsx("div",{className:"ml-4 flex-shrink-0",children:typeof $.vehicle=="object"&&$.vehicle?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[$.vehicle.brand," ",$.vehicle.model]}),a.jsx("div",{className:"text-xs text-gray-500",children:$.vehicle.licensePlate})]}):a.jsx("div",{className:"text-sm text-gray-500",children:"N/A"})})]})})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm text-gray-900",children:$.company}),a.jsx("div",{className:"text-sm text-gray-500",children:$.policyNumber})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:ho($.startDate)}),a.jsx("div",{className:"text-sm text-gray-500",children:ho($.endDate)})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600",children:[$.price.toLocaleString("fr-FR")," DH"]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(tn,{onClick:H=>{H.stopPropagation(),b($),D(!0);const Y=($.attachments||[]).map(X=>({name:X.split(/-(.+)/)[1],url:X,type:"",size:0,isNew:!1}));y({...$,documents:Y}),S([])},size:"md",className:"mr-3"}),a.jsx("button",{onClick:H=>{H.stopPropagation(),ee($._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Ln,{size:18})})]})]},$._id))})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:f?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de l'assurance"}),v?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"submit",form:"insurance-edit-form",className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Sauvegarder"}),a.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"})]}):a.jsx(tn,{onClick:()=>{D(!0);const $=(f.attachments||[]).map(H=>({name:H.split(/-(.+)/)[1],url:H,type:"",size:0,isNew:!1}));y({...f,documents:$}),S([])},withText:!0,className:"mr-2"}),a.jsx(Sr,{onClick:()=>b(null)})]}),a.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto max-h-[calc(100vh-150px)]",children:[typeof f.vehicle=="object"&&f.vehicle&&a.jsx("div",{className:"mb-6 relative",children:f.vehicle.imageUrl?a.jsx("div",{className:"relative",children:a.jsx("img",{src:(G=f.vehicle.imageUrl)!=null&&G.startsWith("data:")?f.vehicle.imageUrl:`${qa}/${(re=f.vehicle.imageUrl)==null?void 0:re.replace(/\\/g,"/")}`,alt:`${f.vehicle.brand} ${f.vehicle.model}`,className:"w-full h-48 object-cover rounded-lg"})}):a.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:a.jsx(pt,{size:48,className:"text-gray-400"})})}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informations sur l'Assurance"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Véhicule"}),v&&p?a.jsxs("select",{name:"vehicle",className:"mt-1 w-full border rounded-lg p-2",value:p!=null&&p.vehicle?typeof p.vehicle=="object"?p.vehicle._id:p.vehicle:"",onChange:$=>y({...p,vehicle:$.target.value}),children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),n.map($=>a.jsxs("option",{value:$._id,children:[$.licensePlate," - ",$.model]},$._id))]}):a.jsx("p",{className:"mt-1 font-medium",children:typeof f.vehicle=="object"&&f.vehicle?`${f.vehicle.model} (${f.vehicle.licensePlate})`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Compagnie"}),v&&p?a.jsx("input",{type:"text",name:"company",className:"mt-1 w-full border rounded-lg p-2",value:p.company||"",onChange:$=>y({...p,company:$.target.value})}):a.jsx("p",{className:"mt-1 font-medium",children:f.company})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Numéro de Police"}),v&&p?a.jsx("input",{type:"text",name:"policyNumber",className:"mt-1 w-full border rounded-lg p-2",value:p.policyNumber||"",onChange:$=>y({...p,policyNumber:$.target.value})}):a.jsx("p",{className:"mt-1 font-medium",children:f.policyNumber})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date d'Opération"}),v&&p?a.jsx(Me,{selected:p.operationDate?new Date(p.operationDate):null,onChange:$=>y({...p,operationDate:$?$.toISOString().split("T")[0]:""}),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:ho(f.operationDate)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date de Début"}),v&&p?a.jsx(Me,{selected:p.startDate?new Date(p.startDate):null,onChange:$=>y({...p,startDate:$?$.toISOString().split("T")[0]:""}),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:ho(f.startDate)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Durée"}),v&&p?a.jsx("input",{type:"number",name:"duration",className:"mt-1 w-full border rounded-lg p-2",value:p.duration||"",onChange:$=>y({...p,duration:Number($.target.value)})}):a.jsxs("p",{className:"mt-1 font-medium",children:[f.duration," mois"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date de Fin"}),v&&p?a.jsx(Me,{selected:p.endDate?new Date(p.endDate):null,onChange:$=>y({...p,endDate:$?$.toISOString().split("T")[0]:""}),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1 font-medium",children:ho(f.endDate)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Prix"}),v&&p?a.jsx("input",{type:"number",name:"price",className:"mt-1 w-full border rounded-lg p-2",value:p.price||"",onChange:$=>y({...p,price:Number($.target.value)})}):a.jsxs("p",{className:"mt-1 font-medium",children:[f.price.toLocaleString("fr-FR")," DH"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Contact"}),v&&p?a.jsx("input",{type:"text",name:"contactInfo",className:"mt-1 w-full border rounded-lg p-2",value:p.contactInfo||"",onChange:$=>y({...p,contactInfo:$.target.value})}):a.jsx("p",{className:"mt-1 font-medium",children:f.contactInfo||"N/A"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Observation"}),v&&p?a.jsx("textarea",{name:"observation",className:"mt-1 w-full border rounded-lg p-2",value:p.observation||"",onChange:$=>y({...p,observation:$.target.value}),rows:3}):a.jsx("p",{className:"mt-1 font-medium",children:f.observation||"Aucune observation"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Documents Associés"}),v&&p?a.jsx(mt,{api_url:qa,existingDocuments:p.documents||[],newFiles:w,onNewFilesChange:S,onRemoveExistingDocument:fe}):f.documents&&f.documents.length>0?a.jsx(mt,{api_url:qa,existingDocuments:f.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:fe,label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]})]})]}):a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-center h-full py-10",children:[a.jsx(pt,{size:64,className:"text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucune assurance sélectionnée"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Sélectionnez une assurance pour voir ses détails"}),a.jsxs("button",{onClick:()=>{b(null),h(!0),S([])},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Ajouter une Assurance"]})]})})})]}),m&&a.jsx(cL,{onSubmit:P,onClose:()=>h(!1),initialData:null,vehicles:n,selectedInsurance:f,setSelectedInsurance:b,setEditedInsurance:y,newAttachmentFiles:w,setNewAttachmentFiles:S,API_URL_INSURANCES:j,API_URL:qa,handleRemoveExistingDocument:fe}),V&&f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirmer la suppression"}),a.jsxs("p",{children:[`Êtes-vous sûr de vouloir supprimer l'assurance pour le véhicule "`,f.vehicle&&typeof f.vehicle=="object"?f.vehicle.licensePlate:"N/A",'" ?']}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>Q(!1),className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"button",onClick:ce,className:"px-4 py-2 bg-red-600 text-white rounded-lg",children:"Supprimer"})]})]})})]})},cL=({onSubmit:e,onClose:t,initialData:n,vehicles:r,selectedInsurance:s,setSelectedInsurance:i,setEditedInsurance:o,newAttachmentFiles:l,setNewAttachmentFiles:c,API_URL_INSURANCES:u,API_URL:m,handleRemoveExistingDocument:h})=>{const[f,b]=E.useState(()=>{if(n){const j=typeof n.vehicle=="object"&&n.vehicle!==null?n.vehicle._id:n.vehicle;return{...n,operationDate:n.operationDate?new Date(n.operationDate).toISOString().split("T")[0]:"",startDate:n.startDate?new Date(n.startDate).toISOString().split("T")[0]:"",endDate:n.endDate?new Date(n.endDate).toISOString().split("T")[0]:"",vehicle:j,documents:n.documents||[]}}return{company:"",policyNumber:"",operationDate:new Date().toISOString().split("T")[0],startDate:new Date().toISOString().split("T")[0],duration:12,endDate:"",price:0,contactInfo:"",observation:"",vehicle:void 0,attachments:[],documents:[]}}),[v,D]=E.useState({});E.useEffect(()=>{if(f.startDate&&f.duration!==void 0&&f.duration!==null){const j=new Date(f.startDate);if(isNaN(j.getTime()))b(F=>({...F,endDate:""}));else{const F=new Date(j);F.setMonth(F.getMonth()+f.duration),b(C=>({...C,endDate:F.toISOString().split("T")[0]}))}}else b(j=>({...j,endDate:""}))},[f.startDate,f.duration]);const p=j=>{const{name:F,value:C}=j.target;if(["company","policyNumber","contactInfo","observation"].includes(F))C.trim()===""?D(T=>({...T,[F]:"Ce champ ne peut pas contenir uniquement des espaces."})):D(T=>{const P={...T};return delete P[F],P});else if(F==="duration"||F==="price"){const T=parseFloat(C);isNaN(T)||T<1?D(P=>({...P,[F]:"La valeur ne peut pas être inférieure à 1."})):D(P=>{const V={...P};return delete V[F],V})}b(T=>F==="duration"||F==="price"?{...T,[F]:parseFloat(C)||0}:{...T,[F]:C})},y=(j,F)=>{b(C=>({...C,[F]:j?j.toISOString().split("T")[0]:""}))},w=async j=>{if(s){if(j.isNew){b(F=>{var C;return{...F,documents:(C=F.documents)==null?void 0:C.filter(T=>T.url!==j.url)}}),c(F=>F.filter(C=>URL.createObjectURL(C)!==j.url));return}await h(j)}},S=j=>{j.preventDefault();const F={};if((f.company??"").trim()===""&&(F.company="La compagnie ne peut pas être vide."),(f.policyNumber??"").trim()===""&&(F.policyNumber="Le numéro de police ne peut pas être vide."),(f.contactInfo??"").trim()===""&&(F.contactInfo="Les informations de contact ne peuvent pas être vides."),(f.observation??"").trim()===""&&(F.observation="L'observation ne peut pas être vide."),f.duration!==void 0&&f.duration!==null&&f.duration<1&&(F.duration="La durée ne peut pas être inférieure à 1."),f.price!==void 0&&f.price!==null&&f.price<1&&(F.price="Le prix ne peut pas être inférieur à 1."),D(F),Object.keys(F).length>0){le.error("Veuillez corriger les erreurs de validation.");return}e({...f,vehicle:f.vehicle})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sr,{onClick:t}),a.jsxs("h2",{className:"text-xl font-bold mb-4",children:[n?"Modifier":"Nouvelle"," Assurance"]}),a.jsxs("form",{onSubmit:S,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations sur l'Assurance"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",onChange:p,value:f.vehicle||"",className:"w-full border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),r.map(j=>a.jsxs("option",{value:j._id,children:[j.licensePlate," - ",j.model]},j._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 mb-1",children:"Compagnie"}),a.jsx("input",{type:"text",id:"company",name:"company",value:f.company||"",onChange:p,className:`w-full border rounded-lg p-2 ${v.company?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Nom de la compagnie",required:!0}),v.company&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.company})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"policyNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro de Police"}),a.jsx("input",{type:"text",id:"policyNumber",name:"policyNumber",value:f.policyNumber||"",onChange:p,className:`w-full border rounded-lg p-2 ${v.policyNumber?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Numéro de police",required:!0}),v.policyNumber&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.policyNumber})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"operationDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d'Opération"}),a.jsx(Me,{id:"operationDate",selected:f.operationDate?new Date(f.operationDate):null,onChange:j=>y(j,"operationDate"),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Début"}),a.jsx(Me,{id:"startDate",selected:f.startDate?new Date(f.startDate):null,onChange:j=>y(j,"startDate"),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Durée (mois)"}),a.jsx("input",{type:"number",id:"duration",name:"duration",value:f.duration||"",onChange:p,placeholder:"Durée en mois",className:`w-full border rounded-lg p-2 ${v.duration?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),v.duration&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.duration})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Fin"}),a.jsx("input",{type:"date",id:"endDate",name:"endDate",value:f.endDate||"",onChange:p,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-gray-100",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (DH)"}),a.jsx("input",{type:"number",id:"price",name:"price",value:f.price||"",onChange:p,placeholder:"Prix",className:`w-full border rounded-lg p-2 ${v.price?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),v.price&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.price})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"contactInfo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Informations de Contact"}),a.jsx("input",{type:"text",id:"contactInfo",name:"contactInfo",value:f.contactInfo||"",onChange:p,placeholder:"Téléphone, Email, etc.",className:`w-full border rounded-lg p-2 ${v.contactInfo?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.contactInfo&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.contactInfo})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"observation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Observation"}),a.jsx("textarea",{id:"observation",name:"observation",value:f.observation||"",onChange:p,rows:3,placeholder:"Notes ou observations supplémentaires",className:`w-full border rounded-lg p-2 ${v.observation?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),v.observation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.observation})]})]})]}),a.jsx(mt,{api_url:m,existingDocuments:f.documents||[],newFiles:l,onNewFilesChange:c,onRemoveExistingDocument:w}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:n?"Mettre à jour":"Ajouter"})]})]})]})})};kn("fr",Sn);const Am=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},tj=["Casablanca","Rabat","Marrakech","Fès","Tanger","Agadir","Meknès","Oujda","Kénitra","Tétouan","Safi","El Jadida","Nador","Mohammedia","Béni Mellal","Témara","Khémisset"],uL=({onSubmit:e,onClose:t,initialData:n=null,vehicles:r,customers:s,onRemoveExistingDocument:i})=>{var j,F;const[o,l]=E.useState([]),[c,u]=E.useState((n==null?void 0:n.documents)||[]),m=C=>{if(!C)return null;const[T,P]=C.split(":").map(Number);return hi(pi(new Date,P),T)},h=C=>{if(!C)return"";const T=C.getHours().toString().padStart(2,"0"),P=C.getMinutes().toString().padStart(2,"0");return`${T}:${P}`},[f,b]=E.useState(()=>{const C={vehicle:null,infractionDate:new Date().toISOString().split("T")[0],timeInfraction:"",location:"",date:new Date().toISOString().split("T")[0],customer:null,permis:"",cin:"",passeport:"",type:"particular",societe:"",telephone:"",telephone2:"",attachments:[],documents:[]};if(n){const T=r.find(V=>{var Q;return V._id===((Q=n.vehicle)==null?void 0:Q._id)})||null,P=s.find(V=>{var Q;return V._id===((Q=n.customer)==null?void 0:Q._id)});return{...n,vehicle:T,date:n.date?new Date(n.date).toISOString().split("T")[0]:C.date,permis:(P==null?void 0:P.numeroPermis)||"",cin:n.cin||(P==null?void 0:P.cin)||"",passeport:n.passeport||(P==null?void 0:P.numeroPasseport)||"",type:n.type||((P==null?void 0:P.type)==="Professionnel"?"professional":"particular"),societe:n.societe||((P==null?void 0:P.type)==="Professionnel"?`${P.prenomFr} ${P.nomFr}`:""),telephone:n.telephone||(P==null?void 0:P.telephone)||"",telephone2:n.telephone2||(P==null?void 0:P.telephone2)||""}}return C});E.useEffect(()=>{if(n){const C=r.find(P=>{var V;return P._id===((V=n.vehicle)==null?void 0:V._id)})||null,T=s.find(P=>{var V;return P._id===((V=n.customer)==null?void 0:V._id)});b({...n,infractionDate:n.infractionDate?new Date(n.infractionDate).toISOString().split("T")[0]:"",date:n.date?new Date(n.date).toISOString().split("T")[0]:"",vehicle:C,permis:(T==null?void 0:T.numeroPermis)||"",cin:n.cin||(T==null?void 0:T.cin)||"",passeport:n.passeport||(T==null?void 0:T.numeroPasseport)||"",type:n.type||((T==null?void 0:T.type)==="Professionnel"?"professional":"particular"),societe:n.societe||((T==null?void 0:T.type)==="Professionnel"?`${T.prenomFr} ${T.nomFr}`:""),telephone:n.telephone||(T==null?void 0:T.telephone)||"",telephone2:n.telephone2||(T==null?void 0:T.telephone2)||""}),u(n.documents||[])}else b({vehicle:null,infractionDate:new Date().toISOString().split("T")[0],timeInfraction:"",location:"",date:new Date().toISOString().split("T")[0],customer:null,permis:"",cin:"",passeport:"",type:"particular",societe:"",telephone:"",telephone2:"",attachments:[],documents:[]}),u([]);l([])},[n,r,s]),E.useEffect(()=>()=>{o.forEach(C=>URL.revokeObjectURL(URL.createObjectURL(C))),c.forEach(C=>{C.url.startsWith("blob:")&&URL.revokeObjectURL(C.url)})},[o,c]);const v=C=>{const{name:T,value:P}=C.target;b(V=>({...V,[T]:P}))},D=(C,T)=>{b(P=>({...P,[T]:C?C.toISOString().split("T")[0]:""}))},p=C=>{const T=C.target.value,P=s.find(V=>V._id===T);b(V=>({...V,customer:P,permis:(P==null?void 0:P.numeroPermis)||"",cin:(P==null?void 0:P.cin)||"",passeport:(P==null?void 0:P.numeroPasseport)||"",type:(P==null?void 0:P.type)==="Professionnel"?"professional":"particular",societe:(P==null?void 0:P.type)==="Professionnel"?`${P.prenomFr} ${P.nomFr}`:"",telephone:(P==null?void 0:P.telephone)||"",telephone2:(P==null?void 0:P.telephone2)||""}))},y=async C=>{if(!(n!=null&&n._id)){l(T=>T.filter(P=>URL.createObjectURL(P)!==C.url)),u(T=>T.filter(P=>P.url!==C.url));return}await i(n._id,C),u(T=>T.filter(P=>P.url!==C.url))},w=C=>{C.preventDefault();const T={...f,documents:c};e(T,o)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sr,{onClick:t}),a.jsx("h2",{className:"text-xl font-bold mb-6",children:n?"Modifier l'infraction":"Ajouter une infraction"}),a.jsxs("form",{className:"space-y-6",onSubmit:w,children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Détails de l'infraction"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"infractionDate",className:"block mb-1",children:"Date Infraction (*)"}),a.jsx(Me,{selected:f.infractionDate?new Date(f.infractionDate):null,onChange:C=>D(C,"infractionDate"),locale:"fr",dateFormat:"dd/MM/yyyy",className:"w-full border rounded p-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"timeInfraction",className:"block mb-1",children:"Heure Infraction"}),a.jsx(Me,{selected:m(f.timeInfraction||""),onChange:C=>b(T=>({...T,timeInfraction:h(C)})),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Heure",dateFormat:"HH:mm",locale:"fr",className:"w-full border rounded p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"location",className:"block mb-1",children:"Fait à (*)"}),a.jsxs("select",{name:"location",id:"location",value:f.location||"",onChange:v,className:"w-full border rounded p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner une ville"}),tj.map(C=>a.jsx("option",{value:C,children:C},C))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date",className:"block mb-1",children:"Fait le (*)"}),a.jsx(Me,{selected:f.date?new Date(f.date):null,onChange:C=>D(C,"date"),locale:"fr",dateFormat:"dd/MM/yyyy",className:"w-full border rounded p-2",required:!0})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Véhicule"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicle",className:"block mb-1",children:"Véhicule"}),a.jsxs("select",{name:"vehicle",id:"vehicle",className:"w-full border rounded p-2",value:((j=f.vehicle)==null?void 0:j._id)||"",onChange:C=>{const T=r.find(P=>P._id===C.target.value);b(P=>({...P,vehicle:T||null}))},children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),r.map(C=>a.jsx("option",{value:C._id,children:`${C.licensePlate} - ${C.brand} ${C.model}`},C._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicleDisplay",className:"block mb-1",children:"Modèle et Matricule"}),a.jsx("input",{type:"text",name:"vehicleDisplay",id:"vehicleDisplay",className:"w-full border rounded p-2 bg-gray-100",value:f.vehicle?`${f.vehicle.brand} ${f.vehicle.model} (${f.vehicle.licensePlate})`:"",readOnly:!0})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Client"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"customer",className:"block mb-1",children:"Client (*)"}),a.jsxs("select",{name:"customer",id:"customer",required:!0,className:"w-full border rounded p-2",value:((F=f.customer)==null?void 0:F._id)||"",onChange:p,children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),s.map(C=>a.jsx("option",{value:C._id,children:`${C.prenomFr} ${C.nomFr}`},C._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"permis",className:"block mb-1",children:"Permis"}),a.jsx("input",{type:"text",name:"permis",id:"permis",className:"w-full border rounded p-2 bg-gray-100",value:f.permis||"",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"cin",className:"block mb-1",children:"CIN"}),a.jsx("input",{type:"text",name:"cin",id:"cin",value:f.cin||"",onChange:v,className:"w-full border rounded p-2",readOnly:!!f.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"passeport",className:"block mb-1",children:"Passeport"}),a.jsx("input",{type:"text",name:"passeport",id:"passeport",value:f.passeport||"",onChange:v,className:"w-full border rounded p-2",readOnly:!!f.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"type",className:"block mb-1",children:"Type de Client (*)"}),a.jsxs("select",{name:"type",id:"type",value:f.type||"particular",onChange:v,className:"w-full border rounded p-2",required:!0,disabled:!!f.customer,children:[a.jsx("option",{value:"particular",children:"Particulier"}),a.jsx("option",{value:"professional",children:"Professionnel"})]})]}),f.type==="professional"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"societe",className:"block mb-1",children:"Société"}),a.jsx("input",{type:"text",name:"societe",id:"societe",value:f.societe||"",onChange:v,className:"w-full border rounded p-2",readOnly:!!f.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"telephone",className:"block mb-1",children:"Téléphone"}),a.jsx("input",{type:"text",name:"telephone",id:"telephone",value:f.telephone||"",onChange:v,className:"w-full border rounded p-2",readOnly:!!f.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"telephone2",className:"block mb-1",children:"Téléphone 2"}),a.jsx("input",{type:"text",name:"telephone2",id:"telephone2",value:f.telephone2||"",onChange:v,className:"w-full border rounded p-2",readOnly:!!f.customer})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Pièces Jointes"}),a.jsx(mt,{api_url:"http://localhost:5000/api/infractions",newFiles:o,onNewFilesChange:l,existingDocuments:c,onRemoveExistingDocument:y,readOnly:!1,label:""})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded hover:bg-gray-100",children:"Annuler"}),a.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:[n?"Modifier":"Ajouter"," Infraction"]})]})]})]})})},dL=()=>{var Se,se;const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState([]),[o,l]=E.useState(!0),[c,u]=E.useState(null),[m,h]=E.useState(!1),[f,b]=E.useState(""),[v,D]=E.useState(null),[p,y]=E.useState(null),[w,S]=E.useState(null),[j,F]=E.useState(!1),[C,T]=E.useState(null),[P,V]=E.useState([]),Q="http://localhost:5000",ee=`${Q}/api/infractions`,ce=`${Q}/api/vehicles`,fe=`${Q}/api/customers`,G=I=>{if(!I)return null;const[q,_]=I.split(":").map(Number);return hi(pi(new Date,_),q)},re=I=>{if(!I)return"";const q=I.getHours().toString().padStart(2,"0"),_=I.getMinutes().toString().padStart(2,"0");return`${q}:${_}`},$=E.useCallback(async()=>{l(!0),u(null);try{const[I,q,_]=await Promise.all([we.get(ee),we.get(ce),we.get(fe)]);t(I.data),r(q.data),i(_.data)}catch(I){console.error("Error fetching data:",I),u("Failed to load data."),le.error("Failed to load data.")}finally{l(!1)}},[]);E.useEffect(()=>{$()},[$]);const H=e.filter(I=>{var M,A,L,R,B;const q=I.customer?`${I.customer.prenomFr} ${I.customer.nomFr}`.toLowerCase():"",_=((A=(M=I.vehicle)==null?void 0:M.licensePlate)==null?void 0:A.toLowerCase())||"",O=((R=(L=I.vehicle)==null?void 0:L.model)==null?void 0:R.toLowerCase())||"",d=((B=I.infractionNumber)==null?void 0:B.toLowerCase())||"",g=_.includes(f.toLowerCase())||O.includes(f.toLowerCase())||q.includes(f.toLowerCase())||d.includes(f.toLowerCase()),N=new Date(I.infractionDate),k=v?N>=v:!0,x=p?N<=p:!0;return g&&k&&x}),Y=async(I,q)=>{try{const _=new FormData;I.customer&&_.append("customer",I.customer._id),I.vehicle&&_.append("vehicle",I.vehicle._id),Object.keys(I).forEach(g=>{const N=g;N!=="customer"&&N!=="vehicle"&&N!=="documents"&&I[N]!==void 0&&_.append(g,String(I[N]))}),I.documents&&I.documents.forEach(g=>_.append("existingDocuments",g.url)),q.forEach(g=>{_.append("attachments",g)});const d=(await we.post(ee,_,{headers:{"Content-Type":"multipart/form-data"}})).data;t([...e,d]),h(!1),le.success("Infraction added successfully."),V([])}catch(_){console.error("Error adding infraction:",_),le.error("Failed to add infraction.")}},X=async(I,q)=>{if(w)try{const _=new FormData;I.customer&&_.append("customer",I.customer._id),I.vehicle&&_.append("vehicle",I.vehicle._id),Object.keys(I).forEach(g=>{const N=g;N!=="customer"&&N!=="vehicle"&&N!=="documents"&&I[N]!==void 0&&_.append(g,String(I[N]))}),I.documents&&I.documents.forEach(g=>{g.isNew||_.append("existingDocuments",g.url)}),q.forEach(g=>{_.append("attachments",g)});const d=(await we.put(`${ee}/${w._id}`,_,{headers:{"Content-Type":"multipart/form-data"}})).data;t(e.map(g=>g._id===d._id?d:g)),S(d),h(!1),F(!1),T(null),V([]),le.success("Infraction updated successfully.")}catch(_){console.error("Error updating infraction:",_),le.error("Failed to update infraction.")}},J=async I=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette infraction ?"))try{await we.delete(`${ee}/${I}`),t(e.filter(q=>q._id!==I)),S(null),le.success("Infraction deleted successfully.")}catch(q){console.error("Error deleting infraction:",q),le.error("Failed to delete infraction.")}},he=async(I,q)=>{try{await we.delete(`${ee}/${I}/documents`,{data:{documentName:q.name}}),t(_=>_.map(O=>{var d;return O._id===I?{...O,documents:(d=O.documents)==null?void 0:d.filter(g=>g.url!==q.url)}:O})),S(_=>{var O;return!_||_._id!==I?_:{..._,documents:(O=_.documents)==null?void 0:O.filter(d=>d.url!==q.url)}}),le.success("Document supprimé avec succès.")}catch(_){console.error("Erreur lors de la suppression du document:",_),le.error("Échec de la suppression du document.")}};return o?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading infractions..."})}):c?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:c}),a.jsx("button",{onClick:$,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Infractions"}),a.jsxs("button",{onClick:()=>{S(null),h(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Nouvelle Infraction"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-[200px]",children:[a.jsx("label",{htmlFor:"search-infraction",className:"sr-only",children:"Rechercher une infraction"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-infraction",type:"text",placeholder:"Rechercher une infraction...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:f,onChange:I=>b(I.target.value)})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"start-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de début"}),a.jsx(Me,{id:"start-date-filter",selected:v,onChange:I=>D(I),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"end-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de fin"}),a.jsx(Me,{id:"end-date-filter",selected:p,onChange:I=>y(I),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Infraction"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[H.map(I=>{var q,_;return a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(w==null?void 0:w._id)===I._id?"bg-blue-50":""}`,onClick:()=>{j&&(w==null?void 0:w._id)!==I._id?confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")&&(S(I),F(!1),T(null),V([])):j||S(I)},children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"md:block overflow-x-auto md:overflow-visible",children:a.jsxs("div",{className:"flex items-center min-w-[220px] md:min-w-0",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:(q=I.vehicle)!=null&&q.imageUrl?a.jsx("img",{src:I.vehicle.imageUrl.startsWith("data:")?I.vehicle.imageUrl:`${Q}/${I.vehicle.imageUrl.replace(/\\/g,"/")}`,alt:`${I.vehicle.brand||"N/A"} ${I.vehicle.model||"N/A"}`,className:"w-10 h-10 object-cover rounded-full"}):a.jsx(pt,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:((_=I.vehicle)==null?void 0:_.licensePlate)||"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:I.vehicle?`${I.vehicle.brand} ${I.vehicle.model}`:"N/A"})]})]})})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.infractionNumber}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center",children:[a.jsx(Nd,{size:14,className:"mr-1 text-gray-500"}),Am(I.infractionDate)]})]}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.customer?`${I.customer.prenomFr} ${I.customer.nomFr}`:"N/A"}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center",children:[a.jsx(HD,{size:14,className:"mr-1 text-gray-500"}),I.location||"N/A"]})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(tn,{onClick:O=>{O.stopPropagation(),S(I);const d=(I.documents||[]).map(g=>({name:g.name,url:g.url,type:g.type,size:g.size,isNew:!1}));T({...I,documents:d}),V([]),F(!0)},size:"md",className:"mr-3"}),a.jsx("button",{onClick:O=>{O.stopPropagation(),J(I._id)},children:a.jsx(Ln,{size:18})})]})]},I._id)}),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Aucune infraction trouvée."})})]})]})})}),a.jsx("div",{className:"lg:col-span-1",children:w?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de l'infraction"}),j?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{confirm("Êtes-vous sûr de vouloir annuler les modifications ?")&&(F(!1),T(null),V([]))},className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:()=>{C&&X(C,P)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:()=>{const I=(w.documents||[]).map(q=>({name:q.name,url:q.url,type:q.type,size:q.size,isNew:!1}));T({...w,documents:I}),V([]),F(!0)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),j&&C?a.jsx("form",{id:"infraction-edit-form",onSubmit:I=>{I.preventDefault(),C&&X(C,P)},children:a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"vehicle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",className:"w-full border rounded-lg p-2",value:((Se=C.vehicle)==null?void 0:Se._id)||"",onChange:I=>{const q=n.find(_=>_._id===I.target.value);T({...C,vehicle:q||null})},children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),n.map(I=>a.jsxs("option",{value:I._id,children:[I.licensePlate," - ",I.model]},I._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"infractionDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Infraction"}),a.jsx(Me,{selected:C.infractionDate?new Date(C.infractionDate):null,onChange:I=>T({...C,infractionDate:I?I.toISOString().split("T")[0]:""}),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"timeInfraction",className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure Infraction"}),a.jsx(Me,{selected:G(C.timeInfraction||""),onChange:I=>T({...C,timeInfraction:re(I)}),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Heure",dateFormat:"HH:mm",locale:"fr",className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fait à"}),a.jsxs("select",{name:"location",id:"location",className:"w-full border rounded-lg p-2",value:C.location||"",onChange:I=>T({...C,location:I.target.value}),children:[a.jsx("option",{value:"",children:"Sélectionner une ville"}),tj.map(I=>a.jsx("option",{value:I,children:I},I))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fait le"}),a.jsx(Me,{selected:C.date?new Date(C.date):null,onChange:I=>T({...C,date:I?I.toISOString().split("T")[0]:""}),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2"})]}),a.jsxs("div",{className:"p-4 border-t mt-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Informations Client"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"customer",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),a.jsxs("select",{name:"customer",id:"customer",className:"w-full border rounded-lg p-2",value:((se=C.customer)==null?void 0:se._id)||"",onChange:I=>{const q=s.find(_=>_._id===I.target.value);T({...C,customer:q||null})},children:[a.jsx("option",{value:"",children:"Sélectionner un client"}),s.map(I=>a.jsx("option",{value:I._id,children:`${I.prenomFr} ${I.nomFr}`},I._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"cin",className:"block text-sm font-medium text-gray-700 mb-1",children:"CIN"}),a.jsx("input",{type:"text",name:"cin",id:"cin",className:"w-full border rounded-lg p-2",value:C.cin||"",onChange:I=>T({...C,cin:I.target.value}),readOnly:!!C.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"permis",className:"block text-sm font-medium text-gray-700 mb-1",children:"Permis"}),a.jsx("input",{type:"text",name:"permis",id:"permis",className:"w-full border rounded-lg p-2",value:C.permis||"",onChange:I=>T({...C,permis:I.target.value}),readOnly:!!C.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"passeport",className:"block text-sm font-medium text-gray-700 mb-1",children:"Passeport"}),a.jsx("input",{type:"text",name:"passeport",id:"passeport",className:"w-full border rounded-lg p-2",value:C.passeport||"",onChange:I=>T({...C,passeport:I.target.value}),readOnly:!!C.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"telephone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone"}),a.jsx("input",{type:"text",name:"telephone",id:"telephone",className:"w-full border rounded-lg p-2",value:C.telephone||"",onChange:I=>T({...C,telephone:I.target.value}),readOnly:!!C.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"telephone2",className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone 2"}),a.jsx("input",{type:"text",name:"telephone2",id:"telephone2",className:"w-full border rounded-lg p-2",value:C.telephone2||"",onChange:I=>T({...C,telephone2:I.target.value}),readOnly:!!C.customer})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Client"}),a.jsxs("select",{name:"type",id:"type",className:"w-full border rounded-lg p-2",value:C.type||"particular",onChange:I=>T({...C,type:I.target.value}),disabled:!!C.customer,children:[a.jsx("option",{value:"particular",children:"Particulier"}),a.jsx("option",{value:"professional",children:"Professionnel"})]})]}),C.type==="professional"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"societe",className:"block text-sm font-medium text-gray-700 mb-1",children:"Société"}),a.jsx("input",{type:"text",name:"societe",id:"societe",className:"w-full border rounded-lg p-2",value:C.societe||"",onChange:I=>T({...C,societe:I.target.value}),readOnly:!!C.customer})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Pièces Jointes:"}),a.jsx(mt,{api_url:ee,existingDocuments:C.documents||[],newFiles:P,onNewFilesChange:V,onRemoveExistingDocument:I=>he(w._id,I)})]})]})}):a.jsxs("div",{className:"p-4 space-y-4",children:[w.vehicle&&typeof w.vehicle=="object"?a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[w.vehicle.imageUrl?a.jsx("img",{src:w.vehicle.imageUrl.startsWith("data:")?w.vehicle.imageUrl:`${Q}/${w.vehicle.imageUrl.replace(/\\/g,"/").replace(/^\//,"")}`,alt:`${w.vehicle.brand||"N/A"} ${w.vehicle.model||"N/A"}`,className:"w-24 h-24 object-cover rounded-lg shadow"}):a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(pt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-lg",children:[w.vehicle.brand||"N/A"," ",w.vehicle.model||"N/A"]}),a.jsx("p",{className:"text-sm text-gray-600",children:w.vehicle.licensePlate||"N/A"})]})]})]}):a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(pt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg",children:"N/A"}),a.jsx("p",{className:"text-sm text-gray-600",children:"N/A"})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"N° Infraction"}),a.jsx("p",{className:"font-medium",children:w.infractionNumber||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date Infraction"}),a.jsx("p",{className:"font-medium",children:Am(w.infractionDate)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Heure Infraction"}),a.jsx("p",{className:"font-medium",children:w.timeInfraction||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Fait à"}),a.jsx("p",{className:"font-medium",children:w.location||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Fait le"}),a.jsx("p",{className:"font-medium",children:Am(w.date)||"-"})]}),a.jsxs("div",{className:"p-4 border-t mt-4",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Informations Client"}),w.customer?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-medium",children:`${w.customer.prenomFr||""} ${w.customer.nomFr||""}`.trim()||"N/A"}),a.jsxs("p",{className:"text-sm text-gray-500",children:["CIN: ",w.cin||"N/A"]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Permis: ",w.permis||"N/A"]}),w.passeport&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Passeport: ",w.passeport]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Téléphone: ",w.telephone||"N/A"]}),w.telephone2&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Téléphone 2: ",w.telephone2]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Type: ",w.type==="professional"?"Professionnel":"Particulier"]}),w.type==="professional"&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Société: ",w.societe]})]}):a.jsx("p",{className:"font-medium",children:"N/A"})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Pièces Jointes:"}),w.documents&&w.documents.length>0?a.jsx(mt,{api_url:ee,existingDocuments:w.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:()=>Promise.resolve(),label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]})]})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(Nr,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune infraction sélectionnée"})]})})]}),m&&a.jsx(uL,{onSubmit:w?X:Y,onClose:()=>h(!1),initialData:w,vehicles:n,customers:s,onRemoveExistingDocument:he})]})};kn("fr",Sn);const Uo=e=>typeof e=="string"&&e.trim().length===0,va=e=>{switch(e){case"Pending":return"En attente";case"Completed":return"Terminée";case"Cancelled":return"Annulée";default:return e}},mL=({intervention:e,onClose:t,onEdit:n,onSave:r,onCancel:s,onDelete:i,onInputChange:o,onRemoveExistingDocument:l,editMode:c,editedIntervention:u,vehicles:m,API_URL:h,newAttachmentFiles:f,setNewAttachmentFiles:b})=>{var p;const v=y=>{var w;return((w=Yu.find(S=>S.value===y))==null?void 0:w.label)||y},D=y=>y.toLocaleString("fr-FR",{style:"currency",currency:"MAD"}).replace("MAD","DH");return a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de l'intervention"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[c?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>r(f),className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"}),a.jsx("button",{onClick:s,className:"px-4 py-2 border rounded-lg text-sm",children:"Annuler"})]}):a.jsx(tn,{onClick:n,withText:!0,className:"mr-2"}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full",children:a.jsx(kr,{size:24})})]})]}),a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Véhicule"}),c?a.jsxs("select",{className:"w-full border rounded-lg p-2",value:((p=u==null?void 0:u.vehicle)==null?void 0:p._id)||"",onChange:y=>o("vehicle",y.target.value),children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),m.map(y=>a.jsxs("option",{value:y._id,children:[y.licensePlate," - ",y.brand," ",y.model]},y._id))]}):e.vehicle?a.jsx("div",{className:"p-4 border-b",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[e.vehicle.imageUrl?a.jsx("img",{src:e.vehicle.imageUrl.startsWith("data:")?e.vehicle.imageUrl:`${h}/${e.vehicle.imageUrl.replace(/\\/g,"/").replace(/^\//,"")}`,alt:`${e.vehicle.brand||"N/A"} ${e.vehicle.model||"N/A"}`,className:"w-24 h-24 object-cover rounded-lg shadow"}):a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(pt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-lg",children:[e.vehicle.brand||"N/A"," ",e.vehicle.model||"N/A"]}),a.jsx("p",{className:"text-sm text-gray-600",children:e.vehicle.licensePlate||"N/A"})]})]})}):a.jsx("div",{className:"p-4 border-b",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(pt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg",children:"N/A"}),a.jsx("p",{className:"text-sm text-gray-600",children:"N/A"})]})]})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Intervention"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Type"}),c?a.jsx("select",{className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.type)||"",onChange:y=>o("type",y.target.value),children:Yu.map(y=>a.jsx("option",{value:y.value,children:y.label},y.value))}):a.jsx("p",{className:"mt-1",children:v(e.type)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date"}),c?a.jsx(Me,{selected:u!=null&&u.date?new Date(u.date):null,onChange:y=>o("date",y?y.toISOString().split("T")[0]:""),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 w-full border rounded-lg p-2"}):a.jsx("p",{className:"mt-1",children:new Date(e.date).toLocaleDateString("fr-FR")})]})]}),e.type==="chaine"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Kilométrage actuel"}),c?a.jsx("input",{type:"number",className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.currentMileage)||"",onChange:y=>o("currentMileage",parseFloat(y.target.value))}):a.jsx("p",{className:"mt-1",children:e.currentMileage?`${e.currentMileage} km`:"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Prochaine Kilométrage"}),c?a.jsx("input",{type:"number",className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.nextMileage)||"",onChange:y=>o("nextMileage",parseFloat(y.target.value))}):a.jsx("p",{className:"mt-1",children:e.nextMileage?`${e.nextMileage} km`:"-"})]})]}),(e.type==="chaine"||e.type==="vidange")&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Kilométrage actuel"}),c?a.jsx("input",{type:"number",className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.currentMileage)||"",onChange:y=>o("currentMileage",parseFloat(y.target.value))}):a.jsx("p",{className:"mt-1",children:e.currentMileage?`${e.currentMileage} km`:"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Prochaine Kilométrage"}),c?a.jsx("input",{type:"number",className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.nextMileage)||"",onChange:y=>o("nextMileage",parseFloat(y.target.value))}):a.jsx("p",{className:"mt-1",children:e.nextMileage?`${e.nextMileage} km`:"-"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Détails Financiers"}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Coût"}),c?a.jsx("input",{type:"number",className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.cost)||0,onChange:y=>o("cost",parseFloat(y.target.value))}):a.jsx("p",{className:"mt-1",children:D(e.cost)})]})})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Statut et Description"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Statut"}),c?a.jsxs("select",{className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.status)||"",onChange:y=>o("status",y.target.value),children:[a.jsx("option",{value:"Pending",children:va("Pending")}),a.jsx("option",{value:"Completed",children:va("Completed")}),a.jsx("option",{value:"Cancelled",children:va("Cancelled")})]}):a.jsx("p",{className:"mt-1",children:va(e.status)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Description"}),c?a.jsx("textarea",{className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.description)||"",onChange:y=>o("description",y.target.value),rows:3}):a.jsx("p",{className:"mt-1",children:e.description})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Observation"}),c?a.jsx("textarea",{className:"mt-1 w-full border rounded-lg p-2",value:(u==null?void 0:u.observation)||"",onChange:y=>o("observation",y.target.value),rows:2}):a.jsx("p",{className:"mt-1",children:e.observation||"-"})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Documents"}),a.jsx(mt,{api_url:h,newFiles:f,onNewFilesChange:b,existingDocuments:c?(u==null?void 0:u.documents)||[]:e.documents||[],onRemoveExistingDocument:l,readOnly:!c,label:""})]})]})]})},Yu=[{value:"lavage",label:"Lavage"},{value:"vidange",label:"Vidange"},{value:"chaine",label:"Chaîne"}],fL=({onSubmit:e,onClose:t,initialData:n=null,vehicles:r,API_URL:s,newAttachmentFiles:i,setNewAttachmentFiles:o})=>{const[l,c]=E.useState((n==null?void 0:n.vehicle)||null),[u,m]=E.useState((n==null?void 0:n.documents)||[]),[h,f]=E.useState(n!=null&&n.date?new Date(n.date):null),[b,v]=E.useState((n==null?void 0:n.type)||""),[D,p]=E.useState((n==null?void 0:n.currentMileage)||""),[y,w]=E.useState((n==null?void 0:n.nextMileage)||""),[S,j]=E.useState({});E.useEffect(()=>{n&&(p(n.currentMileage||""),w(n.nextMileage||""))},[n]);const F=P=>{const V=r.find(Q=>Q._id===P.target.value);c(V||null)},C=P=>{const{name:V,value:Q}=P.target;if(["description","observation"].includes(V))Uo(Q)?j(ee=>({...ee,[V]:"Ce champ ne peut pas contenir uniquement des espaces."})):j(ee=>{const ce={...ee};return delete ce[V],ce});else if(V==="cost"){const ee=parseFloat(Q);isNaN(ee)||ee<0?j(ce=>({...ce,[V]:"Le coût ne peut pas être négatif."})):j(ce=>{const fe={...ce};return delete fe[V],fe})}},T=P=>{P.preventDefault();const V=P.target,Q=new FormData,ee=V.description.value,ce=V.observation.value,fe=parseFloat(V.cost.value),G={};if(Uo(ee)&&(G.description="La description ne peut pas contenir uniquement des espaces."),ce&&Uo(ce)&&(G.observation="L'observation ne peut pas contenir uniquement des espaces."),(isNaN(fe)||fe<0)&&(G.cost="Le coût ne peut pas être négatif."),j(G),Object.keys(G).length>0){le.error("Veuillez corriger les erreurs de validation.");return}Q.append("type",V.type.value),h&&Q.append("date",h.toISOString().split("T")[0]),l&&Q.append("vehicle",l._id),Q.append("description",ee),Q.append("cost",String(fe)),Q.append("status",V.status.value),Q.append("observation",ce),D!==""&&Q.append("currentMileage",String(D)),y!==""&&Q.append("nextMileage",String(y)),i.forEach(re=>{Q.append("documents",re)}),e(Q)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sr,{onClick:t}),a.jsx("h2",{className:"text-xl font-bold mb-4",children:n?"Modifier l'intervention":"Ajouter une intervention"}),a.jsxs("form",{className:"space-y-6",onSubmit:T,children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations générales"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Type d'intervention*"}),a.jsxs("select",{name:"type",required:!0,className:"border rounded-lg p-2",value:b,onChange:P=>{v(P.target.value),p(""),w("")},children:[a.jsx("option",{value:"",children:"Sélectionner un type"}),Yu.map(P=>a.jsx("option",{value:P.value,children:P.label},P.value))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Date d'intervention*"}),a.jsx(Me,{selected:h,onChange:P=>f(P),name:"date",dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",required:!0,className:"border rounded-lg p-2"})]})]})]}),(b==="chaine"||b==="vidange")&&a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations Kilométrage"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(b==="chaine"||b==="vidange")&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kilométrage actuel (km)*"}),a.jsx("input",{name:"currentMileage",type:"number",required:!0,className:"w-full border rounded-lg p-2",value:D,onChange:P=>p(parseFloat(P.target.value))})]}),(b==="chaine"||b==="vidange")&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prochaine Kilométrage (km)*"}),a.jsx("input",{name:"nextMileage",type:"number",required:!0,className:"w-full border rounded-lg p-2",value:y,onChange:P=>w(parseFloat(P.target.value))})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Véhicule"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Sélectionner un véhicule*"}),a.jsxs("select",{name:"vehicle",required:!0,className:"border rounded-lg p-2 focus:border-blue-500 focus:ring focus:ring-blue-200",value:(l==null?void 0:l._id)||"",onChange:F,children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),r.filter(P=>P.statut==="En parc").map(P=>a.jsxs("option",{value:P._id,children:[P.licensePlate," - ",P.brand," ",P.model]},P._id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Détails du véhicule"}),a.jsxs("div",{className:`w-full border rounded-lg p-3 ${l?"bg-blue-50 border-blue-200":"bg-gray-100"} flex items-center`,children:[a.jsx(pt,{size:18,className:`${l?"text-blue-500":"text-gray-500"} mr-2`}),l?a.jsxs("div",{children:[a.jsxs("span",{className:"font-medium",children:[l.brand," ",l.model]}),a.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",l.licensePlate,")"]}),a.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Kilométrage actuel: ",l.mileage," km"]})]}):a.jsx("span",{className:"text-gray-500",children:"Veuillez sélectionner un véhicule"})]})]})]})]}),a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Détails de l'intervention"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description de l'intervention*"}),a.jsx("textarea",{name:"description",required:!0,rows:3,className:`w-full border rounded-lg p-2 ${S.description?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.description,onChange:C}),S.description&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.description})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coût de l'intervention (DH)*"}),a.jsx("input",{name:"cost",type:"number",step:"0.01",required:!0,className:`w-full border rounded-lg p-2 ${S.cost?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.cost,onChange:C}),S.cost&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.cost})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut*"}),a.jsxs("select",{name:"status",required:!0,className:"w-full border rounded-lg p-2",defaultValue:(n==null?void 0:n.status)||"Pending",children:[a.jsx("option",{value:"Pending",children:va("Pending")}),a.jsx("option",{value:"Completed",children:va("Completed")}),a.jsx("option",{value:"Cancelled",children:va("Cancelled")})]})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observation"}),a.jsx("textarea",{name:"observation",rows:2,className:`w-full border rounded-lg p-2 ${S.observation?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,defaultValue:n==null?void 0:n.observation,onChange:C}),S.observation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.observation})]})]})]}),a.jsxs("section",{className:"border-b pb-4 mb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(dl,{size:18,className:"mr-2 text-gray-500"}),"Documents"]})}),a.jsx(mt,{api_url:s,newFiles:i,onNewFilesChange:o,existingDocuments:u,onRemoveExistingDocument:async()=>{},readOnly:!1,label:""})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:n?"Mettre à jour":"Enregistrer"})]})]})]})})},hL=()=>{const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState(!1),[o,l]=E.useState(""),[c,u]=E.useState("all"),[m,h]=E.useState(null),[f,b]=E.useState(null),[v,D]=E.useState(null),[p,y]=E.useState(!1),[w,S]=E.useState(null),[j,F]=E.useState([]),[C,T]=E.useState(!0),[P,V]=E.useState(null),Q="http://localhost:5000",ee=`${Q}/api/interventions`,ce=`${Q}/api/vehicles`,fe=E.useCallback(async()=>{T(!0),V(null);try{const I=await we.get(ce);r(I.data);const q=await we.get(ee);t(q.data),le.success("Data loaded successfully!")}catch(I){console.error("Error fetching data:",I),V("Failed to load data."),le.error("Failed to load data.")}finally{T(!1)}},[]);E.useEffect(()=>{fe()},[fe]);const G=I=>{var q;return((q=Yu.find(_=>_.value===I))==null?void 0:q.label)||I},re=I=>{switch(I){case"Pending":return"En attente";case"Completed":return"Terminée";case"Cancelled":return"Annulée";default:return I}},$=I=>I.toLocaleString("fr-FR",{style:"currency",currency:"MAD"}).replace("MAD","DH"),H=async I=>{try{const q=await we.post(ee,I);i(!1),le.success("Intervention added successfully!"),fe(),F([])}catch(q){console.error("Error adding intervention:",q),le.error("Failed to add intervention.")}},Y=()=>{v&&(S({...v}),y(!0))},X=async I=>{if(!w)return;const q={};if(Uo(w.description)&&(q.description="La description ne peut pas contenir uniquement des espaces."),w.observation&&Uo(w.observation)&&(q.observation="L'observation ne peut pas contenir uniquement des espaces."),w.cost<0&&(q.cost="Le coût ne peut pas être négatif."),Object.keys(q).length>0){Object.values(q).forEach(_=>le.error(_));return}try{const _=new FormData,O={...w};delete O.documents,Object.keys(O).forEach(k=>{const x=O[k];k==="vehicle"&&typeof x=="object"&&x!==null?_.append("vehicle",x._id):k==="date"&&x?_.append("date",new Date(x).toISOString().split("T")[0]):x!=null&&_.append(k,String(x))}),w.documents&&w.documents.forEach(k=>{k.url&&!k.url.startsWith("blob:")&&_.append("existingDocuments",k.url)}),I.forEach(k=>{_.append("documents",k)});const g=(await we.put(`${ee}/${w._id}`,_,{headers:{"Content-Type":"multipart/form-data"}})).data,N={...g,vehicle:g.vehicle};t(e.map(k=>k._id===N._id?N:k)),D(N),y(!1),S(null),F([]),le.success("Intervention updated successfully!")}catch(_){console.error("Error saving intervention edit:",_),le.error("Failed to save changes.")}},J=()=>{y(!1),S(null)},he=(I,q)=>{if(w){const _={...w};if(I==="vehicle"){const O=n.find(d=>d._id===q)||null;_.vehicle=O}else _[I]=q;S(_)}},Se=async I=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette intervention ?"))try{await we.delete(`${ee}/${I}`),t(e.filter(q=>q._id!==I)),(v==null?void 0:v._id)===I&&D(null),le.success("Intervention deleted successfully!")}catch(q){console.error("Error deleting intervention:",q),le.error("Failed to delete intervention.")}},se=e.filter(I=>{const _=(I.vehicle?`${I.vehicle.brand} ${I.vehicle.model} (${I.vehicle.licensePlate})`:"").toLowerCase().includes(o.toLowerCase())||G(I.type).toLowerCase().includes(o.toLowerCase())||I.description.toLowerCase().includes(o.toLowerCase()),O=c==="all"||I.status===c,d=new Date(I.date),g=m?d>=m:!0,N=f?d<=f:!0;return _&&O&&g&&N});return C?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{className:"text-lg text-gray-600",children:"Loading interventions..."})}):P?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-red-600",children:[a.jsx("p",{className:"text-lg",children:P}),a.jsx("button",{onClick:fe,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Interventions"}),a.jsxs("button",{onClick:()=>{D(null),i(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Nouvelle Intervention"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-[200px]",children:[a.jsx("label",{htmlFor:"search-intervention",className:"sr-only",children:"Rechercher une intervention"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-intervention",type:"text",placeholder:"Rechercher une intervention...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:o,onChange:I=>l(I.target.value)})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"status-filter",className:"sr-only",children:"Filtrer par statut"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(MD,{size:18,className:"text-gray-400"})}),a.jsxs("select",{id:"status-filter",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:c,onChange:I=>u(I.target.value),children:[a.jsx("option",{value:"all",children:"Tous les statuts"}),a.jsx("option",{value:"Pending",children:re("Pending")}),a.jsx("option",{value:"Completed",children:re("Completed")}),a.jsx("option",{value:"Cancelled",children:re("Cancelled")})]})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"start-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de début"}),a.jsx(Me,{id:"start-date-filter",selected:m,onChange:I=>h(I),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"end-date-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de fin"}),a.jsx(Me,{id:"end-date-filter",selected:f,onChange:I=>b(I),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"jj/mm/aaaa",className:"border rounded-lg p-2 w-full"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coût"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[se.map(I=>{var q,_;return a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(v==null?void 0:v._id)===I._id?"bg-blue-50":""}`,onClick:()=>D(I),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"md:block overflow-x-auto md:overflow-visible",children:a.jsxs("div",{className:"flex items-center min-w-[220px] md:min-w-0",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:(q=I.vehicle)!=null&&q.imageUrl?a.jsx("img",{src:I.vehicle.imageUrl.startsWith("data:")?I.vehicle.imageUrl:`${Q}/${I.vehicle.imageUrl.replace(/\\/g,"/")}`,alt:`${I.vehicle.brand||"N/A"} ${I.vehicle.model||"N/A"}`,className:"w-10 h-10 object-cover rounded-full"}):a.jsx(pt,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:((_=I.vehicle)==null?void 0:_.licensePlate)||"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:I.vehicle?`${I.vehicle.brand} ${I.vehicle.model}`:"N/A"})]})]})})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:G(I.type)}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center",children:[a.jsx(Nd,{size:14,className:"mr-1 text-gray-500"}),new Date(I.date).toLocaleDateString("fr-FR")]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:$(I.cost)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${I.status==="Completed"?"bg-green-100 text-green-800":I.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:re(I.status)})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(tn,{onClick:O=>{O.stopPropagation(),D(I),S({...I}),y(!0)},size:"md",className:"mr-3"}),a.jsx("button",{onClick:O=>{O.stopPropagation(),Se(I._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Ln,{size:18})})]})]},I._id)}),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Aucune intervention trouvée."})})]})]})})}),a.jsx("div",{className:"lg:col-span-1",children:v?a.jsx(mL,{intervention:v,onClose:()=>D(null),onEdit:Y,onSave:X,onCancel:J,onDelete:Se,onInputChange:he,onRemoveExistingDocument:async I=>{var q;if(w){const _=((q=w.documents)==null?void 0:q.filter(O=>O.url!==I.url))||[];S({...w,documents:_})}},editMode:p,editedIntervention:w,vehicles:n,API_URL:Q,newAttachmentFiles:j,setNewAttachmentFiles:F}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(Nr,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune intervention sélectionnée"})]})})]}),s&&a.jsx(fL,{onSubmit:H,onClose:()=>i(!1),initialData:v,vehicles:n,API_URL:Q,newAttachmentFiles:j,setNewAttachmentFiles:F})]})};kn("fr",Sn);const bv=e=>typeof e=="string"&&e.trim().length===0,nj=["Casablanca","Rabat","Marrakech","Fès","Tanger","Agadir","Meknès","Oujda","Kénitra","Tétouan","Safi","El Jadida","Mohammedia","Béni Mellal","Nador","Taza","Khémisset","Settat","Berrechid","Khénifra","Larache","Guelmim","Khouribga","Ouarzazate","Essaouira","Dakhla","Laâyoune"],zp=[{value:"expertise",label:"Expertise"},{value:"en_cours",label:"En cours de réparation"},{value:"repare",label:"Réparé"}],wv=e=>{var t;return((t=zp.find(n=>n.value===e))==null?void 0:t.label)||e},qu=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR")},So="http://localhost:5000",pL=({onSubmit:e,onClose:t,initialData:n=null,contracts:r,newAttachmentFiles:s,setNewAttachmentFiles:i,handleRemoveExistingDocument:o})=>{var y,w,S,j,F;const[l,c]=E.useState(()=>n?{...n,dateAccident:n.dateAccident?new Date(n.dateAccident).toISOString().split("T")[0]:"",dateEntreeGarage:n.dateEntreeGarage?new Date(n.dateEntreeGarage).toISOString().split("T")[0]:void 0,dateReparation:n.dateReparation?new Date(n.dateReparation).toISOString().split("T")[0]:void 0,documents:n.documents||[]}:{contrat:"",numeroContrat:"",dateSortie:"",client:"",clientNom:"",dateRetour:"",matricule:"",vehicule:"",dateAccident:new Date().toISOString().split("T")[0],heureAccident:"",lieuAccident:"",description:"",etat:"expertise",piecesJointes:[],documents:[]}),[u,m]=E.useState(n&&r.find(C=>C._id===n.contrat)||null),[h,f]=E.useState({});E.useEffect(()=>{if(u){const C=u.client,T=u.vehicle;c(P=>({...P,contrat:u._id,numeroContrat:u.contractNumber,dateSortie:u.departureDate,dateRetour:u.returnDate,client:(C==null?void 0:C._id)||"",clientNom:C?`${C.prenomFr} ${C.nomFr}`:"",matricule:(T==null?void 0:T.licensePlate)||"",vehicule:T?T._id:""}))}},[u]);const b=C=>{const T=C.target.value,P=r.find(V=>V._id===T);m(P||null)},v=C=>{const{name:T,value:P}=C.target;T==="description"&&(P&&bv(P)?f(V=>({...V,[T]:"La description ne peut pas contenir uniquement des espaces."})):f(V=>{const Q={...V};return delete Q[T],Q})),c(V=>({...V,[T]:P}))},D=(C,T)=>{c(P=>({...P,[T]:C?C.toISOString().split("T")[0]:""}))},p=C=>{var V;C.preventDefault();const T={};if(l.description&&bv(l.description)&&(T.description="La description ne peut pas contenir uniquement des espaces."),f(T),Object.keys(T).length>0){le.error("Veuillez corriger les erreurs de validation.");return}const P=new FormData;P.append("contrat",((V=l.contrat)==null?void 0:V._id)||l.contrat||""),P.append("dateAccident",l.dateAccident||""),P.append("heureAccident",l.heureAccident||""),P.append("lieuAccident",l.lieuAccident||""),P.append("description",l.description||""),P.append("etat",l.etat||"expertise"),l.dateEntreeGarage&&P.append("dateEntreeGarage",l.dateEntreeGarage),l.dateReparation&&P.append("dateReparation",l.dateReparation),l.montantReparation&&P.append("montantReparation",l.montantReparation.toString()),l.fraisClient&&P.append("fraisClient",l.fraisClient.toString()),l.indemniteAssurance&&P.append("indemniteAssurance",l.indemniteAssurance.toString()),l.avance&&P.append("avance",l.avance.toString()),s.length>0&&s.forEach(Q=>{P.append("attachments",Q)}),e(P)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold",children:[n?"Modifier":"Nouvel"," Accident"]}),a.jsx("button",{onClick:t,children:a.jsx(kr,{size:24})})]}),a.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a.jsxs("section",{children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations sur le Contrat"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"contratId",className:"block text-sm font-medium text-gray-700 mb-1",children:"N° Contrat"}),a.jsxs("select",{id:"contratId",name:"contrat",value:(u==null?void 0:u._id)||"",onChange:b,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un contrat"}),r.map(C=>a.jsx("option",{value:C._id,children:C.contractNumber},C._id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),a.jsx("input",{type:"text",value:u?`${(y=u.client)==null?void 0:y.prenomFr} ${(w=u.client)==null?void 0:w.nomFr}`:"",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100 sm:text-sm",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsx("input",{type:"text",value:u?`${(S=u.vehicle)==null?void 0:S.brand} ${(j=u.vehicle)==null?void 0:j.model} (${(F=u.vehicle)==null?void 0:F.licensePlate})`:"",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100 sm:text-sm",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de sortie"}),a.jsx("input",{type:"text",value:u?qu(u.departureDate):"",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100 sm:text-sm",readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de retour"}),a.jsx("input",{type:"text",value:u?qu(u.returnDate):"",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-100 sm:text-sm",readOnly:!0})]})]})]}),a.jsxs("section",{children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Détails de l'Accident"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"dateAccident",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),a.jsx(Me,{id:"dateAccident",selected:l.dateAccident?new Date(l.dateAccident):null,onChange:C=>D(C,"dateAccident"),dateFormat:"dd/MM/yyyy",locale:"fr",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"heureAccident",className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure"}),a.jsx("input",{type:"time",id:"heureAccident",name:"heureAccident",value:l.heureAccident||"",onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"lieuAccident",className:"block text-sm font-medium text-gray-700 mb-1",children:"Lieu"}),a.jsxs("select",{id:"lieuAccident",name:"lieuAccident",value:l.lieuAccident||"",onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner une ville"}),nj.map(C=>a.jsx("option",{value:C,children:C},C))]})]}),a.jsxs("div",{className:"md:col-span-3",children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",value:l.description||"",onChange:v,rows:3,className:`mt-1 block w-full border rounded-md shadow-sm py-2 px-3 ${h.description?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),h.description&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.description})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"etat",className:"block text-sm font-medium text-gray-700 mb-1",children:"État"}),a.jsx("select",{id:"etat",name:"etat",value:l.etat||"expertise",onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3",children:zp.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]})]})]}),a.jsx(mt,{api_url:So,existingDocuments:l.documents||[],newFiles:s,onNewFilesChange:i,onRemoveExistingDocument:o}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:n?"Mettre à jour":"Ajouter"})]})]})]})})},gL=()=>{const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,l]=E.useState(null),[c,u]=E.useState(""),[m,h]=E.useState(!1),[f,b]=E.useState(null),[v,D]=E.useState(!1),[p,y]=E.useState(null),[w,S]=E.useState([]),j=`${So}/api/accidents`,F=`${So}/api/contracts`,C=E.useCallback(async()=>{i(!0),l(null);try{const[G,re]=await Promise.all([we.get(j),we.get(F)]);t(G.data),r(re.data)}catch(G){console.error("Error fetching data:",G),l("Failed to load data."),le.error("Failed to load data.")}finally{i(!1)}},[]);E.useEffect(()=>{C()},[C]);const T=e.filter(G=>(G.numeroContrat||"").toLowerCase().includes(c.toLowerCase())||(G.clientNom||"").toLowerCase().includes(c.toLowerCase())||(G.matricule||"").toLowerCase().includes(c.toLowerCase())||(G.lieuAccident||"").toLowerCase().includes(c.toLowerCase())),P=async G=>{try{const re=await we.post(j,G,{headers:{"Content-Type":"multipart/form-data"}});t([...e,re.data]),h(!1),le.success("Accident ajouté avec succès."),S([])}catch(re){console.error("Error adding accident:",re),le.error("Échec de l'ajout de l'accident.")}},V=async()=>{var $;if(!p)return;const G=new FormData;G.append("contrat",typeof p.contrat=="object"?p.contrat._id:p.contrat||""),G.append("dateAccident",p.dateAccident||""),G.append("heureAccident",p.heureAccident||""),G.append("lieuAccident",p.lieuAccident||""),G.append("description",p.description||""),G.append("etat",p.etat||"expertise"),p.dateEntreeGarage&&G.append("dateEntreeGarage",p.dateEntreeGarage),p.dateReparation&&G.append("dateReparation",p.dateReparation),p.montantReparation&&G.append("montantReparation",p.montantReparation.toString()),p.fraisClient&&G.append("fraisClient",p.fraisClient.toString()),p.indemniteAssurance&&G.append("indemniteAssurance",p.indemniteAssurance.toString()),p.avance&&G.append("avance",p.avance.toString());const re=(($=p.documents)==null?void 0:$.filter(H=>!H.isNew))||[];G.append("existingDocuments",JSON.stringify(re)),w.length>0&&w.forEach(H=>{G.append("attachments",H)});try{const Y=(await we.put(`${j}/${p._id}`,G,{headers:{"Content-Type":"multipart/form-data"}})).data;t(e.map(X=>X._id===Y._id?Y:X)),b(Y),D(!1),le.success("Accident mis à jour avec succès."),S([])}catch(H){console.error("Error updating accident:",H),le.error("Échec de la mise à jour de l'accident.")}},Q=async G=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cet accident ?"))try{await we.delete(`${j}/${G}`),t(e.filter(re=>re._id!==G)),(f==null?void 0:f._id)===G&&b(null),le.success("Accident supprimé avec succès.")}catch(re){console.error("Error deleting accident:",re),le.error("Échec de la suppression de l'accident.")}},ee=async G=>{if(f)try{await we.delete(`${j}/${f._id}/documents`,{data:{documentUrl:G.url}});const re=$=>{var H,Y;return $?{...$,documents:(H=$.documents)==null?void 0:H.filter(X=>X.url!==G.url),piecesJointes:(Y=$.piecesJointes)==null?void 0:Y.filter(X=>X!==G.url)}:null};b(re),v&&y(re),le.success("Document supprimé avec succès.")}catch(re){console.error("Erreur lors de la suppression du document:",re),le.error("Échec de la suppression du document.")}},ce=()=>{if(f){const G=(f.documents||[]).map(re=>({...re,isNew:!1}));y({...f,documents:G}),S([]),D(!0)}},fe=G=>{v&&(f==null?void 0:f._id)!==G._id?confirm("Vous avez des modifications non enregistrées. Voulez-vous continuer et perdre ces modifications?")&&(b(G),D(!1),y(null),S([])):v||b(G)};return s?a.jsx("p",{children:"Loading..."}):o?a.jsx("p",{children:o}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Accidents"}),a.jsxs("button",{onClick:()=>{b(null),y(null),h(!0),S([])},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Nouvel Accident"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Rechercher un accident...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:c,onChange:G=>u(G.target.value)})]})}),a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contrat"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Véhicule"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Accident"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"État"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(G=>a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${(f==null?void 0:f._id)===G._id?v?"bg-blue-100":"bg-blue-50":""}`,onClick:()=>fe(G),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.numeroContrat}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.clientNom}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.matricule}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:qu(G.dateAccident)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${G.etat==="expertise"?"bg-yellow-100 text-yellow-800":G.etat==="en_cours"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:wv(G.etat)})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx(tn,{onClick:re=>{re.stopPropagation(),b(G),ce()},size:"md",className:"mr-3"}),a.jsx("button",{onClick:re=>{re.stopPropagation(),Q(G._id)},className:"text-red-600 hover:text-red-900",children:a.jsx(Ln,{size:18})})]})]},G._id))})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:f?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de l'accident"}),v?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{confirm("Êtes-vous sûr de vouloir annuler les modifications ?")&&(D(!1),y(null),S([]))},className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"button",onClick:V,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:ce,className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Contrat"}),v&&p?a.jsxs("select",{value:typeof p.contrat=="object"?p.contrat._id:p.contrat,onChange:G=>{const re=n.find($=>$._id===G.target.value);if(re){const $=re.client,H=re.vehicle;y(Y=>Y?{...Y,contrat:re,numeroContrat:re.contractNumber,client:($==null?void 0:$._id)||"",clientNom:$?`${$.prenomFr} ${$.nomFr}`:"",vehicule:(H==null?void 0:H._id)||"",matricule:(H==null?void 0:H.licensePlate)||""}:null)}},className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"",children:"Sélectionner un contrat"}),n.map(G=>a.jsx("option",{value:G._id,children:G.contractNumber},G._id))]}):a.jsx("p",{className:"font-medium",children:f.numeroContrat})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Client"}),a.jsx("p",{className:"font-medium",children:f.clientNom})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Véhicule"}),a.jsx("p",{className:"font-medium",children:f.matricule})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Date de l'accident"}),v&&p?a.jsx(Me,{selected:p.dateAccident?new Date(p.dateAccident):null,onChange:G=>y(re=>re?{...re,dateAccident:G?G.toISOString():""}:null),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:qu(f.dateAccident)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Heure de l'accident"}),v&&p?a.jsx("input",{type:"time",value:p.heureAccident||"",onChange:G=>y(re=>re?{...re,heureAccident:G.target.value}:null),className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:f.heureAccident})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Lieu de l'accident"}),v&&p?a.jsxs("select",{value:p.lieuAccident||"",onChange:G=>y(re=>re?{...re,lieuAccident:G.target.value}:null),className:"w-full border rounded-lg p-2 mt-1",children:[a.jsx("option",{value:"",children:"Sélectionner une ville"}),nj.map(G=>a.jsx("option",{value:G,children:G},G))]}):a.jsx("p",{className:"font-medium",children:f.lieuAccident})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Description"}),v&&p?a.jsx("textarea",{value:p.description||"",onChange:G=>y(re=>re?{...re,description:G.target.value}:null),rows:3,className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:f.description||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"État"}),v&&p?a.jsx("select",{value:p.etat||"expertise",onChange:G=>y(re=>re?{...re,etat:G.target.value}:null),className:"w-full border rounded-lg p-2 mt-1",children:zp.map(G=>a.jsx("option",{value:G.value,children:G.label},G.value))}):a.jsx("p",{className:"font-medium",children:wv(f.etat)})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"text-lg font-medium mb-2",children:"Documents Associés:"}),v&&p?a.jsx(mt,{api_url:So,existingDocuments:p.documents||[],newFiles:w,onNewFilesChange:S,onRemoveExistingDocument:ee}):f!=null&&f.documents&&f.documents.length>0?a.jsx(mt,{api_url:So,existingDocuments:f.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:ee,label:"",readOnly:!0}):a.jsxs("div",{className:"bg-gray-50 p-4 rounded-md flex flex-col items-center justify-center text-center",children:[a.jsx(Nr,{size:24,className:"text-gray-400 mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document associé."})]})]})]})]}):a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-center h-full py-10",children:[a.jsx(Nr,{size:64,className:"text-gray-300 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucun accident sélectionné"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Sélectionnez un accident pour voir ses détails"}),a.jsxs("button",{onClick:()=>{b(null),y(null),h(!0),S([])},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Ajouter un accident"]})]})})})]}),m&&a.jsx(pL,{onSubmit:P,onClose:()=>{h(!1),y(null)},initialData:p,contracts:n.filter(G=>G.client&&G.vehicle),newAttachmentFiles:w,setNewAttachmentFiles:S,handleRemoveExistingDocument:ee})]})};kn("fr",Sn);const Nv=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})},qc=e=>typeof e=="string"&&e.trim().length===0,Ku=[{value:1,label:"Janvier"},{value:2,label:"Février"},{value:3,label:"Mars"},{value:4,label:"Avril"},{value:5,label:"Mai"},{value:6,label:"Juin"},{value:7,label:"Juillet"},{value:8,label:"Août"},{value:9,label:"Septembre"},{value:10,label:"Octobre"},{value:11,label:"Novembre"},{value:12,label:"Décembre"}],Lm=e=>{var t;return((t=Ku.find(n=>n.value===e))==null?void 0:t.label)||""},la="http://localhost:5000",xL=()=>{var he,Se,se,I;const[e,t]=E.useState([]),[n,r]=E.useState([]),[s,i]=E.useState(!0),[o,l]=E.useState(null),[c,u]=E.useState(""),[m,h]=E.useState(""),[f,b]=E.useState(""),[v,D]=E.useState(!1),[p,y]=E.useState(null),[w,S]=E.useState(!1),[j,F]=E.useState(null),[C,T]=E.useState([]),[P,V]=E.useState({}),Q=`${la}/api/traites`,ee=`${la}/api/vehicles`,ce=E.useCallback(async()=>{i(!0),l(null);try{const[q,_]=await Promise.all([we.get(Q),we.get(ee)]),O=q.data.map(d=>{const g=_.data.find(N=>N._id===d.vehicle);return{...d,vehicle:g||d.vehicle}});t(O),r(_.data)}catch(q){console.error("Error fetching data:",q),l("Failed to load data."),le.error("Failed to load data.")}finally{i(!1)}},[]);E.useEffect(()=>{ce()},[ce]);const fe=e.filter(q=>{var g,N;const _=typeof q.vehicle=="object"&&((g=q.vehicle)==null?void 0:g.model)&&q.vehicle.model.toLowerCase().includes(c.toLowerCase())||typeof q.vehicle=="object"&&((N=q.vehicle)==null?void 0:N.licensePlate)&&q.vehicle.licensePlate.toLowerCase().includes(c.toLowerCase())||Lm(q.mois).toLowerCase().includes(c.toLowerCase())||q.annee.toString().includes(c.toLowerCase())||q.montant.toString().includes(c.toLowerCase()),O=m===""||q.mois===m,d=f===""||q.annee===f;return _&&O&&d}),G=async q=>{const _=new FormData;for(const O in q)if(Object.prototype.hasOwnProperty.call(q,O)){const d=q[O];O==="vehicle"&&d?_.append("vehicle",typeof d=="string"?d:d._id):O!=="_id"&&O!=="documents"&&d!==null&&d!==void 0&&_.append(O,d)}C.length>0&&C.forEach(O=>{_.append("documents",O)});try{const d=(await we.post(Q,_,{headers:{"Content-Type":"multipart/form-data"}})).data,g=n.find(k=>k._id===d.vehicle),N={...d,vehicle:g||d.vehicle};t([...e,N]),D(!1),le.success("Traite added successfully."),T([])}catch(O){console.error("Error adding traite:",O),le.error("Failed to add traite.")}},re=async q=>{var N;if(!p||!j)return;const _=[{name:"Référence",value:j.reference,required:!1},{name:"Notes",value:j.notes,required:!1}],O={};for(const k of _)k.value&&qc(k.value)&&(O[k.name.toLowerCase()]=`${k.name} ne peut pas contenir uniquement des espaces.`);if(j.montant!==void 0&&j.montant<1&&(O.montant="Montant (DH) ne peut pas être inférieur à 1."),V(O),Object.keys(O).length>0){le.error("Veuillez corriger les erreurs de validation.");return}const d=new FormData;for(const k in q)if(Object.prototype.hasOwnProperty.call(q,k)){const x=q[k];k==="vehicle"&&x?d.append("vehicle",typeof x=="string"?x:x._id):k!=="_id"&&k!=="documents"&&x!==null&&x!==void 0&&d.append(k,x)}const g=((N=j==null?void 0:j.documents)==null?void 0:N.filter(k=>!k.isNew))||[];d.append("existingDocuments",JSON.stringify(g)),C.length>0&&C.forEach(k=>{d.append("documents",k)});try{const x=(await we.put(`${Q}/${p._id}`,d,{headers:{"Content-Type":"multipart/form-data"}})).data,M=n.find(L=>L._id===x.vehicle),A={...x,vehicle:M||x.vehicle};t(e.map(L=>L._id===A._id?A:L)),y(A),S(!1),le.success("Traite updated successfully."),T([])}catch(k){console.error("Error updating traite:",k),le.error("Failed to update traite.")}},[$,H]=E.useState(!1),Y=q=>{y(e.find(_=>_._id===q)||null),H(!0)},X=async()=>{if(p)try{await we.delete(`${Q}/${p._id}`),t(e.filter(q=>q._id!==p._id)),y(null),H(!1),le.success("Traite deleted successfully.")}catch(q){console.error("Error deleting traite:",q),le.error("Failed to delete traite.")}},J=async q=>{if(p)try{await we.delete(`${Q}/${p._id}/documents`,{data:{documentName:q.name}}),y(_=>{var O;return _?{..._,documents:(O=_.documents)==null?void 0:O.filter(d=>d.url!==q.url)}:null}),le.success("Document supprimé avec succès.")}catch(_){console.error("Erreur lors de la suppression du document:",_),le.error("Échec de la suppression du document.")}};return s?a.jsx("p",{children:"Loading..."}):o?a.jsx("p",{children:o}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Traites"}),a.jsxs("button",{onClick:()=>{y(null),D(!0),T([])},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ht,{size:16,className:"mr-2"}),"Nouvelle Traite"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-[200px]",children:[a.jsx("label",{htmlFor:"search-traite",className:"sr-only",children:"Rechercher une traite"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wn,{size:18,className:"text-gray-400"})}),a.jsx("input",{id:"search-traite",type:"text",placeholder:"Rechercher une traite...",className:"pl-10 px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:c,onChange:q=>u(q.target.value)})]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"month-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Mois"}),a.jsxs("select",{id:"month-filter",className:"px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:m,onChange:q=>h(q.target.value===""?"":Number(q.target.value)),children:[a.jsx("option",{value:"",children:"Tous les mois"}),Ku.map(q=>a.jsx("option",{value:q.value,children:q.label},q.value))]})]}),a.jsxs("div",{className:"flex-1 min-w-[150px]",children:[a.jsx("label",{htmlFor:"year-filter",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Année"}),a.jsxs("select",{id:"year-filter",className:"px-4 py-2 block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md",value:f,onChange:q=>b(q.target.value===""?"":Number(q.target.value)),children:[a.jsx("option",{value:"",children:"Toutes les années"}),Array.from({length:10},(q,_)=>new Date().getFullYear()-5+_).map(q=>a.jsx("option",{value:q,children:q},q))]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white shadow overflow-x-auto rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Véhicule"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mois/Année"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date Paiement"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:fe.map(q=>{var g;const _=typeof q.vehicle=="string"?q.vehicle:(g=q.vehicle)==null?void 0:g._id,d=n.find(N=>N._id===_)||q.vehicle;return a.jsxs("tr",{onClick:()=>y({...q,vehicle:d}),className:`hover:bg-gray-50 cursor-pointer ${(p==null?void 0:p._id)===q._id?"bg-blue-50":""}`,children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"md:block overflow-x-auto md:overflow-visible",children:a.jsxs("div",{className:"flex items-center min-w-[220px] md:min-w-0",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:typeof d=="object"&&(d!=null&&d.imageUrl)?a.jsx("img",{src:d.imageUrl.startsWith("data:")?d.imageUrl:`${la}/${d.imageUrl.replace(/\\/g,"/")}`,alt:`${d.brand||"N/A"} ${d.model||"N/A"}`,className:"w-10 h-10 object-cover rounded-full"}):a.jsx(pt,{size:24,className:"mx-auto mt-2 text-gray-500"})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[typeof d=="object"&&(d!=null&&d.brand)?d.brand:"N/A"," "," ",typeof d=="object"&&(d!=null&&d.model)?d.model:"N/A"]}),a.jsx("div",{className:"text-xs text-gray-500",children:typeof d=="object"&&(d!=null&&d.licensePlate)?d.licensePlate:"N/A"})]})]})})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"text-sm",children:[Lm(q.mois)," ",q.annee]})}),a.jsxs("td",{className:"px-6 py-4",children:[q.montant.toLocaleString("fr-FR")," DH"]}),a.jsx("td",{className:"px-6 py-4",children:Nv(q.datePaiement)}),a.jsxs("td",{className:"px-6 py-4 text-right",children:[a.jsx(tn,{onClick:N=>{N.stopPropagation(),y(q),S(!0);const k=(q.documents||[]).map(M=>({name:M.name,url:M.url,type:"",size:0,isNew:!1})),x=typeof q.vehicle=="object"&&q.vehicle!==null?q.vehicle._id:q.vehicle;F({...q,vehicle:x,documents:k}),T([])},size:"md",className:"mr-3"}),a.jsx("button",{onClick:N=>{N.stopPropagation(),Y(q._id)},children:a.jsx(Ln,{size:18})})]})]},q._id)})})]})})}),a.jsx("div",{className:"lg:col-span-1",children:p?a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"border-b border-gray-200 p-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-medium",children:"Détails de la traite"}),w?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{S(!1),V({})},className:"px-3 py-1 border rounded-lg text-sm",children:"Annuler"}),a.jsx("button",{type:"submit",form:"traite-edit-form",className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Enregistrer"})]}):a.jsx("button",{type:"button",onClick:()=>{S(!0);const q=(p.documents||[]).map(O=>({name:O.name,url:O.url,type:"",size:0,isNew:!1})),_=typeof p.vehicle=="object"&&p.vehicle!==null?p.vehicle._id:p.vehicle;F({...p,vehicle:_,documents:q}),T([]),V({})},className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm",children:"Modifier"})]}),a.jsxs("form",{id:"traite-edit-form",onSubmit:q=>{q.preventDefault(),re(j)},className:"p-4 space-y-4",children:[w&&j?a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",value:typeof j.vehicle=="string"?j.vehicle:((he=j.vehicle)==null?void 0:he._id)||"",onChange:q=>F({...j,vehicle:q.target.value}),className:"w-full border rounded-lg p-2 mt-1",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),n.map(q=>a.jsxs("option",{value:q._id,children:[q.licensePlate," - ",q.model]},q._id))]})]}):p.vehicle&&typeof p.vehicle=="object"?a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[p.vehicle.imageUrl?a.jsx("img",{src:p.vehicle.imageUrl.startsWith("data:")?p.vehicle.imageUrl:`${la}/${p.vehicle.imageUrl.replace(/\\/g,"/").replace(/^\//,"")}`,alt:`${p.vehicle.brand||"N/A"} ${p.vehicle.model||"N/A"}`,className:"w-24 h-24 object-cover rounded-lg shadow"}):a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(pt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-lg",children:[typeof p.vehicle=="object"&&((Se=p.vehicle)==null?void 0:Se.brand)||"N/A"," ",typeof p.vehicle=="object"&&((se=p.vehicle)==null?void 0:se.model)||"N/A"]}),a.jsx("p",{className:"text-sm text-gray-600",children:typeof p.vehicle=="object"&&((I=p.vehicle)==null?void 0:I.licensePlate)||"N/A"})]})]})]}):a.jsxs("div",{className:"p-4 border-b",children:[a.jsx("h3",{className:"font-medium mb-2",children:"Véhicule"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center shadow",children:a.jsx(pt,{size:48,className:"text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg",children:"N/A"}),a.jsx("p",{className:"text-sm text-gray-600",children:"N/A"})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Mois/Année"}),w&&j?a.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[a.jsx("select",{id:"mois",name:"mois",className:"w-full border rounded-lg p-2",value:j.mois,onChange:q=>F({...j,mois:Number(q.target.value)}),children:Ku.map(q=>a.jsx("option",{value:q.value,children:q.label},q.value))}),a.jsx("input",{type:"number",id:"annee",name:"annee",className:"w-full border rounded-lg p-2",value:j.annee,onChange:q=>F({...j,annee:Number(q.target.value)})})]}):a.jsxs("p",{className:"font-medium",children:[Lm(p.mois)," ",p.annee]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Montant"}),w&&j?a.jsx("input",{type:"number",id:"montant",name:"montant",className:`w-full border rounded-lg p-2 mt-1 ${P.montant?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:j.montant,onChange:q=>F({...j,montant:Number(q.target.value)})}):a.jsxs("p",{className:"font-medium",children:[p.montant.toLocaleString("fr-FR")," DH"]}),P.montant&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.montant})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date de Paiement"}),w&&j?a.jsx(Me,{selected:j.datePaiement?new Date(j.datePaiement):null,onChange:q=>F({...j,datePaiement:q==null?void 0:q.toISOString().split("T")[0]}),dateFormat:"dd/MM/yyyy",locale:"fr",className:"w-full border rounded-lg p-2 mt-1"}):a.jsx("p",{className:"font-medium",children:Nv(p.datePaiement)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Référence"}),w&&j?a.jsx("input",{type:"text",id:"reference",name:"reference",className:`w-full border rounded-lg p-2 mt-1 ${P.reference?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:j.reference||"",onChange:q=>F({...j,reference:q.target.value})}):a.jsx("p",{className:"font-medium",children:p.reference||"N/A"}),P.reference&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.reference})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Notes"}),w&&j?a.jsx("textarea",{id:"notes",name:"notes",className:`w-full border rounded-lg p-2 mt-1 ${P.notes?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:j.notes||"",onChange:q=>F({...j,notes:q.target.value})}):a.jsx("p",{className:"font-medium",children:p.notes||"Aucune note"}),P.notes&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.notes})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Documents Associés:"}),w&&j?a.jsx(mt,{api_url:la,existingDocuments:j.documents||[],newFiles:C,onNewFilesChange:T,onRemoveExistingDocument:J}):p.documents&&p.documents.length>0?a.jsx(mt,{api_url:la,existingDocuments:p.documents,newFiles:[],onNewFilesChange:()=>{},onRemoveExistingDocument:J,label:"",readOnly:!0}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucun document"})]})]})]}):a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[a.jsx(pt,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"Aucune traite sélectionnée"})]})})]}),v&&a.jsx(vL,{onSubmit:G,onClose:()=>D(!1),initialData:null,vehicles:n,newAttachmentFiles:C,setNewAttachmentFiles:T}),$&&p&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirmer la suppression"}),a.jsxs("p",{children:['Êtes-vous sûr de vouloir supprimer la traite pour le véhicule "',typeof p.vehicle=="object"&&p.vehicle!==null?p.vehicle.licensePlate:"N/A",'" ?']}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>H(!1),className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"button",onClick:X,className:"px-4 py-2 bg-red-600 text-white rounded-lg",children:"Supprimer"})]})]})})]})},vL=({onSubmit:e,onClose:t,initialData:n,vehicles:r,newAttachmentFiles:s,setNewAttachmentFiles:i})=>{const[o,l]=E.useState(()=>{if(n){const b=typeof n.vehicle=="object"&&n.vehicle!==null?n.vehicle._id:n.vehicle;return{...n,datePaiement:n.datePaiement?new Date(n.datePaiement).toISOString().split("T")[0]:"",vehicle:b,documents:n.documents||[]}}return{mois:new Date().getMonth()+1,annee:new Date().getFullYear(),montant:0,datePaiement:"",reference:"",notes:"",vehicle:void 0,documents:[]}}),[c,u]=E.useState({}),m=b=>{const{name:v,value:D}=b.target;if(["reference","notes"].includes(v))D&&qc(D)?u(p=>({...p,[v]:"Ce champ ne peut pas contenir uniquement des espaces."})):u(p=>{const y={...p};return delete y[v],y});else if(v==="montant"){const p=parseFloat(D);isNaN(p)||p<1?u(y=>({...y,[v]:"Le montant ne peut pas être inférieur à 1."})):u(y=>{const w={...y};return delete w[v],w})}l(p=>({...p,[v]:D}))},h=(b,v)=>{l(D=>({...D,[v]:b?b.toISOString().split("T")[0]:""}))},f=b=>{b.preventDefault();const v={};if(o.reference&&qc(o.reference)&&(v.reference="La référence ne peut pas contenir uniquement des espaces."),o.notes&&qc(o.notes)&&(v.notes="Les notes ne peuvent pas contenir uniquement des espaces."),o.montant!==void 0&&o.montant<1&&(v.montant="Le montant ne peut pas être inférieur à 1."),u(v),Object.keys(v).length>0){le.error("Veuillez corriger les erreurs de validation.");return}e({...o,vehicle:o.vehicle})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[a.jsx(Sr,{onClick:t}),a.jsxs("h2",{className:"text-xl font-bold mb-4",children:[n?"Modifier":"Nouvelle"," Traite"]}),a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("section",{className:"border-b pb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Informations sur la Traite"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"vehicle",className:"text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),a.jsxs("select",{id:"vehicle",name:"vehicle",value:o.vehicle||"",onChange:m,className:"border rounded-lg p-2",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un véhicule"}),r.map(b=>a.jsxs("option",{value:b._id,children:[b.licensePlate," - ",b.model]},b._id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"mois",className:"text-sm font-medium text-gray-700 mb-1",children:"Mois"}),a.jsx("select",{id:"mois",name:"mois",value:o.mois||"",onChange:m,className:"border rounded-lg p-2",required:!0,children:Ku.map(b=>a.jsx("option",{value:b.value,children:b.label},b.value))})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"annee",className:"text-sm font-medium text-gray-700 mb-1",children:"Année"}),a.jsx("input",{type:"number",id:"annee",name:"annee",value:o.annee||"",onChange:m,className:"border rounded-lg p-2",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"montant",className:"text-sm font-medium text-gray-700 mb-1",children:"Montant (DH)"}),a.jsx("input",{type:"number",id:"montant",name:"montant",value:o.montant||"",onChange:m,className:`border rounded-lg p-2 ${c.montant?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,required:!0}),c.montant&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.montant})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"datePaiement",className:"text-sm font-medium text-gray-700 mb-1",children:"Date de Paiement"}),a.jsx(Me,{id:"datePaiement",selected:o.datePaiement?new Date(o.datePaiement):null,onChange:b=>h(b,"datePaiement"),dateFormat:"dd/MM/yyyy",locale:"fr",showPopperArrow:!1,placeholderText:"Sélectionner une date",className:"border rounded-lg p-2"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{htmlFor:"reference",className:"text-sm font-medium text-gray-700 mb-1",children:"Référence"}),a.jsx("input",{type:"text",id:"reference",name:"reference",value:o.reference||"",onChange:m,className:`border rounded-lg p-2 ${c.reference?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Référence de paiement"}),c.reference&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.reference})]}),a.jsxs("div",{className:"flex flex-col md:col-span-2",children:[a.jsx("label",{htmlFor:"notes",className:"text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("textarea",{id:"notes",name:"notes",value:o.notes||"",onChange:m,rows:3,className:`border rounded-lg p-2 ${c.notes?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Notes ou observations supplémentaires"}),c.notes&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.notes})]})]})]}),a.jsxs("section",{className:"border-b pb-4 mb-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Pièces Jointes"}),a.jsx(mt,{api_url:la,existingDocuments:o.documents||[],newFiles:s,onNewFilesChange:i,onRemoveExistingDocument:async()=>{}})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded-lg",children:"Annuler"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:n?"Mettre à jour":"Ajouter"})]})]})]})})};function yL(){return a.jsx(kw,{children:a.jsxs(Mk,{children:[a.jsx(DS,{position:"top-right"}),a.jsxs(jk,{children:[a.jsx(Vt,{path:"/login",element:a.jsx(JA,{})}),a.jsx(Vt,{element:a.jsx(sD,{}),children:a.jsxs(Vt,{path:"/",element:a.jsx(yC,{}),children:[a.jsx(Vt,{index:!0,element:a.jsx(HA,{})}),a.jsx(Vt,{path:"vehicules",element:a.jsx(WA,{})}),a.jsx(Vt,{path:"vehicules/visites-techniques",element:a.jsx(aL,{})}),a.jsx(Vt,{path:"vehicules/assurances",element:a.jsx(lL,{})}),a.jsx(Vt,{path:"clients",element:a.jsx(GA,{})}),a.jsx(Vt,{path:"clients/reglements",element:a.jsx(vv,{})}),a.jsx(Vt,{path:"clients/reglements/new",element:a.jsx(vv,{})}),a.jsx(Vt,{path:"infractions",element:a.jsx(dL,{})}),a.jsx(Vt,{path:"interventions",element:a.jsx(hL,{})}),a.jsx(Vt,{path:"accidents",element:a.jsx(gL,{})}),a.jsx(Vt,{path:"contrats",element:a.jsx(XA,{})}),a.jsx(Vt,{path:"factures",element:a.jsx(ZA,{})}),a.jsx(Vt,{path:"charges",element:a.jsx(nL,{})}),a.jsx(Vt,{path:"traites",element:a.jsx(xL,{})}),a.jsx(Vt,{path:"reservations",element:a.jsx(OT,{})}),a.jsx(Vt,{path:"parametres",element:a.jsx(QA,{})})]})})]})]})})}Ab(document.getElementById("root")).render(a.jsx(E.StrictMode,{children:a.jsx(kw,{children:a.jsx(yL,{})})}));
